@create Virtual Conversation Room
@lock Virtual Conversation Room==*me
@Desc Virtual Conversation Room=[switch(type(me),THING*,To use the Virtual Room Parent type:%r%t@dig <room>%r%t@set <room>=dark%r%t@parent <room>=[num(me)]%r%tvr help%rEnjoy!,ROOM*,[switch(words(v(pos%#)),0*,[u(room_one_desc)][u(room_one_contents)][switch(words(v(room_one_exits)),0*,,%rObvious exits:%r[u(room_one_exits)])],[u(v(pos%#)_desc)][u(v(pos%#)_contents)][switch(words(v(v(pos%#)_exits)),0*,,%rObvious exits:%r[u(v(pos%#)_exits)])])])]
@Aenter Virtual Conversation Room=@fo me=&people me=[get(me/people)][space()]%#;&rooms me=[get(me/rooms)][space()][switch(strlen(v(last%#)),0*,room_one,v(last%#))];&[switch(strlen(v(last%#)),0*,room_one,v(last%#))]_ppl me=[get(me/[switch(strlen(v(last%#)),0*,room_one,v(last%#))]_ppl)][space()]%#;&pos%# me=[switch(strlen(v(last%#)),0*,room_one,v(last%#))]
&EXIT_CMD Virtual Conversation Room=$?-?:@switch [v(pos[switch(%#,[num(me)]*,%2,%#)])]=room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)],{@switch [member(v(exitlist),%0-%1)]=0,{@pemit [switch(%#,[num(me)]*,%2,%#)]=Huh?[space(2)]\(Type "help" for help.\)},{&room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_ppl me=[edit([v(room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_ppl)],[switch(%#,[num(me)]*,%2,%#)],space(0))];@dolist [v(room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine,%0)]_ppl)] = @pemit ##=%N has left.;@dolist [v(room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine,%1)]_ppl)] = @pemit ##=%N has arrived.;&room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_ppl me=[v(room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_ppl)][space()][switch(%#,[num(me)]*,%2,%#)];&rooms me=[extract(v(rooms),1,sub(member(v(people),[switch(%#,[num(me)]*,%2,%#)]),1))][space()]room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)][space()][extract(v(rooms),add(member(v(people),[switch(%#,[num(me)]*,%2,%#)]),1),words(v(rooms)))];@pemit [switch(%#,[num(me)]*,%2,%#)]=[u(room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_desc)][u(room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_contents)]%rObvious exits:%r[u(room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]_exits)];&pos[switch(%#,[num(me)]*,%2,%#)] me=room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine)]}},{@pemit [switch(%#,[num(me)]*,%2,%#)]=Huh?[space(2)]\(Type "help" for help.\)}
&DESC_CMD Virtual Conversation Room=$desc *=*:@fo me=&room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine,%0)]_desc me=%1;@pemit %#=Description set.
&MAKEEXIT_CMD Virtual Conversation Room=$exit *-*:@fo me=&exitlist me=[v(exitlist)][space()]%0-%1;&room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine,%0)]_exits me=[v(room_[switch(%0,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine,%0)]_exits)][switch(strlen(v(room_[switch(%1,1*,one,2*,two,3*,three,4*,four,5*,five,6*,six,7*,seven,8*,eight,9*,nine,%1)]_exits)),0*,,\\[space(2)\\])]Room [switch(%1,1*,One,2*,Two,3*,Three,4*,Four,5*,Five,6*,Six,7*,Seven,8*,Eight,9*,Nine,%0)] <%0-%1>;@pemit %#=Exit added.
&HELP_CMD Virtual Conversation Room=$VR help:@pemit %#=Virtual Room Help File:%r-----------------------%rdesc <room#>=<description>%rexit <source>-<target>%ralias <source>-<target>=<alias>
&ALIAS_CMD Virtual Conversation Room=$alias ?-?=*:&alias%0-%1 me=$%2:@tr me/exit_cmd=%0,%1,%%#;@pemit %#=Alias defined.
&ROOM_ONE_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_one_ppl)),1),0*,,%rContents:[iter(v(room_one_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
@Aleave Virtual Conversation Room=@fo me=&room_one_ppl me=[edit(get(me/room_one_ppl),%#,space(0))];&room_two_ppl me=[edit(get(me/room_two_ppl),%#,space(0))];&rooms me=[extract(get(me/rooms),1,sub(member(get(me/people),%#),1))][space()][extract(get(me/rooms),add(member(get(me/people),%#),1),words(get(me/rooms)))];&people me=[edit(get(me/people),%#,space(0))];@mvattr me=pos%#,last%#
&ROOM_TWO_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_two_ppl)),1),0*,,%rContents:[iter(v(room_two_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_THREE_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_three_ppl)),1),0*,,%rContents:[iter(v(room_three_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_FOUR_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_four_ppl)),1),0*,,%rContents:[iter(v(room_four_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_FIVE_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_five_ppl)),1),0*,,%rContents:[iter(v(room_five_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_SIX_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_six_ppl)),1),0*,,%rContents:[iter(v(room_six_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_SEVEN_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_seven_ppl)),1),0*,,%rContents:[iter(v(room_seven_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_EIGHT_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_eight_ppl)),1),0*,,%rContents:[iter(v(room_eight_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&ROOM_NINE_CONTENTS Virtual Conversation Room=[switch(sub(words(v(room_nine_ppl)),1),0*,,%rContents:[iter(v(room_nine_ppl),[switch(##,%#*,,[switch(type(##),PLAYER*,[switch(member(lwho(),##),0*,,%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])],%r[name(##)][switch(words(flags(##)),0*,,\([num(##)][flags(##)]\))])])])])]
&SAY_TRG Virtual Conversation Room=^* says "*":@switch warn%#=1,{@tel %#=home;&warn%# me=},{@pemit %#=You have violated the rules. Use 'vs <message>' to talk. Using say will cause you be heard by everyone in the virtual complex and will cause your eviction. Sorry, dem's da rules. You will not be warned again.;&warn%# me=1}
&VS_CMD Virtual Conversation Room=$vs *:@dolist [v(v(pos%#)_ppl)]=@pemit ##=[switch(##,%#*,You say "%0",%n says "%0")]
&ROOMS Virtual Conversation Room= 
&LAST#15282 Virtual Conversation Room=Room_One
@set Virtual Conversation Room=ENTER_OK
