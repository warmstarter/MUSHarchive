<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Local MUXCore Archive - Gwen Morse's Wiki</title>
<meta name="generator" content="MediaWiki 1.22.8" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/wiki/opensearch_desc.php" title="Gwen Morse's Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.gwen-morse.com/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Gwen Morse's Wiki Atom feed" href="/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://www.gwen-morse.com/wiki/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: homesitewiki-mw_:resourceloader:filter:minify-css:7:caed6998fab899483c805c3e2c432ff5 */</style>

<script src="http://www.gwen-morse.com/wiki/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Local_MUXCore_Archive","wgTitle":"Local MUXCore Archive","wgCurRevisionId":1297,"wgRevisionId":1297,"wgArticleId":225,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Local_MUXCore_Archive","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: homesitewiki-mw_:resourceloader:filter:minify-js:7:5a69c7e0fa6557851b6dea8a62efaffb */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Local_MUXCore_Archive skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Local MUXCore Archive</span></h1>
			<div id="bodyContent">
								<div id="siteSub">From Gwen Morse&#039;s Wiki</div>
								<div id="contentSub"><div id="mw-revision-info">Revision as of 06:02, 4 April 2012 by <a href="/wiki/index.php/User:Eachna" title="User:Eachna" class="mw-userlink">Eachna</a>  <span class="mw-usertoollinks">(<a href="/wiki/index.php?title=User_talk:Eachna&amp;action=edit&amp;redlink=1" class="new" title="User talk:Eachna (page does not exist)">Talk</a> | <a href="/wiki/index.php/Special:Contributions/Eachna" title="Special:Contributions/Eachna">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(diff) ← Older revision | Latest revision (diff) | Newer revision → (diff)</div></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><pre> 

@@ This quote file expects you to have a clean DB with only a God character and Womb.
@@ Using it in an existing game necessitates a large amount of hand editing.
@@ You have been warned!


@@
@@ Initial setup. Locking #1, create the Master Room, set up base Wizards.
@@
@set me=QUIET
think [repeat(=,77)]%r%r[center(ansi(hc,Setting up MUX Core 1.0 Alpha),77)]%r%r[repeat(=,77)]
think [ansi(hc,MUX Core:)] Performing initial setup. Creating the Master Room and basic Wizards.
@lock/use me=me
@lock/enter me=me
@dig Master Room
@set #2=FLOATING
@pcreate CodeWIZ=potrzebie
@pcreate BuildWIZ=potrzebie
@set #3=WIZARD ANSI&#160;!UNINSPECTED
@set #4=WIZARD ANSI&#160;!UNINSPECTED
@chown here=#4
@set here=!HALTED
@tel #2
@chown here=#4
@set here=!HALTED
@@
@@ #5: &lt;GF&gt; Global Functions
@@
think [ansi(hc,MUX Core:)] Creating the Global Functions Object.
@create &lt;GF&gt; Global Functions=5
@startup &lt;GF&gt; Global Functions=@dolist lattr(me/FN.*)=@function after(##,FN.)=me/##;@dolist lattr(me/FPRIV.*)=@function/privileged after(##,FPRIV.)=me/##
&amp;FN.ISSTAFF &lt;GF&gt; Global Functions=orflags(%0,WZ)
&amp;FN.ISMEMBER &lt;GF&gt; Global Functions=t(grab(%0,%1,%2))
&amp;FN.PARTIAL &lt;GF&gt; Global Functions=localize(ifelse(setr(0,grab(%0,%1*,%2)),%q0,0))
&amp;FN.ISPOSINT &lt;GF&gt; Global Functions=and(gt(%0,0),regmatch(%0,^\[0-9\]*$))
&amp;FN.ROLLXDY &lt;GF&gt; Global Functions=case(0,isposint(%0),#-1 INVALID NUMBER OF DICE,lte(%0,v(D.MAXDICE)),#-2 NUMBER OF DICE MUST BE 1-[get(#5/D.MAXDICE)],and(lte(%1,get(#5/D.MAXFACES)),isposint(%1)),#-3 NUMBER OF FACES MUST BE 1-[v(D.MAXFACES)],iter(lnum(%0),die(1,%1)))
&amp;FN.HEADER &lt;GF&gt; Global Functions=%xh%xx[switch(%0,,repeat(-+-,26),cpad(%xh%xx%[&#160;%xn%xh%0%xx&#160;%],78,%xh%xx-+-))]
&amp;FN.FOOTER &lt;GF&gt; Global Functions=%xh%xx[switch(%0,,repeat(-+-,26),[repeat(-+-,17)][cpad(%xh%xx%[&#160;%xn%xh%0%xx&#160;%],27,%xh%xx-+-)])]%r
&amp;FN.CAPALL &lt;GF&gt; Global Functions=[edit(edit(edit(iter(lcstr(%0),capstr(##)),%bOf%b,%bof%b),%bThe%b,%bthe%b),%bAnd%b,%band%b)]
&amp;FN.SUBHEADER &lt;GF&gt; Global Functions=%xh%xx[switch(%0,,repeat(-,78),cpad(%b%xh%0%xn%b,78,%xh%xx-))]
&amp;FN.ALERT &lt;GF&gt; Global Functions=%xh%xx%1%xn%xw%1%xh%xw%1&#160;%0
&amp;FN.UPDATE &lt;GF&gt; Global Functions=localize([setq(0,match(%0,%1[setr(3,ifelse(strlen(%3),%3,:))]*,[setr(4,ifelse(strlen(%4),%4,|))]))]ifelse(t(strlen(%2)),ifelse(t(%q0),replace(%0,%q0,%1%q3%2,%q4),setunion(%0,%1%q3%2,%q4)),ldelete(%0,%q0,%q4)))
&amp;FN.ACCESS &lt;GF&gt; Global Functions=rest(grab(%0,%1[ifelse(strlen(%2),%2,:)]*,ifelse(strlen(%3),%3,|)),ifelse(strlen(%2),%2,:))
&amp;FPRIV.TAGS &lt;GF&gt; Global Functions=localize(ifelse(isstaff(owner(%@)),case(setr(0,locate(%#,%0,*)),#-1,#-1 NOT FOUND,get(%q0/_TAGS)),Permission denied.))
&amp;FPRIV.HASTAG &lt;GF&gt; Global Functions=localize(ifelse(isstaff(owner(%@)),case(setr(0,locate(%#,%0,*)),#-1,#-1 NOT FOUND,ismember(tags(%q0),%1)),Permission denied.))
&amp;FPRIV.ANDTAGS &lt;GF&gt; Global Functions=localize(ifelse(isstaff(owner(%@)),case(setr(0,locate(%#,%0,*)),#-1,#-1 NOT FOUND,eq(words(setinter(tags(%q0),lcstr(%1))),words(%1))),Permission denied.))
&amp;FPRIV.ORTAGS &lt;GF&gt; Global Functions=localize(ifelse(isstaff(owner(%@)),case(setr(0,locate(%#,%0,*)),#-1,#-1 NOT FOUND,gt(words(setinter(tags(%q0),lcstr(%1))),0)),Permission denied.))
&amp;D.MAXDICE &lt;GF&gt; Global Functions=30
&amp;D.MAXFACES &lt;GF&gt; Global Functions=100
&amp;D.MUXCORE.VERSION &lt;GF&gt; Global Functions=1.0 Alpha
@chown &lt;GF&gt; Global Functions=#3
@set &lt;GF&gt; Global Functions=!HALTED INHERIT SAFE
@set #5/D.MAXDICE=VISUAL
@set #5/D.MAXFACES=VISUAL
@tr #5/startup
@@
@@ #6: &lt;PG&gt; Player Globals
@@
think [ansi(hc,MUX Core:)] Setting up player globals.
@create &lt;PG&gt; Player Globals=5
&amp;CMD.FINGER &lt;PG&gt; Player Globals=$+finger *:@switch [isdbref(setr(0,ifelse(strmatch(%0,me),%#,pmatch(%0))))]=0,{@pemit&#160;%#=No such player.},{@pemit&#160;%#=[header([name(%q0)] (%q0)[if(isstaff(%#),%b[flags(%q0)])])]%r[ljust(%xhAlias:%xn [get(%q0/ALIAS)][case(1,hasflag(%q0,WIZARD),%b(Wizard),hasflag(%q0,ROYALTY),%b(Staff))],39)]%xh%xx|%xn[ljust(switch([hasflag(%q0,CONNECTED)][hasflag(%q0,DARK)][isstaff(%q0)][isstaff(%#)][hasattr(%q0,DARK-TIME)],0*,%xhLast On:&#160;%xn[first(get(%q0/LAST),.)],11101,%xhLast On:&#160;%xn[first(get(%q0/DARK-TIME),.)],11100,%xhLast On:&#160;%xn[first(get(%q0/last),.)],%xhOn For:&#160;%b%xn[singletime(conn(%q0))]%b%b%xhIdle:&#160;%xn[singletime(idle(%q0))]),39)]%r[ljust(%xhSex:%xn&#160;%b%b[get(%q0/SEX)],39)]%xh%xx|%xn[ljust(%xhMail:%xn[space(4)][extract(setr(1,mail(%q0)),2,1)] Unread / [add(extract(%q1,1,1),extract(%q1,3,1))] Total,39)]%r[ljust(%xhEmail:%xn [get(%q0/EMAIL)],39)]%xh%xx|%xn%r[subheader()]%r[iter(cat(setinter(iter(v(D.FINGER-LIST),first(%i0,:),|),lcstr(lattr(%q0))),lcstr(lattr(%q0/FINGER-*))),%xh[rjust([ifelse(ismember(v(D.FINGER-LIST),%i0:*,|),rest(grab(v(D.FINGER-LIST),%i0:*,|),:),capall(edit(rest(%i0,finger-),_,%b)))]:,12)]%xn%b[wrap(get(%q0/%i0),65,,,,13)],,%r)]%r[if(isstaff(%#),[subheader()]%r%xhLast IP:&#160;%b%b%xn[get(%q0/LASTIP)]%r%xhLast Site:&#160;%xn[get(%q0/LASTSITE)]%r)][footer()]}
&amp;D.FINGER-LIST &lt;PG&gt; Player Globals=fullname:Full Name|age:Age|app-age:Apparent Age|position:Position|fame:Fame|rp-prefs:RP-Prefs|alts:Alts|themesong:Theme Song|quote:Quote|hours:Hours|temperament:Temperament|vacation:Vacation|url:URL|wiki:Wiki Page
&amp;CMD.STAFF &lt;PG&gt; Player Globals=$+staff:@pemit&#160;%#=[header(Online Staff)]%r%xh[ljust(Name,14)][ljust(Alias,6)][ljust(Position,35)][ljust(Status,10)][ljust(Idle,6)]%r[subheader()]%r[iter(setinter(objeval(%#,lwho()),get(#8/D.STAFFLIST)),[ljust(name(%i0),13)]%b[ljust(get(%i0/ALIAS),5)]%b[ljust(get(%i0/POSITION),33)]%b%b[ljust(if(and(isstaff(%#),hasflag(%i0,DARK)),DARK,if(hasflag(%i0,transparent),Off Duty,On Duty)),9)]%b[singletime(idle(%i0))],,%r)]%r[footer()]
&amp;CMD.STAFF/ALL &lt;PG&gt; Player Globals=$+staff/all:@pemit&#160;%#=[setq(0,cat(setinter(objeval(%#,lwho()),get(#8/D.STAFFLIST)),setdiff(get(#8/D.STAFFLIST),objeval(%#,lwho()))))][header(Staff List)]%r%xh[ljust(Name,14)][ljust(Alias,7)][ljust(Position,35)][ljust(Last,10)]%r[subheader()]%r[iter(%q0,[ljust(name(%i0),13)]%b[ljust(get(%i0/ALIAS),6)]%b[ljust(get(%i0/POSITION),33)]%b%b[switch([hasflag(%i0,CONNECTED)][hasflag(%i0,DARK)][isstaff(%i0)][isstaff(%#)][hasattr(%i0,DARK-TIME)],0*,first(get(%i0/last),.),11101,first(get(%i0/dark-time),.),11100,first(get(%i0/last),.),Connected)],,%r)]%r[footer()]
&amp;CMD.UPTIME &lt;PG&gt; Player Globals=$+uptime:@pemit&#160;%#=[mudname()] runtime stats:%r%tMUSH boot time.......: [starttime()]%r%tCurrent time.........: [time()]%r%tIn operation for.....: [div(sub(convtime(time()),convtime(starttime())),86400)] days, [div(mod(sub(convtime(time()),convtime(starttime())),86400),3600)] hours, [div(mod(sub(convtime(time()),convtime(starttime())),3600),60)] minutes, [mod(sub(convtime(time()),convtime(starttime())),60)] seconds.
&amp;CMD.PLUSWHO &lt;PG&gt; Player Globals=$+who:@pemit&#160;%#=[header(Online Players)]%r%xh%b[ljust(Player,14)][ljust(Sex,4)][ljust(Alias,7)][ljust(Idle,8)][ljust(Status,8)]Location%r[subheader()];@pemit&#160;%#=[list(objeval(%#,lwho()),[if(isstaff(%i0),%xh%xr*%xn,%b)][ljust(name(%i0),14)][ljust(switch(get(%i0/SEX),F*,F,M*,M,N),4)][ljust(get(%i0/ALIAS),7)][ljust(singletime(idle(%i0)),8)][ljust(get(%i0/D.IC-STATUS),8)][ljust(ifelse(isstaff(%#),name(loc(%i0)),ifelse(or(hasflag(%i0,UNFINDABLE),hasflag(loc(%i0),UNFINDABLE)),Unfindable,name(loc(%i0)))),38)])];@pemit&#160;%#=[subheader()]%r[setq(0,words(objeval(%#,lwho())))][center(There [if(gt(%q0,1),are,is)]&#160;%q0 player[if(gt(%q0,1),s)] online.,78)]%r[footer()]
&amp;CMD.3WHO &lt;PG&gt; Player Globals=$+3who:@pemit&#160;%#=[setq(1,iter(lnum(add(div(words(setr(0,objeval(%#,lwho()))),3),1)),extract(%q0,add(1,mul(sub(inum(),1),3)),3),,|))][header(Online Players)]%r%b[repeat(|NAME[space(9)]On for Idle,3)]|%r%b|----------- ------- ----|----------- ------- ----|----------- ------- ----|;@pemit&#160;%#=[list(%q1,%b|[case(words(%i0),3,[ljust(name(first(%i0)),14)]%b[rjust(singletime(conn(first(%i0))),4)]%b[rjust(singletime(idle(first(%0))),4)]|[ljust(name(first(rest(%i0))),14)]%b[rjust(singletime(conn(first(rest(%i0)))),4)]%b[rjust(singletime(idle(first(rest(%0)))),4)]|[ljust(name(last(%i0)),14)]%b[rjust(singletime(conn(last(%i0))),4)]%b[rjust(singletime(idle(last(%0))),4)]|,2,[ljust(name(first(%i0)),14)]%b[rjust(singletime(conn(first(%i0))),4)]%b[rjust(singletime(idle(first(%0))),4)]|[ljust(name(first(rest(%i0))),14)]%b[rjust(singletime(conn(first(rest(%i0)))),4)]%b[rjust(singletime(idle(first(rest(%0)))),4)]|[space(24)]|,[ljust(name(first(%i0)),14)]%b[rjust(singletime(conn(first(%i0))),4)]%b[rjust(singletime(idle(first(%0))),4)]|[space(24)]|[space(24)]|)],|)];@pemit&#160;%#=[subheader()]%r[center(There [if(gt(words(%q1),1),are,is)] [words(%q1)] player[if(gt(words(%q1),1),s)] online.,78)]%r[footer()]
&amp;CMD.WHERE &lt;PG&gt; Player Globals=$+where:@pemit&#160;%#=[setq(u,regraball(iter(objeval(%#,lwho()),if(or(hasflag(%i0,UNFINDABLE),hasflag(loc(%i0),UNFINDABLE)),%i0)),.+))][setq(f,setdiff(objeval(%#,lwho()),%qu))][setq(l,sortby(me/SORTBY.WHERE,setunion(iter(ifelse(isstaff(%#),%qu&#160;%qf,%qf),loc(%i0)),)))][header(+Where)];@pemit&#160;%#=[list(%ql,[ifelse(or(isstaff(%#),and(hasflag(%i0,JUMP_OK),elock(%i0/TPORTLOCK,%#))),[ljust([name(%i0)](%i0),40,.)],[ljust(name(%i0),40,.)])]%b[wrap(itemize(iter(setinter(lcon(%i0),ifelse(isstaff(%#),%qu&#160;%qf,%qf)),[name(%i0)][if(ismember(%qu,%i0),*)],,|),|),37,,,,41)])];@if and(not(isstaff(%#)),%qu)={@pemit&#160;%#=[rjust(UNFINDABLE,40,.)]%b[wrap(itemize(iter(%qu,name(%i0),,|),|),37,,,,41)]};@wait 0={@pemit&#160;%#=[if(and(isstaff(%#),t(%qu)),%r%b%b'*' denotes an Unfindable player.%r)][footer()]}
&amp;SORTBY.WHERE &lt;PG&gt; Player Globals=comp(name(%0),name(%1))
&amp;CMD.JNOTES &lt;PG&gt; Player Globals=$+jnotes *:@switch [strmatch(%0,*/*)][or(strmatch(%#,pmatch(%0)),strmatch(%0,me))]=01,{@if [setq(0,%#)][t(setr(2,regraball(iter(lattr(%q0/jnote-*),ifelse(hasflag(%#/%i0,hidden),,%i0)),.+)))]={@pemit&#160;%#=[header(Judgenotes for [name(%q0)])]%r[space(3)]#[space(3)]Title[space(32)]Approval%r[subheader()]%r[iter(%q2,%b%b[rjust(inum(),2)]:%b%b[ljust(capall(rest(%i0,-)),35)]%b%b[ljust(first(first(get(%#/%i0),|),%(),32)],,%r)]%r[footer()]},{@pemit&#160;%#=You have no visible judgenotes.}},00,{@switch [isstaff(%#)][switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][t(attrcnt(%q0/JNOTE-*))]=0*,{@pemit&#160;%#=You may only check your own judgenotes.},10*,{@pemit&#160;%#=No matches:&#160;%0},110,{@pemit&#160;%#=No judgenotes for [name(%q0)].},111,{@pemit&#160;%#=[header(Judgenotes for [name(%q0)])]%r*%b%b#[space(3)]Title[space(32)]Approval%r[subheader()]%r[iter(lattr(%q0/jnote-*),[ljust(if(hasflag(%q0/%i0,hidden),ansi(hr,*)),2)][rjust(inum(),2)]:%b%b[ljust(capall(rest(%i0,-)),35)]%b%b[ljust(first(first(get(%q0/%i0),|),%(),30)],,%r)]%r[footer()]}}
&amp;CMD.JNOTE/PITCH &lt;PG&gt; Player Globals=$+jnote/pitch *=*:@switch [setq(0,edit(secure(%0),%b,_))][not(strmatch(%0,*/*))][not(hasattr(%#,JNOTE-%q0))]=10,{@pemit&#160;%#=You already have a note by that name.},11,{&amp;JNOTE-%q0&#160;%#=Proposed by [name(%#)] (%#), [time()]|%1;@lock&#160;%#/JNOTE-%q0;@trigger #23/TRIG_CREATE=%#,locate(%vj,JNOTE,i),1,[strtrunc(%0,30)],%r%t[name(%#)] has proposed the following jnote:%r%r&quot;[strtrunc(%1,6000)]&quot;%r%r%tApproving or Completing this job will automatically approve the jnote. Denying this job will notify the character and remove the note from their character object.;@pemit&#160;%#=Your note has been proposed. Please see +myjobs for follow-up info, or to add additional details. Please allow time for staff to process your job.},{@@}
&amp;CMD.JNOTE/PITCH-OBJ &lt;PG&gt; Player Globals=$+jnote/pitch */*=*:@switch [setq(0,edit(secure(%1),%b,_))][isdbref(setr(1,locate(%#,%0,*)))][controls(%#,%q1)][not(hasattr(%q1,JNOTE-%q0))]=0*,{@pemit&#160;%#=No match, or too many matches. Please be more specific.},10*,{@pemit&#160;%#=You do not control [name(%q1)].},110,{@pemit&#160;%#=[name(%q1)] already have a note by that name.},111,{&amp;JNOTE-%q0&#160;%q1=Proposed by [name(%#)] (%#), [time()]|%1;@lock&#160;%q1/JNOTE-%q0;@trigger #23/TRIG_CREATE=%q1,locate(%vj,JNOTE,i),1,[strtrunc(%1,30)],%r%t[name(%#)] has proposed the following jnote:%r%r&quot;[strtrunc(%1,6000)]&quot; for [name(%q1)](%q1):%r%r%tApproving or Completing this job will automatically approve the jnote. Denying this job will notify the character and remove the note from their character object.,%q1&#160;%#;@pemit&#160;%#=Your note has been proposed. Please see +myjobs for follow-up info, or to add additional details. Please allow time for staff to process your job.}
&amp;CMD.JNOTES-ARG &lt;PG&gt; Player Globals=$+jnotes */*:@switch [or(strmatch(%#,pmatch(%0)),strmatch(%0,me))]=1,{@if [setq(j,ifelse(isnum(%1),extract(lattr(%#/JNOTE-*),%1,1),JNOTE-[edit(secure(%1),%b,_)]))][setq(0,%#)][or(and(hasattr(%#,%qj),not(hasflag(%#/%qj,hidden))),and(hasattr(%#,%qj),isstaff(%#)))]={@pemit&#160;%#=[header(Judgenote: [capall(rest(%qj,-))])]%r[if(isstaff(%#),Type: [ifelse(hasflag(%#/%qj,hidden),Hidden,Visible)]%r)]Approval: [first(get(%#/%qj),|)]%r%b%b[rest(get(%#/%qj),|)]%r[footer()]},{@pemit&#160;%#=You have no visible judgenote by that [ifelse(isnum(%1),number,name)].}},{@switch [isstaff(%#)][switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(j,ifelse(isnum(%1),extract(lattr(%q0/JNOTE-*),%1,1),JNOTE-[edit(secure(%1),%b,_)]))][hasattr(%q0,%qj)]=0*,{@pemit&#160;%#=You may only check your own judgenotes.},10*,{@pemit&#160;%#=No matches:&#160;%0},110,{@pemit&#160;%#=No judgenote '%1' for [name(%q0)].},111,{@pemit&#160;%#=[header(Judgenote: [name(%q0)]/[capall(rest(%qj,-))])]%rType: [ifelse(hasflag(%q0/%qj,hidden),Hidden,Visible)]%rApproval: [first(get(%q0/%qj),|)]%r%b%b[rest(get(%q0/%qj),|)]%r[footer()]}}
&amp;CMD.JNOTE/SHOW &lt;PG&gt; Player Globals=$+jnote/show * to *:@switch [setq(j,ifelse(isnum(%1),extract(lattr(%#/JNOTE-*),%1,1),JNOTE-[edit(secure(%0),%b,_)]))][and(hasattr(%#,%qj),not(hasflag(%#/%qj,hidden)),strmatch(get(%#/%qj),Approved*))]=0,{@pemit&#160;%#=You have no approved, visible jnote by that [ifelse(isnum(%0),number,name)].},1,{@dolist/delim ,&#160;%1={@if [isdbref(setr(0,pmatch(##)))]={@tr me/TR.JUDGE=%q0,[name(%#)] shows you&#160;%p &quot;[rest(%qj,-)]&quot; jnote. Verification: [setr(1,mid(sha1(%# [secs(,6)]),0,5))].;@pemit&#160;%q0=[header(Judgenote: [name(%#)]/[capall(rest(%qj,-))] (%q1))]%rApproval: [first(get(%#/%qj),|)]%r%b%b[rest(get(%#/%qj),|)]%r[footer()]},{@pemit&#160;%#=No such player: ##}};@pemit&#160;%#=Done. You show your&#160;%0 jnote to [itemize(%1,\,)].}
&amp;CMD.VERIFY &lt;PG&gt; Player Globals=$+verify:@switch [hasattr(%#,_JUDGE)]=0,{@pemit&#160;%#=You currently have no verification data on your character.},{@pemit&#160;%#=[header(Last 20 Verification Items)]%r[iter(revwords(get(%#/_JUDGE),|),[convsecs(first(%i0,:))]: [wrap(rest(%i0,:),53,,,,26)],|,%r)]%r[footer()]}
&amp;CMD.BGADD &lt;PG&gt; Player Globals=$+bgadd *=*:@switch [not(hasattr(%#,D.APPROVAL))][isnum(%0)]=0*,{@pemit&#160;%#=You may not make changes to your background, as it is currently [lcstr(first(get(%#/D.APPROVAL)))].},10,{@pemit&#160;%#=Invalid section number.},11,{&amp;D.BG.%0&#160;%#=[strcat(get(%#/D.BG.%0),%1)];@pemit&#160;%#=[get(%#/D.BG.%0)]}
&amp;CMD.BGCLEAR &lt;PG&gt; Player Globals=$+bgclear *:@switch [not(hasattr(%#,D.APPROVAL))][and(isnum(%0),hasattr(%#,D.BG.%0))]=0*,{@pemit&#160;%#=You may not make changes to your background, as it is currently [lcstr(first(get(%#/D.APPROVAL)))].},10,{@pemit&#160;%#=Invalid section number.},11,{&amp;D.BG.%0&#160;%#;@pemit&#160;%#=Background section&#160;%0 cleared.}
&amp;CMD.BGLIST &lt;PG&gt; Player Globals=$+bglist:@switch [t(lattr(%#/D.BG.*))]=0,{@pemit&#160;%#=You have no background sections set.},{@pemit&#160;%#=Background sections: [iter(lattr(%#/D.BG.*),last(%i0,.))]}
&amp;CMD.BGEDIT &lt;PG&gt; Player Globals=$+bgedit *=*/*:@switch [not(hasattr(%#,D.APPROVAL))][and(isnum(%0),hasattr(%#,D.BG.%0))]=0*,{@pemit&#160;%#=You may not make changes to your background, as it is currently [lcstr(first(get(%#/D.APPROVAL)))].},10,{@pemit&#160;%#=Invalid section number.},11,{@edit&#160;%#/D.BG.%0=%1,%2;@pemit&#160;%#=[get(%#/D.BG.%0)]}
&amp;CMD.BG &lt;PG&gt; Player Globals=$+bg *:@switch [not(strmatch(%0,*/*))][and(isnum(%0),hasattr(%#,D.BG.%0))]=10,{@pemit&#160;%#=Invalid section number.},{@pemit&#160;%#=[header(Background Section&#160;%0 of [words(lattr(%#/D.BG.*))])]%r[get_eval(%#/D.BG.%0)]%r[footer()]}
&amp;CMD.BGSUBMIT &lt;PG&gt; Player Globals=$+bgsubmit:@switch [t(setr(0,lattr(%#/D.BG.*)))]=0,{@pemit&#160;%#=You must have at least one background section set to submit your background.},{@dolist&#160;%q0={@lock&#160;%#/##};&amp;D.APPROVAL&#160;%#=Submitted for approval on [time()];@lock&#160;%#/D.APPROVAL;@tr #23/TRIG_CREATE=%#,locate(%vj,APPS,i),,BG For [name(%#)],%r%t[name(%#)] has submitted [words(%q0)] background sections for approval. They will not be able to edit their background while it is submitted for approval. Completing or approving this job will finalize their approval and set their D.APPROVAL attribute. Denying this job will unlock their background sections and allow them to continue editing.;@pemit&#160;%#=Done. Your background has been submitted for approval. Please allow time for staff to process your request. In the mean time, you may see +myjobs for followup details on your approval.}
&amp;CMD.LOCK &lt;PG&gt; Player Globals=$lock *:@switch/first [setr(e,locate(%#,%0,e))]|[isdbref(setr(z,zone(%qe)))][u(%qz/FN.CANLOCK,%#,%qe)]=#-1|*,{@pemit&#160;%#=No such exit:&#160;%0},#-2|*,{@pemit&#160;%#=Too many matches. Please be more specific.},*|0*,{@pemit&#160;%#=That exit is not part of a building project.},*|10,{@pemit&#160;%#=You do not have a key.},*|11,{@lock&#160;%qe=LOCK/1;@pemit&#160;%#=You lock [name(%qe)].;@oemit&#160;%#=%N locks [name(%qe)].;@lock [setr(1,regrab(iter(lexits(loc(%qe)),if(strmatch(where(%qe),loc(%i0)),%i0)),.+))]=LOCK/1;@remit [where(%q1)]=Someone locks [name(%q1)] from the other side.}
&amp;CMD.UNLOCK &lt;PG&gt; Player Globals=$unlock *:@switch/first [setr(e,locate(%#,%0,e))]|[isdbref(setr(z,zone(%qe)))][u(%qz/FN.CANLOCK,%#,%qe)]=#-1|*,{@pemit&#160;%#=No such exit:&#160;%0},#-2|*,{@pemit&#160;%#=Too many matches. Please be more specific.},*|0*,{@pemit&#160;%#=That exit is not part of a building project.},*|10,{@pemit&#160;%#=You do not have a key.},*|11,{@unlock&#160;%qe;@pemit&#160;%#=You unlock [name(%qe)].;@oemit&#160;%#=%N unlocks [name(%qe)].;@unlock [setr(1,regrab(iter(lexits(loc(%qe)),if(strmatch(where(%qe),loc(%i0)),%i0)),.+))];@remit [where(%q1)]=Someone unlocks [name(%q1)] from the other side.}
&amp;CMD.BREQUEST &lt;PG&gt; Player Globals=$+brequest *=*:@switch [not(hasflag(%#,SUSPECT))][not(t(locate(%vb,ZMO:&#160;%0,i)))]=0*,{@pemit&#160;%#=You cannot access the build request system at this time.},10,{@pemit&#160;%#=Name is already in use. Please be more specific, ie:&#160;%N's House.},11,{@tr #23/TRIG_CREATE=%#,locate(%vj,BUILD,i),1,[strtrunc(%0,30)],%r%t[name(%#)] has proposed the following build project:%r%r&quot;[strtrunc(%1,6000)]&quot;%r%r%tApproving or Completing this job will automatically advance the project to the next stage. Denying this job will notify the character and destroy the project. Please use the +build system to set up the project as needed.,,,1;@pemit&#160;%#=Your project has been proposed. Please see +myjobs for follow-up info, or to add additional details. Please allow time for staff to process your job.}
&amp;CMD.BUILDCHECK &lt;PG&gt; Player Globals=$+buildcheck:@switch [haspower(%#,BUILDER)][isdbref(zone(%#))]=0*,{@pemit&#160;%#=Only builders can use this command.},10,{@pemit&#160;%#=You do not currently have a build in progress.},11,{@pemit&#160;%#=[header(Building Check: [rest(name(zone(%#)),:%b)])][null(iter(search(%#),[setq(1,case(type(%i0),EXIT,e,THING,t,ROOM,r))][setq(%q1,setunion(r(%q1),%i0))]))];@if&#160;%qr={@pemit&#160;%#=[subheader(Rooms)];@pemit&#160;%#=[list(%qr,[rjust(inum(),2)]: [name(%i0)](%i0)%r[space(4)]Desc: [ifelse(strlen(get(%i0/desc)),Set,Not Set)])]};@if&#160;%qe={@pemit&#160;%#=[subheader(Exits)];@pemit&#160;%#=[list(%qe,[rjust(inum(),2)]: [name(%i0)](%i0)%r[space(4)]Desc: [ifelse(strlen(get(%i0/DESC)),Set,Not Set)]%tSucc: [ifelse(strlen(get(%i0/SUCC)),Set,Not Set)]%tOsucc: [ifelse(strlen(get(%i0/OSUCC)),Set,Not Set)]%tOdrop: [ifelse(strlen(get(%i0/ODROP)),Set,Not Set)])]};@if&#160;%qt={@pemit&#160;%#=[subheader(Objects)];@pemit&#160;%#=[list(%qt,[rjust(inum(),2)]: [name(%i0)](%i0))]};@wait 0={@pemit&#160;%#=[footer()]}}
&amp;CMD.BUILD/SUBMIT &lt;PG&gt; Player Globals=$+build/submit:@switch [haspower(%#,BUILDER)][isdbref(zone(%#))]=0*,{@pemit&#160;%#=Only builders can use this command.},10,{@pemit&#160;%#=You do not currently have a build in progress.},11,{@tr #23/TRIG_CREATE=%#,locate(%vj,BUILD,i),1,Approval Requested,%r%t[name(%#)] has completed their building project and requested approval. Approving or Completing this job will automatically advance the project to Live status and link the exits in the IC Loc set on the build project. Denying this job will notify the character and leave the build set as In Progress. Please use the +build system to set up the project as needed.;@pemit&#160;%#=Your project has been proposed. Please see +myjobs for follow-up info, or to add additional details. Please allow time for staff to process your job.}
&amp;CMD.VIEW &lt;PG&gt; Player Globals=$+view:@pemit&#160;%#=[switch(words(lattr(loc(%#)/view-*)),0,There are no views set on your location.,The following views are set on your location:%r[iter(lattr(loc(%#)/view-*),%b%b[edit(lcstr(after(##,VIEW-)),_,%b)])])][setq(0,iter(lcon(loc(%#)),switch([gte(words(lattr(##/view-*)),1)]:[strmatch(type(##),PLAYER)][not(hasflag(##,connected))],1:10,##,1:0?,##)))][switch(words(%q0),0,,%RThe following objects have views set on them:%R[iter(%q0,%b%b[name(##)])])]
&amp;CMD.VIEW-ARG &lt;PG&gt; Player Globals=$+view *:@swi/first [pos(/,%0)]:[setq(0,locate(%#,before(%0,/),*))]%q0=#-1:#-?,{@pemit&#160;%#=I can't find that here!},#-1:*,{@pemit&#160;%#=[switch(words(lattr(%q0/view-*)),0,There are no views set on that item.,The following views are set on that item:%R[iter(lattr(%q0/view-*),%b%b[edit(lcstr(after(##,VIEW-)),_,%b)])])]},{@verb&#160;%q0=%#,view-[setq(1,edit(after(%0,/),%b,_))]%q1,There is no such view on that item,oview-%q1,,aview-%q1}
&amp;CMD.SELFBOOT &lt;PG&gt; Player Globals=$+selfboot:@dol rest(ports(%N))=@boot/port ##;@pemit&#160;%#=You booted your frozen connections.
&amp;CMD.OOC &lt;PG&gt; Player Globals=$ooc *: @pemit/contents&#160;%l=&lt;OOC&gt;&#160;%N[switch(mid(%0,0,1),:,%b[delete(%0,0,1)],;,[delete(%0,0,1)],%bsays\, &quot;%0&quot;)]
&amp;CMD.OOC-SHORT &lt;PG&gt; Player Globals=$'*: @pemit/contents&#160;%l=&lt;OOC&gt;&#160;%N[switch(mid(%0,0,1),:,%b[delete(%0,0,1)],;,[delete(%0,0,1)],%bsays\, &quot;%0&quot;)]
&amp;CMD.INFO &lt;PG&gt; Player Globals=$+info:@pemit&#160;%#=[header(General Info)]%r[edefault(%#/INFO-GENERAL,Not set.)][if(words(setr(0,setdiff(lattr(%#/INFO-*),INFO-GENERAL))),%r[subheader(Other Info)]%r%b[edit(table(iter(%q0,capall(edit(rest(%i0,INFO-),_,%b)),,|),19,78,|),%r,%r%b)]%r[subheader()]%rType &quot;+info me/&lt;name&gt;&quot; to view your info.%r[footer()],%r[footer()])]
&amp;CMD.INFO-ARG &lt;PG&gt; Player Globals=$+info *:@switch [setq(0,switch(first(%0,/),me,%#,pmatch(first(%0,/))))][isdbref(%q0)][strmatch(%0,*/*)][hasattr(%q0,INFO-[edit(rest(%0,/),%b,_)])]=0*,{@pemit&#160;%#=No such player:&#160;%0},10?,{@pemit&#160;%#=[header(General Info: [name(%q0)])]%r[edefault(%q0/INFO-GENERAL,Not set.)][if(words(setr(1,setdiff(lattr(%q0/INFO-*),INFO-GENERAL))),%r[subheader(Other Info for [name(%q0)])]%r%b[edit(table(iter(%q1,capall(edit(rest(%i0,INFO-),_,%b)),,|),19,78,|),%r,%r%b)]%r[subheader()]%rType &quot;+info &lt;player&gt;/&lt;name&gt;&quot; to view a player's info.%r[footer()],%r[footer()])]},110,{@pemit&#160;%#=[name(%q0)] does not have a &quot;[rest(%0,/)]&quot; info.},111,{@pemit&#160;%#=[header([capall(edit(rest(%0,/),%b,_))] Info: [name(%q0)])]%r[get_eval(%q0/INFO-[edit(rest(%0,/),%b,_)])]%r[footer()]}
&amp;CMD.BEGINNER &lt;PG&gt; Player Globals=$+beginner:@pemit&#160;%#=[header(Commands for Beginners)]%rHere is a quick primer on game commands for beginners, or forgetful old-timers!%r%r[ljust(say &lt;message&gt;,25,.)]%b%b[wrap(Says &lt;message&gt; to everyone in your current room. This command can be abbreviated as &quot;&lt;message&gt;.,51,,,,27)]%r[ljust(ooc &lt;message&gt;,25,.)]%b%b[wrap(Sends an ooc message to everyone in your current room. This command can be abbreviated as '&lt;message&gt;.,51,,,,27)]%r[ljust(page &lt;players&gt;=&lt;message&gt;,25,.)]%b%b[wrap(Sends a private message to the listed players. Player names can be separated by spaces or commas.,51,,,,27)]%r[ljust(look &lt;object or person&gt;,25,.)]%b%b[wrap(Shows you the description of an object or person. &quot;Look&quot; by itself shows you your current room.,51,,,,27)]%r[ljust(pose &lt;message&gt;,25,.)]%b%b[wrap(Show an action to the room\, e.g.\, John Doe types &quot;pose grins and waves.&quot; and the room sees &quot;John Doe grins and waves.&quot; Abbreviated as&#160;:&lt;message&gt;.,51,,,,27)]%r[ljust(who,25,.)]%b%b[wrap(Shows you a list of people who are connected to the game.,51,,,,27)]%r[ljust(+who,25,.)]%b%b[wrap(Shows a modified WHO.,51,,,,27)]%r[ljust(+help,25,.)]%b%b[wrap(The global +help system.,51,,,,27)]%r[ljust(+staff\[/all\],25,.)]%b%b[wrap(+Staff shows you all connected game staff\, and +staff/all shows all staff regardless of connection status. If you are confused or need help\, feel free to use the &quot;page&quot; command to contact a staffer.,51,,,,27)]%r[ljust(pub &lt;message&gt;,25,.)]%b%b[wrap(All players join the Public channel with the alias &quot;pub&quot;. This command sends &lt;message&gt; to all players on the Public channel.,51,,,,27)]%r%rNOTE: Commands are typically not case sensitive. To see this information again, type: +beginner. For more information, please see &quot;+help beginner&quot;.%r[footer()]
&amp;TR.JUDGE &lt;PG&gt; Player Globals=@dolist&#160;%0={&amp;_JUDGE ##=[trim(insert(extract(get(##/_JUDGE),1,19,|),1,[secs()]:%1,|),r,|)];@pemit ##=%[[elements(time(),1 2 3 4)]%] (JUDGE)&#160;%1}
@Startup &lt;PG&gt; Player Globals=@tr me/TR.HANGOUTS
&amp;TR.HANGOUTS &lt;PG&gt; Player Globals=&amp;D.HANGOUTS me=[search(eroom=hastag(##,hangout))]
&amp;CMD.HANGOUTS &lt;PG&gt; Player Globals=$+hangouts:@switch [t(v(D.HANGOUTS))]=0,{@pemit&#160;%#=There are currently no hangouts.},{@pemit&#160;%#=[header(Hangouts)]%r%bName[space(55)]# of Players%r[subheader()];@pemit&#160;%#=[list(v(D.HANGOUTS),[ljust(name(%i0),65,.)]%b[words(setinter(lcon(%i0),lwho()))])];@pemit&#160;%#=[footer()]}
&amp;FN.JNOTES &lt;PG&gt; Player Globals=ifelse(isstaff(%#),attrcnt(%l/JNOTE-*),#-1)
@set &lt;PG&gt; Player Globals/FN.JNOTES = visual
&amp;FN.DESC &lt;PG&gt; Player Globals=case(0,or(hastype(%@,ROOM),t(zone(%@))),This function is only for use by building code.,u(%1/fn.desc,%0))
@set &lt;PG&gt; Player Globals/FN.DESC = visual
@chown &lt;PG&gt; Player Globals=#3
@set &lt;PG&gt; Player Globals=!HALTED INHERIT SAFE
@vb #6=#12
@vj #6=#25
drop #6
@@
@@ #7: &lt;WG&gt; Wizard Globals
@@
think [ansi(hc,MUX Core:)] Setting up Wizard globals.
@create &lt;WG&gt; Wizard Globals=5
&amp;ISWIZARD &lt;WG&gt; Wizard Globals=[hasflag(%#,WIZARD)]
@lock/UseLock &lt;WG&gt; Wizard Globals=ISWIZARD/1
&amp;CMD.CRON &lt;WG&gt; Wizard Globals=$+cron:@pemit&#160;%#=[header(Cron Jobs)]%r%b#[space(3)]Name[space(22)]Mth[space(3)]Date[space(3)]Day[space(3)]Hour[space(2)]Minute[space(2)]Flags[space(3)]Args?%r[subheader()];@pemit&#160;%#=[list(lattr(%vc/CRON.TIME-*),[rjust(inum(),3)]:%b[ljust(lcstr(rest(%i0,-)),25)]%b[ljust(case(words(setr(1,extract(setr(0,get(%vc/%i0)),1,1,|))),0,,1,%q1,+++),3)][space(4)][case(words(setr(1,extract(%q0,2,1,|))),0,%b%b,1,%q1,++)][space(4)][ljust(case(words(setr(1,extract(%q0,3,1,|))),0,,1,%q1,+++),3)][space(4)][case(words(setr(1,extract(%q0,4,1,|))),0,%b%b,1,%q1,++)][space(5)][case(words(setr(1,extract(%q0,5,1,|))),0,%b%b,1,%q1,++)][space(6)][ifelse(ismember(setr(1,extract(%q0,6,1,|)),runonce),R,-)][ifelse(ismember(%q1,catchup),C,-)][space(6)][ifelse(t(last(%q0,|)),Y,N)])];@pemit&#160;%#=[footer()]
&amp;CMD.CRON-ARG &lt;WG&gt; Wizard Globals=$+cron *:@switch [and(gt(%0,0),lte(%0,words(lattr(%vc/CRON.TIME-*))))]=0,{@pemit&#160;%#=There is no cron job by that number.},{@pemit&#160;%#=[header(Cron Job: [lcstr(setr(0,rest(extract(lattr(%vc/CRON.TIME-*),%0,1),-)))])]%r[rjust(%xhMonth:%xn,8)]%b[wrap(extract(setr(1,get(%vc/CRON.TIME-%q0)),1,1,|),69,,,,9)]%r[rjust(%xhDate:%xn,8)]%b[wrap(extract(%q1,2,1,|),69,,,,9)]%r[rjust(%xhDay:%xn,8)]%b[wrap(extract(%q1,3,1,|),69,,,,9)]%r[rjust(%xhHour:%xn,8)]%b[wrap(extract(%q1,4,1,|),69,,,,9)]%r[rjust(%xhMinute:%xn,8)]%b[wrap(extract(%q1,5,1,|),69,,,,9)]%r[rjust(%xhFlags:%xn,8)]%b[wrap(extract(%q1,6,1,|),69,,,,9)]%r[rjust(%xhArgs:%xn,8)]%b[wrap(last(%q1,|),69,,,,9)]%r%r[rjust(%xhComment:%xn,8)]%b[wrap(default(%vc/CRON.COMMENT-%q0,None.),69,,,,9)]%r[subheader(Code)]%r[default(%vc/CRON.JOB-%q0,None.)]%r[footer()]}
@chown &lt;WG&gt; Wizard Globals=#3
@set &lt;WG&gt; Wizard Globals=!HALTED INHERIT SAFE
@VC #7=#18
drop #7
@@
@@ #8: &lt;SG&gt; Staff Globals
@@
think [ansi(hc,MUX Core:)] Setting up Staff/Royalty globals.
@create &lt;SG&gt; Staff Globals=5
&amp;CAN_USE &lt;SG&gt; Staff Globals=[isstaff(owner(%#))]
@lock/UseLock &lt;SG&gt; Staff Globals=CAN_USE/1
&amp;CMD.JOIN &lt;SG&gt; Staff Globals=$+join *:@switch [setr(n,locate(%#,*%0,p))]|[strmatch(loc(%#),setr(0,loc(*%0)))]=#-*,{@pemit&#160;%#=No such player:&#160;%0},*|1,{@pemit&#160;%#=You are already there.},{@pemit&#160;%#=[alert(You prepare to open a portal.,-)];@remit&#160;%q0=[alert([name(%#)] will be joining you shortly.,-)];@oemit&#160;%#=[alert([name(%#)] steps through a portal and vanishes.,-)];@wait 3={&amp;join-from&#160;%#=loc(%#);@tel&#160;%#=%q0;@cemit Scan=[name(%#)] has joined [name(%qn)] at [name(%q0)].}}
&amp;CMD.SUMMON &lt;SG&gt; Staff Globals=$+summon *:@switch [setr(n,locate(%#,*%0,p))]|[strmatch(loc(%#),setr(0,loc(*%0)))]=#-*,{@pemit&#160;%#=No such player:&#160;%0},*|1,{@pemit&#160;%#=They are already here.},{@pemit&#160;%#=[alert(You prepare to open a portal.,-)];@remit&#160;%q0=[alert([name(%#)] is summoning [name(*%0)].,-)];@oemit&#160;%l=[alert([name(%#)] opens a portal.,-)];&amp;summon *%0=loc(*%0);@wait 3={@oemit&#160;%q0=%N summons [name(*%0)] away.;@pemit *%0=%N summons you away.;@remit&#160;%#=%N summons [name(*%0)].;@tel *%0=loc(%#);@cemit Scan=[name(%#)] has summoned [name(%qn)] to [name(loc(%#))].}}
&amp;CMD.RETURN &lt;SG&gt; Staff Globals=$+return*:@switch [setq(0,trim(%0))][setr(1,gt(strlen(%q0),0))][gt(strlen(setr(2,get(%#/join-from))),0)][isdbref(locate(me,*%q0,p))][gt(strlen(setr(3,get(*%q0/summon))),0)]=00*,{@pemit&#160;%#=You do not have a return destination.},01*,{@pemit&#160;%#=[alert(You prepare to open a portal.,-)];@oemit&#160;%#=[alert([name(%#)] opens a portal.,-)];@wait 3={@tel&#160;%#=%q2;&amp;join-from&#160;%#}},110?,{@pemit&#160;%#=No such player:&#160;%q0},1?10,{@pemit&#160;%#=[name(*%q0)] does not have a return location.},1?11,{@oemit *%q0=[alert([name(%#)] sends [name(*%q0)] back to [poss(*%q0)] former location.,-)];@pemit *%q0=%N sends you back to your former location.;@remit&#160;%q3=[alert([name(%#)] is returning [name(*%q0)] to this location.,-)];@wait 3={@tel *%q0=%q3;&amp;summon *%q0;@oemit *%q0=%N returns [name(*%0)].;&amp;summon *%q0.}}
&amp;CMD.COMMANDS &lt;SG&gt; Staff Globals=$+commands *:@switch [setr(0,locate(%#,%0,*))]=#-*,{@pemit&#160;%#=Cannot find&#160;%0.},{@pemit&#160;%#=[header(Commands on [name(%q0)] (%q0))]%r[table(iter(filter(FIL.COMMANDS,lattr(%q0),,|,%q0),##: [mid(setr(1,get(%q0/##)),1,sub(pos(:,%q1),2))],|,|),39,78,|)]%r[footer()]}
&amp;CMD.COMMANDS/NOCOL &lt;SG&gt; Staff Globals=$+commands/nocol *:@switch [setr(0,locate(%#,%0,*))]=#-*,{@pemit&#160;%#=Cannot find&#160;%0.},{@pemit&#160;%#=[header(Commands on [name(%q0)] (%q0))]%r[iter(filter(FIL.COMMANDS,lattr(%q0),,|,%q0),##: [mid(setr(1,get(%q0/##)),1,sub(pos(:,%q1),2))],|,%r)]%r[footer()]}
&amp;FIL.COMMANDS &lt;SG&gt; Staff Globals=strmatch(get(%1/%0),$*)
&amp;CMD.CONTENTS &lt;SG&gt; Staff Globals=$+contents *:@pemit&#160;%#=switch(setr(0,locate(%#,%0,*)),#-*,Cannot find&#160;%0.,switch(words(lcon(%q0)),0,name(%q0) (%q0) contains nothing,name(%q0) (%q0) contains:%r[iter(lcon(%q0),%t[name(##)] (##),,%r)]))
&amp;CMD.DUTY &lt;SG&gt; Staff Globals=$+duty:@switch [hasflag(%#,transparent)]=1,{@set&#160;%#=!transparent;@pemit&#160;%#=Done. You are now on duty.},{@set&#160;%#=transparent;@pemit&#160;%#=Done. You are now off duty.}
&amp;CMD.DARK &lt;SG&gt; Staff Globals=$+dark:@switch [hasflag(%#,DARK)]=1,{@set&#160;%#=!DARK;&amp;DARK-TIME&#160;%#;@pemit&#160;%#=Done. You are no longer set dark.},{@set&#160;%#=DARK;&amp;DARK-TIME&#160;%#=[time(,6)];@pemit&#160;%#=Done. You are now set dark.}
&amp;CMD.JNOTE &lt;SG&gt; Staff Globals=$+jnote */*=*:@switch [switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(1,edit(secure(%1),%b,_))][hasattr(%q0,JNOTE-%q1)]=0?,{@pemit&#160;%#=No matches:&#160;%0},10,{&amp;JNOTE-%q1&#160;%q0=Proposed by [name(%#)] (%#), [time()]|%2;@set&#160;%q0/JNOTE-%q1=hidden;@lock&#160;%q0/JNOTE-%q1;@pemit&#160;%#=Proposed note added and set as hidden.},11,{@unlock&#160;%q0/JNOTE-%q1;&amp;JNOTE-%q1&#160;%q0=Proposed by [name(%#)] (%#), [time()]|%2;@set&#160;%q0/JNOTE-%q1=hidden;@lock&#160;%q0/JNOTE-%q1;@pemit&#160;%#=Proposed note OVERWRITTEN and set as hidden.}
&amp;CMD.JNOTE/HIDE &lt;SG&gt; Staff Globals=$+jnote/hide */*:@switch [switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(1,edit(secure(%1),%b,_))][hasattr(%q0,JNOTE-%q1)]=0*,{@pemit&#160;%#=No matches:&#160;%0},10,{@pemit&#160;%#=No such judgenote '%1' on [name(%q0)].},11,{@unlock&#160;%q0/JNOTE-%q1;@set&#160;%q0/JNOTE-%q1=hidden;@lock&#160;%q0/JNOTE-%q1;@pemit&#160;%#=Done. Jnote '%1' on [name(%q0)] has been hidden.}
&amp;CMD.JNOTE/UNHIDE &lt;SG&gt; Staff Globals=$+jnote/unhide */*:@switch [switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(1,edit(secure(%1),%b,_))][hasattr(%q0,JNOTE-%q1)]=0*,{@pemit&#160;%#=No matches:&#160;%0},10,{@pemit&#160;%#=No such judgenote '%1' on [name(%q0)].},11,{@unlock&#160;%q0/JNOTE-%q1;@set&#160;%q0/JNOTE-%q1=!hidden;@lock&#160;%q0/JNOTE-%q1;@pemit&#160;%#=Done. Jnote '%1' on [name(%q0)] is now visible.}
&amp;CMD.JNOTE/APPROVE &lt;SG&gt; Staff Globals=$+jnote/approve */*:@switch [switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(j,ifelse(isnum(%1),extract(lattr(%q0/JNOTE-*),%1,1),JNOTE-[edit(secure(%1),%b,_)]))][hasattr(%q0,%qj)]=0*,{@pemit&#160;%#=No matches:&#160;%0},10,{@pemit&#160;%#=No judgenote '%1' for [name(%q0)].},11,{@unlock&#160;%q0/%qj;&amp;%qj&#160;%q0=[replace(get(%q0/%qj),1,{Approved by [name(%#)] (%#), [time()]},|)];@lock&#160;%q0/%qj;@pemit&#160;%#=You have approved the '[rest(%qj,-)]' note on [name(%q0)].}
&amp;CMD.JNOTE/UNAPPROVE &lt;SG&gt; Staff Globals=$+jnote/unapprove */*:@switch [switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(j,ifelse(isnum(%1),extract(lattr(%q0/JNOTE-*),%1,1),JNOTE-[edit(secure(%1),%b,_)]))][hasattr(%q0,%qj)]=0*,{@pemit&#160;%#=No matches:&#160;%0},10,{@pemit&#160;%#=No such judgenote '%1' on [name(%q0)].},11,{@unlock&#160;%q0/%qj;&amp;%qj&#160;%q0=[replace(setr(2,get(%q0/%qj)),1,{UNAPPROVED by [name(%#)] (%#), [time()]},|)];@lock&#160;%q0/%qj;@pemit&#160;%#=You have unapproved the '[rest(%qj,-)]' note on [name(%q0)];@tr #23/TRIG_CREATE=%q0,locate(#21,JNOTE,i),1,[strtrunc(rest(%qj,-),30)],%r%t[name(%#)] has unapproved [name(%q0)]'s &quot;[rest(%qj,-)]&quot; note:%r%r&quot;[strtrunc(rest(%q2,|),6000)]&quot;%r%r%tApproving or Completing this job will APPROVE the jnote. Denying this job will notify the character and remove the note from their character object.}
&amp;CMD.JNOTE/DELETE &lt;SG&gt; Staff Globals=$+jnote/delete */*:@switch [switch(1,isdbref(pmatch(%0)),1[setq(0,pmatch(%0))],isdbref(locate(%#,%0,*)),1[setq(0,locate(%#,%0,*))],0)][setq(j,ifelse(isnum(%1),extract(lattr(%q0/JNOTE-*),%1,1),JNOTE-[edit(secure(%1),%b,_)]))][hasattr(%q0,%qj)]=0*,{@pemit&#160;%#=No matches:&#160;%0},10,{@pemit&#160;%#=No such judgenote '%1' on [name(%q0)].},11,{@unlock&#160;%q0/%qj;&amp;%qj&#160;%q0;@pemit&#160;%#=You have deleted the '[rest(%qj,-)]' note on [name(%q0)]}
&amp;CMD.VERIFY &lt;SG&gt; Staff Globals=$+verify *:@switch [isdbref(setr(0,pmatch(%0)))][hasattr(%q0,_JUDGE)]=0*,{@pemit&#160;%#=No such player:&#160;%0},10,{@pemit&#160;%#=That character has no verification data stored.},11,{@pemit&#160;%#=[header(Last 20 Verification Items for [name(%q0)])]%r[iter(revwords(get(%q0/_JUDGE),|),[convsecs(first(%i0,:))]: [wrap(rest(%i0,:),53,,,,26)],|,%r)]%r[footer()]}
&amp;CMD.BGLIST &lt;SG&gt; Staff Globals=$+bglist *:@switch [isdbref(setr(0,pmatch(%0)))][t(lattr(%q0/D.BG.*))]=0*,{@pemit&#160;%#=No such player:&#160;%0},10,{@pemit&#160;%#=[name(%q0)] has no background sections set.},11,{@pemit&#160;%#=Background sections for [name(%q0)]: [iter(lattr(%q0/D.BG.*),last(%i0,.))]}
&amp;CMD.BGREAD &lt;SG&gt; Staff Globals=$+bg */*:@switch [isdbref(setr(0,pmatch(%0)))][hasattr(%q0,D.BG.%1)]=0*,{@pemit&#160;%#=No such player:&#160;%0},10,{@pemit&#160;%#=No such background section or [name(%q0)].},11,{@pemit&#160;%#=[header(Background Section&#160;%0 of [words(lattr(%#/D.BG.*))] for [name(%q0)])]%r[get_eval(%q0/D.BG.%0)]%r[footer()]}
&amp;CMD.STAFF/UPDATE &lt;SG&gt; Staff Globals=$+staff/update:@tr me/daily;@pemit&#160;%#=Done. Staff list updated.
&amp;CMD.TAG/ADD &lt;SG&gt; Staff Globals=$+tag/add *=*:@switch [setq(0,lcstr(%1))][regmatchi(%0,^(exit|player|room|thing|object|all)$,-1 1)][setq(1,case(%q1,object,thing,all,exit player room thing,%q1))][not(ismember(v(D.TAGLIST.[first(%q1)]),%q0))][not(gt(words(%q0),1))][not(gt(strlen(%q0),20))]=0*,{@pemit&#160;%#=Type must be exit, player, room, thing, or all.},10*,{@pemit&#160;%#=There is already a tag by that name.},110*,{@pemit&#160;%#=Tag names may not contain spaces.},1110,{@pemit&#160;%#=Tag names must be 20 characters or less.},1111,{@dolist&#160;%q1={&amp;D.TAGLIST.## me=[setunion(v(D.TAGLIST.##),%q0)];@Pemit&#160;%#=Done. Tag '%q0' added to ## tags.}}
&amp;CMD.TAG/DEL &lt;SG&gt; Staff Globals=$+tag/del *=*:@switch [setq(0,lcstr(%1))][regmatchi(%0,^(exit|player|room|thing|object|all)$,-1 1)][setq(1,case(%q1,object,thing,all,exit player room thing,%q1))][not(gt(words(%q0),1))]=0*,{@pemit&#160;%#=Type must be exit, player, room, thing, or all.},10,{@pemit&#160;%#=You may only delete one tag at a time.},11,{@dolist&#160;%q1={@pemit&#160;%#=[case(ismember(v(D.TAGLIST.##),%q0),0,There is no ## tag by that name.,1,[set(me,D.TAGLIST.##:[setdiff(v(D.TAGLIST.##),%q0)])]Tag '%q0' deleted from ## list. Tag not removed from ##s that have it.)]}}
&amp;CMD.TAG &lt;SG&gt; Staff Globals=$+tag *=*:@switch [setq(0,locate(%#,%0,*))][setq(1,lcstr(%1))][case(%q0,#-1,0,1)][ismember(v(D.TAGLIST.[type(%q0)]),%q1)]=0*,{@pemit&#160;%#=Target not found.},10,{@pemit&#160;%#=There is no such tag for your target's object type.},11,{&amp;_TAGS&#160;%q0=[setunion(get(%q0/_TAGS),%q1)];@pemit&#160;%#=Done.&#160;%xh[name(%q0)]%xn tagged '%q1'.}
&amp;CMD.UNTAG &lt;SG&gt; Staff Globals=$+untag *=*:@switch [setq(0,locate(%#,%0,*))][setq(1,lcstr(%1))][case(%q0,#-1,0,1)][ismember(get(%q0/_TAGS),%q1)]=0*,{@pemit&#160;%#=Target not found.},10,{@pemit&#160;%#=[name(%q0)] does not have that tag.},11,{&amp;_TAGS&#160;%q0=[setdiff(get(%q0/_TAGS),%q1)];@Pemit&#160;%#=Done. Tag '%q1' removed from&#160;%xh[name(%q0)]%xn.}
&amp;CMD.TAGS &lt;SG&gt; Staff Globals=$+tags:@pemit&#160;%#=[header(Tag List)]%r[iter(lattr(me/D.TAGLIST.*),[subheader([capall(last(%i0,.))] Tags)]%r%b[edit(table(v(%i0),15,78),%r,%r%b)],,%r)]%r[footer()]
&amp;D.TAGLIST.ROOM &lt;SG&gt; Staff Globals=hangout metaroom
&amp;D.TAGLIST.PLAYER &lt;SG&gt; Staff Globals=placespy
&amp;D.TAGLIST.EXIT &lt;SG&gt; Staff Globals=metaroom
&amp;CMD.HANGOUTS/UPDATE &lt;SG&gt; Staff Globals=$+hangouts/update:@tr #6/TR.HANGOUTS;@pemit&#160;%#=Done. Hangouts list updated.
@Daily &lt;SG&gt; Staff Globals=&amp;D.STAFFLIST me=[setdiff(search(eplayer=isstaff(##)),#1)]
@Startup &lt;SG&gt; Staff Globals=@tr me/daily
@chown &lt;SG&gt; Staff Globals=#3
@set &lt;SG&gt; Staff Globals=!HALTED INHERIT SAFE
drop #8
@@
@@ #9: Places Globals
@@
think [ansi(hc,MUX Core:)] Setting up the Places and Meta Rooms systems.
@create &lt;PG&gt; Places Globals=5
&amp;CMD.PLACE/ADD &lt;PG&gt; Places Globals=$+place/add *:@switch [or(controls(%#,%l),isstaff(%#))][isposint(setr(0,first(%0,=)))][ifelse(eq(words(%0,=),1),[setq(1,default)]1,ifelse(ismember(setunion(v(D.TEMPLATES),default,|),rest(%0,=),|),[setq(1,lcstr(rest(%0,=)))]1,0))]=0*,{@pemit&#160;%#=You do not have permission to configure places in that room.},10*,{@pemit&#160;%#=Number of places to add must be a positive integer.},110,{@pemit&#160;%#=That is not a valid places template.},111,{@set&#160;%l=MONITOR;&amp;PLACESMAX&#160;%l=[add(get(%l/PLACESMAX),%q0)];&amp;PLACESCLEANUP1&#160;%l=^* has left.:placescleanup(\%#);&amp;PLACESCLEANUP2&#160;%l=^* has disconnected.:placescleanup(\%#);@dolist [lnum(1,get(%l/PLACESMAX))]={@if [not(hasattr(%l,PLACE##))]={&amp;PLACE##&#160;%l=[v(D.TEMPLATE-%q1)]}};@pemit&#160;%#=Done.&#160;%q0 places added to your room.}
&amp;CMD.PLACE/DEL &lt;PG&gt; Places Globals=$+place/del *:@switch [or(controls(%#,%l),isstaff(%#))][case(1,isposint(%0),1[hasattr(%l,PLACE%0)],strmatch(%0,all),1[hasattr(%l,PLACESMAX)],0)]=0*,{@pemit&#160;%#=You do not have permission to configure places in that room.},10*,{@pemit&#160;%#=Number of places to delete must be a positive integer or &quot;all&quot;.},110,{@pemit&#160;%#=[ifelse(strmatch(%0,all),Places are not configured in that room.,There is no place by that number in your current room.)]},111,{@if [isposint(%0)]={&amp;PLACE%0&#160;%l;@if [lt(%0,get(%l/PLACESMAX))]={@dolist [lnum(inc(%0),get(%l/PLACESMAX))]={&amp;PLACE[dec(##)]&#160;%l=[get(%l/PLACE##)];&amp;PLACE##&#160;%l;@notify me}},{@notify me};@wait me={&amp;PLACESMAX&#160;%l=[dec(get(%l/PLACESMAX))]};@pemit&#160;%#=Done. Place&#160;%0 removed.;@if [eq(get(%l/PLACESMAX),0)]={@pemit&#160;%#=Last place deleted. Removing places code.;&amp;PLACESMAX&#160;%l;&amp;PLACESCLEANUP1&#160;%l;&amp;PLACESCLEANUP2&#160;%l;@set&#160;%l=!MONITOR;}},{@dolist [lnum(1,get(%l/PLACESMAX))]={&amp;PLACE##&#160;%l};&amp;PLACESMAX&#160;%l;&amp;PLACESCLEANUP1&#160;%l;&amp;PLACESCLEANUP2&#160;%l;@set&#160;%l=!MONITOR;@wait 0=@pemit&#160;%#=Done. Places code removed.}}
&amp;CMD.PLACE/SET &lt;PG&gt; Places Globals=$+place/set */*=*:@switch [or(controls(%#,%l),isstaff(%#))][and(gt(%0,0),lte(%0,get(%l/PLACESMAX)))][ismember(v(D.KEYS),%1,|)]=0*,{@pemit&#160;%#=You do not have permission to configure places in that room.},10*,{@pemit&#160;%#=There is no place with that number at your location.},110,{@pemit&#160;%#=That is not a valid configuration option.},111,{&amp;PLACE%0&#160;%l=[update(get(%l/PLACE%0),lcstr(%1),ifelse(strmatch(%2,clear),,%2))];@pemit&#160;%#=The [lcstr(%1)] for [rest(grab(get(%l/PLACE%0),name:*,|),:)] is now set to:&#160;%2}
&amp;CMD.JOIN &lt;PG&gt; Places Globals=$join *:@switch/first [case(1,isnum(%0),[and(gt(%0,0),lte(%0,get(%l/PLACESMAX)))][setq(0,There is no place by that number in your current room.)][setq(1,%0)],isdbref(pmatch(%0)),[and(t(setr(1,u(FN.WHICHPLACE,pmatch(%0),%l))),strmatch(loc(pmatch(%0)),%l))][setq(0,[name(pmatch(%0))] is not at a place in your room.)],[t(setr(1,grab(iter(lnum(1,get(%l/PLACESMAX)),if(strmatch(access(get(%l/PLACE%i0),name),lcstr(%0)),%i0)),*)))][setq(0,There is no place or player in your room with that name.)])][setq(p,get(%l/PLACE%q1))][setq(c,access(%qp,contents))][not(strmatch(u(FN.WHICHPLACE,%#),%q1,%l))][and(gt(access(%qp,curplaces),0),lt(words(access(%qp,contents)),access(%qp,maxplaces)))]=0*,{@pemit&#160;%#=%q0},10*,{@pemit&#160;%#=You're already there!},110*,{@pemit&#160;%#=There aren't any free spots at that place.},111,{@if [t(setr(2,u(FN.WHICHPLACE,%#,%l)))]={&amp;PLACE%q2&#160;%l=[setq(r,get(%l/PLACE%q2))][setr(d,update(%qr,contents,setdiff(access(%qr,contents),%#)))];@pemit&#160;%#=[access(%qr,depart)];@pemit/list&#160;%qd=%N has departed.;@pemit/list [setdiff(lcon(%l),%#&#160;%qd)]=%N [access(%qr,odepart)]};@wait 0={@pemit&#160;%#=[access(%qp,join)];@pemit/list&#160;%qc=%N joins you.;&amp;PLACE%q1&#160;%l=[update(%qp,contents,setunion(access(%qp,contents),%#))];@pemit/list [setdiff(lcon(%l),%#&#160;%qc)]=%N [access(%qp,ojoin)];@pemit&#160;%#=[access(%qp,desc)]}}
&amp;CMD.DEPART &lt;PG&gt; Places Globals=$depart:@switch [t(setr(0,u(FN.WHICHPLACE,%#,%l)))][setq(p,get(%l/PLACE%q0))]=0,{@pemit&#160;%#=You aren't at a place.},1,{&amp;PLACE%q0&#160;%l=[setr(c,update(%qp,contents,setdiff(access(%qp,contents),%#)))];@pemit&#160;%#=[access(%qp,depart)];@pemit/list&#160;%qc=%N has departed.;@pemit/list [setdiff(lcon(%l),%#&#160;%qc)]=%N [access(%qp,odepart)]}
&amp;CMD.SIT &lt;PG&gt; Places Globals=$sit *:@switch/first [case(1,isnum(%0),[and(gt(%0,0),lte(%0,get(%l/PLACESMAX)))][setq(0,There is no place by that number in your current room.)][setq(1,%0)],isdbref(pmatch(%0)),[and(t(setr(1,u(FN.WHICHPLACE,pmatch(%0),%l))),strmatch(loc(pmatch(%0)),%l))][setq(0,[name(pmatch(%0))] is not at a place in your room.)],[t(setr(1,grab(iter(lnum(1,get(%l/PLACESMAX)),if(strmatch(access(get(%l/PLACE%i0),name),lcstr(%0)),%i0)),*)))][setq(0,There is no place or player in your room with that name.)])][setq(p,get(%l/PLACE%q1))][setq(c,access(%qp,contents))][not(strmatch(u(FN.WHICHPLACE,%#),%q1,%l))][and(gt(access(%qp,curplaces),0),lt(words(access(%qp,contents)),access(%qp,maxplaces)))]=0*,{@pemit&#160;%#=%q0},10*,{@pemit&#160;%#=You're already there!},110*,{@pemit&#160;%#=There aren't any free spots at that place.},111,{@if [t(setr(2,u(FN.WHICHPLACE,%#,%l)))]={&amp;PLACE%q2&#160;%l=[setq(r,get(%l/PLACE%q2))][setr(d,update(%qr,contents,setdiff(access(%qr,contents),%#)))];@pemit&#160;%#=[access(%qr,depart)];@pemit/list&#160;%qd=%N has departed.;@pemit/list [setdiff(lcon(%l),%#&#160;%qd)]=%N [access(%qr,odepart)]};@wait 0={@pemit&#160;%#=[access(%qp,join)];@pemit/list&#160;%qc=%N joins you.;&amp;PLACE%q1&#160;%l=[update(%qp,contents,setunion(access(%qp,contents),%#))];@pemit/list [setdiff(lcon(%l),%#&#160;%qc)]=%N [access(%qp,ojoin)];@pemit&#160;%#=[access(%qp,desc)]}}
&amp;CMD.STAND &lt;PG&gt; Places Globals=$stand:@switch [t(setr(0,u(FN.WHICHPLACE,%#,%l)))][setq(p,get(%l/PLACE%q0))]=0,{@pemit&#160;%#=You aren't at a place.},1,{&amp;PLACE%q0&#160;%l=[setr(c,update(%qp,contents,setdiff(access(%qp,contents),%#)))];@pemit&#160;%#=[access(%qp,depart)];@pemit/list&#160;%qc=%N has departed.;@pemit/list [setdiff(lcon(%l),%#&#160;%qc)]=%N [access(%qp,odepart)]}
&amp;CMD.MOVE &lt;PG&gt; Places Globals=$mv from * to *:@switch [setq(p,get(%l/PLACE%0))][setq(q,get(%l/PLACE%1))][and(gt(%0,0),lte(%0,get(%l/PLACESMAX)))][and(gt(%1,0),lte(%1,get(%l/PLACESMAX)))][not(words(access(%qp,fixed)))][not(words(access(%qq,fixed)))][gt(sub(access(%qp,curplaces),words(access(%qp,contents))),0)][neq(access(%qq,curplaces),access(%qq,maxplaces))]=0*,{@pemit&#160;%#=There is no place number&#160;%0 at your location.},10*,{@pemit&#160;%#=There is no place number&#160;%1 at your location.},110*,{@pemit&#160;%#=[access(%qp,fixed)]},1110*,{@pemit&#160;%#=[access(%qq,fixed)]},11110*,{@pemit&#160;%#=[access(%qp,empty)]},111110,{@pemit&#160;%#=[access(%qq,full)]},111111,{&amp;PLACE%0&#160;%l=[update(%qp,curplaces,dec(access(%qp,curplaces)))];&amp;PLACE%1&#160;%l=[update(%qq,curplaces,inc(access(%qp,curplaces)))];@pemit&#160;%#=You move a place from [access(%qp,name)] to [access(%qq,name)].}
&amp;CMD.PLACES &lt;PG&gt; Places Globals=$places:@switch [hasattr(%l,PLACESMAX)]=0,{@pemit&#160;%#=Places are not configured for this room.},1,{@pemit&#160;%#=[header(Places)]%r[iter(lnum(1,get(%l/PLACESMAX)),[setq(0,get(%l/PLACE%i0))][rjust(%i0,strlen(get(%l/PLACESMAX)))]: [capstr(access(%q0,name))] has [sub(access(%q0,curplaces),words(access(%q0,contents)))] empty places.[if(t(words(access(%q0,contents))),%r[space(add(strlen(get(%l/PLACESMAX)),2))]Present: [itemize(iter(access(%q0,contents),name(%i0),,|),|)])],,%r)]%r[footer()]}
&amp;CMD.PLACE &lt;PG&gt; Places Globals=$place *:@switch [and(gt(%0,0),lte(%0,get(%l/PLACESMAX)))]=0,{@pemit&#160;%#=There is no place with that number at your location.},1,{@pemit&#160;%#=[setq(0,get(%l/PLACE%0))][header(Place&#160;%0)]%r[capstr(access(%q0,name))] has [sub(access(%q0,curplaces),words(access(%q0,contents)))] free places.%r[if(t(words(access(%q0,contents))),Present: [itemize(iter(access(%q0,contents),name(%i0),,|),|)]%r)][if(strlen(access(%q0,desc)),[subheader(Desc)]%r[access(%q0,desc)]%r)][if(or(controls(%#,%l),isstaff(%#)),[subheader(Configuration)]%r[iter(setdiff(v(D.KEYS),desc,|),[ljust(%i0:,10)] [access(%q0,%i0)],|,%r)]%r%rNote that ojoin and odepart messages automatically prepend the player's name.%r)][footer()]}
&amp;CMD.PLOOK &lt;PG&gt; Places Globals=$plook:@switch [hasattr(%l,PLACESMAX)]=0,{@pemit&#160;%#=Places are not configured for this room.},1,{@pemit&#160;%#=[header(Places)]%r[iter(lnum(1,get(%l/PLACESMAX)),[setq(0,get(%l/PLACE%i0))][rjust(%i0,strlen(get(%l/PLACESMAX)))]: [capstr(access(%q0,name))] has [sub(access(%q0,curplaces),words(access(%q0,contents)))] empty places.[if(t(words(access(%q0,contents))),%r[space(add(strlen(get(%l/PLACESMAX)),2))]Present: [itemize(iter(access(%q0,contents),name(%i0),,|),|)])],,%r)]%r[footer()]}
&amp;CMD.PLOOK-ARG &lt;PG&gt; Places Globals=$plook *:@switch [and(gt(%0,0),lte(%0,get(%l/PLACESMAX)))]=0,{@pemit&#160;%#=There is no place with that number at your location.},1,{@pemit&#160;%#=[setq(0,get(%l/PLACE%0))][header(Place&#160;%0)]%r[capstr(access(%q0,name))] has [sub(access(%q0,curplaces),words(access(%q0,contents)))] free places.%r[if(t(words(access(%q0,contents))),Present: [itemize(iter(access(%q0,contents),name(%i0),,|),|)]%r)][if(strlen(access(%q0,desc)),[subheader(Desc)]%r[access(%q0,desc)]%r)][if(or(controls(%#,%l),isstaff(%#)),[subheader(Configuration)]%r[iter(setdiff(v(D.KEYS),desc,|),[ljust(%i0:,10)] [access(%q0,%i0)],|,%r)]%r%rNote that ojoin and odepart messages automatically prepend the player's name.%r)][footer()]}
&amp;CMD.MUTTER &lt;PG&gt; Places Globals=$mutter *=*:@switch/first [setr(0,locate(%#,%0,nimP))]|[hasflag(%q0,CONNECTED)][setq(1,edit(edit(%1,&lt;,),&gt;,))]=#-1|*,{@pemit&#160;%#=There is no player here by that name.},#-2|*,{@pemit&#160;%#=I'm not sure which&#160;%0 you mean.},*|0,{@pemit&#160;%#=There is no player here by that name.},*|1,{@remit&#160;%l=[switch(%1,:* &quot;*&quot;*,{%N is muttering to [ifelse(strmatch(%q0,%#),%oself,name(%q0))]:&#160;%N [u(FN.MUTTER,rest(%1,:))]},:*,{%N is muttering to [ifelse(strmatch(%q0,%#),%oself,name(%q0))]:&#160;%N [rest(%1,:)]},;* &quot;*&quot;*,{%N is muttering to [ifelse(strmatch(%q0,%#),%oself,name(%q0))]:&#160;%N[u(FN.MUTTER,rest(%1,;))]},;*,{%N is muttering to [ifelse(strmatch(%q0,%#),%oself,name(%q0))]:&#160;%N[rest(%1,;)]},{%N mutters to [ifelse(strmatch(%q0,%#),%oself,name(%q0))], [u(FN.MUTTER,&quot;%1&quot;)]})];@pemit&#160;%#=[switch(%1,:*,{You mutter to [ifelse(strmatch(%q0,%#),yourself,name(%q0))]:&#160;%N [rest(%q1,:)]},;*,{You mutter to [ifelse(strmatch(%q0,%#),yourself,name(%q0))]:&#160;%N[rest(%q1,;)]},{You mutter to [ifelse(strmatch(%q0,%#),yourself,name(%q0))], &quot;%q1&quot;})];@if [not(strmatch(%#,%q0))]={@pemit&#160;%q0=[switch(%1,:*,{%N mutters to you:&#160;%N [rest(%q1,:)]},;*,{%N mutters to you:&#160;%N[rest(%q1,;)]},{%N mutters to you, &quot;%q1&quot;})]}}
&amp;CMD.TT &lt;PG&gt; Places Globals=$tt *:@switch [t(setr(0,u(FN.WHICHPLACE,%#,%l)))][setq(p,get(%l/PLACE%q0))]=0,{@pemit&#160;%#=You aren't at a place.},1,{@pemit/list [access(%qp,contents)]=[setr(1,[access(%qp,prefix)]\, [switch(%0,:*,%N [rest(%0,:)],;*,%N[rest(%0,;)],&quot;*,%N says\, &quot;[rest(%0,&quot;)]&quot;,|*,rest(%0,|),%N says\, &quot;%0&quot;)])];@pemit/list [setr(2,setdiff(iter(lcon(%l),if(ismember(access(get(%i0/_SPYING),%l),%q0),%i0)),access(%qp,contents)))]=(Spied at [access(%qp,name)]):&#160;%q1;@if [lt(rand(1,100),access(%qp,mutter))]={@pemit/list [setdiff(lcon(%l),%q2)]=(Overheard at [access(%qp,name)]): [u(FN.MUTTER,%q1)]}}
&amp;CMD.TT/OOC &lt;PG&gt; Places Globals=$tt/ooc *:@switch [t(setr(0,u(FN.WHICHPLACE,%#,%l)))][setq(p,get(%l/PLACE%q0))]=0,{@pemit&#160;%#=You aren't at a place.},1,{@pemit/list [access(%qp,contents)]=[setr(1,&lt;OOC&gt; [access(%qp,prefix)]\, [switch(%0,:*,%N [rest(%0,:)],;*,%N[rest(%0,;)],&quot;*,%N says\, &quot;[rest(%0,&quot;)]&quot;,|*,rest(%0,|),%N says\, &quot;%0&quot;)])]}
&amp;CMD.PLACESCLEANUP &lt;PG&gt; Places Globals=$placescleanup(*):@switch [setq(0,u(FN.WHICHPLACE,%0,%#))][setq(p,get(%#/PLACE%q0))][not(hastype(%#,PLAYER))][gt(%q0,0)]=0*,{@pemit&#160;%#=Permission denied.},10,{},11,{&amp;PLACE%q0&#160;%#=[update(%qp,contents,setdiff(access(%qp,contents),%0))]}
&amp;CMD.PLACE/TEMPLATES &lt;PG&gt; Places Globals=$+place/templates:@pemit&#160;%#=[header(Place Templates)]%r[table(edit(default|[v(D.TEMPLATES)],_,%b),19,78,|)]%r%rUse &quot;+place/template &lt;name&gt;&quot; to see the details of a template.%r[footer()]
&amp;CMD.PLACE/TEMPLATE &lt;PG&gt; Places Globals=$+place/template *:@switch [ismember(setunion(v(D.TEMPLATES),default,|),edit(%0,%b,_),|)][setq(0,v(D.TEMPLATE-[edit(%0,%b,_)]))]=0,{@pemit&#160;%#=There is no template by that name.},1,{@pemit&#160;%#=[header(Place Template: [capall(%0)])]%r%xh%xnDesc:%xn [access(%q0,desc)]%r[subheader(Configuration)]%r[iter(setdiff(v(D.KEYS),desc,|),[ljust(%i0:,10)] [access(%q0,%i0)],|,%r)]%r%rNote that ojoin and odepart messages automatically prepend the player's name.%r[footer()]}
&amp;CMD.PLACE/ADDTEMPLATE &lt;PG&gt; Places Globals=$+place/addtemplate *:@switch [isstaff(%#)][not(ismember(setunion(v(D.TEMPLATES),default,|),edit(%0,%b,_),|))]=0*,{@pemit&#160;%#=Permission denied.},10,{@pemit&#160;%#=There is already a template with that name.},11,{&amp;D.TEMPLATE-[edit(%0,%b,_)] me=[v(D.TEMPLATE-DEFAULT)];&amp;D.TEMPLATES me=[setunion(v(D.TEMPLATES),lcstr(edit(%0,%b,_)),|)];@pemit&#160;%#=Done. Template &quot;[lcstr(%0)]&quot; created. Values copied from default template.}
&amp;CMD.PLACE/DELTEMPLATE &lt;PG&gt; Places Globals=$+place/deltemplate *:@switch [isstaff(%#)][ismember(setunion(v(D.TEMPLATES),default,|),edit(%0,%b,_),|)]=0*,{@pemit&#160;%#=Permission denied.},10,{@pemit&#160;%#=There is no template with that name.},11,{&amp;D.TEMPLATE-[edit(%0,%b,_)] me;&amp;D.TEMPLATES me=[setdiff(v(D.TEMPLATES),lcstr(edit(%0,%b,_)),|)];@pemit&#160;%#=Done. Template &quot;[lcstr(%0)]&quot; deleted.}
&amp;CMD.PLACE/TSET &lt;PG&gt; Places Globals=$+place/tset */*=*:@switch [isstaff(%#)][ismember(setunion(v(D.TEMPLATES),default,|),edit(%0,%b,_),|)][ismember(v(D.KEYS),%1,|)][setq(0,v(D.TEMPLATE-[edit(%0,%b,_)]))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no template with that name.},110,{@pemit&#160;%#=That is not a valid configuration option.},111,{&amp;D.TEMPLATE-[edit(%0,%b,_)] me=[update(%q0,lcstr(%1),[ifelse(strmatch(%2,clear),,%2)],:,|)];@pemit&#160;%#=The [lcstr(%1)] for [lcstr(%0)] is now set to:&#160;%2}
&amp;CMD.SPY &lt;PG&gt; Places Globals=$+spy *:@switch [setq(p,get(%l/PLACE%0))][setq(0,get(%#/_SPYING))][or(isstaff(%#),hastag(%#,placespy))][hasattr(%l,PLACESMAX)][and(gte(%0,0),lte(%0,get(%l/PLACESMAX)))][or(eq(%0,0),eq(access(%qp,spying),1))]=0*,{@pmeit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Your current room is not configured for places.},110*,{@pemit&#160;%#=There is no place with that number in your current location.},1110,{@pemit&#160;%#=You cannot spy on that place.},1111,{@pemit&#160;%#=[case(1,ismember(access(%q0,%l),%0),You stop listening to that place.,eq(%0,0),You stop listening to all places in this room.,You start spying on that place.)];&amp;_SPYING&#160;%#=[update(%q0,%l,case(1,ismember(access(%q0,%l),%0),setdiff(access(%q0,%l),%0),eq(%0,0),,setunion(access(%q0,%l),%0)))]}
&amp;CMD.SPIES &lt;PG&gt; Places Globals=$+spies:@switch [isstaff(%#)]=0,{@pemit&#160;%#=Permission denied.},1,{@pemit&#160;%#=[header(Spies)]%r[table(iter(search(eplayer=hastag(##,placespy)),name(%i0),,|),19,78,|)]%r[footer()]}
&amp;D.KEYS &lt;PG&gt; Places Globals=name|maxplaces|curplaces|fixed|full|empty|join|ojoin|depart|odepart|prefix|desc|mutter|spying
&amp;FN.WHICHPLACE &lt;PG&gt; Places Globals=match(iter(lnum(1,get(%1/PLACESMAX)),ismember(access(get(%1/PLACE%i0),contents),%0)),1)
&amp;FN.MUTTER &lt;PG&gt; Places Globals=iter(%0,ifelse(eq(mod(inum(),2),0),u(FN.COMPRESSDOTS,ifelse(strmatch(%i0,*&lt;*&gt;*),[u(FN.KILLWORDS,before(%i0,&lt;))] [before(after(%i0,&lt;),&gt;)] [u(FN.KILLWORDS,after(%i0,&gt;))],u(FN.KILLWORDS,%i0))),%i0),&quot;,&quot;)
&amp;FN.COMPRESSDOTS &lt;PG&gt; Places Globals=switch(%0,*... ...*,u(FN.COMPRESSDOTS,edit(%0,... ...,...)),%0)
&amp;FN.KILLWORDS &lt;PG&gt; Places Globals=iter(%0,pickrand(%i0 [mid(%i0,0,rand(1,strlen(%i0)))]... ... ...))
&amp;D.TEMPLATE-DEFAULT &lt;PG&gt; Places Globals=contents:|curplaces:4|depart:You leave the table.|desc:This is a simple table surrounded with wooden chairs.|empty:There are no chairs at the table.|fixed:|full:There are no empty seats at the table.|join:You take a seat at the table.|maxplaces:6|mutter:10|name:a table|odepart:stands and leaves the table.|ojoin:takes a seat at the table.|prefix:At your table|spying:1
&amp;D.TEMPLATE-ROOM &lt;PG&gt; Places Globals=contents:|curplaces:8|depart:You go back out to the main room.|desc:This is a small side room with boring taupe walls and brown laminate flooring.|fixed:That's not possible!|full:You couldn't possibly fit another person in the room.|join:You go into the side room.|maxplaces:8|mutter:0|name:a side room|odepart:goes back out to the main room.|ojoin:enters from the main room.|prefix:In the side room|spying:0
&amp;D.TEMPLATES &lt;PG&gt; Places Globals=room
@chown  &lt;PG&gt; Places Globals=#3
@set &lt;PG&gt; Places Globals=!HALTED INHERIT SAFE
drop #9
@@
@@ #10: Meta Rooms Globals
@@
@create &lt;MG&gt; MetaRoom Globals=10
&amp;CMD.META/CREATE &lt;MG&gt; MetaRoom Globals=$+meta/create *:@switch [isstaff(%#)][not(ismember(v(D.META),edit(%0,%b,_),|))]=0*,{@pemit&#160;%#=Permission denied.},10,{@pemit&#160;%#=There is already a Meta Room template with that name.},11,{&amp;D.META me=[setunion(v(D.META),edit(lcstr(%0),%b,_),|)];&amp;D.DATA-[edit(%0,%b,_)] me=article:|desc:|name:|usedby:;@pemit&#160;%#=Done. Meta Room template &quot;[lcstr(%0)]&quot; created.}
&amp;CMD.META/SET &lt;MG&gt; MetaRoom Globals=$+meta/set */*=*:@switch [isstaff(%#)][ismember(v(D.META),edit(%0,%b,_),|)][ismember(v(D.KEYS),%1,|)][setq(0,v(D.DATA-[edit(%0,%b,_)]))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no Meta Room template by that name.},110,{@pemit&#160;%#=There is no data type with that name.},111,{&amp;D.DATA-[edit(%0,%b,_)] me=[update(%q0,%1,ifelse(strmatch(%2,clear),,%2))];@pemit&#160;%#=Done. The [lcstr(%1)] for template &quot;[lcstr(%0)]&quot; has been set to:&#160;%2}
&amp;CMD.META/ADDPROP &lt;MG&gt; MetaRoom Globals=$+meta/addprop */*=*:@switch [isstaff(%#)][ismember(v(D.META),edit(%0,%b,_),|)][setq(0,v(D.PROPS-[edit(%0,%b,_)))]=0*,{@pemit&#160;%#=Permission denied.},10,{@pemit&#160;%#=There is no Meta Room template with that name.},11,{&amp;D.PROPS-[edit(%0,%b,_)] me=[update(%q0,%1,ifelse(t(strlen(access(%q0,%1))),[access(%q0,%1)]^%2,%2))];@pemit&#160;%#=Done. New prop &quot;%2&quot; added to the [lcstr(%1)] category for template [lcstr(%0)].}
&amp;CMD.META/DELPROP &lt;MG&gt; MetaRoom Globals=$+meta/delprop */*=*:@switch [isstaff(%#)][ismember(v(D.META),edit(%0,%b,_),|)][setq(0,v(D.PROPS-[edit(%0,%b,_)))]=0*,{@pemit&#160;%#=Permission denied.},10,{@pemit&#160;%#=There is no Meta Room template with that name.},11,{&amp;D.PROPS-[edit(%0,%b,_)] me=[update(%q0,%1,ldelete(access(%q0,%1),setr(1,match(access(%q0,%1),%2,^)),^))];@pemit&#160;%#=Done. Prop &quot;%2&quot; deleted from the [lcstr(%1)] category for template [lcstr(%0)].}
&amp;CMD.META/LINK &lt;MG&gt; MetaRoom Globals=$+meta/link *:@switch [isstaff(%#)][ismember(v(D.META),edit(%0,%b,_),|)][ismember(get(%l/D.META-LINKS),edit(%0,%b,_),|)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no Meta Room template with that name.},110,{@unlock&#160;%l/D.META-LINKS;&amp;D.META-LINKS&#160;%l=[setunion(get(%l/D.META-LINKS),edit(%0,%b,_),|)];@lock&#160;%l/D.META-LINKS;&amp;D.DATA-[edit(%0,%b,_)] me=[update(setr(0,v(D.DATA-[edit(%0,%b,_)])),usedby,setunion(access(%q0,usedby),%l))];@pemit&#160;%#=Done. Meta Room template &quot;[lcstr(%0)]&quot; linked in&#160;%l - [name(%l)].},111,{@unlock&#160;%l/D.META-LINKS;&amp;D.META-LINKS&#160;%l=[setdiff(get(%l/D.META-LINKS),edit(%0,%b,_),|)];@llock&#160;%l/D.META-LINKS;&amp;D.DATA-[edit(%0,%b,_)] me=[update(setr(0,v(D.DATA-[edit(%0,%b,_)])),usedby,setdiff(access(%q0,usedby),%l))];@pemit&#160;%#=Done. Meta Room template &quot;[lcstr(%0)]&quot; removed from&#160;%l - [name(%l)].}
&amp;CMD.META/LIST &lt;MG&gt; MetaRoom Globals=$+meta/list:@switch [isstaff(%#)]=0,{@pemit&#160;%#=Permission denied.},1,{@pemit&#160;%#=[header(Meta Room Templates)]%r[table(edit(v(D.META),_,%b),19,78,|)]%r[footer()]}
&amp;CMD.META-ARG &lt;MG&gt; MetaRoom Globals=$+meta *:@switch [isstaff(%#)][ismember(v(D.META),edit(%0,%b,_),|)][setq(0,v(D.DATA-[edit(%0,%b,_)]))][setq(1,v(D.PROPS-[edit(%0,%b,_)]))]=0*,{@pemit&#160;%#=Permission denied.},10,{@pemit&#160;%#=There is no Meta Room template by that name.},11,{@pemit&#160;%#=[header(Meta Room Template: [capall(%0)])]%r[iter(setdiff(v(D.KEYS),desc,|),[ljust(%i0:,8)] [access(%q0,%i0)],|,%r)]%r[subheader(Description)]%r[access(%q0,desc)]%r[if(hasattr(me,D.PROPS-[edit(%0,%b,_)]),[subheader(Properties)]%r[iter(%q1,[ljust([capall(first(%i0,:))]:,15)] [itemize(rest(%i0,:),^)],|,%r)]%r)][footer()]}
&amp;CMD.ROOMS &lt;MG&gt; MetaRoom Globals=$+rooms:@switch [hasattr(%l,D.META-LINKS)]=0,{@pemit&#160;%#=There are no Meta Rooms configured for your location.},1,{@pemit&#160;%#=[header(Meta Rooms: [name(%l)])]%r[table(edit(get(%l/D.META-LINKS),_,%b),19,78,|)]%r%rType &quot;+room &lt;name&gt;&quot; for details on a template.%r[footer()]}
&amp;CMD.ROOM &lt;MG&gt; MetaRoom Globals=$+room *:@switch [ismember(get(%l/D.META-LINKS),edit(%0,%b,_),|)][setq(0,v(D.DATA-[edit(%0,%b,_)]))][setq(1,v(D.PROPS-[edit(%0,%b,_)]))]=0,{@pemit&#160;%#=There is no Meta Room template with that name linked at your location.},1,{@pemit&#160;%#=[header(Meta Room Template: [capall(%0)])]%r[ljust(Article:,8)] [access(%q0,article)]%r[ljust(Name:,8)] [access(%q0,name)]%r[ljust(Desc:,8)] [access(%q0,desc)]%r[if(strlen(%q1),[subheader(Properties)]%r[iter(%q1,[ljust([capall(first(%i0,:))]:,15)] [itemize(rest(%i0,:),^)],|,%r)])]%r[footer()]}
&amp;CMD.MAKEROOM/TEST &lt;MG&gt; MetaRoom Globals=$+makeroom/test:@switch [hasattr(%l,D.META-LINKS)][lt(ladd(iter(lexits(%l),hastag(%i0,METAROOM))),5)][setq(0,pickrand(get(%l/D.META-LINKS),|))][setq(1,v(D.DATA-%q0))][setq(2,v(D.PROPS-%q0))]=0*,{@pemit&#160;%#=There are no Meta Rooms configured for your location.},10,{@pemit&#160;%#=This room is already at the limit of 5 Meta Rooms in use.},11,{@pemit&#160;%#=[header(Meta Room Generation Test)]%r[ljust(Name:,10)] [setr(3,u(FN.SUBSTITUTE,access(%q1,name),%q2))]%r[ljust(Desc:,10)] [u(FN.SUBSTITUTE,access(%q1,desc),%q2)]%r[subheader(Other Details)]%r[ljust(Exit To:,10)] M:[iter(%q3,ucstr(mid(%i0,0,1)),,@@)]%r[ljust(Exit From:,10)] O%r%rThere is [ifelse(ismember(iter(lexits(%l),loc(%i0),,|),%q3,|),already a,no)] room with that name linked at your location.%r[footer()]}
&amp;CMD.MAKEROOM &lt;MG&gt; MetaRoom Globals=$+makeroom:@switch [hasattr(%l,D.META-LINKS)][lt(ladd(iter(lexits(%l),hastag(%i0,METAROOM))),5)][setq(0,pickrand(get(%l/D.META-LINKS),|))][setq(1,v(D.DATA-%q0))][setq(2,v(D.PROPS-%q0))][setq(3,u(FN.SUBSTITUTE,access(%q1,name),%q2))][setq(4,u(FN.SUBSTITUTE,access(%q1,desc),%q2))][setq(5,locate(%#,setr(7,M:[iter(%q3,ucstr(mid(%i0,0,1)),,@@)]),e))][not(ismember(iter(lexits(%l),loc(%i0),,|),%q3,|))][ifelse(strmatch(%q5,#-1),1,0)]=0*,{@pemit&#160;%#=There are no Meta rooms configured for your location.},10*,{@pemit&#160;%#=This room is already at the limit of 5 Meta Rooms in use.},110*,{@pemit&#160;%#=Please try again. Your room already has a Meta Room linked with that name.},1110,{@pemit&#160;%#=Please try again. Your generated Meta Room would conflict with an existing exit.},1111,{@dig&#160;%q3;@open [setq(r,lastcreate())]{%q3 &lt;%q7&gt;;%q7}=%qr;@tel [setr(i,lastcreate())]=%l;@open {Out &lt;O&gt;;out;o;back}=%l;@tel [setr(o,lastcreate())]=%qr;@desc&#160;%qr=%q4;&amp;D.METAEXITS&#160;%qr=%qi&#160;%qo;@set&#160;%qr=MONITOR;&amp;METACLEANUP1&#160;%qr=^* has left.:metacleanup;&amp;METACLEANUP2&#160;%qr=^* has disconnected.:metacleanup;+tag&#160;%qr=metaroom;+tag&#160;%qi=metaroom;+tag&#160;%qo=metaroom;@succ&#160;%qi=You enter [setr(6,ifelse(or(strmatch(setr(a,access(%q1,article)),a),strmatch(%qa,an)),art(%q3),%qa))]&#160;%q3.;@osucc&#160;%qi=enters&#160;%q6&#160;%q3.;@odrop&#160;%qi=has arrived.;@succ&#160;%qo=You leave&#160;%q6&#160;%q3.;@osucc&#160;%qo=leaves&#160;%q6&#160;%q3.;@odrop&#160;%qo=arrives from&#160;%q6&#160;%q3.;@remit [loc(%#)]=%N has created&#160;%q3. Type&#160;%q7 to enter.}
&amp;CMD.METACLEANUP &lt;MG&gt; MetaRoom Globals=$metacleanup:@switch [not(hastype(%#,player))][hastag(%#,metaroom)][eq(ladd(iter(lcon(%#),and(hastype(%i0,PLAYER),hasflag(%i0,CONNECTED)))),0)]=0*,{Permission denied.},10*,{},110,{},111,{@dolist [setr(0,get(%#/D.METAEXITS))][lcon(%#)]={@tel ##=[ifelse(hastype(##,PLAYER),loc(last(%q0)),owner(##))]};@dolist&#160;%q0={@destroy/override/instant ##};@remit [loc(last(%q0))]=[name(%#)] fades back into the background of the city.;@wait 0=@destroy/override/instant&#160;%#}
&amp;CMD.MAKEROOM/TEST-NAME &lt;MG&gt; MetaRoom Globals=$+makeroom/test *=*:@switch [hasattr(%l,D.META-LINKS)][lt(ladd(iter(lexits(%l),hastag(%i0,METAROOM))),5)][ismember(get(%l/D.META-LINKS),setr(0,edit(%0,%b,_)),|)][setq(1,v(D.DATA-%q0))][setq(2,v(D.PROPS-%q0))][eq(words(%1),words(access(%q1,name)))][eq(words(setr(3,graball(u(FN.REVSUB,%1,access(%q1,name),%q2),0:*,|)),|),0)]=0*,{@pemit&#160;%#=There are no Meta Rooms configured for your location.},10*,{@pemit&#160;%#=This room is already at the limit of 5 Meta Rooms in use.},110*,{@pemit&#160;%#=That template is not linked to this room.},1110*,{@pemit&#160;%#=Your proposed name must be the same length as the name in the template.},11110,{@pemit&#160;%#=[list(%q3,rest(%i0,:),|)]},11111,{@pemit&#160;%#=[header(Meta Room Generation Test)]%r[ljust(Name:,10)] [setr(3,capall(%1))]%r[ljust(Desc:,10)] [u(FN.SUBSTITUTE,access(%q1,desc),%q2)]%r[subheader(Other Details)]%r[ljust(Exit To:,10)] M:[iter(%q3,ucstr(mid(%i0,0,1)),,@@)]%r[ljust(Exit From:,10)] O%r%rThere is [ifelse(ismember(iter(lexits(%l),loc(%i0),,|),%q3,|),already a,no)] room with that name linked at your location.%r[footer()]}
&amp;CMD.MAKEROOM-TEMPLATE &lt;MG&gt; MetaRoom Globals=$+makeroom *:@switch [not(strmatch(%0,*=*))][hasattr(%l,D.META-LINKS)][lt(ladd(iter(lexits(%l),hastag(%i0,METAROOM))),5)][ismember(get(%l/D.META-LINKS),setr(0,edit(%0,%b,_)),|)][setq(1,v(D.DATA-%q0))][setq(2,v(D.PROPS-%q0))][setq(3,u(FN.SUBSTITUTE,access(%q1,name),%q2))][setq(4,u(FN.SUBSTITUTE,access(%q1,desc),%q2))][setq(5,locate(%#,setr(7,M:[iter(%q3,ucstr(mid(%i0,0,1)),,@@)]),e))][not(ismember(iter(lexits(%l),loc(%i0),,|),%q3,|))][ifelse(strmatch(%q5,#-1),1,0)]=0*,{},10*,{@pemit&#160;%#=There are no Meta rooms configured for your location.},110*,{@pemit&#160;%#=This room is already at the limit of 5 Meta Rooms in use.},1110*,{@pemit&#160;%#=That template is not linked to this room.},11110*,{@pemit&#160;%#=Please try again. Your room already has a Meta Room linked with that name.},111110,{@pemit&#160;%#=Please try again. Your generated Meta Room would conflict with an existing exit.},111111,{@dig&#160;%q3;@open [setq(r,lastcreate())]{%q3 &lt;%q7&gt;;%q7}=%qr;@tel [setr(i,lastcreate())]=%l;@open {Out &lt;O&gt;;out;o;back}=%l;@tel [setr(o,lastcreate())]=%qr;@desc&#160;%qr=%q4;&amp;D.METAEXITS&#160;%qr=%qi&#160;%qo;@set&#160;%qr=MONITOR;&amp;METACLEANUP1&#160;%qr=^* has left.:metacleanup;&amp;METACLEANUP2&#160;%qr=^* has disconnected.:metacleanup;+tag&#160;%qr=metaroom;+tag&#160;%qi=metaroom;+tag&#160;%qo=metaroom;@succ&#160;%qi=You enter [setr(6,ifelse(or(strmatch(setr(a,access(%q1,article)),a),strmatch(%qa,an)),art(%q3),%qa))]&#160;%q3.;@osucc&#160;%qi=enters&#160;%q6&#160;%q3.;@odrop&#160;%qi=has arrived.;@succ&#160;%qo=You leave&#160;%q6&#160;%q3.;@osucc&#160;%qo=leaves&#160;%q6&#160;%q3.;@odrop&#160;%qo=arrives from&#160;%q6&#160;%q3.;@remit [loc(%#)]=%N has created&#160;%q3. Type&#160;%q7 to enter.}
&amp;CMD.MAKEROOM/TEST-TEMPLATE &lt;MG&gt; MetaRoom Globals=$+makeroom/test *:@switch [not(strmatch(%0,*=*))][hasattr(%l,D.META-LINKS)][lt(ladd(iter(lexits(%l),hastag(%i0,METAROOM))),5)][ismember(get(%l/D.META-LINKS),setr(0,edit(%0,%b,_)),|)][setq(1,v(D.DATA-%q0))][setq(2,v(D.PROPS-%q0))]=0*,{},10*,{@pemit&#160;%#=There are no Meta Rooms configured for your location.},110*,{@pemit&#160;%#=This room is already at the limit of 5 Meta Rooms in use.},1110,{@pemit&#160;%#=That template is not linked to this room.},1111,{@pemit&#160;%#=[header(Meta Room Generation Test)]%r[ljust(Name:,10)] [setr(3,u(FN.SUBSTITUTE,access(%q1,name),%q2))]%r[ljust(Desc:,10)] [u(FN.SUBSTITUTE,access(%q1,desc),%q2)]%r[subheader(Other Details)]%r[ljust(Exit To:,10)] M:[iter(%q3,ucstr(mid(%i0,0,1)),,@@)]%r[ljust(Exit From:,10)] O%r%rThere is [ifelse(ismember(iter(lexits(%l),loc(%i0),,|),%q3,|),already a,no)] room with that name linked at your location.%r[footer()]}
&amp;CMD.MAKEROOM-NAME &lt;MG&gt; MetaRoom Globals=$+makeroom *=*:@switch [hasattr(%l,D.META-LINKS)][lt(ladd(iter(lexits(%l),hastag(%i0,METAROOM))),5)][ismember(get(%l/D.META-LINKS),setr(0,edit(%0,%b,_)),|)][setq(1,v(D.DATA-%q0))][setq(2,v(D.PROPS-%q0))][eq(words(%1),words(access(%q1,name)))][eq(words(setr(e,graball(u(FN.REVSUB,%1,access(%q1,name),%q2),0:*,|)),|),0)][setq(3,capall(%1))][setq(4,u(FN.SUBSTITUTE,access(%q1,desc),%q2))][setq(5,locate(%#,setr(7,M:[iter(%q3,ucstr(mid(%i0,0,1)),,@@)]),e))][not(ismember(iter(lexits(%l),loc(%i0),,|),%q3,|))][ifelse(strmatch(%q5,#-1),1,0)]=0*,{@pemit&#160;%#=There are no Meta rooms configured for your location.},10*,{@pemit&#160;%#=This room is already at the limit of 5 Meta Rooms in use.},110*,{@pemit&#160;%#=That template is not linked to this room.},1110*,{@pemit&#160;%#=Your proposed name must be the same length as the name in the template.},11110*,{@pemit&#160;%#=[list(%qe,rest(%i0,:),|)]},111110*,{@pemit&#160;%#=Please try again. Your room already has a Meta Room linked with that name.},1111110,{@pemit&#160;%#=Please try again. Your generated Meta Room would conflict with an existing exit.},1111111,{@dig&#160;%q3;@open [setq(r,lastcreate())]{%q3 &lt;%q7&gt;;%q7}=%qr;@tel [setr(i,lastcreate())]=%l;@open {Out &lt;O&gt;;out;o;back}=%l;@tel [setr(o,lastcreate())]=%qr;@desc&#160;%qr=%q4;&amp;D.METAEXITS&#160;%qr=%qi&#160;%qo;@set&#160;%qr=MONITOR;&amp;METACLEANUP1&#160;%qr=^* has left.:metacleanup;&amp;METACLEANUP2&#160;%qr=^* has disconnected.:metacleanup;+tag&#160;%qr=metaroom;+tag&#160;%qi=metaroom;+tag&#160;%qo=metaroom;@succ&#160;%qi=You enter [setr(6,ifelse(or(strmatch(setr(a,access(%q1,article)),a),strmatch(%qa,an)),art(%q3),%qa))]&#160;%q3.;@osucc&#160;%qi=enters&#160;%q6&#160;%q3.;@odrop&#160;%qi=has arrived.;@succ&#160;%qo=You leave&#160;%q6&#160;%q3.;@osucc&#160;%qo=leaves&#160;%q6&#160;%q3.;@odrop&#160;%qo=arrives from&#160;%q6&#160;%q3.;@remit [loc(%#)]=%N has created&#160;%q3. Type&#160;%q7 to enter.}
&amp;D.KEYS &lt;MG&gt; MetaRoom Globals=article|desc|name
&amp;FN.SUBSTITUTE &lt;MG&gt; MetaRoom Globals=iter(%0,case(1,regmatch(%i0,v(REGEX.DEPENDENT)),ifelse(ismember(%qz,[rest(%i0,-)]:*,|),capall(extract(access(%1,first(rest(%i0,$),-)),access(%qz,rest(%i0,-)),1,^)),[capall(setr(y,pickrand(access(%1,first(rest(%i0,$),-)),^)))][setq(z,update(%qz,rest(%i0,-),match(access(%1,first(rest(%i0,$),-)),%qy,^)))]),regmatch(%i0,v(REGEX.INDEPENDENT)),capall(pickrand(access(%1,rest(%i0,$)),^)),%i0))
&amp;FN.REVSUB &lt;MG&gt; MetaRoom Globals=iter(%0,case(1,ismember(matchall(%1,$*),inum()),ifelse(regmatch(extract(%1,inum(),1),v(REGEX.DEPENDENT)),ifelse(ismember(%qz,[rest(extract(%1,inum(),1),-)]:*,|),ifelse(strmatch(%i0,setr(v,extract(access(%2,first(rest(extract(%1,inum(),1),$),-)),access(%qz,rest(extract(%1,inum(),1),-)),1,^))),1,0:[extract(%1,inum(),1)] is a dependent variable and would need to be '%qv' for the name to work. You entered&#160;%i0.),ifelse(ismember(access(%2,first(rest(extract(%1,inum(),1),$),-)),%i0,^),1[setq(z,update(%qz,rest(extract(%1,inum(),1),-),match(access(%2,first(rest(extract(%1,inum(),1),$),-)),%i0,^)))],0:%i0 is not a member of the [first(extract(%1,inum(),1),-)] property.)),ifelse(ismember(access(%2,rest(extract(%1,inum(),1),$)),%i0,^),1,0:%i0 is not a member of the [extract(%1,inum(),1)] property.)),ifelse(strmatch(%i0,extract(%1,inum(),1)),1,0:%i0 must be [extract(%1,inum(),1)].)),,|)
&amp;REGEX.DEPENDENT &lt;MG&gt; MetaRoom Globals=^.+\-[0-9]+$
&amp;REGEX.INDEPENDENT &lt;MG&gt; MetaRoom Globals=^\$([A-z0-9_]+)(.*)
@chown &lt;MG&gt; MetaRoom Globals=#3
@set &lt;MG&gt; MetaRoom Globals=!HALTED INHERIT SAFE
drop #10
@@
@@ #11: &lt;BT&gt; Building Tracker Globals
@@
think [ansi(hc,MUX Core:)] Setting up the Building Tracker system.
@create &lt;BT&gt; Building Tracker Globals=10
&amp;ISSTAFF &lt;BT&gt; Building Tracker Globals=isstaff(%#)
@lock/UseLock &lt;BT&gt; Building Tracker Globals=ISSTAFF/1
&amp;CMD.BUILD/CREATE &lt;BT&gt; Building Tracker Globals=$+build/create *=*:@switch/first [strmatch(#-1,locate(%vb,%0,i))][isdbref(setr(0,pmatch(%1)))]=0*,{@pemit&#160;%#=There is already a build project by that name. Please use something specific.},10,{@pemit&#160;%#=No such player:&#160;%1},11,{@tr&#160;%vb/TR.CREATE=[secure(%0)],%q0;@pemit&#160;%#=Done. New building project &quot;[secure(%0)]&quot; created for [name(%q0)].}
&amp;CMD.BUILD &lt;BT&gt; Building Tracker Globals=$+build:@switch [t(lcon(%vb,OBJECTS))]=0,{@pemit&#160;%#=There are currently no building projects in the system.},{@pemit&#160;%#=[header(Building Projects)]%r[space(5)]#[space(2)]Name[space(16)]Player[space(10)]Builder[space(8)]Quota[space(2)]Status%r[subheader()];@pemit&#160;%#=[list(sortby(SORTBY.CREATED,lcon(%vb,OBJECT)),[ljust(first(default(%vb/D.PARENTLETTER.[parent(%i0)],!),|),1)]%b[rjust(inum(),4)]%b[ljust(rest(name(%i0),:%b),20)]%b[ljust(case(default(%i0/D.OOC_OWNER,0),0,None,name(get(%i0/D.OOC_OWNER))),15)]%b[ljust(case(setr(0,default(%i0/D.BUILDER,0)),0,None,ifelse(isdbref(%q0),name(%q0),%q0)),16)]%b[ljust(case(isdbref(%q0),0,max(get(%i0/D.QUOTA),0),get(%q0/QUOTA)),4)]%b[case(get(%i0/D.STATUS),0,Approval,1,In Progress,2,Live,Error)])];@pemit&#160;%#=[footer()]}
&amp;CMD.BUILD-ARG &lt;BT&gt; Building Tracker Globals=$+build *:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])]=#0,{@pemit&#160;%#=There is no project by that number.},A0,{@pemit&#160;%#=There is no project that matches that name.},?1,{@pemit&#160;%#=[header(Project Data: [rest(name(%q0),:%b)])]%r[rjust(%xhType:%xn,10)]%b%b[rest(setr(1,default(%vb/D.PARENTLETTER.[parent(%q0)],!|Unknown)),|)] ([first(%q1,|)])%r[rjust(%xhStatus:%xn,10)]%b%b[case(setr(1,get(%q0/D.STATUS)),0,Approval,1,In Progress,2,Live,Error)][if(or(eq(%q1,0),eq(%q1,1)),ifelse(hasflag(%q0,UNINSPECTED),%b(Uninspected),%b(Inspection Complete)))]%r[rjust(%xhOOC Owner:%xn,10)]%b%b[case(default(%q0/D.OOC_OWNER,0),0,None,name(get(%q0/D.OOC_OWNER)))]%r[rjust(%xhIC Owner:%xn,10)]%b%b[case(default(%q0/D.IC_OWNER,0),0,None,get(%q0/D.IC_OWNER))]%r[rjust(%xhBuilder:%xn,10)]%b%b[case(setr(1,default(%q0/D.BUILDER,0)),0,None,ifelse(isdbref(%q1),name(%q1),%q1))]%r[rjust(%xhQuota:%xn,10)]%b%b[case(isdbref(%q1),0,max(get(%q0/D.QUOTA),0),get(%q1/QUOTA))]%r[rjust(%xhIC Loc:%xn,10)]%b%b[setr(1,default(%q0/D.IC_LOC,None))][if(or(not(isdbref(%q1)),not(hastype(%q1,ROOM))),%b(Invalid Room))]%r[rjust(%xhDesc:%xn,10)]%b%b[get_eval(%q0/desc)]%r[footer()]}
&amp;CMD.BUILD/SET &lt;BT&gt; Building Tracker Globals=$+build/set */*=*:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])][t(setr(1,partial(Type|Status|OOC Owner|IC Owner|Builder|Quota|IC Loc|Desc,%1,|)))][first(setr(2,u(FN.GOOD[edit(%q1,%b,_)],%q0,%2)),|)]=#0*,{@pemit&#160;%#=There is no project by that number.},A0*,{@pemit&#160;%#=There is no project that matches that name.},?10*,{@pemit&#160;%#=That's not a valid field for a project. Please see the Project Data readout, and note that input is partially matched.},?110,{@pemit&#160;%#=[rest(%q2,|)]},?111,{@tr me/TR.SET[edit(%q1,%b,_)]=%q0,[rest(%q2,|)];@pemit&#160;%#=Done. Set [rest(name(%q0),:%b)]'s&#160;%q1 to: [rest(%q2,|)]}
&amp;CMD.BUILD/APPROVE &lt;BT&gt; Building Tracker Globals=$+build/approve *:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])][not(eq(setr(1,get(%q0/D.STATUS)),2))][first(setr(2,u(FN.APPROVE.%q1,%q0)),|)]=#0*,{@pemit&#160;%#=There is no project by that number.},A0*,{@pemit&#160;%#=There is no project that matches that name.},?10*,{@pemit&#160;%#=That project is already live on the grid and does not need approval.},?110,{@pemit&#160;%#=[rest(%q2,|)]},?111,{@pemit&#160;%#=Project [rest(name(%q0),:%b)] approved. You can now complete or approve the associated job, or +build/advance. If the build was opened by a Jobs request, please use the jobs system.;@set&#160;%q0=!UNINSPECTED}
&amp;CMD.BUILD/ADVANCE &lt;BT&gt; Building Tracker Globals=$+build/advance *:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])][not(eq(setr(1,get(%q0/D.STATUS)),2))][not(hasflag(%q0,UNINSPECTED))]=#0*,{@pemit&#160;%#=There is no project by that number.},A0*,{@pemit&#160;%#=There is no project that matches that name.},?10*,{@pemit&#160;%#=That project is already live on the grid.},?110,{@pemit&#160;%#=You cannot advance a project that has not been approved.},?111,{@pemit&#160;%#=Advancing [rest(name(%q0),:%b)]. Please wait...;@tr me/TR.ADVANCE.%q1=%q0,%#}
&amp;CMD.BUILD/CHECK &lt;BT&gt; Building Tracker Globals=$+build/check *:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])][not(eq(get(%q0/D.STATUS),0))][t(setr(l,search(get(%q0/D.BUILDER))))]=#0*,{@pemit&#160;%#=There is no project by that number.},A0*,{@pemit&#160;%#=There is no project that matches that name.},?10*,{@pemit&#160;%#=You can only check on projects that are In Progress or Live.},?110,{@pemit&#160;%#=No objects found for that builder.},?111,{@pemit&#160;%#=[header(Building Check: [rest(name(%q0),:%b)])][null(iter(%ql,[setq(1,case(type(%i0),EXIT,e,THING,t,ROOM,r))][setq(%q1,setunion(r(%q1),%i0))]))];@if&#160;%qr={@pemit&#160;%#=[subheader(Rooms)];@pemit&#160;%#=[list(%qr,[rjust(inum(),2)]: [name(%i0)](%i0)%r[space(4)]Desc: [ifelse(strlen(get(%i0/desc)),Set,Not Set)])]};@if&#160;%qe={@pemit&#160;%#=[subheader(Exits)];@pemit&#160;%#=[list(%qe,[rjust(inum(),2)]: [name(%i0)](%i0)%r[space(4)]Desc: [ifelse(strlen(get(%i0/DESC)),Set,Not Set)]%tSucc: [ifelse(strlen(get(%i0/SUCC)),Set,Not Set)]%tOsucc: [ifelse(strlen(get(%i0/OSUCC)),Set,Not Set)]%tOdrop: [ifelse(strlen(get(%i0/ODROP)),Set,Not Set)])]};@if&#160;%qt={@pemit&#160;%#=[subheader(Objects)];@pemit&#160;%#=[list(%qt,[rjust(inum(),2)]: [name(%i0)](%i0))]};@wait 0={@pemit&#160;%#=[footer()]}}
&amp;CMD.BUILD/UNAPPROVE &lt;BT&gt; Building Tracker Globals=$+build/unapprove *:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])][eq(get(%q0/D.STATUS),2)]=#0*,{@pemit&#160;%#=There is no project by that number.},A0*,{@pemit&#160;%#=There is no project that matches that name.},?10,{@pemit&#160;%#=You can only unapprove builds that are live.},?11,{@tel [setr(e,regrab(iter(lexits(get(%q0/D.IC_LOC)),if(strmatch(%q0,zone(%i0)),%i0)),.+))]=%vn;@link [regrab(iter(lexits(loc(%qe)),if(strmatch(get(%q0/D.IC_LOC),loc(%i0)),%i0)),.+)]=%vn;&amp;D.STATUS&#160;%q0=1;@set&#160;%q0=UNINSPECTED;@pemit&#160;%#=Done. Project [rest(name(%q0),:%b)] unapproved and sent back to the Building Nexus(%vn).}
&amp;CMD.BUILD/DESTROY &lt;BT&gt; Building Tracker Globals=$+build/destroy *:@switch [ifelse(isnum(%0),#[t(setr(0,extract(sortby(SORTBY.CREATED,lcon(%vb,OBJECTS)),%0,1)))],A[isdbref(setr(0,last(partial(iter(lcon(%vb,OBJECTS),[rest(name(%i0),:%b)]:%i0,,|),%0,|),:)))])][hasflag(%#,WIZARD)]=#0*,{@pemit&#160;%#=There is no project by that number.},A0*,{@pemit&#160;%#=There is no project that matches that name.},?10,{@pemit&#160;%#=Permission denied.},?11,{@pemit&#160;%#=Destroying [rest(name(%q0),:%b)]...;@tr me/TR.DESTROY=%q0,%#}
&amp;CMD.BUILD/ADDTYPE &lt;BT&gt; Building Tracker Globals=$+build/addtype */*=*:@switch [null(iter(lattr(%vb/D.PARENTLETTER.*),[setr(z,get(%vb/%i0))][setq(l,setunion(%ql,first(%qz,|)))][setq(d,setunion(%qd,rest(%qz,|),|))]))][eq(strlen(%0),1)][not(ismember(%ql,%0))][lte(strlen(%1),30)][not(ismember(%qd,%1,|))][isdbref(%2)][hasattr(%2,FN.DESC)][not(hasattr(%vb,D.PARENTLETTER.%2))]=0*,{@pemit&#160;%#=The type letter should be one character only.},10*,{@pemit&#160;%#=That type letter is already in use.},110*,{@pemit&#160;%#=The type description should be brief: 30 characters or less.},1110*,{@pemit&#160;%#=That type description is already in use.},11110*,{@pemit&#160;%#=The type parent must be the dbref of the parent object.},111110*,{@pemit&#160;%#=The parent object must have an FN.DESC attribute that will append command information to the bottom of the room description.},1111110,{@pemit&#160;%#=That parent object is already being used for another type.},1111111,{@pemit&#160;%#=Done. Added type [capstr(%0)] ([capall(%1)]) with parent&#160;%2.;&amp;D.PARRENTLETTER.%2&#160;%vb=[capstr(%0)]|[capall(%1)]}
&amp;CMD.BUILD/TYPES &lt;BT&gt; Building Tracker Globals=$+build/types:@switch [t(lattr(%vb/D.PARENTLETTER.*))]=0,{@pemit&#160;%#=There are currently no type parents defined.},{@pemit&#160;%#=[header(Building Project Parents)]%r[iter(sort(setdiff(lattr(%vb/D.PARENTLETTER.*),D.PARENTLETTER.#-1)),[rjust(inum(),2)]: [name(last(%i0,.))] ([last(%i0,.)])%r[space(4)]In Use: [words(children(last(%i0,.)))]%b%bType Letter: [first(get(%vb/%i0),|)]%b%bDescription: [rest(get(%vb/%i0),|)],,%r)]%r[footer()]}
&amp;FN.GOODTYPE &lt;BT&gt; Building Tracker Globals=localize(case(1,hasattr(%vb,D.PARENTLETTER.%1),1|%1,t(setr(0,partial(iter(lattr(%vb/D.PARENTLETTER.*),[first(get(%vb/%i0),|)]:[last(%i0,.)],,|),%1,|))),1|[rest(%q0,:)],0|No such type. See +build/types for a list.))
&amp;FN.GOODSTATUS &lt;BT&gt; Building Tracker Globals=localize(case(1,hasflag(%0,UNINSPECTED),0|You cannot advance the status of a build whose current status is uninspected.,not(eq(%1,inc(get(%0/D.STATUS)))),0|You may only increment a build's status by 1.,1))
&amp;FN.GOODOOC_OWNER &lt;BT&gt; Building Tracker Globals=localize(case(isdbref(setr(0,pmatch(%1))),1,1|%q0,0|No such player:&#160;%1))
&amp;FN.GOODIC_OWNER &lt;BT&gt; Building Tracker Globals=1|[secure(%1)]
&amp;FN.GOODBUILDER &lt;BT&gt; Building Tracker Globals=case(1,isdbref(pmatch(%1)),0|There is already a builder character by that name.,not(eq(get(%0/D.STATUS),0)),0|You may only set a builder in the approval stage of a project.,1|%1)
&amp;FN.GOODQUOTA &lt;BT&gt; Building Tracker Globals=case(0,isposint(%1),0|That's not a reasonable number for project quota.,1|%1)
&amp;FN.GOODDESC &lt;BT&gt; Building Tracker Globals=1|%1
&amp;FN.GOODIC_LOC &lt;BT&gt; Building Tracker Globals=case(0,isdbref(%1),0|That is not a valid dbref.,hastype(%1,ROOM),0|Link location must be a room.,1|%1)
&amp;TR.SETTYPE &lt;BT&gt; Building Tracker Globals=@parent&#160;%0=%1
&amp;TR.SETSTATUS &lt;BT&gt; Building Tracker Globals=&amp;D.STATUS&#160;%0=[inc(get(%0/D.STATUS))];@set&#160;%0=UNINSPECTED
&amp;TR.SETOOC_OWNER &lt;BT&gt; Building Tracker Globals=&amp;D.OOC_OWNER&#160;%0=%1
&amp;TR.SETIC_OWNER &lt;BT&gt; Building Tracker Globals=&amp;D.IC_OWNER&#160;%0=%1
&amp;TR.SETBUILDER &lt;BT&gt; Building Tracker Globals=&amp;D.BUILDER&#160;%0=%1
&amp;TR.SETQUOTA &lt;BT&gt; Building Tracker Globals=&amp;D.QUOTA&#160;%0=%1;@quota [get(%0/D.BUILDER)]=%1
&amp;TR.SETDESC &lt;BT&gt; Building Tracker Globals=@desc&#160;%0=%1
&amp;TR.SETIC_LOC &lt;BT&gt; Building Tracker Globals=&amp;D.IC_LOC&#160;%0=%1
&amp;FN.APPROVE.0 &lt;BT&gt; Building Tracker Globals=case(0,hasflag(%0,UNINSPECTED),0|That project has already been approved at its current status.,hasattr(%0,D.BUILDER),0|There is no builder set for that project.,not(isdbref(pmatch(get(%0/D.BUILDER)))),0|The builder name for that project has been taken.,gte(get(%0/D.QUOTA),3),0|A project must have at least 3 quota to be created.,t(parent(%0)),0|That project does not have a build type set.,1)
&amp;FN.APPROVE.1 &lt;BT&gt; Building Tracker Globals=case(0,hasflag(%0,UNINSPECTED),0|That project has already been approved at its current status.,hasattr(%0,D.BUILDER),0|There is no builder set for that project.,isdbref(pmatch(get(%0/D.OOC_OWNER))),0|The OOC Owner set on the project is not a valid player.,strlen(get(%0/D.IC_OWNER)),0|That project does not have an IC Owner set.,strlen(get(%q0/DESC)),0|Please provide a short description of the project.,t(hastype(get(%0/D.IC_LOC),ROOM)),0|The IC link location for this project must be a room.,isposint(get(%0/D.QUOTA)),0|You must set a positive amount of quota for the project.,1)
&amp;TR.ADVANCE.0 &lt;BT&gt; Building Tracker Globals=@pcreate [setr(b,get(%0/D.BUILDER))]=[setr(0,mid(lcstr(sha1(secs(,6))),rand(32),8))];@power [pmatch(%qb)]=builder;@quota/set [pmatch(%qb)]=[get(%0/D.QUOTA)];@tel [pmatch(%qb)]=%vn;&amp;D.BUILDER&#160;%0=[pmatch(%qb)];&amp;D.OWNERS&#160;%0=[pmatch(%qb)];@pemit&#160;%1=%qb created as [pmatch(%qb)] and @tel'd to the Building Nexus. Password is:&#160;%q0;&amp;D.INITIALPASS&#160;%0=%q0;@chzone [pmatch(%qb)]=%0;@pemit&#160;%1=%qb has been zoned to [name(%0)]. Everything&#160;%qb creates will inherit this zone.;@fo [pmatch(%qb)]={@dig {Building Nexus -- [setr(n,rest(name(%0),:%b))]}={%qn &lt;[setr(l,iter(extract(%qn,1,2),mid(%i0,0,1),,@@))]&gt;;%ql},{Out &lt;O&gt;;out;o;back}};@wait 0={@pemit&#160;%1=Initial room and exits dug in the Building Nexus.;&amp;D.STATUS&#160;%0=1;@set&#160;%0=UNINSPECTED}
&amp;TR.ADVANCE.1 &lt;BT&gt; Building Tracker Globals=@tel [setq(b,get(%0/D.BUILDER))][setr(e,first(setinter(lexits(%vn),search(%qb))))]=[setr(l,get(%0/D.IC_LOC))];@link [regrab(iter(lexits(loc(%qe)),if(strmatch(%vn,loc(%i0)),%i0)),.+)]=%ql;@pemit&#160;%1=Exits moved to [name(%ql)](%ql) and relinked accordingly.;&amp;D.STATUS&#160;%0=2
&amp;TR.DESTROY &lt;BT&gt; Building Tracker Globals=@if [get(%0/D.STATUS)]={@dolist [search(get(%0/D.BUILDER))]={@destroy/override/instant ##};@destroy/override/instant [get(%0/D.BUILDER)]};@wait 0={@destroy/override/instant&#160;%0;@pemit&#160;%1=Done. [rest(name(%0),:%b)] has been destroyed.}
&amp;SORTBY.CREATED &lt;BT&gt; Building Tracker Globals=comp(convtime(get(%0/Created)),convtime(get(%1/Created)))
&amp;APR_ACCESS &lt;BT&gt; Building Tracker Globals=not(hasflag(v(D.BUILD),UNINSPECTED))
&amp;COM_ACCESS &lt;BT&gt; Building Tracker Globals=not(hasflag(v(D.BUILD),UNINSPECTED))
@vb #11=#12
@vn #11=#55
@chown &lt;BT&gt; Building Tracker=#3
@set &lt;BT&gt; Building Tracker Globals=!HALTED INHERIT SAFE
@power &lt;BT&gt; Building Tracker Globals=builder
drop #11
@@
@@ #12: &lt;BT&gt; Building Tracker
@@
@create &lt;BT&gt; Building Tracker=10
&amp;TR.CREATE &lt;BT&gt; Building Tracker=@create ZMO:&#160;%0;&amp;D.OOC_OWNER [setr(0,lastcreate())]=%1;&amp;D.STATUS&#160;%q0=0;@set&#160;%q0=UNINSPECTED SAFE INHERIT;@desc&#160;%q0=Proposed build project.
&amp;D.PARENTLETTER.#-1 &lt;BT&gt; Building Tracker=X|None
&amp;D.PARENTLETTER.#46 &lt;BT&gt; Building Tracker=R|Residential
&amp;D.PARENTLETTER.#47 &lt;BT&gt; Building Tracker=B|Business
@chown &lt;BT&gt; Building Tracker=#3
@set &lt;BT&gt; Building Tracker=!HALTED INHERIT SAFE
@tel #12=#11
@@
@@ #13: &lt;HP&gt; Help Commands: Player
@@
think [ansi(hc,MUX Core:)] Installing +Help and +Shelp commands.
@create &lt;HP&gt; Help Commands: Player=10
&amp;CMD.HELP &lt;HP&gt; Help Commands: Player=$+help:@pemit&#160;%#=[setq(0,%vh)][header([mudname()] +Help Files)]%r%r[setq(1,get(%#/D.READ.HELP))][iter([get(%q0/D.CATEGORIES)][if(hasattr(%q0,D.CAT.UNCATEGORIZED),|Uncategorized)],[subheader(%i0)]%r[edit(columns(iter(lcstr(get(%q0/D.CAT.[edit(%i0,%b,_)])),[ifelse(or(eq(strlen(grab(%q1,%i0:*,|)),0),lt(rest(grab(%q1,%i0:*,|),:),first(get(%q0/D.HELP.%i0),|))),%xh%xr*%xn,|)]%i0),18,,1),|,%b)],|,%r)]%r[footer()]
&amp;CMD.HELP_WITH_ARG &lt;HP&gt; Help Commands: Player=$+help *:@switch/first [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][not(strmatch(%0,*/*))][first(%q1,:)][t(strlen(grab(get(%q0/D.CATEGORIES),%0,|)))]=0*,,11*,{@pemit&#160;%#=[setq(z,get(%q0/D.HELP.[rest(%q1,:)]))][u(%q0/FN.DISPLAYFILE,rest(%q1,:),%qz,%#)];&amp;D.READ.HELP&#160;%#=[ifelse(setr(3,grab(setr(2,get(%#/D.READ.HELP)),[rest(%q1,:)]:*,|)),replace(%q2,member(%q2,%q3,|),[rest(%q1,:)]:[secs()],|),setunion(%q2,[rest(%q1,:)]:[secs()],|))]},101,{@pemit&#160;%#=[header([mudname()] +Help Files)]%r%r[setq(1,get(%#/D.READ.HELP))][subheader(setr(2,grab(get(%q0/D.CATEGORIES),%0,|)))]%r%b[edit(columns(iter(lcstr(get(%q0/D.CAT.[edit(%q2,%b,_)])),[ifelse(strlen(grab(%q1,%i0:*,|)),|,%xh%xr*%xn)]%i0),18,,1),|,%b)]%r[footer()]},{@pemit&#160;%#=No file or category matches '%0'.;@cemit Scan=Failed +help:&#160;%N tried '+help&#160;%xh%0%xn'.}
&amp;CMD.HELP_SUB &lt;HP&gt; Help Commands: Player=$+help */*:@switch [setq(0,%vh)][setq(2,ulocal(%q0/FN.MATCHFILE,%0))][first(%q2,:)][hasattr(%q0,D.HELP.[rest(%q2,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '%0'.},11,{@pemit&#160;%#=[setq(z,get(%q0/D.HELP.[rest(%q2,:)].%1))][u(%q0/FN.DISPLAYSUBFILE,lcstr(rest(%q2,:)),lcstr(%1),%qz)];&amp;D.READ.HELP&#160;%#=[ifelse(setr(3,grab(setr(4,get(%#/D.READ.HELP)),[rest(%q2,:)].%1:*,|)),replace(%q4,member(%q4,%q3,|),[rest(%q2,:)].[lcstr(%1)]:[secs()],|),setunion(%q4,[rest(%q2,:)].[lcstr(%1)]:[secs()],|))]}
@VH &lt;HP&gt; Help Commands: Player=#16
@chown &lt;HP&gt; Help Commands: Player=#3
@set &lt;HP&gt; Help Commands: Player=!HALTED INHERIT SAFE
drop #13
@@
@@ #14: &lt;HS&gt; Help Commands: Staff
@@
@create &lt;HS&gt; Help Commands: Staff=10
&amp;CMD.HELP/ADD &lt;HS&gt; Help Commands: Staff=$+help/add *=*:@switch [setq(0,%vh)][not(gt(words(%0),1))][not(gt(strlen(%0),17))][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][not(first(%q1,:))]=0*,{@pemit&#160;%#=Help file names must be one word.},10*,{@pemit&#160;%#=Help file names must not exceed 17 characters.},110,{@pemit&#160;%#=There is already a help file by that name or keyword.},111,{&amp;D.HELP.%0&#160;%q0=[secs()]|||[edit(%1,|,(pipe))];@pemit&#160;%#=Done. New file '%0' created.;+help/update}
&amp;CMD.HELP/CAT &lt;HS&gt; Help Commands: Staff=$+help/cat *=*:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][t(strlen(grab(get(%q0/D.CATEGORIES),%1,|)))]=0*,{@pemit&#160;%#=No such no help file '%0'.},10,{@pemit&#160;%#=No such category '%1'.},11,{&amp;D.HELP.[rest(%q1,:)]&#160;%q0=[replace(get(%q0/D.HELP.[rest(%q1,:)]),3,%1,|)];@Pemit&#160;%#=Done. Category of file '[rest(%q1,:)]' set to '[lcstr(%1)]'.;+help/update}
&amp;CMD.HELP/ADDKEY &lt;HS&gt; Help Commands: Staff=$+help/addkey *=*:@switch [setq(0,%vh)][setq(f,ulocal(%q0/FN.MATCHFILE,%0))][first(%qf,:)][not(t(strlen(setr(1,grab(get(%q0/D.KEYWORDS),%1:*,|)))))]=0*,{@pemit&#160;%#=No such help file '%0'.},10,{@pemit&#160;%#=The keyword '%1' is already in use for file [rest(%q1,:)].},11,{&amp;D.HELP.[rest(%qf,:)]&#160;%q0=[setq(2,get(%q0/D.HELP.[rest(%qf,:)]))][replace(%q2,2,setunion(extract(%q2,2,1,|),lcstr(%1)),|)];&amp;D.KEYWORDS&#160;%q0=[setunion(get(%q0/D.KEYWORDS),[lcstr(%1)]:[rest(%qf,:)],|)];@pemit&#160;%#=Done. Keyword '[lcstr(%1)]' added as an alias for file '[rest(%qf,:)]'.;+help/update}
&amp;CMD.HELP/DELKEY &lt;HS&gt; Help Commands: Staff=$+help/delkey *=*:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][and(strlen(setr(2,grab(get(%q0/D.KEYWORDS),%1:*,|))),strmatch(rest(%q1,:),rest(%q2,:)))]=0*,{@pemit&#160;%#=No such help file '%0'},10,{@pemit&#160;%#=No such keyword '%1' for main file '[rest(%q1,:)]'.},11,{&amp;D.HELP.[rest(%q1,:)]&#160;%q0=[setq(3,get(%q0/D.HELP.[rest(%q1,:)]))][replace(%q3,2,setdiff(extract(%q3,2,1,|),lcstr(first(%q2,:))),|)];@pemit&#160;%#=Done. Keyword '[lcstr(%1)]' deleted as an alias for file '[rest(%q1,:)]'.;+help/update}
&amp;CMD.HELP/ADDSUB &lt;HS&gt; Help Commands: Staff=$+help/addsub */*=*:@switch [setq(0,%vh)][not(gt(words(%1),1))][not(gt(strlen(%1,20)))][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][not(hasattr(%q0,D.HELP.[rest(%q1,:)].%1))]=0*,{@pemit&#160;%#=Sub-Title names must be one word.},10*,{@pemit&#160;%#=Sub-Title names must not exceed 20 characters.},110*,{@pemit&#160;%#=No such main help file '%0'.},1110,{@pemit&#160;%#=There is already a sub-file of '[rest(%q1,:)]' by that name.},1111,{&amp;D.HELP.[rest(%q1,:)].%1&#160;%q0=[secs()]|[edit(%2,|,(pipe))];@pemit&#160;%#=Done. New sub-file '%1' created.;+help/update}
&amp;CMD.HELP/VIEWCODE &lt;HS&gt; Help Commands: Staff=$+help/viewcode *:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][not(strmatch(%0,*/*))][first(%q1,:)]=0*,,10,{@pemit&#160;%#=No such main help file '[lcstr(%0)]'.},11,{@Pemit&#160;%#=The unparsed data for&#160;%xh[rest(%q1,:)]%xn follows:%r%b[translate(edit(last(get(%q0/D.HELP.[rest(%q1,:)]),|),(pipe),|),1)]}
&amp;CMD.HELP/VIEWCODE-SUB &lt;HS&gt; Help Commands: Staff=$+help/viewcode */*:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][hasattr(%q0,D.HELP.[rest(%q1,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '[rest(%q1,:)]'.},11,{@pemit&#160;%#=The unparsed data for&#160;%xh[lcstr(rest(%q1,:))]/[lcstr(%1)]%xn follows:%r%b[translate(edit(last(get(%q0/D.HELP.[rest(%q1,:)].%1),|),(pipe),|),1)]}
&amp;CMD.HELP/EDIT &lt;HS&gt; Help Commands: Staff=$+help/edit *=*,*:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)]=0,{@pemit&#160;%#=No such main help file '%0'.},1,{&amp;D.HELP.[rest(%q1,:)]&#160;%q0=[setq(2,get(%q0/D.HELP.[rest(%q1,:)]))][secs()]|[replace(rest(%q2,|),3,edit(extract(%q2,4,1,|),edit(%1,|,(pipe)),edit(%2,|,(pipe))),|)];@pemit&#160;%#=Done. Edit applied.;@fo&#160;%#=+help&#160;%0}
&amp;CMD.HELP/EDITSUB &lt;HS&gt; Help Commands: Staff=$+help/editsub */*=*,*:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][hasattr(%q0,D.HELP.[rest(%q1,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '[rest(%q1,:)]'.},11,{&amp;D.HELP.[rest(%q1,:)].%1&#160;%q0=[setq(2,get(%q0/D.HELP.[rest(%q1,:)].%1))][secs()]|[edit(rest(%q2,|),edit(%2,|,(pipe)),edit(%3,|,(pipe)))];@pemit&#160;%#=Done. Edit applied.;@fo&#160;%#=+help&#160;%0/%1}
&amp;CMD.HELP/STAFFHELP &lt;HS&gt; Help Commands: Staff=$+help/staffhelp:@pemit&#160;%#=[header([mudname()] Staff +Help Commands)]%r%b+help/add &lt;filename&gt;=&lt;text&gt;%r%b+help/cat &lt;filename&gt;=&lt;category&gt;%r%b+help/addkey &lt;filename&gt;=&lt;additional keyword&gt;%r%b+help/delkey &lt;filename&gt;=&lt;keyword to delete&gt;%r%b+help/edit &lt;file&gt;=&lt;old&gt;,&lt;new&gt; (Search and replace)%r%t - Note you can use ^,&lt;text&gt; to add to the very beginning%r%t[space(3)]of a file, and $,&lt;text&gt; to add to the very end.%r%b+help/viewcode (Returns unparsed text)%r[space(4)]CATEGORIES: [wrap(itemize(get(%vh/D.CATEGORIES),|),78,,,,16,,60)]%r%b+help/addsub &lt;main file&gt;/&lt;sub file&gt;=&lt;text&gt;%r%b+help/editsub &lt;main&gt;/&lt;sub&gt;=&lt;old&gt;,&lt;new&gt; (Same rules as above)%r%b+help/viewcode &lt;main&gt;/&lt;sub&gt;%r%r%b+help/update (Index help files)%r[footer()]
&amp;CMD.HELP/UPDATE &lt;HS&gt; Help Commands: Staff=$+help/update:@tr&#160;%vh/startup=quiet;@pemit&#160;%#=Done. Help files and categories indexed.
&amp;CMD.SHELP &lt;HS&gt; Help Commands: Staff=$+shelp:@pemit&#160;%#=[setq(0,%vs)][header([mudname()] +Shelp Files)]%r%r[setq(1,get(%#/D.READ.SHELP))][iter([get(%q0/D.CATEGORIES)][if(hasattr(%q0,D.CAT.UNCATEGORIZED),|Uncategorized)],[subheader(%i0)]%r[edit(columns(iter(lcstr(get(%q0/D.CAT.[edit(%i0,%b,_)])),[ifelse(or(eq(strlen(grab(%q1,%i0:*,|)),0),lt(rest(grab(%q1,%i0:*,|),:),first(get(%q0/D.SHELP.%i0),|))),%xh%xr*%xn,|)]%i0),18,,1),|,%b)],|,%r)]%r[footer()]
&amp;CMD.SHELP_WITH_ARG &lt;HS&gt; Help Commands: Staff=$+shelp *:@switch/first [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][not(strmatch(%0,*/*))][first(%q1,:)][t(strlen(grab(get(%q0/D.CATEGORIES),%0,|)))]=0*,,11*,{@pemit&#160;%#=[setq(z,get(%q0/D.SHELP.[rest(%q1,:)]))][u(%q0/FN.DISPLAYFILE,rest(%q1,:),%qz,%#)];&amp;D.READ.SHELP&#160;%#=[ifelse(setr(3,grab(setr(2,get(%#/D.READ.SHELP)),[rest(%q1,:)]:*,|)),replace(%q2,member(%q2,%q3,|),[rest(%q1,:)]:[secs()],|),setunion(%q2,[rest(%q1,:)]:[secs()],|))]},101,{@pemit&#160;%#=[header([mudname()] +Shelp Files)]%r%r[setq(1,get(%#/D.READ.SHELP))][subheader(setr(2,grab(get(%q0/D.CATEGORIES),%0,|)))]%r%b[edit(columns(iter(lcstr(get(%q0/D.CAT.[edit(%q2,%b,_)])),[ifelse(strlen(grab(%q1,%i0:*,|)),|,%xh%xr*%xn)]%i0),18,,1),|,%b)]%r[footer()]},{@pemit&#160;%#=No file or category matches '%0'.;@cemit Scan=Failed +shelp:&#160;%N tried '+shelp&#160;%xh%0%xn'.}
&amp;CMD.SHELP_SUB &lt;HS&gt; Help Commands: Staff=$+shelp */*:@switch [setq(0,%vs)][setq(2,ulocal(%q0/FN.MATCHFILE,%0))][first(%q2,:)][hasattr(%q0,D.SHELP.[rest(%q2,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '%0'.},11,{@pemit&#160;%#=[setq(z,get(%q0/D.SHELP.[rest(%q2,:)].%1))][u(%q0/FN.DISPLAYSUBFILE,lcstr(rest(%q2,:)),lcstr(%1),%qz)];&amp;D.READ.SHELP&#160;%#=[ifelse(setr(3,grab(setr(4,get(%#/D.READ.SHELP)),[rest(%q2,:)].%1:*,|)),replace(%q4,member(%q4,%q3,|),[rest(%q2,:)].[lcstr(%1)]:[secs()],|),setunion(%q4,[rest(%q2,:)].[lcstr(%1)]:[secs()],|))]}
&amp;CMD.SHELP/ADD &lt;HS&gt; Help Commands: Staff=$+shelp/add *=*:@switch [setq(0,%vs)][not(gt(words(%0),1))][not(gt(strlen(%0),17))][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][not(first(%q1,:))]=0*,{@pemit&#160;%#=Help file names must be one word.},10*,{@pemit&#160;%#=Help file names must not exceed 17 characters.},110,{@pemit&#160;%#=There is already a help file by that name or keyword.},111,{&amp;D.SHELP.%0&#160;%q0=[secs()]|||[edit(%1,|,(pipe))];@pemit&#160;%#=Done. New file '%0' created.;+shelp/update}
&amp;CMD.SHELP/CAT &lt;HS&gt; Help Commands: Staff=$+shelp/cat *=*:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][t(strlen(grab(get(%q0/D.CATEGORIES),%1,|)))]=0*,{@pemit&#160;%#=No such no help file '%0'.},10,{@pemit&#160;%#=No such category '%1'.},11,{&amp;D.SHELP.[rest(%q1,:)]&#160;%q0=[replace(get(%q0/D.SHELP.[rest(%q1,:)]),3,%1,|)];@Pemit&#160;%#=Done. Category of file '[rest(%q1,:)]' set to '[lcstr(%1)]'.;+shelp/update}
&amp;CMD.SHELP/ADDKEY &lt;HS&gt; Help Commands: Staff=$+shelp/addkey *=*:@switch [setq(0,%vs)][setq(f,ulocal(%q0/FN.MATCHFILE,%0))][first(%qf,:)][not(t(strlen(setr(1,grab(get(%q0/D.KEYWORDS),%1:*,|)))))]=0*,{@pemit&#160;%#=No such help file '%0'.},10,{@pemit&#160;%#=The keyword '%1' is already in use for file [rest(%q1,:)].},11,{&amp;D.SHELP.[rest(%qf,:)]&#160;%q0=[setq(2,get(%q0/D.SHELP.[rest(%qf,:)]))][replace(%q2,2,setunion(extract(%q2,2,1,|),lcstr(%1)),|)];&amp;D.KEYWORDS&#160;%q0=[setunion(get(%q0/D.KEYWORDS),[lcstr(%1)]:[rest(%qf,:)],|)];@pemit&#160;%#=Done. Keyword '[lcstr(%1)]' added as an alias for file '[rest(%qf,:)]'.;+shelp/update}
&amp;CMD.SHELP/DELKEY &lt;HS&gt; Help Commands: Staff=$+shelp/delkey *=*:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][and(strlen(setr(2,grab(get(%q0/D.KEYWORDS),%1:*,|))),strmatch(rest(%q1,:),rest(%q2,:)))]=0*,{@pemit&#160;%#=No such help file '%0'},10,{@pemit&#160;%#=No such keyword '%1' for main file '[rest(%q1,:)]'.},11,{&amp;D.SHELP.[rest(%q1,:)]&#160;%q0=[setq(3,get(%q0/D.SHELP.[rest(%q1,:)]))][replace(%q3,2,setdiff(extract(%q3,2,1,|),lcstr(first(%q2,:))),|)];@pemit&#160;%#=Done. Keyword '[lcstr(%1)]' deleted as an alias for file '[rest(%q1,:)]'.;+shelp/update}
&amp;CMD.SHELP/ADDSUB &lt;HS&gt; Help Commands: Staff=$+shelp/addsub */*=*:@switch [setq(0,%vs)][not(gt(words(%1),1))][not(gt(strlen(%1,20)))][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][not(hasattr(%q0,D.SHELP.[rest(%q1,:)].%1))]=0*,{@pemit&#160;%#=Sub-Title names must be one word.},10*,{@pemit&#160;%#=Sub-Title names must not exceed 20 characters.},110*,{@pemit&#160;%#=No such main help file '%0'.},1110,{@pemit&#160;%#=There is already a sub-file of '[rest(%q1,:)]' by that name.},1111,{&amp;D.SHELP.[rest(%q1,:)].%1&#160;%q0=[secs()]|[edit(%2,|,(pipe))];@pemit&#160;%#=Done. New sub-file '%1' created.;s+help/update}
&amp;CMD.SHELP/VIEWCODE &lt;HS&gt; Help Commands: Staff=$+shelp/viewcode *:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][not(strmatch(%0,*/*))][first(%q1,:)]=0*,,10,{@pemit&#160;%#=No such main help file '[lcstr(%0)]'.},11,{@Pemit&#160;%#=The unparsed data for&#160;%xh[rest(%q1,:)]%xn follows:%r%b[translate(edit(last(get(%q0/D.SHELP.[rest(%q1,:)]),|),(pipe),|),1)]}
&amp;CMD.SHELP/VIEWCODE-SUB &lt;HS&gt; Help Commands: Staff=$+shelp/viewcode */*:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][hasattr(%q0,D.SHELP.[rest(%q1,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '[rest(%q1,:)]'.},11,{@pemit&#160;%#=The unparsed data for&#160;%xh[lcstr(rest(%q1,:))]/[lcstr(%1)]%xn follows:%r%b[translate(edit(last(get(%q0/D.SHELP.[rest(%q1,:)].%1),|),(pipe),|),1)]}
&amp;CMD.SHELP/EDIT &lt;HS&gt; Help Commands: Staff=$+shelp/edit *=*,*:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)]=0,{@pemit&#160;%#=No such main help file '%0'.},1,{&amp;D.SHELP.[rest(%q1,:)]&#160;%q0=[setq(2,get(%q0/D.SHELP.[rest(%q1,:)]))][secs()]|[replace(rest(%q2,|),3,edit(extract(%q2,4,1,|),edit(%1,|,(pipe)),edit(%2,|,(pipe))),|)];@pemit&#160;%#=Done. Edit applied.;@fo&#160;%#=+shelp&#160;%0}
&amp;CMD.SHELP/EDITSUB &lt;HS&gt; Help Commands: Staff=$+shelp/editsub */*=*,*:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][hasattr(%q0,D.SHELP.[rest(%q1,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '[rest(%q1,:)]'.},11,{&amp;D.SHELP.[rest(%q1,:)].%1&#160;%q0=[setq(2,get(%q0/D.SHELP.[rest(%q1,:)].%1))][secs()]|[edit(rest(%q2,|),edit(%2,|,(pipe)),edit(%3,|,(pipe)))];@pemit&#160;%#=Done. Edit applied.;@fo&#160;%#=+shelp&#160;%0/%1}
&amp;CMD.SHELP/STAFFHELP &lt;HS&gt; Help Commands: Staff=$+shelp/staffhelp:@pemit&#160;%#=[header([mudname()] Staff +Help Commands)]%r%b+shelp/add &lt;filename&gt;=&lt;text&gt;%r%b+shelp/cat &lt;filename&gt;=&lt;category&gt;%r%b+shelp/addkey &lt;filename&gt;=&lt;additional keyword&gt;%r%b+shelp/delkey &lt;filename&gt;=&lt;keyword to delete&gt;%r%b+shelp/edit &lt;file&gt;=&lt;old&gt;,&lt;new&gt; (Search and replace)%r%t - Note you can use ^,&lt;text&gt; to add to the very beginning%r%t[space(3)]of a file, and $,&lt;text&gt; to add to the very end.%r%b+shelp/viewcode (Returns unparsed text)%r[space(4)]CATEGORIES: [wrap(itemize(get(%vs/D.CATEGORIES),|),78,,,,16,,60)]%r%b+shelp/addsub &lt;main file&gt;/&lt;sub file&gt;=&lt;text&gt;%r%b+shelp/editsub &lt;main&gt;/&lt;sub&gt;=&lt;old&gt;,&lt;new&gt; (Same rules as above)%r%b+shelp/viewcode &lt;main&gt;/&lt;sub&gt;%r%r%b+shelp/update (Index help files)%r[footer()]
&amp;CMD.SHELP/UPDATE &lt;HS&gt; Help Commands: Staff=$+shelp/update:@tr&#160;%vs/startup=quiet;@pemit&#160;%#=Done. Staff help files and categories indexed.
&amp;ISSTAFF #14=isstaff(owner(%#))
@lock/uselock #14=ISSTAFF/1
@VH #14=#16
@VS #14=#17
@chown &lt;HS&gt; Help Commands: Staff=#3
@set &lt;HS&gt; Help Commands: Staff=!HALTED INHERIT SAFE
drop #14
@@
@@ #15: &lt;HW&gt; Help Commands: Wizard
@@
@create &lt;HW&gt; Help Commands: Wizard=10
&amp;CMD.HELP/DELSUB &lt;HW&gt; Help Commands: Wizard=$+help/delsub */*:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][hasattr(%q0,D.HELP.[rest(%q1,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '[rest(%q1,:)]'.},11,{&amp;D.HELP.[rest(%q1,:)].%1&#160;%q0;@pemit&#160;%#=Done. Sub file '%1' of '[rest(%q1,:)]' deleted.;+help/update}}
&amp;CMD.HELP/DELMAIN &lt;HW&gt; Help Commands: Wizard=$+help/del *:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][not(t(words(setr(2,lattr(%q0/D.HELP.[rest(%q1,:)].*)))))]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=File '%0' still has sub files: [itemize(iter(lcstr(%q2),last(%i0,.)))].},11,{&amp;D.HELP.[rest(%q1,:)]&#160;%q0;@pemit&#160;%#=Done. Main help file '[rest(%q1,:)]' deleted.;+help/update}
&amp;CMD.HELP/DELALL &lt;HW&gt; Help Commands: Wizard=$+help/delall *:@switch [setq(0,%vh)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][t(words(lattr(%q0/D.HELP.[rest(%q1,:)].*)))]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=There are no sub files for that file.},11,{@wipe&#160;%q0/D.HELP.[rest(%q1,:)].*;@pemit&#160;%#=Done. All sub files for file '%0' deleted.;+help/update}
&amp;CMD.HELP/WIZHELP &lt;HW&gt; Help Commands: Wizard=$+help/wizhelp:@pemit&#160;%#=[header([mudname()] Wizard +Help Commands)]%r%b+help/add &lt;filename&gt;=&lt;text&gt;%r%b+help/cat &lt;filename&gt;=&lt;category&gt;%r%b+help/addkey &lt;filename&gt;=&lt;additional keyword&gt;%r%b+help/delkey &lt;filename&gt;=&lt;keyword to delete&gt;%r%b+help/edit &lt;file&gt;=&lt;old&gt;,&lt;new&gt; (Search and replace)%r%t - Note you can use ^,&lt;text&gt; to add to the very beginning%r%t[space(3)]of a file, and $,&lt;text&gt; to add to the very end.%r%b+help/viewcode (Returns unparsed text)%r%b+help/delmain &lt;filename&gt;%r%b+help/delall &lt;filename&gt; (Deletes all sub files)%r[space(4)]CATEGORIES: [wrap(itemize(get(%vh/D.CATEGORIES),|),78,,,,16,,60)]%r%b+help/addsub &lt;main file&gt;/&lt;sub file&gt;=&lt;text&gt;%r%b+help/editsub &lt;main&gt;/&lt;sub&gt;=&lt;old&gt;,&lt;new&gt; (Same rules as above)%r%b+help/viewcode &lt;main&gt;/&lt;sub&gt;%r%b+help/delsub &lt;main&gt;/&lt;sub&gt;%r%r%b+help/update (Index help files)%r[footer()]
&amp;CMD.SHELP/DELSUB &lt;HW&gt; Help Commands: Wizard=$+shelp/delsub */*:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][hasattr(%q0,D.SHELP.[rest(%q1,:)].%1)]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=No such sub help file '%1' for '[rest(%q1,:)]'.},11,{&amp;D.SHELP.[rest(%q1,:)].%1&#160;%q0;@pemit&#160;%#=Done. Sub file '%1' of '[rest(%q1,:)]' deleted.;+shelp/update}}
&amp;CMD.SHELP/DELMAIN &lt;HW&gt; Help Commands: Wizard=$+shelp/del *:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][not(t(words(setr(2,lattr(%q0/D.SHELP.[rest(%q1,:)].*)))))]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=File '%0' still has sub files: [itemize(iter(lcstr(%q2),last(%i0,.)))].},11,{&amp;D.SHELP.[rest(%q1,:)]&#160;%q0;@pemit&#160;%#=Done. Main help file '[rest(%q1,:)]' deleted.;+shelp/update}
&amp;CMD.SHELP/DELALL &lt;HW&gt; Help Commands: Wizard=$+shelp/delall *:@switch [setq(0,%vs)][setq(1,ulocal(%q0/FN.MATCHFILE,%0))][first(%q1,:)][t(words(lattr(%q0/D.SHELP.[rest(%q1,:)].*)))]=0*,{@pemit&#160;%#=No such main help file '%0'.},10,{@pemit&#160;%#=There are no sub files for that file.},11,{@wipe&#160;%q0/D.SHELP.[rest(%q1,:)].*;@pemit&#160;%#=Done. All sub files for file '%0' deleted.;+shelp/update}
&amp;CMD.SHELP/WIZHELP &lt;HW&gt; Help Commands: Wizard=$+shelp/wizhelp:@pemit&#160;%#=[header([mudname()] Wizard +Help Commands)]%r%b+shelp/add &lt;filename&gt;=&lt;text&gt;%r%b+shelp/cat &lt;filename&gt;=&lt;category&gt;%r%b+shelp/addkey &lt;filename&gt;=&lt;additional keyword&gt;%r%b+shelp/delkey &lt;filename&gt;=&lt;keyword to delete&gt;%r%b+shelp/edit &lt;file&gt;=&lt;old&gt;,&lt;new&gt; (Search and replace)%r%t - Note you can use ^,&lt;text&gt; to add to the very beginning%r%t[space(3)]of a file, and $,&lt;text&gt; to add to the very end.%r%b+shelp/viewcode (Returns unparsed text)%r%b+shelp/delmain &lt;filename&gt;%r%b+shelp/delall &lt;filename&gt; (Deletes all sub files)%r[space(4)]CATEGORIES: [wrap(itemize(get(%vs/D.CATEGORIES),|),78,,,,16,,60)]%r%b+shelp/addsub &lt;main file&gt;/&lt;sub file&gt;=&lt;text&gt;%r%b+shelp/editsub &lt;main&gt;/&lt;sub&gt;=&lt;old&gt;,&lt;new&gt; (Same rules as above)%r%b+shelp/viewcode &lt;main&gt;/&lt;sub&gt;%r%b+shelp/delsub &lt;main&gt;/&lt;sub&gt;%r%r%b+shelp/update (Index help files)%r[footer()]
&amp;ISWIZARD #15=hasflag(%#,WIZARD)
@lock/uselock #15=ISWIZARD/1
@VH &lt;HW&gt; Help Commands: Wizard=#16
@VS &lt;HW&gt; Help Commands: Wizard=#17
@chown &lt;HW&gt; Help Commands: Wizard=#3
@set &lt;HW&gt; Help Commands: Wizard=!HALTED INHERIT SAFE
drop #15
@@
@@ #16: DB: +Help
@@
think [ansi(hc,MUX Core:)] Creating the +Help database and installing files.
@create DB: +Help=10
@Startup DB: +Help=@wipe me/D.CAT.*;@wipe me/D.KEYWORDS;@dolist [filter(me/FIL.FILELIST,lattr(me/D.HELP.*),,,help)]={@if [t(strlen(grab(v(D.CATEGORIES),setr(1,extract(v(##),3,1,|)),|)))]={&amp;D.CAT.[edit(%q1,%b,_)] me=[setunion(v(D.CAT.[edit(%q1,%b,_)]),last(##,.))]},{&amp;D.CAT.UNCATEGORIZED me=[setunion(v(D.CAT.UNCATEGORIZED),last(##,.))]};&amp;D.KEYWORDS me=[setunion(v(D.KEYWORDS),iter(extract(v(##),2,1,|),%i0:[lcstr(last(##,.))],,|),|)]};@if [not(strmatch(%0,quiet))]={@cemit Scan=Help file categories and keywords indexed.}
&amp;D.CATEGORIES DB: +Help=IC Commands|OOC Commands|Systems
&amp;FIL.FILELIST DB: +Help=regmatchi(%0,^D\.HELP\.\[^.\]+$)
&amp;FN.DISPLAYFILE DB: +Help=[header(+Help [capstr(%0)])]%r[if(isstaff(%#),%xh%xrKeywords:&#160;%0 [extract(%1,2,1,|)]%r[subheader()]%r)][edit(last(%1,|),(pipe),|)]%r%r[if(setr(0,lattr(me/D.HELP.%0.*)),[subheader()]%rUse&#160;%xh'+help&#160;%0/&lt;Sub-Category&gt;'%xn to read the following files:%r%r%b[wrap(iter(lcstr(%q0),ljust([ifelse(or(eq(strlen(grab(get(%2/D.READ.HELP),[rest(%i0,d.help.)]:*,|)),0),lt(rest(grab(get(%2/D.READ.HELP),[rest(%i0,d.help.)]:*,|),:),first(get(me/%i0),|))),%xh%xr*%xn,%b)][last(%i0,.)],18)),76,,,,1)]%r%r)][rjust(%xhLast Updated on [elements(convsecs(first(%1,|)),2 3 5)]%xn%b,78)]%r[footer()]
&amp;FN.DISPLAYSUBFILE DB: +Help=[header(+Help [capstr(%0)]/[capstr(%1)])]%r[edit(last(%2,|),(pipe),|)]%r%r[rjust(%xhLast Updated on [elements(convsecs(first(%2,|)),2 3 5)]%xn%b,78)]%r[footer()]
&amp;FN.MATCHFILE DB: +Help=[setq(0,num(me))][setq(2,0)][if(t(strlen(setr(1,grab(get(%q0/D.KEYWORDS),%0:*,|)))),setq(2,1:[rest(%q1,:)]))][if(hasattr(%q0,D.HELP.%0),setq(2,1:[lcstr(%0)]))]%q2
@chown DB: +Help=#3
@set DB: +Help=!HALTED INHERIT SAFE
+help/add +finger=%b%b[ansi(h,Syntax:)]%b+finger &lt;name&gt;%r%r%b%bThis command displays useful information about a player. You can also type '+finger me' to see your own finger information. There are a variety of built-in finger fields, but there are also additional fields that you can customize yourself. For more information on setting up your +finger, see the 'finger-setup' sub file.
+help/add +staff=%b%b[ansi(h,Syntax:)]%b+staff%r[space(10)]+staff/all%r%r%b%bThis command shows a list of all connected, visible staff along with their status and idle time. The second form of the command lists all staff, regardless of connection status, with online staffers shown first.
+help/add +uptime=%b%b[ansi(h,Syntax:)]%b+uptime%r%r%b%bThis command displays basic runtime statistics for the game, such as boot time, current server time, and the game server's uptime.
+help/add +who=%b%b[ansi(h,Syntax:)]%b+who%r%r%b%bThis command displays an alternate WHO that lists player sex, alias, idle time, status, and location (if not unfindable). For similar commands, see: +3who, +where, and +hangouts.
+help/add +jnotes=%b%b[ansi(h,Syntax:)]%b+jnotes me%r[space(10)]+jnotes me/&lt;number or name&gt;%r[space(10)]+jnote/pitch &lt;title&gt;=&lt;data&gt;%r[space(10)]+jnote/pitch &lt;obj&gt;/&lt;title&gt;=&lt;data&gt;%r[space(10)]+jnote/show &lt;title&gt; to &lt;player&gt;%r%r%b%bThis set of commands allows you to manage judgenotes on your character-- that is, notes approved by staff that denote additional powers or other information about your character which you may want recorded. The first command lists your jnotes, and the second command will view them. You can view notes either by number or by their title.%r%r%b%bThe third form of the command proposes a new jnote for your character. A job will be opened about the note, and if it is approved by staff, your note will be set. You may want to use the +myjobs command to stay apprised of the status of your request. The fourth form of the command functions similarly, but allows you to pitch notes for things that you control. The fifth form of the command shows your jnote to another player. They will see your note, and can verify its authenticity with the +verify command.
+help/addsub +finger/finger-setup=The following finger categories are built-in. To set them, use &amp;&lt;field&gt; me=&lt;data&gt;%r%r%b%b[ljust(FULLNAME,15,.)]%bYour character's full name.%r%b%b[ljust(AGE,15,.)]%bYour character's true age.%r%b%b[ljust(APP-AGE,15,.)]%bYour character's apparent age.%r%b%b[ljust(POSITION,15,.)]%bYour character's IC position.%r%b%b[ljust(FAME,15,.)]%bWhat your character is famous for.%r%b%b[ljust(RP-PREFS,15,.)]%bYour roleplay preferences.%r%b%b[ljust(ALTS,15,.)]%bThe names of your other characters.%r%b%b[ljust(THEMESONG,15,.)]%bYour character's theme song.%r%b%b[ljust(QUOTE,15,.)]%bA quote from your character, or that describes them.%r%b%b[ljust(HOURS,15,.)]%bYour typical online hours.%r%b%b[ljust(TEMPERAMENT,15,.)]%bA brief synopsis of your character's personality.%r%b%b[ljust(VACATION,15,.)]%bUseful for letting others know if you'll be away.%r%b%b[ljust(URL,15,.)]%bYour character website, if applicable.%r%b%b[ljust(WIKI,15,.)]%bYour character wiki page, if applicable.%r%r%b%bYou can also set up custom finger attributes. If you want to set an attribute called &quot;More Detail&quot; you could type &amp;FINGER-MORE_DETAIL me=&lt;data&gt;, and it would show in your +finger. Note that field names longer than 11 characters are truncated.
+help/add +bg=%b%b[ansi(h,Syntax:)]%b+bgadd &lt;number&gt;=&lt;text&gt;%r[space(10)]+bgedit &lt;number&gt;=&lt;old&gt;/&lt;new&gt;%r[space(10)]+bgclear &lt;number&gt;%r[space(10)]+bglist%r[space(10)]+bg &lt;number&gt;%r[space(10)]+bgsubmit%r%r%b%bThis set of commands allows you to manage your character's background story. The first command adds a new section. The second allows you to edit that section in the event of typos or changes. The third clears a section completely to allow you to retart it. The fourth gives a list of all your background sections, and the fifth allows you to read them.%r%r%b%bThe final command submits your background for approval and sets your character as waiting for approval. A job is created regarding your background, which will allow staff to communicate with you more easily in the event that changes are necessary. If this job is approved, your background is approved as well. You may want to familiarize yourself with the +myjobs commands to stay up to date with the status of your approval.
+help/add locks=%b%b[ansi(h,Syntax:)]%block &lt;exit&gt;%r[space(10)]unlock &lt;exit&gt;%r%r%b%bThe lock and unlock commands allow you to lock or unlock exits that you have keys to. All exits in building projects (areas of the game outside the main &quot;street&quot; areas) have lists that show who controls them. A lock can be set as 'owners', 'tenants', 'keys', or 'none'. Each level can control locks set to the levels below it. For example, locks set 'none' cannot be locked or unlocked by anyone. Locks set to 'tenants' can only be unlocked by a tenant or an owner, and so forth.
+help/add +view=%b%b[ansi(h,Syntax:)]%b+view%r[space(10)]+view &lt;target&gt;%r[space(10)]+view &lt;target&gt;/&lt;name&gt;%r%r%b%bViews are a way to expand the detail of a thing with data that might not necessarily fit well, or concisely, in its description. To see a list of all views in your current location, including players, objects, and exits, type +view. The second command shows only a list of those views on the target. The final command allows you to read those views. Note that you can use 'me' to refer to yourself and 'here' to refer to your location.%r%r%b%bTo set a view, simply type &amp;VIEW-&lt;name&gt; &lt;target&gt;=Stuff. The name should have spaces replaced with underscores (ie: &amp;VIEW-EYE_COLOR me=Brown). You can only set views on things you control, such as yourself or objects you create.
+help/add +3who=%b%b[ansi(h,Syntax:)]%b+3who%r%r%b%bThis command is similar to +who, but shows the list sorted into three columns. This is useful for games with lots of players where the regular who or +who lists scroll off your screen.
+help/add +where=%b%b[ansi(h,Syntax:)]%b+where%r%r%b%bSimilar to +who, this command shows a list of online players sorted by their location. If the location is JUMP_OK and you pass its tportlock, you will be shown its dbref. If a player or the room they are in is unfindable, you will not be able to see them, but they will be listed in the &quot;Unfindable&quot; section at the end of the list. Staff will see all players regardless, but unfindable players will have a * by their name.
+help/add +selfboot=%b%b[ansi(h,Syntax:)]%b+selfboot%r%r%b%bThis command allows you to boot 'extra' connections that are sometimes left over as a result of losing your connection to the game.
+help/add ooc=%b%b[ansi(h,Syntax:)]%booc &lt;message&gt;%r%r%b%bThis command will show an OOC message to everyone in your current room. This is useful for communicating out of character when you are in an in-character area. Note that, just like a channel, you can use &quot;:&quot; or &quot;;&quot; to pose or pose/nospace to OOC.
+help/add +info=%b%b[ansi(h,Syntax:)]%b+info%r[space(10)]+info &lt;player&gt;%r[space(10)]+info &lt;player&gt;/&lt;section&gt;%r%r%b%bThe info system allows you to add visible sections of your character's backstory that other players might know. The first command shows you your general info, and will list other info sections if you have them set. The second form of the command allows you to see this information for another player (or for yourself if you use 'me'). The third command will view this info, on yourself or another.%r%r%b%bTo set your general info, type &amp;INFO-GENERAL me=&lt;text&gt;. You can set other info sections by typing &amp;INFO-&lt;name&gt; me=&lt;text&gt;. Note that &lt;name&gt; should have spaces replaced with underscores.
+help/add +hangouts=%b%b[ansi(h,Syntax:)]%b+hangouts%r%r%b%bStaff can tag certain rooms as being hangouts. By typing this command, you will see a list, along with the number of people currently in that hangout. This command will even show unfindable players in that location, but it will not show you their names.
+help/add +beginner=%b%b[ansi(h,Syntax:)]%b+beginner%r%r%b%bThis command will show you a list of useful game commands. This is a decent primer for people who are new to MU*ing to at least give them the basic commands they'll need to communicate with other players, who can better direct them to what they're looking for. If you have suggestions for commands that might go well on this list for your game, contact staff.
+help/add +help=%b%b[ansi(h,Syntax:)]%b+help%r[space(10)]+help &lt;file&gt;%r[space(10)]+help &lt;file&gt;/&lt;subfile&gt;%r%r%b%bThis set of commands allows you access the global +help system. Many players sometimes get confused that +help and help are separate systems, and so it is worth noting that 'help' is traditionally for commands, functions, and features that are built in to the server code, while '+help' is for commands that have been added on to the server through softcode.%r%r%b%bThe first command shows an index of all +help topics. The second command allows you to read a topic, and the third will allow you to read subtopics. Unlike the built-in help system-- and even some softcoded systems in use elsewhere-- +help files can have multiple keywords to make it easier to find the right file. For example, you can access any +help file whose name starts with a + without typing it. '+help hangouts' is identical to '+help +hangouts'.
+help/add credits=%b%bThis softcode system is principally the work of Soylent@BrazilMUX, however it builds on the work of several other people, and could not have happened without them:%r%r%b%b[ljust(+uptime,13,.)]%b[wrap(Written by Orion@Granite. It is included unmodified.,62,,,,16)]%r%b%b[ljust(+3who,13,.)]%b[wrap(Originally written by Ian@BrazilMUX. My modifications are certainly less elegant than the original.,62,,,,16)]%r%b%b[ljust(Backgrounds,13,.)]%b[wrap(The original system is by BEM@Granite. I have cleaned it up and integrated it with Anomaly Jobs.,62,,,,16)]%r%b%b[ljust(SGP,13,.)]%b[wrap(This system began as a rewrite of SGP. Some commands are retained from the original\, with and without modification. Including: +commands and +contents (added column view)\, +join +return and +summon (rewritten)\, +selfboot (unchanged)\, +info (rewritten)\, +finger (principally the same\, but cleaned up)\, +view (minor changes)\, and places (completely rewritten). Thanks to Audumla\, BEM@Granite\, and all the other fine folks who contributed.,62,,,,16)]%r%b%b[ljust(Myrddin,13,.)]%b[wrap(Myrddin's excellent bboard code is included with minor modifications. I have changed the date code (original code from 8BitMUSH) and included the +bbnext command (Obsidian@DynamixMUSH). My +Cron code is a rewrite of his original MUSHCron\, but including several new features and accounting for time drift due to server lag.,62,,,,16)]%r%b%b[ljust(Meta Rooms,13,.)]%b[wrap(Gwen Morse suggested I add Meta Rooms. The idea is from MUDCore for TinyMUSH\, and I basically read their help files and wrote it the way I wanted it to work from there.,62,,,,16)]%r%b%b[ljust(Anomaly Jobs,13,.)]%bhttp://code.google.com/p/anomalyjobs/%r%r%b%bEverything else is mine. I'd like to thank Brazil, nails, and Ian for answering a ton of questions. If you have any questions\, please feel free to contact me at BrazilMUX\, or via the TinyMUX mailing list.
+help/add jobs=%b%b[ansi(h,Syntax:)]%b+myjobs%r[space(10)]+myjob &lt;#&gt;%r[space(10)]+myjob/add &lt;#&gt;=&lt;comment&gt;%r%r%b%bThese commands provide you with an interface to the Anomaly Jobs system, and allow you to see jobs that you created, or that are tagged for you. The +myjobs command shows a list of these jobs, along with various data about them. The second command allows you to read a job, and the third command will allow you to comment.%r%r%b%bFor other help with topics relating to jobs, please see +jhelp, especially '+jhelp player'.
+help/add building=%b%b[ansi(h,Syntax:)]%b+brequest &lt;name&gt;=&lt;description&gt;%r[space(10)]+buildcheck%r[space(10)]+build/submit%r%r%b%bThese commands assist players in building projects for the game. The first command allows you to request or pitch a project to staff. The name you use in your brequest will be the name of your project, and so you should use something specific like &quot;Soylent's House&quot;, &quot;715 East Central&quot;, or &quot;Rhythm Nightclub&quot;. If your request is approved, login data for your builder character will be sent to you via @mail. You can use the 'myjobs' commands to stay up to date on the status of your request.%r%r%b%bThe second command allows you to check your project. It will show you a list of required fields for each of your rooms, exits, and objects. Once you are confident that you are finished, use +build/submit to notify staff. This will create a new job, and you can use the 'myjobs' commands to access it. You should use this to let staff know where you'd like your project linked. If approved, your project will automatically be linked to the grid.
+help/add places=%b%b[ansi(h,Syntax:)]%bplaces%r[space(10)]place &lt;number&gt;%r[space(10)]join &lt;number, name, or player&gt;%r[space(10)]depart%r[space(10)]mv from &lt;number&gt; to &lt;number&gt;%r[space(10)]tt &lt;message&gt;%r[space(10)]tt/ooc &lt;message&gt;%r%r%b%bPlaces are virtual locations in a room that are used to expand its sense of space without creating more rooms. You remain in the same room, but join a group of people (perhaps at a table, or in a secluded corner) and may have a quiet conversation with only those in the same place.%r%r%b%bRespectively, the commands list all places, get information on a specific place, leave your current place, move a vacancy from one place to another, send a message (tabletalk) to those at your location, and send an ooc message to those at your location. You may use&#160;:,&#160;;, &quot;, and | with the tt commands to pose, pose/nospace, say, and emit. Some places can be overheard, and will mutter conversations there to the room. The percentage chance of this happening is up to the builder. Some people have the ability to spy on places and will overhear conversations with perfect clarity. See '+help places/places-spying' for more information. OOC messages will not be muttered or spied.%r%r%b%bFor information on configuring places, see '+help places/places-config'. To see just a list of options, see '+help places/places-options'.
+help/add bboard=[space(5)]Myrddin's BBS is a global, multi-threaded board with a rich set of%r[space(5)]features. To see help on a particular topic, type '+help bboard/&lt;topic&gt;'%r[space(5)](Example: +help bboard/bbread).%r%r[space(5)]TOPIC[space(17)]DESCRIPTION%r[space(5)]~~~~~[space(17)]~~~~~~~~~~~%r[space(5)]bbread[space(16)]Reading bulletin board messages.%r[space(5)]bbpost[space(16)]Posting bulletin board messages.%r[space(5)]bbmisc[space(16)]Other commands (removing messages, unsubscribing%r[space(29)]groups, resubscribing to groups, etc)%r%r[space(5)]bbtimeout[space(13)]Expanded help on the topic of message timeouts.
+help/add metarooms=%b%b[ansi(h,Syntax:)]%b+rooms%r[space(10)]+room &lt;name&gt;%r[space(10)]+makeroom/test \[&lt;template&gt;\]\[=&lt;name&gt;\]%r[space(10)]+makeroom \[&lt;template&gt;\]\[=&lt;name&gt;\]%r%r%b%bFor an explanation of Meta Rooms, see '+help MetaRooms/Explained'.%r%r%b%bFor a list of the templates linked in your current room, and to see the configuration data for those templates, use the &quot;+rooms&quot; and &quot;+room &lt;template&gt;&quot; commands. There are a few ways to make a room, and in all cases you can use &quot;+makeroom/test&quot; to see an example of what you would create.%r%r%b%bThe first way is to simply type &quot;+makeroom&quot;. This picks a template at random and generates a room from it. This is good for when you just want a random place to play in and don't really care what it is. The second is to use &quot;+makeroom &lt;template&gt;&quot; for when you'd like a room of a specific type, but don't care about the details beyond that. The final option is &quot;+makeroom &lt;template&gt;=&lt;name&gt;&quot; which allows you to choose which property values you'd like used to make your room. Note that this only works for templates whose room names are made of one word properties. If the name contains &quot;$color&quot; and you would like to use &quot;Light Pink,&quot; that can't currently be specified. This will be addressed in a later version.%r%r%b%bThere is a limit of 5 Meta Rooms per room. If Meta Room creation encouters a room name that already exists or an exit that conflicts with another exit in your room it will fail and ask you to retry the command.
+help/addsub metarooms/explained=%b%bMeta Rooms are an additional way for builders to extend a sense of space. It might be helpful to think of them like a big brother to Places. Instead of being a subsection of an existing room, like a table or a small side room, a Meta Room creates an actual new room in the database along with exits to and from, off of the player's room based on a template defined by staff. A Meta Room is inherently temporary. Once it's been used and all players have left it or logged off, the room destroys itself, fading back into the background. Objects dropped in the room are teleported to their owners, and logged off players are pushed outside to the room the Meta Room is linked to.%r%r%b%bSay a city would have numerous nightclubs of various types. Staff could create a 'nightclub' template and set the Name to: &quot;$adjective $genre Club&quot;. Then the $adjective property might be: New, Old, Run-down, Forgotten, and Abandoned. The $genre property might be: Goth, Rock, Dance, and Biker. Staff sets the article to 'a'. They link the template in any room where there might be random nightclubs. When a player uses the +makeroom command, it fills in those properties at random, and it might create Abandoned Biker Club, or New Dance Club. That's an example of an independent property. The value of $adjective has no affect on the value of $genre.%r%r%b%bContinued in '+help MetaRooms/Explained2'
+help/addsub metarooms/explained2=%b%bYou could also create a template with the Name: &quot;$type-1 Quarters&quot; and the Desc: &quot;There is a $object-1&quot; on the floor. Set the $type property to: Servant's, and Guard. Set the $object property to: broom, and sword. Now when you create a room you will either get a Servant's Quarters with a broom on the floor, or a Guard Quarters with a sword on the floor. All properties that end in the same number suffix will pull their item from the same position in the property list, so it follows that any properties that are dependent need the same number of items in their lists. If you have 10 different $types, you need 10 $objects to go with them. The value of one property is dependent on the value of another.%r%r%b%bThis also works when a player choose the name for a room using the +makeroom &lt;template&gt;=&lt;name&gt; command. If a property in the Name is dependent, the code looks up the list position of the word the player gives and uses that same position for dependent variables when it makes the desc. This way players don't have to specify the entire desc of the room.%r%r%b%bMeta Rooms may initially seem a bit complex, but really it's just because they're so customizable. With a bit of experimentation and judicious use of the &quot;+makeroom/test&quot; command you'll quickly get a feel for how the system works!
+help/addsub places/places-config=%b%b[ansi(h,Syntax:)]%b+place/templates%r[space(10)]+place/template &lt;name&gt;%r[space(10)]+place/add &lt;number&gt;%r[space(10)]+place/add &lt;number&gt;=&lt;template&gt;%r[space(10)]+place/del &lt;number&gt;%r[space(10)]place &lt;number&gt;%r[space(10)]+place/set &lt;number&gt;/&lt;option&gt;=&lt;value&gt;%r%r%b%bPlace creation is actually quite simple, and starts with a system of global templates to cut down on configuration. Use +place/templates to see a list, and +place/template &lt;name&gt; to see the info for a template. +place/add &lt;number&gt; adds &lt;number&gt; places to your room using the default template, but you can also specify a template using =&lt;template&gt;. Adding more places does not delete places you have already made. You can also delete a place by number, and the places above it will be renumbered down. (ie: You delete place 3 in a room of 5 places. Place 4 becomes Place 4, and Place 5 becomes Place 4. No data is lost.) When you control a room, the 'place' command will also show you configuration data for the place in question, and you can set each option with the +place/set command.%r%r%b%bNote that using &quot;clear&quot; as the value for an option will clear out that option. This is useful for removing &quot;Fixed&quot; from a place, for example. For more information on the different configuration options, please see '+help places/places-options'.
+help/addsub places/places-options=%b%bFor the most part the configuration options are pretty self-explanatory, but here is a key:%r%r[ljust(Name:,10)] The name of the place. (ie: a side bedroom)%r[ljust(Desc:,10)] A description of the place.%r[ljust(Curplaces:,10)] The number of spots at a place.%r[ljust(Maxplaces:,10)] The maximum number of spots at the place.%r[ljust(Fixed:,10)] A failure message that blocks the 'mv' command.%r[ljust(Full:,10)] Shown when trying to move a vacancy to a full place.%r[ljust(Join:,10)] Displayed to a player joining a place.%r[ljust(OJoin:,10)] Displayed to others at a place when someone joins.%r[ljust(Depart:,10)] Displayed to a player leaving a place.%r[ljust(ODepart:,10)] Displayed to others at a place when someone leaves.%r[ljust(Prefix:,10)] Prepended to tt and spy output.%r[ljust(Mutter:,10)] The chance from 0-100 of a place being overheard.%r[ljust(Spying:,10)] 0 means it can't be spied on, 1 means it can.
+help/addsub places/places-spying=%b%b[ansi(h,Syntax:)]%b+spy &lt;number&gt;%r%r%b%bYou must be tagged by staff as being able to spy in order to use this command. Once you've been set up, you can type &quot;+spy &lt;number&gt;&quot; to choose a place in your current room to spy. To remove a place from the list, be in the room the place is in and use the command again (ie: '+spy 3' to remove place 3). To remove all places in a room from your list, type '+spy 0' in the relevant room.%r%r%b%bNot all places are able to be spied upon, and that setting is configured by the builder of the places. Note that if a conversation at a table mutters, you will not receive the output twice. OOC conversation at tables cannot be spied.
+help/addsub bboard/bbread=[space(5)]+bbread[space(25)]Scans joined bulletin board groups.%r[space(5)]+bbread &lt;#&gt;[space(21)]Scans messages in group &lt;#&gt;.%r[space(5)]+bbread &lt;#&gt;/&lt;list&gt;[space(14)]Reads message(s). &lt;list&gt; can be a single%r[space(40)]number, multiple numbers, or a range%r[space(40)]of numbers (ie. 1-6), or any combo.%r[space(5)]+bbread &lt;#&gt;/u[space(19)]Reads all unread messages in group &lt;#&gt;.%r[space(5)]+bbnext[space(25)]Reads your next unread message.%r[space(5)]+bbcatchup &lt;#&gt;[space(18)]Marks all messages in group &lt;#&gt; as read.%r[space(40)]You can use multiple group #'s/names%r[space(40)]or may use the word 'all' to catchup%r[space(40)]on all messages on all boards.%r%r[space(5)]+bbscan[space(8)]Totals unread postings (if any) in each joined group. You%r[space(20)]can place this command in your @aconnect, and it's%r[space(20)]recommended you do so.%r%rNote: You can use the boards name (or abbreviation) in place of it's number.
+help/addsub bboard/bbpost=[space(5)]+bbpost &lt;#&gt;/&lt;title&gt;[space(13)]This starts a post to group &lt;#&gt;.%r[space(5)]+bbwrite &lt;text&gt;[space(17)]This adds text to an already started post.%r[space(5)]+bb &lt;text&gt;[space(22)]Same as +bbwrite.%r[space(5)]+bbedit &lt;area&gt;=&lt;old&gt;/&lt;new&gt;[space(6)]Edits your post in progress. Valid areas%r[space(39)]are: text, title%r[space(5)]+bbproof[space(24)]Displays your current post in progress.%r[space(5)]+bbtoss[space(25)]Discards your current post in progress.%r[space(5)]+bbpost[space(25)]This will post your current post in%r[space(39)]progress.%r%r[space(5)]+bbpost &lt;#&gt;/&lt;subject&gt;=&lt;body&gt;[space(4)]Posts a message to group &lt;#&gt;. This is a%r[space(39)]quick way of posting a message with%r[space(39)]one command.%r[space(5)]+bbedit &lt;#&gt;/&lt;#&gt;=&lt;old&gt;/&lt;new&gt;[space(5)]Edits one of your posted messages.%r%rNote: You can use the boards name (or abbreviation) in place of it's number.
+help/addsub bboard/bbmisc=[space(5)]+bbremove &lt;#&gt;/&lt;list&gt;[space(12)]Removes a message by you. &lt;list&gt; can be a%r[space(39)]single number, a group of numbers, or a%r[space(39)]range (10-14).%r[space(5)]+bbmove &lt;#&gt;/&lt;#&gt; to &lt;#&gt;[space(10)]Moves one of your messages to a new group.%r[space(5)]+bbleave &lt;#&gt;[space(20)]Unsubscribe from group &lt;#&gt;.%r[space(5)]+bbjoin &lt;#&gt;[space(21)]Joins a group you've previously 'left'.%r[space(5)]+bblist[space(25)]Listing of all groups available to you%r[space(39)]along with their timeout values.%r[space(5)]+bbsearch &lt;#&gt;/&lt;name&gt;[space(12)]Shows you a list of &lt;name&gt;'s postings on%r[space(39)]group &lt;#&gt;.%r[space(5)]+bbtimeout &lt;#&gt;/&lt;#&gt;=&lt;days&gt;[space(7)]Changes timeout for a message to &lt;days&gt;.%r[space(5)]+bbnotify &lt;#&gt;=&lt;on|off&gt;[space(10)]Turn post notification for group &lt;#&gt; on%r[space(39)]or off.%r%r[space(2)]%rFor a '.sig', set an attribute on you called BB_SIG, and place your%rsignature in that.%r%rNote: You can use the board's name (or abbreviation) in place of its number.
+help/addsub bboard/bbtimeout=There's only a couple of things that need to be understood in order to take%rfull advantage of message timeouts.%r%r1: Once a day, the TR_TIMEOUT attribute on the bbpocket should be triggered.%r[space(3)]Some games already have a way of accomplishing this. For games that do not,%r[space(3)]simply have a wizard execute set the 'autotimeout' global parameter:%r[space(6)]+bbconfig autotimeout=on%r[space(3)]Turning that parameter on sets up the board to take care of its own daily%r[space(3)]triggering.[space(2)]Setting the paramenter to 'off' turns off the BBS's internal%r[space(3)]triggering.%r%r2: There are 3 different timeout values:%r%r[space(3)]The global parameter 'timeout' (set via the '+bbconfig timeout=&lt;days&gt;'%r[space(3)]command) sets a default timeout that will be set on any new bb groups%r[space(3)]created after the execution of this command.%r%r[space(3)]The group parameter 'timeout' (set via the '+bbconfig &lt;#&gt;/timeout=&lt;days&gt;'%r[space(3)]command) sets a default timeout for the group &lt;#&gt;. Any new messages%r[space(3)]posted to this group will inherit that timeout.%r%r[space(3)]The user command '+bbtimeout &lt;group&gt;/&lt;message list&gt;=&lt;days&gt;' will set the%r[space(3)]specified timeout on individual messages. Players can only modify their%r[space(3)]own messages, wizards can modify any messages. Players can only set%r[space(3)]timeouts equal to or less than the default timeout for the board, wizards%r[space(3)]can set any timeout.%r%r[space(3)]In all cases, a timeout of '0' indicates no timeout.
+help/cat +finger=OOC Commands
+help/addkey +finger=finger
+help/cat +staff=OOC Commands
+help/addkey +staff=staff +staff/all staff/all
+help/cat +uptime=OOC Commands
+help/addkey +uptime=uptime
+help/cat +who=OOC Commands
+help/addkey +who=who
+help/cat +jnotes=OOC Commands
+help/addkey +jnotes=jnotes +jnote jnote
+help/cat +bg=OOC Commands
+help/addkey +bg=bg +backgrounds backgrounds
+help/cat locks=IC Commands
+help/addkey locks=lock unlock +lock +unlock
+help/cat +view=IC Commands
+help/addkey +view=view +views views
+help/cat +3who=OOC Commands
+help/addkey +3who=3who
+help/cat +where=OOC Commands
+help/addkey +where=where
+help/cat +selfboot=OOC Commands
+help/addkey +selfboot=selfboot +boot boot
+help/cat ooc=OOC Commands
+help/cat +info=OOC Commands
+help/addkey +info=info
+help/cat +hangouts=OOC Commands
+help/addkey +hangouts=hangouts
+help/cat +beginner=OOC Commands
+help/addkey +beginner=beginner +beginners beginners
+help/cat +help=Systems
+help/addkey +help=help
+help/cat credits=Systems
+help/cat jobs=Systems
+help/addkey jobs=+jobs +myjobs myjobs
+help/cat building=Systems
+help/cat places=Systems
+help/cat bboard=Systems
+help/cat metarooms=Systems
+help/addkey metarooms=meta-rooms +rooms meta
@@
@@ #17: DB: +Shelp
@@
think [ansi(hc,MUX Core:)] Creating the +Shelp database and installing files.
@create DB: +Shelp=10
@Startup DB: +Shelp=@wipe me/D.CAT.*;@wipe me/D.KEYWORDS;@dolist [filter(me/FIL.FILELIST,lattr(me/D.SHELP.*),,,help)]={@if [t(strlen(grab(v(D.CATEGORIES),setr(1,extract(v(##),3,1,|)),|)))]={&amp;D.CAT.[edit(%q1,%b,_)] me=[setunion(v(D.CAT.[edit(%q1,%b,_)]),last(##,.))]},{&amp;D.CAT.UNCATEGORIZED me=[setunion(v(D.CAT.UNCATEGORIZED),last(##,.))]};&amp;D.KEYWORDS me=[setunion(v(D.KEYWORDS),iter(extract(v(##),2,1,|),%i0:[lcstr(last(##,.))],,|),|)]};@if [not(strmatch(%0,quiet))]={@cemit Scan=Staff help file categories and keywords indexed.}
&amp;D.CATEGORIES DB: +Shelp=Commands|Systems
&amp;FIL.FILELIST DB: +Shelp=regmatchi(%0,^D\.SHELP\.\[^.\]+$)
&amp;FN.DISPLAYFILE DB: +Shelp=[header(+Shelp [capstr(%0)])]%r[if(isstaff(%#),%xh%xrKeywords:&#160;%0 [extract(%1,2,1,|)]%r[subheader()]%r)][edit(last(%1,|),(pipe),|)]%r%r[if(setr(0,lattr(me/D.SHELP.%0.*)),[subheader()]%rUse&#160;%xh'+shelp&#160;%0/&lt;Sub-Category&gt;'%xn to read the following files:%r%r%b[wrap(iter(lcstr(%q0),ljust([ifelse(or(eq(strlen(grab(get(%2/D.READ.SHELP),[rest(%i0,d.shelp.)]:*,|)),0),lt(rest(grab(get(%2/D.READ.SHELP),[rest(%i0,d.shelp.)]:*,|),:),first(get(me/%i0),|))),%xh%xr*%xn,%b)][last(%i0,.)],18)),76,,,,1)]%r%r)][rjust(%xhLast Updated on [elements(convsecs(first(%1,|)),2 3 5)]%xn%b,78)]%r[footer()]
&amp;FN.DISPLAYSUBFILE DB: +Shelp=[header(+Shelp [capstr(%0)]/[capstr(%1)])]%r[edit(last(%2,|),(pipe),|)]%r%r[rjust(%xhLast Updated on [elements(convsecs(first(%2,|)),2 3 5)]%xn%b,78)]%r[footer()]
&amp;FN.MATCHFILE DB: +Shelp=[setq(0,num(me))][setq(2,0)][if(t(strlen(setr(1,grab(get(%q0/D.KEYWORDS),%0:*,|)))),setq(2,1:[rest(%q1,:)]))][if(hasattr(%q0,D.SHELP.%0),setq(2,1:[lcstr(%0)]))]%q2
@chown DB: +Shelp=#3
@set DB: +Shelp=!HALTED INHERIT SAFE
+shelp/add +contents=%b%b[ansi(h,Syntax:)] +contents &lt;object&gt;%r%r%b%bThis command gives you a list of the contents of &lt;object&gt;.
+shelp/add +duty=%b%b[ansi(h,Syntax:)] +duty%r%r%b%bThis command is a simple toggle. Using it once sets you off duty, and using it again sets you on duty. Your duty status is controlled by the TRANSPARENT flag.
+shelp/add +join=%b%b[ansi(h,Syntax:)] +join &lt;player&gt;%r%r%b%bThis command joins another player at their location. The player and the others in their room will be given notice that you are coming, and there will be a momentary delay before you arrive. When you are ready to return to your original location, type +return.
+shelp/add +summon=%b%b[ansi(h,Syntax:)] +summon &lt;player&gt;%r%r%b%bThis command summons a player to your location. They will be given warning, as will the others in your location, and there will be a momentary delay before they arrive. To return a player to their original location, use +return &lt;player&gt;.
+shelp/add +return=%b%b[ansi(h,Syntax:)] +return%r[space(10)]+return &lt;player&gt;%r%r%b%bThis command allows you to reverse a +summon or +join. +Return with no arguments returns you to your previous location after joining. +Return &lt;player&gt; returns a summoned player to their initial location. In both cases the appropriate rooms will be notified of an impending arrival, and there will be a momentary delay before they arrive.
+shelp/add +commands=%b%b[ansi(h,Syntax:)] +commands &lt;object&gt;%r[space(10)]+commands/nocol &lt;object&gt;%r%r%b%bThese commands allow you to see a list of the commands set on an object. The first version gives the display in two columns, however the /nocol switch will allow you to see the list as one column, which is useful for commands whose text would otherwise flow out of the columns.
+shelp/add +cron=%b%b[ansi(h,Syntax:)] +cron%r[space(10)]+cron &lt;number&gt;%r%r%b%bThese commands allow you to see the cron jobs set up on the cron object. Cron is a way of scheduling commands to run at precise times. The first command shows you a list of the jobs set to run, and the second command will let you see detailed information on that job. For more information on creating cron jobs, see '+shelp cronsys'.
+shelp/add +dark=%b%b[ansi(h,Syntax:)] +dark%r%r%b%bThis command is a toggle that sets and removes your dark flag. It also sets an attribute on you with the time you went dark. Players +fingering you or using +staff will see your dark time as if it were your logout time.
+shelp/add +jnotes=%b%b[ansi(h,Syntax:)] +jnotes &lt;name&gt;%r[space(10)]+jnotes &lt;name&gt;/&lt;jnote&gt;%r[space(10)]+jnote &lt;name&gt;/&lt;title&gt;=&lt;data&gt;%r[space(10)]+jnote/hide &lt;name&gt;/&lt;jnote&gt;%r[space(10)]+jnote/unhide &lt;name&gt;/&lt;jnote&gt;%r[space(10)]+jnote/approve &lt;name&gt;/&lt;jnote&gt;%r[space(10)]+jnote/unapprove &lt;name&gt;/&lt;jnote&gt;%r[space(10)]+jnote/delete &lt;name&gt;/&lt;jnote&gt;%r%r%b%bThese commands allow you to manage player jnotes. In all cases '&lt;jnote&gt;' can be a number or the name of the note. The first two commands allow you to see players notes and read them. The third command allows you to set a new note. This note will be set on the player with status &quot;Proposed&quot; and hidden from their view. The fourth and fifth commands allow you to toggle a jnote's visibility, while the last two commands allow you to approve and unapprove a note.%r%r%b%bPlayers may pitch jnotes. This will open a new job for that note. If you approve or complete the job you approve the note. If you unapprove any approved jnote, a new job will be opened for the note, and the same rules apply for approving or denying it.
+shelp/add +verify=%b%b[ansi(h,Syntax:)] +verify &lt;name&gt;%r%r%b%bAny data sent through the TR.JUDGE trigger will be recorded on players. In the core system this is only done by the &quot;+jnote/show&quot; command, but it is useful for other things such as dice rolls or proving stats. A player can review the last 20 Judge outputs they have seen. This command allows you to check a player's judge data and see what they've seen.
+shelp/add +bg=%b%b[ansi(h,Syntax:)] +bg &lt;name&gt;/&lt;number%r[space(10)]+bglist &lt;name&gt;%r%r%b%bThese commands allow you to review player background sections. The first command reads them, and the second command lists the sections. The default behavior for backgrounds is that when a player uses the +bgsubmit command, their background sections are locked, and a new job is opened for their background. Approving or completing that job will approve the player. Denying or deleting the job will unlock their background sections so that they can revise them.
+shelp/add +staff=%b%b[ansi(h,Syntax:)] +staff/update%r%r%b%bThis command refreshes the +staff data list, which is normally set @daily. While only Wizards can set the ROYALTY flag, any staffer can use this command, which does not set any flags.
+shelp/add +tags=%b%b[ansi(h,Syntax:)] +tag &lt;object&gt;=&lt;tag&gt;%r[space(10)]+untag &lt;object&gt;=&lt;tag&gt;%r[space(10)]+tag/add &lt;type&gt;=&lt;name&gt;%r[space(10)]+tag/del &lt;type&gt;=&lt;name&gt;%r[space(10)]+tags%r%r%b%bThe tags system is a essentially a way to add additional flags to things, and to easily store data that can be irritating to quantify in other ways without having an object somewhere full of lists. The first command tags an object (which is a player, thing, room, or exit) with the named tag. The second command removes tags. The third and fourth commands create or destroy tags. There is a different list for each object type, but you may specify &quot;all&quot; to create a tag in all categories. The final command gives a quick list of the available tags. Players can see the tags of objects they control using the tags() function (see '+shelp functions').%r%r%b%bOnly one tag is included in the base system-- a room flag called 'hangouts'. This is used to denote rooms that should be shown by the +hangouts command. For more details, see '+shelp hangouts'.
+shelp/add +hangouts=%b%b[ansi(h,Syntax:)] +hangouts/update%r%r%b%bThis command must be used to update the mast list of hangouts for the '+hangouts' command. To designate a room as a hangout, please use +tag &lt;room&gt;=hangout
+shelp/add +help=%b%b[ansi(h,Syntax:)] +help/staffhelp%r[space(10)]+help/wizhelp%r%r%b%bThese commands show a list of the staff commands available to both royalty and wizards; a full accounting of which could fill multiple help files. These commands also hold true for the +shelp system.
+shelp/add building=%b%b[ansi(h,Syntax:)] +build%r[space(10)]+build &lt;project&gt;%r[space(10)]+build/create &lt;project name&gt;=&lt;player&gt;%r[space(10)]+build/set &lt;project&gt;/&lt;option&gt;=&lt;data&gt;%r[space(10)]+build/approve &lt;project&gt;%r[space(10)]+build/advance &lt;project&gt;%r[space(10)]+build/check &lt;project&gt;%r[space(10)]+build/unapprove &lt;project&gt;%r[space(10)]+build/destroy &lt;project&gt;%r[space(10)]+build/addtype &lt;letter&gt;/&lt;name&gt;=&lt;dbref&gt;%r[space(10)]+build/types%r%r%b%bThese commands allow for the management of building projects. In all cases '&lt;project&gt;' can be a number or the name of the build. The first and second commands will show a list, and specific detail about projects. The third command allows the creation of new building projects. The name must be unique, and player should be the player associated with the build. +build/set uses the arguments listed in the second command. The approve command notes that a project is ready to be advanced, and the /advance command will allow you to do so manually.%r%r%b%bOnce a project is advanced to the 'In Progress' stage, you may use the /check command to see its completion status. The /unapprove command allows you to send a Live project on the grid back to the building nexus. The destroy command completely destroys a project and its builder, and may only be used by staff flagged WIZARD. The addtype command allows you to add a new project parent, and the final command lists those parents.%r%r%b%bThis is a command reference. For a discussion of the building system, see '+shelp building/explained'
+shelp/addsub building/explained=%r%b%bThe included building system is complex, but greatly simplifies the job of building staff. The most common work flow will start with players making a building request with the +brequest command. This creates a new job for that build and creates a stub project with the &quot;Approval&quot; status. You can then review the application, and if you want to approve it, some setup is necessary. Using the +build/set command, set a type parent, a builder name (should be a new character), and an amount of quota (at least 3 is required). Then +build/approve their project and then +job/approve their request. Denying or deleting the request will destroy the stub project.%r%r%b%bThis will automatically create the project in the Building Nexus, set up their builder, and notify them their project has been approved. This advances the status of the project to &quot;In Progress,&quot; and the player can build their project as usual. At any time you can use the +build/check command to check the status of the build. When they are finished they will submit their build for approval, which will create a new job. From there you can set the build's IC Owner (a full name, or company name), along with an IC Location for the build, which should be a dbref. Use the +build/approve command to set the project as having been inspected, and then +job/approve or complete their job. This will automatically link the build to the specified location. Denying or deleting the job will leave the build as In Progress so that the builder can continue working.%r%r%b%bOne final option is the ability to unapprove a project on the Grid and send it back to the Building Nexus for more work. This makes it easy for players to take over existing builds from others, and since the project is linked to a separate builder character, projects are not lost when players leave. This requires a bit more work from staff during the initial creation of a game, but pays off in spades down the line!
+shelp/addsub building/parents=%r%b%bThere are two included parents for use with the building system. One is for residential builds, and the other is for businesses. Both have the same commands initially, but can be customized as needed. The most basic function of these parents is to control locks within the project. A lock may be set as 'Owners', 'Tenants', 'Keys', or 'None'. The last type cannot be locked or unlocked. Locks set 'Keys' are only opened by people who have been given keys via the code. Tenants can unlock both Tenants and Keys locks, and Owners can unlock all locks in a project.
+shelp/add configure=%r%b%bThe basic configuration of this softcode package is pretty simple. All functions are stored on #5. By default the isstaff function does not look for the Staff flag, since Royalty and Wizard are the only flags that actually convey powers in the code. Globals objects are stored in the Master Room (#2), and other objects that are for storage or functions are kept in the Auxiliary Room (#58). In certain cases, objects are stored in their global object. The Building Tracker is stored in the Building Globals Object, and the +Help and +Shelp DBs are stored in the Player Help Globals object.%r%r%b%bAll players default to ANSI and UNINSPECTED. The room parent is #45, and is set up with a basic set of formatting attributes to show what's possible (ie: views, places, and jnotes are automatically reflected as appropriate in a room's footer if they are present). The header, subheader, and footer functions are all located on #5 and are @function'd. Public, Guest, and Scan (to monitor code) channels are set up and associated with channel objects as appropriate. Logging is enabled on all three channels.
+shelp/add functions=%r%b%bThere are several included softcode functions located on #5:%r%r%b%b[ljust(ISSTAFF,15,.)] Takes \%0. Checks for the ROYALTY or WIZARD flags.%r%b%b[ljust(ISMEMBER,15,.)] [wrap(Takes \%0\, \%1\, and \%2. Checks to see if \%1 is a member of list \%0 with optional delimiter \%2. Case insensitive.,60,,,,18)]%r%b%b[ljust(PARTIAL,15,.)] [wrap(Takes \%0\, \%1\, and \%2. Partial matches \%1 in list \%0 with the optional delimiter 2.,60,,,,18)]%r%b%b[ljust(ISPOSINT,15,.)] Takes \%0. Checks for a positive integer.%r%b%b[ljust(ROLLXDY,15,.)] Rolls \%0d\%1.%r%b%b[ljust(HEADER,15,.)] Displays the game header with optional text \%0.%r%b%b[ljust(SUBHEADER,15,.)] As above, but a subheader.%r%b%b[ljust(FOOTER,15,.)] As above, but for a footer.%r%b%b[ljust(CAPALL,15,.)] [wrap(Returns a string with all words capitalized. Omits certain conjunctions.,60,,,,18)]%r%b%b[ljust(ALERT,15,.)] [wrap(A simple function to display something in an eyecatching way. \%0 is the text and \%1 is a character.,60,,,,18)]%r%b%b[ljust(TAGS,15,.)] Displays a list of tags on \%0.%r%b%b[ljust(HASTAG,15,.)] Checks \%0 for tag \%1.%r%b%b[ljust(ANDTAGS,15,.)] Checks \%0 for all tags in list \%1.%r%b%b[ljust(ORTAGS,15,.)] As above, but with a logical 'or' instead of 'and'.%r%b%b[ljust(ACCESS,15,.)] [wrap(Grabs a value from a data list. Takes \%0 for key name and optionally takes \%1 for internal delimiter and \%2 for external delimiter.,60,,,,18)]%r%b%b[ljust(UPDATE,15,.)] [wrap(Updates a value from a data list. Takes \%0 for key name\, \%1 for the new value\, and optionally \%2 for the internal delimiter and \%3 for the external delimiter.,60,,,,18)]%r%r%b%bIn the access and update functions a data list is something like: &quot;var:list of values|var2:list of values|var3:list of values&quot;, which is a useful way to store data. If no delimiters are specified,&#160;: is the default &quot;internal&quot; delimiter and | is the default &quot;external&quot; delimiter.
+shelp/add cronsys=%r%b%bThis softcode system includes a coded Cron system. Cron is a way of setting up a list of commands to occur at a certain time. This is useful for a variety of reasons. All cron attributes should go on the Cron System (#18 in the default install). The attributes are as follows:%r%r%b%bTime to run:%b%b&amp;CRON.TIME-&lt;NAME&gt; #18=month|date|day|hour|minute|flags|args%r%r%b%bThe list of commands to run:%r%b%b&amp;CRON.JOB-&lt;NAME&gt; #18=list;of;commands%r%r%b%bComments for the job (optional):%r%b%b&amp;CRON.COMMENT-&lt;NAME&gt; #18=This is a job!%r%r%b%bThe &lt;name&gt; should match on all three. You should use input for each section of the time as they appear in the time function. ie: Thu for Thursday, Nov for November, 17 for 5pm, and so forth. Valid flags are 'runonce' which runs the job once and then removes it, and 'catchup' for jobs that should be caught up if they're missed. Args are passed to the command list as \%0. Times are 'greedy' to run as often as possible. ie: If a job is set to run at |||17|||, it will run once a minute during the 5pm hour of every day.%r%r%b%bThe cron system is configured to run around the 30 second mark of each minute to prevent drifting. The system remembers the last time it ran, and in the event of server downtime it will try to catch up on missed jobs at startup, but only if they are flagged 'catchup'. If the server is down for more than about 12 hours, missed jobs past that mark cannot be caught up.
+shelp/add bboard=[space(5)]+bbnewgroup &lt;title&gt;[space(13)]Creates a new group.%r[space(5)]+bbcleargroup &lt;#&gt;[space(15)]Clears group &lt;#&gt; and all it's messages.%r[space(5)]+bblock &lt;#&gt;=&lt;lock&gt;/&lt;key&gt;[space(8)]Locks group &lt;#&gt;. Lock can be 'flag' or%r[space(39)]an attribute name.%r[space(39)]Examples: +bblock 4=flag/wizard%r[space(49)]+bblock 5=race/were%r[space(5)]+bbwritelock &lt;#&gt;=&lt;lock&gt;/&lt;key&gt;[space(3)]Same as above, but controls who may write%r[space(39)]to the group.%r[space(5)]+bbconfig[space(23)]Shows values of all config parameters.%r[space(39)]See '+shelp bbconfig' for help on%r[space(39)]config parameters and how to set them.
+shelp/addsub bboard/bblock=A few notes about locking BB Groups.%r%rThe +bblock/+bbwritelock commands are only meant to take care of the simplest%rof locks.[space(2)]There is simply no way to write one bblock'ing command that can%rdeal with all the different ways people want to lock their BB Groups, and it%rcertainly isn't practical to keep adding different locking commands for each%rlocking method I come across.%r%rCoders can set up locks on Groups that are as customized or exotic as you like%rquite easily, however.[space(2)]Each Group has its own object.[space(2)]If you look inside%rthe global BBS object, you'll see them.[space(2)]Each Group object has a pair of%rattributes that control who may read and who may write to that Group.[space(2)]The%rattributes are named CANREAD and CANWRITE, respectively.[space(2)]The dbref of the%rplayer attempting to read/write is passed to the appropriate attribute as \%0.%rAs long as the attribute returns a non-zero result, the player can read/write.%r%rCANREAD Examples:%r[space(3)]CANREAD: 1[space(31)]Anyone can read%r[space(3)]CANREAD: hasflag(\%0,wizard)[space(14)]Only wizards can read%r[space(3)]CANREAD: strmatch(name(\%0),*z*)[space(10)]Only characters with a 'z' in%r[space(46)]their name can read
+shelp/addsub bboard/bbconfig=There are two types of configuration parameters: global and group.[space(2)]Global%rconfiguration parameters affect the BB system as a whole, while group&#160;%rconfiguration parameters affect a single Group.%rTo set a global parameter:%r%r[space(5)]+bbconfig &lt;param&gt;=&lt;value&gt;[space(7)]Sets global config parameter.%r%rGlobal Parameters:%r%r[space(5)]timeout[space(12)]This sets the default timeout (in days) for any new%r[space(26)]groups created. A timeout of '0' means messages%r[space(26)]won't timeout. (ex. +bbconfig timeout=30)%r[space(5)]autotimeout[space(8)]If you don't have a way to trigger the TR_TIMEOUT%r[space(26)]attribute on the bbpocket (daily) to clean out%r[space(26)]expired messages, you can use the autotimeout param%r[space(26)]instead. Setting this param 'on' enables the BB's%r[space(26)]built in timer. Set this param to 'off' to disable.%r%rTo set a Group parameter:%r%r[space(5)]+bbconfig &lt;#&gt;/&lt;param&gt;=&lt;value&gt;[space(3)]Sets config parameter for board &lt;#&gt;.%r%rGroup Parameters:%r%r[space(5)]anonymous[space(10)]Setting this value turns the Group 'anonymous'.[space(2)]This%r[space(26)]means that any future posting's 'Author' field will%r[space(26)]have the value of this param instead of the name of%r[space(26)]the author. Wizards will also see the actual name of%r[space(26)]author.[space(2)](examples:%r[space(26)]+bbconfig newspaper/anonymous=NewsPaper Staff,%r[space(26)]+bbconfig house rules/anonymous=The Staff)%r[space(5)]timeout[space(12)]Sets the default timeout value for the Group.[space(2)]Any new%r[space(26)]messages will have this new value.[space(2)]A value of '0'%r[space(26)]means messages won't timeout.
+shelp/add jobs=%r%b%bFor more help interacting with the jobs system, please refer to +jhelp.
+shelp/add metarooms=%b%b[ansi(h,Syntax:)]%b+meta/list%r[space(10)]+meta &lt;template&gt;%r[space(10)]+meta/create &lt;template&gt;%r[space(10)]+meta/set &lt;template&gt;/&lt;option&gt;=&lt;value&gt;%r[space(10)]+meta/addprop &lt;template&gt;/&lt;category&gt;=&lt;property&gt;%r[space(10)]+meta/delprop &lt;template&gt;/&lt;category&gt;=&lt;property&gt;%r[space(10)]+meta/link &lt;template&gt;%r%r%b%bFor an explanation of Meta Rooms, see '+help MetaRooms/Explained'.%r%r%b%bThese commands allow you to list, view, and create Meta Room templates, and link them to rooms for player use. The set command allows you to set up a room's name, desc, and article. The name and desc can contain variable properties like &quot;$color&quot; or anything else you can imagine. You can then use the addprop command to define those properties (ie: +meta/addprop template/color=Blue) and the delprop command to delete them. The 'article' option is simply 'the' or 'a' or 'an'. This is used to fill in the exit messages, such as &quot;Player enters the Old Museum.&quot; or &quot;Player enters a Dark Alley.&quot; If you use either 'a' or 'an' the code will determine which is appropriate.%r%r%b%bOnce you have set up a template it must be linked to a room for players to be able to use this. Simply go to the room where you would like the template to be available and type '+meta/link &lt;template&gt;'. Players can now create Meta Rooms based on that template.
+shelp/cat +contents=Commands
+shelp/addkey +contents=contents
+shelp/cat +duty=Commands
+shelp/addkey +duty=duty
+shelp/cat +join=Commands
+shelp/addkey +join=join
+shelp/cat +summon=Commands
+shelp/addkey +summon=summon
+shelp/cat +return=Commands
+shelp/addkey +return=return
+shelp/cat +commands=Commands
+shelp/addkey +commands=commands
+shelp/cat +cron=Commands
+shelp/addkey +cron=cron
+shelp/cat +dark=Commands
+shelp/addkey +dark=dark
+shelp/cat +jnotes=Commands
+shelp/addkey +jnotes=+jnote jnote jnotes
+shelp/cat +verify=Commands
+shelp/addkey +verify=verify
+shelp/cat +bg=Commands
+shelp/addkey +bg=bg +backgrounds backgrounds
+shelp/cat +staff=Commands
+shelp/addkey +staff=staff
+shelp/cat +tags=Commands
+shelp/addkey +tags=+tag tags tag
+shelp/cat +hangouts=Commands
+shelp/addkey +hangouts=hangouts +hangout hangout
+shelp/cat +help=Systems
+shelp/addkey +help=help
+shelp/cat building=Systems
+shelp/addkey building=+build build projects
+shelp/cat configure=Systems
+shelp/cat functions=Systems
+shelp/cat cronsys=Systems
+shelp/cat bboard=Systems
+shelp/cat jobs=Systems
+shelp/addkey jobs=+jobs
+shelp/cat metarooms=Systems
+shelp/addkey metarooms=meta-rooms +rooms meta
@tel #16=#13
@tel #17=#13
@@
@@ #18: &lt;CS&gt; Cron System
@@
think [ansi(hc,MUX Core:)] Setting up the Cron System.
@create &lt;CS&gt; Cron System=10
@Startup &lt;CS&gt; Cron System=@cemit Scan=Initializing Cron system. Checking for missed jobs...;@tr me/TR.CATCHUP;@wait/until [u(FN.NEXTRUN,secs())]={@trigger me/cron}
&amp;FN.NEXTRUN &lt;CS&gt; Cron System=[setq(1,mul(div(%0,60),60))][setr(2,ifelse(lt(mod(%0,60),30),add(%q1,30),add(%q1,90)))]
&amp;FN.PREVRUN &lt;CS&gt; Cron System=[setq(1,mul(div(%0,60),60))][setr(2,ifelse(lt(mod(%0,60),30),sub(%q1,30),add(%q1,30)))]
&amp;FN.GETJOBS &lt;CS&gt; Cron System=localize([setq(t,convsecs(%0))][setq(0,extract(%qt,2,1,))][setq(1,extract(%qt,3,1))][setq(2,extract(%qt,1,1))][setq(3,first(extract(%qt,4,1),:))][setq(4,extract(%qt,2,1,:))][regraball(iter(lattr(me/CRON.TIME-*),[setq(i,v(%i0))][setq(5,extract(%qi,1,1,|))][setq(6,extract(%qi,2,1,|))][setq(7,extract(%qi,3,1,|))][setq(8,extract(%qi,4,1,|))][setq(9,extract(%qi,5,1,|))][if(and(and(or(member(%q5,%q0),not(strlen(%q5))),or(member(%q6,%q1),not(strlen(%q6))),or(member(%q7,%q2),not(strlen(%q7))),or(member(%q8,%q3),not(strlen(%q8))),or(member(%q9,%q4),not(strlen(%q9)))),ifelse(strlen(%1),member(extract(%qi,6,1,|),%1),1)),[if(%0,%0,secs())]:%i0)],,|),.+,|)])
&amp;FN.CATCHUP &lt;CS&gt; Cron System=iter(lnum(add(1,div(sub(setr(0,u(FN.prevrun,%1)),setr(1,u(FN.nextrun,%0))),60))),add(%q1,mul(%i0,60)),,|)
&amp;CRON &lt;CS&gt; Cron System=@tr me/TR.CRON=[setr(0,secs())];&amp;D.LASTRUN me=%q0;@wait/until [ulocal(FN.NEXTRUN,%q0)]=@tr me/cron
&amp;TR.CRON &lt;CS&gt; Cron System=@dolist/delimit | [u(FN.GETJOBS,%0)]={@cemit [setq(2,member(extract(v(rest(##,:)),6,1,|),runonce))]Scan=Cron[if(%q2,%b(One-Timer))]: ([elements(convsecs(first(##,:)),2 3 4)]) Running [rest(##,-)].[setq(1,default(me/CRON.COMMENT-[rest(##,-)],))][if(t(%q1),%b(%q1))];@tr me/CRON.JOB-[first(rest(##,-),^)]=[last(v(rest(##,:)),|)];@if&#160;%q2={&amp;[rest(##,:)] me;&amp;CRON.JOB-[rest(##,-)] me;&amp;CRON.COMMENT-[rest(##,-)] me}}
&amp;TR.CATCHUP &lt;CS&gt; Cron System=@if [strlen(setr(0,regraball(iter(u(FN.CATCHUP,v(D.LASTRUN),secs()),u(FN.GETJOBS,%i0,catchup),|,|),.+,|)))]={@cemit Scan=[words(%q0,|)] missed job[if(gt(words(%q0,|),1),s)] found. Catching up...;@dolist/delimit |&#160;%q0={@cemit [setq(2,member(extract(v(rest(##,:)),6,1,|),runonce))]Scan=Cron (Catchup)[if(%q2,%b(One-Timer))]: ([elements(convsecs(first(##,:)),2 3 4)]) Running [rest(##,-)].[setq(1,default(me/CRON.COMMENT-[rest(##,-)],))][if(t(%q1),%b(%q1))];@tr me/CRON.JOB-[first(rest(##,-),^)]=[last(v(rest(##,:)),|)];@if&#160;%q2={&amp;[rest(##,:)] me;&amp;CRON.JOB-[rest(##,-)] me;&amp;CRON.COMMENT-[rest(##,-)] me}}},{@cemit Scan=No missed jobs found.}
&amp;D.LASTRUN &lt;CS&gt; Cron System=9999999999
@chown &lt;CS&gt; Cron System=#3
@set &lt;CS&gt; Cron System=!HALTED INHERIT SAFE
drop #18
@@
@@ #19: bbpocket
@@
think [ansi(hc,MUX Core:)] Installing Myrddin's Bboards.
@create bbpocket=10
@lock bbpocket=*Wizard
@Desc bbpocket=[iter(setdiff(lattr(me),Desc),ljust(##,18))]
&amp;BBTIME bbpocket=[extract(time(),2,2)], [last(time())]
&amp;GET_GROUP bbpocket=switch(isnum(%0),1,extract(v(groups),%0,1),locate(#15,%0,ni))
&amp;NXT_MESS bbpocket=3
&amp;VALID_GROUPS bbpocket=iter(v(groups),switch(and(u(##/can%1,%0),not(member(get(%0/bb_omit),##))),1,##))
&amp;ISGROUPREAD bbpocket=switch(setdiff(%1,get(%0/bb_read)),,,U)
&amp;UNREADNUMS bbpocket=sort(iter(setdiff(get(%1/mess_lst),get(%0/bb_read)),member(get(%1/mess_lst),##)))
&amp;FN_MAKELIST bbpocket=map(me/fn_maplist,secure(%0))
&amp;FN_MAPLIST bbpocket=switch(strmatch(%0,?*-*),1,lnum(before(%0,-),after(%0,-)),%0)
&amp;FN_UNREAD_LIST bbpocket=edit(sort(iter(%0,member(%1,##))),%b,\,%b)
&amp;VALID_CONFIGS bbpocket=anonymous timeout
&amp;VALID_GLOBAL_CONFIGS bbpocket=timeout autotimeout
&amp;CONFIG_TIMEOUT bbpocket=2592000
&amp;TR_TIMEOUT bbpocket=@dolist v(groups)={@trigger me/tr_timeout_group=##}
&amp;TR_TIMEOUT_GROUP bbpocket=@dolist get(%0/mess_lst)={@switch and(extract(get(%0/hdr_##),5,1,|),gt(secs(),extract(get(%0/hdr_##),5,1,|)))=1,{&amp;hdr_##&#160;%0; &amp;bdy_##&#160;%0; &amp;mess_lst&#160;%0=[remove(get(%0/mess_lst),##)]; &amp;master_lst #15=[remove(get(#15/master_lst),##)]}}
&amp;DO_TIMEOUTS bbpocket=@trigger me/tr_timeout; @wait 86400={@trigger me/do_timeouts}
&amp;TR_CONFIG_ANONYMOUS bbpocket=&amp;anonymous&#160;%0=[ifelse([%1],[%1],)]; @pemit&#160;%2=Posters on the [name(%0)] group will show up as [ifelse([%1],['%1'],themselves)].
&amp;TR_CONFIG_TIMEOUT bbpocket=&amp;config_timeout&#160;%0=[mul(%1,86400)]; @pemit&#160;%2=New messages for group '[name(%0)]' have [ifelse(%1,a&#160;%1 day,no)] timeout.
&amp;TR_GCONFIG_TIMEOUT bbpocket=&amp;config_timeout me=[mul(%0,86400)]; @pemit&#160;%1=BB global config parameter 'timeout': [ifelse(%0,%0 days,none)].%rAny new groups will have this value set as their default timeout.
&amp;TR_GCONFIG_AUTOTIMEOUT bbpocket=@switch [eq(hasattr(me,startup),setr(0,switch(%0,on,1,0)))]:%0=1:*,{@pemit&#160;%1=BB autotimeout is already [ifelse(%q0,on,off)].},0:on,{@startup me=@trigger me/do_timeouts; @trigger me/do_timeouts; @pemit&#160;%1=BB autotimeout turned on.},{@startup me; @pemit&#160;%1=BB autotimeout turned off.; @halt me}
&amp;FN_MSG_FLAGS bbpocket=switch([member(get(%0/bb_read),%2)]:[u(fn_timeout_close,index(get(%1/hdr_%2),|,5,1))],0:*,U,*:1,T)
&amp;TR_POST_NOTIFY bbpocket=@switch hasflag(%0,DARK)=0,{@pemit/list iter(remove(lwho(),%0),switch(or(member([get(##/bb_omit)] [get(##/bb_silent)],%1),not(u(%1/canread,##))),0,##))=(New BB message ([member(v(groups),%1)]/%2) posted to '[name(%1)]' by [ifelse(hasattr(%1,anonymous),get(%1/anonymous),name(%0))]:&#160;%3)}
&amp;FN_TIMEOUT_CLOSE bbpocket=switch(%0:[lte(sub(%0,secs()),259200)],0:*,0,*:1,1,0)
&amp;FN_HASCONFIG bbpocket=or(hasattr(%0,anonymous),neq(get(%0/config_timeout),get(#15/config_timeout)))
&amp;VERSION bbpocket=4.0.6
&amp;BUFFER_SIZE bbpocket=8000
@chown bbpocket=#3
@set bbpocket=!HALTED INHERIT SAFE
@edit #19/*=#15,#19
@@
@@ #20: &lt;BB&gt; Myrddin's Bulletin Board
@@
@create &lt;BB&gt; Myrddin's Bulletin Board=10
@lock &lt;BB&gt; Myrddin's Bulletin Board=*Wizard
&amp;CREDITS &lt;BB&gt; Myrddin's Bulletin Board=Myrddin's BBS was written by Myrddin@Witchcraft/Dreaming/Elysium (email: merlin@firstmagic.com). The most recent version of this code can be found at http://www.firstmagic.com/~merlin/mushcode, or via anonymous ftp from ftp.firstmagic.com in the /pub/merlin directory. Please refer interested parties to myself or those addresses, thank you.&#160;:)
@set &lt;BB&gt; Myrddin's Bulletin Board/CREDITS = no_command
@Desc &lt;BB&gt; Myrddin's Bulletin Board=[iter(setdiff(lattr(me),Desc),ljust(##,18))]
@Fail &lt;BB&gt; Myrddin's Bulletin Board=It's bolted down... you aint budgin' it.
&amp;CMD_+BBNEWGROUP &lt;BB&gt; Myrddin's Bulletin Board=$+bbnewgroup *:@switch hasflag(%#,wizard)=1, {@create&#160;%0; @wait 1={@switch [setr(0,num(%0))]=#-1,{@pemit&#160;%#=That's not a good name for a group.},{&amp;groups #15=[switch(words(get(#15/groups)),0,,[get(#15/groups)]%b)]%q0; &amp;own&#160;%q0=%#; @set&#160;%q0=safe; @set&#160;%q0=inherit; &amp;last_mod&#160;%q0=[u(#15/bbtime)]; &amp;CANREAD&#160;%q0=1; &amp;CANWRITE&#160;%q0=1; &amp;config_timeout&#160;%q0=[get(#15/config_timeout)]; @pemit&#160;%#=Group number [member(get(#15/groups),%q0)] added as '%0'. Messages will have [ifelse(get(%q0/config_timeout),a [div(get(%q0/config_timeout),86400)] day,no)] timeout.}}}, {@pemit&#160;%#=You can't add groups to the message base.}
&amp;CMD_+BBLOCK &lt;BB&gt; Myrddin's Bulletin Board=$+bblock *=*/*:@switch hasflag(%#,wizard)=1,{@switch member(get(#15/groups),setr(0,u(#15/get_group,%0)))=0,{@pemit&#160;%#=No such group as '%0'.},{@switch&#160;%1=flag,{&amp;CANREAD&#160;%q0=\[or(hasflag(\%0,%2),hasflag(\%0,wizard))]},{&amp;CANREAD&#160;%q0=\[or(match(get(\%0/%1),%2),hasflag(\%0,wizard))]}; @wait 1={&amp;CANWRITE&#160;%q0=[get(%q0/CANREAD)]}; @pemit&#160;%#=Group '%0' locked. Only people with&#160;%1=%2 can access.}},{@pemit&#160;%#=You cannot lock message groups.}
&amp;CMD_+BBCLEARGROUP &lt;BB&gt; Myrddin's Bulletin Board=$+bbcleargroup *:@switch and(hasflag(%#, wizard),member(get(#15/groups),setr(0,u(#15/get_group,%0))))=1, {&amp;delete_grp #15=%q0; @pemit&#160;%#=%r[space(15)]******** Warning ********%r%rDeleting Group #%0 will also delete the [words(get(%q0/mess_lst))] messages in that group.%rIf you still wish to proceed, type '+bbconfirm&#160;%0'%r%r[space(15)][repeat(*,25)]%r}, {&amp;delete_grp #15; @pemit&#160;%#=You can't remove that group (either that group does not exist, or you are not the owner).}
&amp;DO_CLEARGROUP &lt;BB&gt; Myrddin's Bulletin Board=$+bbconfirm *:@switch get(#15/DELETE_GRP)=[setr(0,u(#15/get_group,%0))], {&amp;groups #15=[remove(get(#15/groups),%q0)]; &amp;master_lst #15=[setdiff(get(#15/master_lst),get(%q0/mess_lst))]; @nuke&#160;%q0; &amp;delete_grp #15; @pemit&#160;%#=Group number&#160;%0 removed.}, {&amp;delete_grp #15; @pemit&#160;%#=That group has not been marked for deletion. Use '+bbcleargroup &lt;#&gt;' to mark a group for deletion.}
&amp;CMD_+BBPOST &lt;BB&gt; Myrddin's Bulletin Board=$+bbpost */*=*:@switch member(u(#15/valid_groups,%#,write),setr(0,u(#15/get_group,%0)))=0, {@pemit&#160;%#=Either you do not subscribe to Group #%0, or are unable to post to it.},{&amp;mess_lst&#160;%q0=[cat(get(%q0/mess_lst),setr(1,get(#15/nxt_mess)))]; &amp;nxt_mess #15=[pack(inc(unpack(get(#15/NXT_MESS),36)),36)]; &amp;master_lst #15=[cat(get(#15/master_lst),%q1)]; &amp;hdr_%q1&#160;%q0=[mid(%1, 0, 34)]|[u(#15/bbtime)]|[edefault(%q0/anonymous,mid(name(%#),0,24))]|[owner(%#)]|[ifelse(get(%q0/config_timeout),add(get(%q0/config_timeout),secs()),0)]; &amp;last_mod&#160;%q0=[u(#15/bbtime)]; &amp;bdy_%q1&#160;%q0=[%2][ifelse(and(hasattr(%#,bb_sig),not(hasattr(%q0,anonymous))),{%r[ulocal(%#/bb_sig)]},)]; @pemit&#160;%#=You post your note about '%1' in group [member(get(#15/groups),%q0)] ([name(%q0)]) as message #[member(get(%q0/mess_lst),%q1)][ifelse(and(hasattr(%#,bb_sig),hasattr(%q0,anonymous)),{%b%bThis is an anonymous group, your BB_SIG was -not- appended.},)]; &amp;bb_read&#160;%#=[setunion(get(%#/bb_read),%q1)]; @trigger #15/tr_post_notify=%#,%q0,[member(get(%q0/mess_lst),%q1)],[mid(%1, 0, 34)]}
&amp;CMD_+BBPOST2 &lt;BB&gt; Myrddin's Bulletin Board=$+bbpost */*:@switch hasattr(#15,bb_post_hdr_%#)=1,{@pemit&#160;%#=You are already in the middle of writing a bbpost.},{@switch strmatch(%1,*=*)=0,{@switch member(u(#15/valid_groups,%#,write),[setq(0,u(#15/get_group,%0))]%q0)=0,{@pemit&#160;%#=Either you do not subscribe to Group #%0 or are unable to post to it.},{&amp;bb_post_hdr_%# #15=%q0|[mid(%1,0,34)]; @pemit&#160;%#=%rYou start your posting to Group #[member(get(#15/groups),%q0)] ([name(%q0)]).%rYou can now compose the body of the post by using '+bbwrite &lt;text&gt;'%ror '+bb &lt;text&gt;'. When you are finished, type '+bbpost' by itself.[ifelse(and(hasattr(%#,bb_sig),hasattr(%q0,anonymous)),{%b%bThis is an anonymous group. Your BB_SIG will -not- be appended.},)]}}}
&amp;CMD_+BBWRITE &lt;BB&gt; Myrddin's Bulletin Board=$+bbwrite *:@switch hasattr(#15,bb_post_hdr_%#)=0,{@pemit&#160;%#=You do not have a bbpost in progress.},{&amp;bb_post_bdy_%# #15=[get(#15/bb_post_bdy_%#)]%0; @pemit&#160;%#=Text added to bbpost.}
&amp;CMD_+BB &lt;BB&gt; Myrddin's Bulletin Board=$+bb *:@switch hasattr(#15,bb_post_hdr_%#)=0,{@pemit&#160;%#=You do not have a bbpost in progress.},{&amp;bb_post_bdy_%# #15=[get(#15/bb_post_bdy_%#)]%b%0; @pemit&#160;%#=Text added to bbpost.}
&amp;CMD_+BBPOST-POST &lt;BB&gt; Myrddin's Bulletin Board=$+bbpost:@switch [hasattr(#15,bb_post_hdr_%#)]:[hasattr(#15,bb_post_bdy_%#)]=0:0,{@pemit&#160;%#=You do not have a bbpost in progress.},1:0,{@pemit&#160;%#=Your post is empty. Please add text with the '+bbwrite &lt;text&gt;' command or discard the posting with the '+bbtoss' command.},{&amp;mess_lst [setr(0,index(get(#15/bb_post_hdr_%#),|,1,1))]=[cat(get(%q0/mess_lst),setr(1,get(#15/nxt_mess)))]; &amp;nxt_mess #15=[pack(inc(unpack(get(#15/NXT_MESS),36)),36)]; &amp;master_lst #15=[cat(get(#15/master_lst),%q1)]; &amp;hdr_%q1&#160;%q0=[index(get(#15/bb_post_hdr_%#),|,2,1)]|[u(#15/bbtime)]|[edefault(%q0/anonymous,mid(name(%#),0,24))]|[owner(%#)]|[ifelse(get(%q0/config_timeout),add(get(%q0/config_timeout),secs()),0)]; &amp;last_mod&#160;%q0=[u(#15/bbtime)]; &amp;bdy_%q1&#160;%q0={[trim(get(#15/bb_post_bdy_%#))][ifelse(and(hasattr(%#,bb_sig),not(hasattr(%q0,anonymous))),{%r[ulocal(%#/bb_sig)]},)]}; @pemit&#160;%#=You post your note about '[index(get(#15/bb_post_hdr_%#),|,2,1)]' in group '[name(%q0)]' as message #[member(get(%q0/mess_lst),%q1)]; &amp;bb_read&#160;%#=[setunion(get(%#/bb_read),%q1)]; @trigger #15/tr_post_notify=%#,%q0,[member(get(%q0/mess_lst),%q1)],[index(get(#15/bb_post_hdr_%#),|,2,1)]; &amp;bb_post_bdy_%# #15; &amp;bb_post_hdr_%# #15}
&amp;CMD_+BBPROOF &lt;BB&gt; Myrddin's Bulletin Board=$+bbproof:@switch hasattr(#15,bb_post_hdr_%#)=0,{@pemit&#160;%#=You do not have a bbpost in progress.},{@pemit&#160;%#=[header(BB Post in Progress)]%rGroup:&#160;%b[name(index(get(#15/bb_post_hdr_%#),|,1,1))]%rTitle:&#160;%b[index(get(#15/bb_post_hdr_%#),|,2,1)]%r[subheader()]%r[trim(get(#15/bb_post_bdy_%#))]%r[footer()]}
&amp;CMD_+BBTOSS &lt;BB&gt; Myrddin's Bulletin Board=$+bbtoss:@switch hasattr(#15,bb_post_hdr_%#)=0,{@pemit&#160;%#=You do not have bbpost in progress.},{&amp;bb_post_hdr_%# #15; &amp;bb_post_bdy_%# #15; @pemit&#160;%#=Your bbpost has been discarded.}
&amp;CMD_+BBREMOVE &lt;BB&gt; Myrddin's Bulletin Board=$+bbremove */*:@dolist [setq(0,u(#15/get_group,%0))][revwords(sort(u(#15/fn_makelist,%1)))]={@switch or(strmatch(index(get(%q0/HDR_[setr(1,extract(get(%q0/MESS_LST),##,1))]),|,4, 1),%#), hasflag(%#,wizard))=1, {&amp;HDR_%q1&#160;%q0; &amp;BDY_%q1&#160;%q0; &amp;MESS_LST&#160;%q0=[remove(get(%q0/MESS_LST),%q1)]; &amp;MASTER_LST #15=[remove(get(#15/MASTER_LST),%q1)]; @pemit&#160;%#=Message ## removed from group #[member(get(#15/groups),%q0)] ([name(%q0)]).}, {@pemit&#160;%#=Either message ## does not exist, or you were not the original poster.}}
&amp;CMD_+BBREAD &lt;BB&gt; Myrddin's Bulletin Board=$+bbread:@pemit&#160;%#=[header([mudname()] BBS)]%r[space(7)]Group Name[space(20)]Last Post[space(6)]# of messages%r[subheader()][iter(u(#15/valid_groups,%#,read),%r[rjust(member(get(#15/groups),##),2)][center([switch([get(##/CANREAD)]:[get(##/CANWRITE)]:[u(##/CANWRITE,%#)],1:1:1,,1:*:1,{(-)},1:*:0,-,*)],5)][ljust(name(##),30)][ljust(get(##/LAST_MOD),20)][rjust(words([setq(0,get(##/MESS_LST))]%q0),3)]%b[ljust(u(#15/isgroupread,%#,%q0),2)])]%r[subheader()]%r[center('*' = restricted[space(5)]'-' = read only[space(5)]'\(-\)' = read only\, but you can write,78)]%r[footer(switch(hasflag(%#,WIZARD),1,BBS at [round(mul(fdiv(strlen(get(#15/master_lst)),get(#15/buffer_size)),100),1)]%% capacity.,))]
&amp;CMD_+BBREAD2 &lt;BB&gt; Myrddin's Bulletin Board=$+bbread *:@switch strmatch([%0],*/*)=0,{@switch member(u(#15/valid_groups,%#,read),setr(0,u(#15/get_group,%0)))=0,{@pemit&#160;%#=[switch(%q0,#-2,That Group name is not specific enough.,You do not subscribe to that Group.)]},{@pemit&#160;%#=[header(name(%q0))]%r[space(8)]Message[space(28)]Posted[space(8)]By%r[subheader()]; @dolist get(%q0/MESS_LST)={@pemit&#160;%#=[ljust([member(get(#15/groups),%q0)]/[member(get(%q0/MESS_LST),##)],6)][ljust(u(#15/fn_msg_flags,%#,%q0,##),2)][ljust(index(setr(1,get(%q0/HDR_##)),|,1,1),35)][ljust(index(%q1,|,2,1),14)][mid([index(%q1,|,3,1)][ifelse(and(hasattr(%q0,anonymous),hasflag(%#,wizard)),%b\([name(index(%q1,|,4,1))]\),)],0,21)][switch(member(get(%q0/MESS_LST),##),words(get(%q0/MESS_LST)),%r[footer()])]}}},{@switch member(u(#15/valid_groups,%#,read),setr(0,u(#15/get_group,setr(2,first(%0,/)))))=0,{@pemit&#160;%#=[switch(%q0,#-2,That Group name is not specific enough.,You do not subscribe to that Group.)]},{@dolist [setq(4,member(get(#15/groups),%q0))][switch(rest(%0,/),u,u(#15/unreadnums,%#,%q0),u(#15/fn_makelist,rest(%0,/)))]={@switch [and(lte(##,words(get(%q0/MESS_LST))),isnum(##),gt(##,0))]=0,{@pemit&#160;%#=Message&#160;%q4/## ([name(%q0)]/##) does not exist.},{@pemit&#160;%#=[header(name(%q0))]%r[ljust(Message:&#160;%q4/##[switch(u(#15/fn_timeout_close,index(setr(3,get(%q0/HDR_[extract(get(%q0/MESS_LST),##,1)])),|,5,1)),1,{%b(timeout warning)})],35)]Posted[space(8)]Author%r[ljust(index(%q3,|,1,1),35)][ljust(index(%q3,|,2,1),14)][mid([index(%q3,|,3,1)][ifelse(and(hasattr(%q0,anonymous),hasflag(%#,wizard)),%b\([name(index(%q3,|,4,1))]\),)],0,29)]%r[subheader()]%r[get(%q0/BDY_[extract(get(%q0/MESS_LST),##,1)])]%r[footer()]; &amp;bb_read&#160;%#=[setunion(get(%#/bb_read),[extract(get(%q0/MESS_LST),##,1)])]}};  2={&amp;bb_read&#160;%#=[setinter(get(%#/bb_read),get(#15/master_lst))]}}}
&amp;CMD_+BBEDIT &lt;BB&gt; Myrddin's Bulletin Board=$+bbedit */*=*/*:@switch strmatch(index(get([setq(0,u(#15/get_group,%0))]%q0/HDR_[setq(1,extract(get(%q0/MESS_LST),%1,1))]%q1),|,4, 1),%#)=1,{&amp;BDY_%q1&#160;%q0=[edit(get(%q0/BDY_%q1),{%2},{%3})]; @pemit&#160;%#=[repeat(=,78)]%rMessage [member(get(#15/groups),%q0)]/%1 ([name(%q0)]/%1) now reads:%r[repeat(-,78)]%r[get(%q0/BDY_%q1)]%r[repeat(=,78)]}, {@pemit&#160;%#=Either that message does not exist, or you were not the original poster.}
&amp;CMD_+BBLEAVE &lt;BB&gt; Myrddin's Bulletin Board=$+bbleave *:@switch member(u(#15/valid_groups,%#,read),[setq(0,u(#15/get_group,%0))]%q0)=0,{@pemit&#160;%#=You aren't currently subscribing to Board #%0. No ommission necessary.},{&amp;bb_omit&#160;%#=[setunion(get(%#/bb_omit),%q0)]; @pemit&#160;%#=You have removed yourself from the [name(%q0)] board.}
&amp;CMD_+BBJOIN &lt;BB&gt; Myrddin's Bulletin Board=$+bbjoin *:@switch member(NULL [get(%#/bb_omit)],[setq(0,u(#15/get_group,%0))]%q0)=0,{@pemit&#160;%#=[switch(member(u(#15/valid_groups,%#,read),%q0),0,{Sorry, you don't have access to that board.},{You are already a member of the [name(%q0)] board.})]},{&amp;bb_omit&#160;%#=[setdiff(get(%#/bb_omit),%q0)]; @pemit&#160;%#=You have joined the [name(%q0)] board.}
&amp;CMD_+BBSCAN &lt;BB&gt; Myrddin's Bulletin Board=$+bbscan: @pemit&#160;%#=[switch(hasattr(#15,BB_POST_HDR_%#),1,** BB Warning: You are in the middle of writing a bbpost. **%r)][switch(setdiff(iter(setr(0,u(#15/VALID_GROUPS,%#,read)),get(##/MESS_LST)),setr(1,get(%#/BB_READ))),,There are no unread postings on the Global Bulletin Board.,[header(Unread Postings on the Global Bulletin Board)][setq(9,get(#15/GROUPS))][trim(iter(%q0,switch(setr(2,setdiff(setr(3,get(##/MESS_LST)),%q1)),,,%r[name(##)] \(#[member(%q9,##)]\): [words(%q2)] unread \([u(#15/FN_UNREAD_LIST,%q2,%q3)]\))),b)]%r[footer(switch(hasflag(%#,WIZARD),1,BBS at [round(mul(fdiv(strlen(get(#15/master_lst)),get(#15/buffer_size)),100),1)]%% capacity.,))])]
&amp;CMD_+BBLIST &lt;BB&gt; Myrddin's Bulletin Board=$+bblist:@pemit&#160;%#=[header(BBoard List)]%r[ljust(Group Name,37)]Member?[space(8)]Timeout (in days)%r[subheader()]%r%b[iter(get(#15/groups),switch(u(##/canread,%#),1,[trim([ljust(member(get(#15/groups),##),5)][ljust(name(##),32)][ljust(switch(member(get(%#/bb_omit),##),0,Yes,No),19)][rjust(ifelse(get(##/config_timeout),div(get(##/config_timeout),86400),none),4)])]),%r%b)]%r[subheader()]%rTo join groups, type '+bbjoin &lt;group number or name&gt;'%r[footer()]
&amp;CMD_+BBCATCHUP &lt;BB&gt; Myrddin's Bulletin Board=$+bbcatchup *:@switch lcstr(%0)=all,{&amp;bb_read&#160;%#=[get(#15/master_lst)]; @pemit&#160;%#=All postings on all boards marked as read.},{@dolist [setq(1,u(#15/valid_groups,%#,read))][u(#15/fn_makelist,%0)]={@switch member(%q1,[setq(0,u(#15/get_group,##))]%q0)=0,{@pemit&#160;%#=You do not subscribe to Group ##.},{ &amp;bb_read&#160;%#=[setunion(get(%#/bb_read),get(%q0/MESS_LST))]; @pemit&#160;%#=All postings on Group #[member(get(#15/groups),%q0)] ([name(%q0)]) marked as read.}}}
&amp;CMD_+BBMOVE &lt;BB&gt; Myrddin's Bulletin Board=$+bbmove */* to *:@switch and(member(u(#15/valid_groups,%#,read),[setq(0,u(#15/get_group,%0))]%q0),member(u(#15/valid_groups,%#,write),[setq(2,u(#15/get_group,%2))]%q2),not(strmatch(%q0,%q2)))=0,{@pemit&#160;%#=One of the selected groups is not valid (either it doesn't exist, you can't write to it, or you tried to 'move' to the same group).},{@switch or(strmatch(index(get(%q0/HDR_[setq(1,extract(get(%q0/MESS_LST),%1,1))]%q1),|,4, 1),%#), and(hasflag(%#,wizard),member(get(%q0/MESS_LST),%q1)))=1,{&amp;HDR_%q1&#160;%q2=[get(%q0/HDR_%q1)]; &amp;BDY_%q1&#160;%q2=[get(%q0/BDY_%q1)]; &amp;MESS_LST&#160;%q2=[cat(get(%q2/mess_lst),%q1)]; &amp;MESS_LST&#160;%q0=[remove(get(%q0/MESS_LST),%q1)]; &amp;HDR_%q1&#160;%q0; &amp;BDY_%q1&#160;%q0; @pemit&#160;%#=Message '%1' removed from group '%0' and added to group '%2' as message #[member(get(%q2/mess_lst),%q1)]},{@pemit&#160;%#=Not a valid message number for that group.}}
&amp;CMD_+BBWRITELOCK &lt;BB&gt; Myrddin's Bulletin Board=$+bbwritelock *=*/*:@switch hasflag(%#,wizard)=1,{@switch member(get(#15/groups),[setq(0,u(#15/get_group,%0))]%q0)=0,{@pemit&#160;%#=No such group as '%0'.},{@switch&#160;%1=flag,{&amp;CANWRITE&#160;%q0=\[or(hasflag(\%0,%2),hasflag(\%0,wizard))]},{&amp;CANWRITE&#160;%q0=\[or(match(get(\%0/%1),%2),hasflag(\%0,wizard))]}; @pemit&#160;%#=Group '%0' locked. Only people with&#160;%1=%2 can write.}},{@pemit&#160;%#=You cannot lock message groups.}
&amp;CMD_+BBEDIT2 &lt;BB&gt; Myrddin's Bulletin Board=$+bbedit *=*/*:@switch strmatch([setq(0,ucstr(%0))]%q0,*/*)=0,{@switch&#160;%q0=TEXT,{@edit #15/bb_post_bdy_%#={%1},{%2}},TITLE,{&amp;bb_post_hdr_%# #15=[index(get(#15/bb_post_hdr_%#),|,1,1)]|[edit(index(get(#15/bb_post_hdr_%#),|,2,1),{%1},{%2})]}; @wait 0={@pemit&#160;%#=[center(= BB Post in Progress =,78,=)]%rGroup:&#160;%b[name(index(get(#15/bb_post_hdr_%#),|,1,1))]%rTitle:&#160;%b[index(get(#15/bb_post_hdr_%#),|,2,1)]%r[repeat(-,78)]%r[trim(get(#15/bb_post_bdy_%#))]%r[repeat(=,78)]}}
&amp;CMD_+BBHELP &lt;BB&gt; Myrddin's Bulletin Board=$+bbhelp:@pemit&#160;%#=Please use '+help bb'.
&amp;CMD_+BBCONFIG &lt;BB&gt; Myrddin's Bulletin Board=$+bbconfig:@pemit&#160;%#=[header(Myrddin's Global BBS v[get(#15/version)])]%rGlobal Config Parameters:%r%r[rjust(timeout:,15)] [div(get(#15/config_timeout),86400)] days%r[rjust(autotimeout:,15)] [ifelse(hasattr(#15,startup),on,off)]%r[subheader()]%rBoard Config Parameters:%r%r%b[iter(filter(#15/fn_hasconfig,get(#15/groups)),[name(##)]%r[ifelse(hasattr(##,anonymous),[space(5)]anonymous: [get(##/anonymous)]%r,)][ifelse(neq(get(##/config_timeout),get(#15/config_timeout)),[space(5)]timeout: [div(get(##/config_timeout),86400)] days%r,)],%r%b%b)]%r[footer()]
&amp;CMD_+BBCONFIG2 &lt;BB&gt; Myrddin's Bulletin Board=$+bbconfig *=*:@switch [strmatch(%0,*/*)]:[hasflag(%#,wizard)]=1:*,{},0:0,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},{@switch [member(get(#15/valid_global_configs),lcstr(%0))]=0,{@pemit&#160;%#=Valid global config parameters are: [get(#15/valid_global_configs)]},{@trigger #15/tr_gconfig_%0=%1,%#}}
&amp;CMD_+BBCONFIG3 &lt;BB&gt; Myrddin's Bulletin Board=$+bbconfig */*=*:@switch/first hasflag(%#,wizard)=0,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},{@switch [setr(0,u(#15/get_group,%0))]:[member(get(#15/valid_configs),lcstr(%1))]=#-1:*,{@pemit&#160;%#='%0' is not a valid group name.},#-2:*,{@pemit&#160;%#='%0' is not specific enough.},*:0,{@pemit&#160;%#=Valid config parameters are: [get(#15/valid_configs)]},{@trigger #15/tr_config_%1=%q0,%2,%#}}
&amp;CMD_+BBTIMEOUT &lt;BB&gt; Myrddin's Bulletin Board=$+bbtimeout */*=*:@dolist [sort(u(#15/fn_makelist,%1))][setq(0,u(#15/get_group,%0))]={@switch [or(strmatch(index(get(%q0/HDR_[setq(1,extract(get(%q0/MESS_LST),##,1))]%q1),|,4, 1),%#), hasflag(%#,wizard))]:[and(isnum(%2),or(and(gt(%2,0),lte(mul(%2,86400),get(%q0/config_timeout))),and(not(get(%q0/config_timeout)),gte(%2,0)),hasflag(%#,wizard)))]=1:1, {&amp;hdr_%q1&#160;%q0=[replace(get(%q0/hdr_%q1),5,ifelse(%2,add(secs(),mul(%2,86400)),0),|)]; @pemit&#160;%#=Message ## in group '[name(%q0)]' has [ifelse(%2,a&#160;%2 day,no)] timeout.}, 0:*,{@pemit&#160;%#=Either message ## does not exist, or you were not the original poster.},*:0,{@pemit&#160;%#=Sorry, '%2' is not a valid number of days for a timeout on the '[name(%q0)]' board. [ifelse(get(%q0/config_timeout),Maximum timeout is [div(get(%q0/config_timeout),86400)] days.,)]}}
&amp;CMD_+BBSEARCH &lt;BB&gt; Myrddin's Bulletin Board=$+bbsearch */*:@switch [member(u(#15/valid_groups,%#,write),setr(0,u(#15/get_group,%0)))]:[hasattr(%q0,anonymous)]:[isdbref(setr(1,pmatch(%1)))]=0:*:*,{@pemit&#160;%#=BB Group '%0' is either an invalid Group, an unreadable Group, or a Group you do not subscribe to.},1:1:*,{@pemit&#160;%#=BB Group '[name(%q0)]' is an anonymous group.},1:0:0,{@pemit&#160;%#=No such player '%1'.},{@switch words(setr(2,grep(%q0,hdr_*,|%q1|)))=0,{@pemit&#160;%#=[name(%q1)] hasn't posted any messages to the '[name(%q0)]' Group.},{@pemit&#160;%#=%r[header(name(%q0))]%r[space(8)]Message[space(28)]Posted[space(8)]By%r[subheader()]; @dolist&#160;%q2={@pemit&#160;%#=[ljust([member(get(#15/groups),%q0)]/[member(get(%q0/mess_lst),last(##,_))],6)][ljust(u(#15/fn_msg_flags,%#,%q0,last(##,_)),2)][ljust(index([setr(3,get(%q0/##))],|,1,1),35)][ljust(index(%q3,|,2,1),14)][mid([index(%q3,|,3,1)],0,21)][switch(member(%q2,##),words(%q2),%r[footer()])]}}}
&amp;CMD_+BBNOTIFY &lt;BB&gt; Myrddin's Bulletin Board=$+bbnotify *=*:@switch/first [member(u(#15/valid_groups,%#,read),setr(0,u(#15/get_group,%0)))]:[member(on off,lcstr(%1))]:[lcstr(%1)]=0:*:*,{@pemit&#160;%#=[switch(%q0,#-2,That Group name is not specific enough.,You do not subscribe to that Group.)]},*:0:*,{@pemit&#160;%#=Invalid choice '%1'. Choices are 'on' or 'off'.},*:*:off,{&amp;bb_silent&#160;%#=[setunion(get(%#/bb_silent),%q0)]; @pemit&#160;%#=Post notification for BB Group '[name(%q0)]' turned off. You will no longer be notified of new postings to that Group.},{&amp;bb_silent&#160;%#=[setdiff(get(%#/bb_silent),%q0)]; @pemit&#160;%#=Post notification for BB Group '[name(%q0)]' turned on. You will now be notified of new postings to that Group.}
&amp;CMD_BBNEXT &lt;BB&gt; Myrddin's Bulletin Board=$+bbnext:@switch [setq(y,iter(iter(get(#15/groups),if(u(%i0/canread,%#),%i0)),setq(z,setunion(%qz,trim(get(%i0/mess_lst))))))][setr(x,setdiff(%qz,get(%#/bb_read)))]=,{@pemit&#160;%#=No unread messages.},{@dolist get(#15/groups)=@switch [hasattr(##,hdr_[setr(1,first(%qx))])][u(##/canread,%#)]=11,{@pemit&#160;%#=[setq(0,get(##/hdr_%q1))][header(name(##))]%r[ljust(Message: [member(get(#15/groups),##)]/[member(get(##/MESS_LST),%q1)],35)]Posted[space(8)]Author%r%xh[ljust(extract(%q0,1,1,|),35)]%xn[ljust(extract(%q0,2,1,|),14)][mid([extract(%q0,3,1,|)][ifelse(and(hasattr(##,anonymous),hasflag(%#,wizard)),%b\([name(extract(%q0,4,1,|))]\),)],0,29)]%r[subheader()]%xn%r[get(##/bdy_%q1)]%r[footer()][set(%#,bb_read:[get(%#/bb_read)]%B[first([setdiff([get(#15/master_lst)],[get(%#/bb_read)])])])];&amp;bb_read&#160;%#=[setunion(get(%#/bb_read),%q1)]}};wait 2={&amp;bb_read&#160;%#=[setinter(get(%#/bb_read),get(#15/master_lst))]
@chown &lt;BB&gt; Myrddin's Bulletin Board=#3
@set &lt;BB&gt; Myrddin's Bulletin Board=!HALTED INHERIT SAFE
@edit #20/*=#15,#19
@tel #19=#20
drop #20
+bbnewgroup Announcements
@wait 3={&amp;CANWRITE #21=isstaff(%0)}
@@
@@ Anomaly Jobs 6.1 Installer
@@ For new installations or upgrades from 5.0+
@@ Quote this file from your client with a 1-second delay
@@
think [repeat(=,77)]%r%r[center(ansi(hc,Setting up Anomaly Jobs v6.1),77)]%r%r[repeat(=,77)]
@set me=quiet
think [ansi(hc,ANOMALY JOBS:)] Checking current installation.
@switch [ifelse(isdbref(setr(0,switch(first(version()),PennMUSH,lsearch(all,eobjects,\[strmatch(name(##),Job Global Object &lt;JGO&gt;)\]),RhostMUSH,searchng(object=Job Global Object &lt;JGO&gt;),search(object=Job Global Object &lt;JGO&gt;)))),setq(1,get(%q0/VA)),[setq(1,switch(first(version()),PennMUSH,lsearch(all,eobjects,\[strmatch(name(##),Job Database &lt;JD&gt;)\]),RhostMUSH,searchng(object=Job Database &lt;JD&gt;),search(object=Job Database &lt;JD&gt;)))][setq(0,loc(%q1))])][isdbref(%q0)][and(isdbref(%q1),gte(edit(first(default(%q1/version,0),.),v,),5))]=0*,{think [ansi(hc,ANOMALY JOBS:)] No previous jobs installation found.  Creating a new one.;&amp;JOB_GO&#160;%#=setr(0,create(Job Global Object &lt;JGO&gt;,10));&amp;JOB_VA&#160;%#=setr(1,create(Job Database &lt;JD&gt;,10));&amp;JOB_VB&#160;%#=setr(2,create(Job Tracker,10));&amp;JOB_VC&#160;%#=setr(3,create(Job Parent Object &lt;JPO&gt;,10));&amp;JOB_PATCH&#160;%#=0;@tel&#160;%q1=%q0;@tel&#160;%q2=%q0;@tel&#160;%q3=%q0},10*,{think [ansi(hc,ANOMALY JOBS:)] [ansi(hr,Not a valid Jobs 5 or later installation.)];think [ansi(hc,ANOMALY JOBS:)] [ansi(hr,Aborting. Cancel this script in your client.)];&amp;JOB_GO&#160;%#=#-1;&amp;JOB_VA&#160;%#=#-1;&amp;JOB_VB&#160;%#=#-1;&amp;JOB_VC&#160;%#=#-1;&amp;JOB_PATCH&#160;%#=1},{think [ansi(hc,ANOMALY JOBS:)] Current installation found.  Updating.;&amp;JOB_GO&#160;%#=%q0;&amp;JOB_VA&#160;%#=%q1;&amp;JOB_VB&#160;%#=get(%q0/VB);&amp;JOB_VC&#160;%#=get(%q0/VC);&amp;JOB_PATCH&#160;%#=1}
@dolist GO VA VB VC=@switch [first(version())]=RhostMUSH,{@Desc [v(JOB_##)]=lit(%r[columns(sort(lattr(me/*)),18,4)]%r%r[center(Please do not rename this object.,79)])},{@Desc [v(JOB_##)]=lit(%r[table(sort(lattr(me/*)),18)]%r%r[center(Please do not rename this object.,79)])}
think [ansi(hc,ANOMALY JOBS:)] Setting up commands.
@switch [v(JOB_PATCH)][hasattr(v(JOB_GO),STARTUP)]=11,@Startup [v(JOB_GO)]
@adisconnect [v(JOB_GO)]=@pemit me=[ifelse(u(%va/HAS_ACCESS,%#),set(%#,LAST_CONN:[secs()]),)]
@aconnect [v(JOB_GO)]=@switch [u(%va/HAS_ACCESS,%#)]=1,{@fo&#160;%#=+jobs/new},{@fo&#160;%#=+myjobs}
&amp;CMD_BUCKET/ACCESS [v(JOB_GO)]=$+bucket/access *=*:@switch [u(%va/GIVE_ACCESS,%#)][setq(0,pmatch(%0))][setq(1,u(%va/FN_FIND-BUCKET,%1))][isdbref(%q0)][isdbref(%q1)][u(%va/HAS_ACCESS,%q0)][u(%va/FN_WIZONLY,%q0)][u(%va/FN_ACCESSCHECK,%q1,%q0)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no player by that name.},110*,{@pemit&#160;%#=There is no bucket by that name.},1110*,{@pemit&#160;%#=That player does not have +jobs access.},11111*,{@pemit&#160;%#=That player can always access all buckets.},111100*,{@pemit&#160;%#=You have given [name(%q0)] access to the [name(%q1)] bucket.;&amp;JOBSB&#160;%q0=[ifelse(member(get(%q0/JOBSB),%q1),remove(get(%q0/JOBSB),%q1),setunion(get(%q0/JOBSB),%q1))]},{@pemit&#160;%#=You have removed [name(%q0)]'s access to the [name(%q1)] bucket.;&amp;JOBSB&#160;%q0=[ifelse(member(get(%q0/JOBSB),%q1),remove(get(%q0/JOBSB),%q1),setunion(get(%q0/JOBSB),%q1))]}
&amp;CMD_BUCKET/CHECK [v(JOB_GO)]=$+bucket/check *:@switch [isdbref(setr(0,pmatch(%0)))]=0,{@pemit&#160;%#=There is no such player.},{@pemit&#160;%#=[u(%va/FN_HEADER,Bucket Information For [name(%q0)])]%r%r[ansi(h,[ljust(Bucket,15)]%bHas Access?)]%r[iter(lcon(%VC),[ljust(name(itext(0)),15)]%b[ifelse(u(%VA/fn_accesscheck,itext(0),%q0),Yes,No)],%b,%r)];@pemit&#160;%#=%r[u(%va/FN_FOOTER)]}
&amp;CMD_BUCKET/CREATE [v(JOB_GO)]=$+bucket/create *=*:@switch [setq(0,u(%va/FN_FIND-BUCKET,%0))][u(%va/FN_WIZONLY,%#)][not(isdbref(%q0))][not(gt(strlen(%0),5))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is already a bucket by that name.},110*,{@pemit&#160;%#=The name of a bucket is limited to five letters.},{@pemit&#160;%#=You have created a bucket named [ucstr(%0)].[setq(0,create(ucstr(%0),10))] Be sure to change&#160;%q0/ACCESS to establish who can access the bucket. Presently, it is set to 1, which means that anyone who can access +jobs can access the bucket.;@tel&#160;%q0=%vc;@parent&#160;%q0=%vc;@desc&#160;%q0=[secure(%1)];@set&#160;%q0=inherit&#160;!safe&#160;!halted&#160;!no_command;&amp;ACCESS&#160;%q0=1;@lock/speech&#160;%q0=ACCESS/1}
@switch [first(version())]=PennMUSH,{@edit [v(JOB_GO)]/CMD_BUCKET/CREATE=inherit&#160;!safe&#160;!halted,wizard&#160;!safe&#160;!halt},TinyMUSH,{@edit [v(JOB_GO)]/CMD_BUCKET/CREATE=!no_command,commands}
&amp;CMD_BUCKET/DELETE [v(JOB_GO)]=$+bucket/delete *:@switch [u(%va/FN_WIZONLY,%#)][setq(0,u(%va/FN_FIND-BUCKET,%0))][isdbref(%q0)][eq(words(remove(children(%q0),#-1)),0)][not(hasflag(%q0,SAFE))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no bucket by that name.},110*,{@pemit&#160;%#=The bucket is not empty, and cannot be deleted.},1110*,{@pemit&#160;%#=That bucket is required for the system to operate properly.},{@pemit&#160;%#=You have deleted the bucket named [ucstr(%0)].;@set&#160;%q0=DESTROY_OK;@nuke&#160;%q0;@dolist [switch(first(version()),PennMUSH,lsearch(all,type,player),RhostMUSH,searchng(type=player),search(type=player))]={&amp;JOBSH ##=[remove(get(##/JOBSH),%q0)];&amp;JOBSB ##=[remove(get(##/JOBSB),%q0)]}}
&amp;CMD_BUCKET/HELP [v(JOB_GO)]=$+bucket/help *:@switch [setq(0,u(%va/FN_FIND-BUCKET,%0))][u(%va/FN_ACCESSCHECK,%q0,%#)][isdbref(%q0)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid bucket. Type '[ansi(h,+buckets)]' for a list of valid buckets.},{@pemit&#160;%#=[u(%va/FN_HEADER,Bucket Help For [name(%q0)])];@pemit&#160;%#=[u(%q0/HELP)][ifelse(u(%va/FN_HASATTRP,%q0,MYHELP),%r[u(%va/FN_BREAK,[ansi(c,Myjob Help)])]%r[u(%q0/MYHELP)],)];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_BUCKET/INFO [v(JOB_GO)]=$+bucket/info *:@switch [u(%va/FN_STAFFALL,%#)][setq(0,u(%va/FN_FIND-BUCKET,%0))][isdbref(%q0)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no bucket by that name.},{@pemit&#160;%#=[u(%va/FN_HEADER,Bucket Information For [name(%q0)])]%r[u(%va/DISPLAY_BUCKET)];@pemit&#160;%#=[u(%va/DISPLAY_BUCKET2)];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_BUCKET/MONITOR [v(JOB_GO)]=$+bucket/monitor *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-BUCKET,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,%q0,%#)][u(%va/FN_MONITORCHECK,%q0,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no bucket by that name.},110*,{@pemit&#160;%#=You do not have access to that bucket.},1110*,{@pemit&#160;%#=You have added bucket [name(%q0)] to your monitored list.;&amp;JOBSH&#160;%#=[ifelse(u(%va/FN_HASATTR,%q0,HIDDEN),setunion(get(%#/JOBSH),%q0),remove(get(%#/JOBSH),%q0))]},{@pemit&#160;%#=You have removed bucket [name(%q0)] from your monitored list.;&amp;JOBSH&#160;%#=[ifelse(u(%va/FN_HASATTR,%q0,HIDDEN),remove(get(%#/JOBSH),%q0),setunion(get(%#/JOBSH),%q0))]}
&amp;CMD_BUCKET/SET [v(JOB_GO)]=$+bucket/set */*=*:@switch [setq(0,u(%va/FN_FIND-BUCKET,%0))][and(u(%va/HAS_ACCESS,%#),u(%va/CONFIG_ACCESS,%#),u(%q0/ACCESS_%1,%#))][isdbref(%q0)][u(%va/FN_HASATTRP,%q0,ACCESS_%1)][u(%q0/PROCESS_%1,%2,%q0,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no bucket by that name. See '[ansi(h,+buckets)]' for a list of valid buckets.},110*,{@pemit&#160;%#='%1' is not a valid parameter. Valid parameters for [name(%q0)] are [u(%va/FN_ITEMIZE,map(%va/MAP_PARAMS,lattr(%vc/PROCESS_*)))].},1110*,{@pemit&#160;%#=[u(%q0/ERROR_%1%q2)]},{@pemit&#160;%#=[name(%q0)]'s [ucstr(%1)] successfully updated to: '%2'.;&amp;%q3&#160;%q0=%q1}
&amp;CMD_BUCKETS [v(JOB_GO)]=$+buckets:@switch [u(%va/HAS_ACCESS,%#)]=0*,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=[u(%va/FN_BUCKETHEADER)];think [setq(x,sortby(%va/SORTBY_NAME,filter(%va/FIL_ISBUCKET,lcon(%vc))))];@pemit&#160;%#=[iter(filter(%va/FIL_ACCESS,%qx),u(%va/FN_BUCKETLIST,##),%B,%R)];@pemit&#160;%#=[u(%va/FN_FOOTER,[ifelse(u(%va/FN_STAFFALL,%#),ansi(hy,V=Viewing H=Hidden P=Published M=Myjobs L=Locked S=Summary),)])]}
&amp;CMD_BUG [v(JOB_GO)]=$+bug *=*:@switch [not(haspower(%#,guest))]=0*,{@pemit&#160;%#=Permission Denied.},{@pemit&#160;%#=You have notified production staff of the [secure(u(%va/FN_STRTRUNC,%0,30))] bug, with the details '[secure(u(%va/FN_STRTRUNC,%1,get(%va/BUFFER)))]';@trigger&#160;%va/TRIG_CREATE=%#,locate(%vc,CODE,i),3,BUG: [u(%va/FN_STRTRUNC,%0,30)],[u(%va/FN_STRTRUNC,%1,get(%va/BUFFER))],,,5}
&amp;CMD_JGROUPS [v(JOB_GO)]=$+jgroups:@switch [u(%va/HAS_ACCESS,%#)][words(remove(lcon(%vb),#-1))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=No jgroups have been defined.},{@pemit&#160;%#=[u(%va/FN_HEADER,JGroup List)]%r[ljust(JGroup,15)]Description;@pemit&#160;%#=[iter(sortby(%va/SORTBY_NAME,lcon(%vb)),[ljust(name(##),15)][get(##/Desc)],%B,%R)];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_JGROUP/CREATE [v(JOB_GO)]=$+jgroup/create *=*:@switch [u(%va/FN_WIZONLY,%#)][setq(0,u(%va/FN_FIND-JGROUP,%0))][not(isdbref(%q0))][strmatch(%0,+*)][eq(words(%0),1)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is already a jgroup by that name.},110*,{@pemit&#160;%#=Jgroup names must begin with +.},1110*,{@pemit&#160;%#=Jgroup names may not contain spaces.},{@pemit&#160;%#=You have created a jgroup named&#160;%0.[setq(0,create(%0,10))] Use&#160;%q0/ISMEMBER to define a function indicating membership in the jgroup.;@tel&#160;%q0=%vb;@desc&#160;%q0=[secure(%1)];&amp;ISMEMBER&#160;%q0=lit(t(member(v(MEMBERLIST),%0)));@set&#160;%q0=inherit&#160;!safe&#160;!halted&#160;!no_command;}
@switch [first(version())]=PennMUSH,{@edit [v(JOB_GO)]/CMD_JGROUP/CREATE=inherit&#160;!safe&#160;!halted,wizard&#160;!safe&#160;!halt},TinyMUSH,{@edit [v(JOB_GO)]/CMD_JGROUP/CREATE=!no_command,commands}
&amp;CMD_JGROUP/DELETE [v(JOB_GO)]=$+jgroup/delete *:@switch [u(%va/FN_WIZONLY,%#)][setq(0,u(%va/FN_FIND-JGROUP,%0))][isdbref(%q0)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no jgroup by that name.},{@pemit&#160;%#=You have deleted the jgroup named&#160;%0.;@set&#160;%q0=DESTROY_OK;@nuke&#160;%q0;@wait 0=@nuke&#160;%q0;}
&amp;CMD_JGROUP/INFO [v(JOB_GO)]=$+jgroup/info *:@switch [u(%va/FN_STAFFALL,%#)][setq(0,u(%va/FN_FIND-JGROUP,%0))][isdbref(%q0)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no jgroup by that name.},{@pemit&#160;%#=[u(%va/FN_HEADER,JGroup Information For [name(%q0)])]%rDescription: [get(%q0/Desc)]%rMembers: [u(%va/FN_ITEMIZE,map(%va/MAP_NAME,u(%va/FN_JGROUPMEMBERS,%q0),%b,|),|)];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_JGROUP/MEMBER [v(JOB_GO)]=$+jgroup/member *=*:@switch [u(%va/FN_WIZONLY,%#)][setq(0,pmatch(%0))][setq(1,u(%va/FN_FIND-JGROUP,%1))][isdbref(%q0)][isdbref(%q1)][u(%va/HAS_ACCESS,%q0)][strmatch(get(%q1/ISMEMBER),*MEMBERLIST*)][u(%q1/ISMEMBER,%q0)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no player by that name.},110*,{@pemit&#160;%#=There is no jgroup by that name.},1110*,{@pemit&#160;%#=That player does not have +jobs access.},11110*,{@pemit&#160;%#=Membership in that jgroup is unaffected by this command.},111110*,{@pemit&#160;%#=You have added [name(%q0)] to membership in the [name(%q1)] jgroup.;&amp;memberlist&#160;%q1=setunion(get(%q1/memberlist),%q0);},{@pemit&#160;%#=You have removed [name(%q0)] from membership in the [name(%q1)] jgroup.;&amp;memberlist&#160;%q1=remove(get(%q1/memberlist),%q0);}
&amp;CMD_JOB/ACT [v(JOB_GO)]=$+job/act *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][or(u(%va/FN_STAFFALL,%#),u(%va/FN_ACCESSCHECK,parent(%q0),%#))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '+jobs/all' for all jobs or '+jobs/&lt;type&gt;' to list by type.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_HEADER,View Job Number&#160;%0)]%r[ulocal(%va/FN_BANNER,%q0)]%r[u(%va/FN_BREAK)];@dolist sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*))={@pemit&#160;%#=[rest(convsecs(extract(get(%q0/##),2,1,|)))]%b[first(get(%q0/##),|)]%b[ljust(u(%va/FN_STRTRUNC,extract(get(%q0/##),4,1,|),15),15)]%b[ljust(u(%va/FN_STRTRUNC,u(%va/fn_trim,edit(edit(edit(last(get(%q0/##),|),@@PIPE@@,|),%r,%b),%t,%b),b),35),35)]};@wait 0={@pemit&#160;%#=[u(%va/FN_FOOTER)]};}
&amp;CMD_JOB/ADD [v(JOB_GO)]=$+job/add *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/ADD_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is an invalid job number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=Comments to job number&#160;%0 added.;&amp;TAGGED_FOR&#160;%q0=[remove(get(%q0/TAGGED_FOR),%#)];@trigger&#160;%va/TRIG_ADD=%q0,%1,%#,ADD;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,ADD}
&amp;CMD_JOB/ALL [v(JOB_GO)]=$+job/all *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '[ansi(h,+jobs/all)]' for all jobs or '[ansi(h,+jobs/list &lt;bucket&gt;)]' to list by bucket.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)][u(%va/FN_HEADER,View [name(%q0)])]%r[ulocal(%va/FN_BANNER,%q0,%#)][ifelse(u(%va/FN_HASATTRP,%q0,SUMMARY),[ulocal(%va/FN_SUMMARY,%q0,%#)],)];@dolist [sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*))]={@pemit&#160;%#=[u(%va/FN_READJOB,##,%q0)]};@wait 0={@pemit&#160;%#=[u(%va/FN_FOOTER,u(%va/FN_FLAGS,%q0))]};}
&amp;CMD_JOB/APPROVE [v(JOB_GO)]=$+job/approve *=*:@switch [u(%va/HAS_ACCESS,%#)][u(%va/APPROVE_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/APR_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=There is no job by that number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=[u(%va/FN_ADDSTAT_ART,parent(%q0),%q0)][u(%va/FN_ADDSTAT_ART,%vc,%q0)]You have approved job #%0, adding the comments:&#160;%1;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,APR;@trigger&#160;%va/TRIG_ADD=%q0,[u(%va/FN_STRTRUNC,%1,get(%va/BUFFER))],%#,APR;@trigger&#160;%va/TRIG_DESTROY=%q0}
&amp;CMD_JOB/ASSIGN [v(JOB_GO)]=$+job/assign *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(1,switch(%1,+*,u(%va/FN_FIND-JGROUP,%1),pmatch(%1)))][setq(2,switch(%1,NONE,1,0))][or(isdbref(%q1),%q2)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/ASN_ACCESS,1,%#)][switch(1,%q2,1,strmatch(%1,+*),[setq(3,u(%va/FN_JGROUPMEMBERS,%q1))][setq(4,iter(%q3,u(%va/FN_ACCESSCHECK,parent(%q0),itext(0))))][setq(5,member(%q4,0))][not(gt(%q5,0))],u(%va/FN_ACCESSCHECK,parent(%q0),%q1))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no player or jgroup by that name.},110*,{@pemit&#160;%#=That is not a valid job number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available on that job.},1111110*,{@pemit&#160;%#=[ifelse(strmatch(%1,+*),[name(%q1)] member [name(extract(%q3,%q5,1))],name(%q1))] does not have access to that bucket.},{@pemit&#160;%#=You have assigned Job number&#160;%0 to [ifelse(isdbref(%q1),name(%q1),nobody)].;&amp;ASSIGNED_TO&#160;%q0=[ifelse(%q2,,%q1)];@trigger&#160;%va/TRIG_ADD=%q0,[ifelse(%q2,Assignment removed.,Assigned to [name(%q1)])].,%#,ASN,%q1;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,ASN,[ifelse(%q2,,%q1)]}
&amp;CMD_JOB/CHECKOUT [v(JOB_GO)]=$+job/checkout *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,secure(%0)))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][not(u(%va/FN_HASATTR,%q0,CHECKOUT))][udefault(%q0/CKO_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '[ansi(h,+jobs/all)]' for all jobs or '[ansi(h,+jobs/list &lt;bucket&gt;)]' to list by bucket.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)].},11110*,{@pemit&#160;%#=That job is already checked out.},111110*,{@pemit&#160;%#=That action is not available on that job.},1111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)]You have checked out [name(%q0)]. Nobody but you will be able to modify it until you check it back in.;&amp;CHECKOUT&#160;%q0=%# [secs()];@trigger&#160;%va/TRIG_ADD=%q0,Checked out by [name(%#)].,%#,CKO;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,CKO}
&amp;CMD_JOB/CHECKIN [v(JOB_GO)]=$+job/checkin *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,secure(%0)))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/FN_HASATTR,%q0,CHECKOUT)][or(u(%va/FN_WIZONLY,%#),switch(first(get(%q0/CHECKOUT)),%#,1,0))][udefault(%q0/CKI_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '[ansi(h,+jobs/all)]' for all jobs or '[ansi(h,+jobs/list &lt;bucket&gt;)]' to list by bucket.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is not checked out.},11110*,{@pemit&#160;%#=You cannot check that job back in.},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)]You have checked [name(%q0)] back in.;&amp;CHECKOUT&#160;%q0=;@trigger&#160;%va/TRIG_ADD=%q0,Checked in by [name(%#)].,%#,CKI;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,CKI}
&amp;CMD_JOB/CLAIM [v(JOB_GO)]=$+job/claim *:@fo&#160;%#=+job/assign&#160;%0=%#
&amp;CMD_JOB/CLONE [v(JOB_GO)]=$+job/clone *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][udefault(%q0/CLN_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that number.},110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit [setq(1,inc(get(%va/JOBS_NUM)))]%#=Job copied as Job&#160;%q1.;&amp;JOBS_NUM&#160;%va=%q1;@clone&#160;%q0=Job&#160;%q1;@pemit me=[setq(2,num(Job&#160;%q1))];@tel&#160;%q2=%va;@trigger&#160;%va/TRIG_ADD=%q2,Cloned job.,%#,CLN,%q0;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,CLN,%q1}
&amp;CMD_JOB/COMPLETE [v(JOB_GO)]=$+job/complete *=*:@switch [u(%va/HAS_ACCESS,%#)][u(%va/COMPLETE_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/COM_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=That is not a valid job #. See '+jobs/all' for valid jobs.},1110*,{@pemit&#160;%#=Permission denied.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=[u(%va/FN_ADDSTAT_ART,parent(%q0),%q0)][u(%va/FN_ADDSTAT_ART,%vc,%q0)]You have completed job #&#160;%0.;@trigger&#160;%va/TRIG_ADD=%q0,[u(%va/FN_STRTRUNC,%1,get(%va/BUFFER))],%#,COM;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,COM,%q1;@trigger&#160;%va/TRIG_DESTROY=%q0}
&amp;CMD_JOB/CREATE [v(JOB_GO)]=$+job/create */*=*:@switch [u(%va/HAS_ACCESS,%#)][u(%va/CREATE_ACCESS,%#)][setq(0,u(%va/FN_FIND-BUCKET,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,%q0,%#)][udefault(%q0/CRE_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=There is no bucket by that name. Type '[ansi(h,+buckets)]' to get a list of buckets.},1110*,{@pemit&#160;%#=You cannot access that bucket.},11110*,{@pemit&#160;%#=That action is not available for that bucket.},{@pemit [setq(1,inc(get(%va/JOBS_NUM)))]%#=You have created job number&#160;%q1 entitled '[u(%va/FN_STRTRUNC,%1,30)]'.;@trigger&#160;%va/TRIG_CREATE=%#,%q0,1,[u(%va/FN_STRTRUNC,%1,30)],[u(%va/FN_STRTRUNC,%2,u(%va/BUFFER))],,,1}
&amp;CMD_JOB/DELETE [v(JOB_GO)]=$+job/delete *:@switch [u(%va/HAS_ACCESS,%#)][or(u(%va/DELETE_ACCESS,%#),u(%va/FN_WIZONLY,%#),switch(%#,%va,1,0))][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/DEL_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=That is not a valid job number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=[u(%va/FN_ADDSTAT_ART,parent(%q0),%q0)][u(%va/FN_ADDSTAT_ART,%vc,%q0)]You have deleted job #&#160;%0.;@trigger&#160;%va/TRIG_ADD=%q0,Job&#160;%0 Deleted,%#,DEL;@trigger&#160;%va/TRIG_DESTROY=%q0}
&amp;CMD_JOB/DENY [v(JOB_GO)]=$+job/deny *=*:@switch [u(%va/HAS_ACCESS,%#)][or(u(%va/DENY_ACCESS,%#),u(%va/FN_STAFFALL,%#))][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/DNY_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=There is no job by that number.},1110*,{@pemit&#160;%#=You cannot access that job.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=[u(%va/FN_ADDSTAT_ART,parent(%q0),%q0)][u(%va/FN_ADDSTAT_ART,%vc,%q0)]You have denied job #%0.;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,DNY;@trigger&#160;%va/TRIG_ADD=%q0,[u(%va/FN_STRTRUNC,%1,get(%va/BUFFER))],%#,DNY;@trigger&#160;%va/TRIG_DESTROY=%q0}
&amp;CMD_JOB/DUE [v(JOB_GO)]=$+job/due *=*:@switch [not(eq(words(%1,/),3))][u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][udefault(%q0/DUE_ACCESS,1,%#)][switch(lcstr(%1),none,2,ifelse(gt(setr(1,u(%va/FN_STRINGSECS,%1)),0),1[setq(1,add(%q1,secs()))],ifelse(gt(setr(1,convtime(%1)),0),1,ifelse(gt(setr(1,convtime(XXX&#160;%1)),0),1,t(gt(setr(1,convtime(%1 23:59:59)),0))))))]=0*,{@@},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=That is not a valid job number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That action is not available for that job.},111110*,{@pemit&#160;%#=Invalid date. Use date formatting as '[rest(time())]'.},111112*,{@pemit&#160;%#=You have cleared Job Number&#160;%0's date.;&amp;DUE_ON&#160;%q0=;@trigger&#160;%va/TRIG_ADD=%q0,Due date cleared.,%#,DUE;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,DUE},{@pemit&#160;%#=You have set Job Number&#160;%0's date to&#160;%1.;&amp;DUE_ON&#160;%q0=%q1;@trigger&#160;%va/TRIG_ADD=%q0,Due on [secure(%1)].,%#,DUE,[secure(%1)];@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,DUE}
&amp;CMD_JOB/DUE2 [v(JOB_GO)]=$+job/due *=*/*/*:@switch [u(%va/HAS_ACCESS,%#)][isdbref(setr(0,u(%va/FN_FIND-JOB,%0)))][setq(1,convtime(XXX [switch([rjust(%1,2,0)],01,Jan,02,Feb,03,Mar,04,Apr,05,May,06,Jun,07,Jul,08,Aug,09,Sep,10,Oct,11,Nov,12,Dec)] [rjust(%2,2,0)] 23:59:00 [switch(strlen(%3),2,20[rjust(%3,2,0)],%3)]))][gt(%q1,0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][udefault(%q0/DUE_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid job number.},110*,{@pemit&#160;%#=Invalid date. Use date formatting as 'MM/DD/YY', '[rest(time())]', 'none' to clear.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have set Job Number&#160;%0's date to [convsecs(%q1)].;&amp;DUE_ON&#160;%q0=%q1;@trigger&#160;%va/TRIG_ADD=%q0,Due on [convsecs(%q1)].,%#,DUE;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,DUE}
&amp;CMD_JOB/EDIT [v(JOB_GO)]=$+job/edit */*=*/*:@switch [u(%va/HAS_ACCESS,%#)][u(%va/EDIT_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][setq(1,get(%q0/COMMENT_%1))][switch(first(%q1,|),ADD,1,CRE,1,0)][not(u(%va/IS_LOCKED,%q0,%#))][switch(extract(%q1,3,1,|),%#,1,u(%va/FN_WIZONLY,%#))][udefault(%q0/EDT_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=That is an invalid job number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=You cannot modify that entry.},111110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},1111110*,{@pemit&#160;%#=You can only edit entries that belong to you.},11111110*,{@pemit&#160;%#=That action is not available for that job.},{&amp;COMMENT_%1&#160;%q0=[extract(%q1,1,4,|)]|[edit(last(%q1,|),edit(%2,|,@@PIPE@@),edit(%3,|,@@PIPE@@))];@pemit&#160;%#=Edited: [last(u(%q0/COMMENT_%1),|)];@trigger&#160;%va/TRIG_ADD=%q0,Comment&#160;%1 edited by&#160;%n.,%#,EDT,[objeval(%#,secure(%1))];@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,EDT,[objeval(%#,secure(%1))]}
&amp;CMD_JOB/ERROR [v(JOB_GO)]=$+job:@switch [u(%va/HAS_ACCESS,%#)]=0*,{@pemit&#160;%#=Use +myjobs to access your jobs.},{@pemit&#160;%#=Type '+jobs' for a list of jobs, or '+job &lt;#&gt;' to view a specific job.}
&amp;CMD_JOB/ESC [v(JOB_GO)]=$+job/esc *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][setq(1,match(green yellow red,%1*))][setq(2,extract(GREEN YELLOW RED,%q1,1))][gt(%q1,0)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/ESC_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid job number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That is not a valid escalation code. Valid codes are red, yellow, and green.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have escalated job #&#160;%0 to&#160;%q2 status.;&amp;PRIORITY&#160;%q0=%q1;@trigger&#160;%va/TRIG_ADD=%q0,Priority To&#160;%q2.,%#,ESC,ucstr(secure(%1));@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,ESC,%q2}
&amp;CMD_JOB/HELP [v(JOB_GO)]=$+job/help *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,parent(u(%va/FN_FIND-JOB,%0)))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,%q0,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid job. Type '[ansi(h,+jobs)]' for a list of valid jobs.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_HEADER,Job Help For Bucket [name(%q0)])];@pemit&#160;%#=[u(%q0/HELP)][ifelse(u(%va/FN_HASATTRP,%q0,MYHELP),%r[u(%va/FN_BREAK,[ansi(c,Myjob Help)])]%r[u(%q0/MYHELP)],)];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_JOB/LAST [v(JOB_GO)]=$+job/last *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '+jobs/all' for all jobs or '+jobs/&lt;type&gt;' to list by type.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)][u(%va/FN_HEADER,View [name(%q0)])]%r[ulocal(%va/FN_BANNER,%q0)];@dolist [extract(setr(1,filter(%va/FIL_COMMENTS,sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*)))),ifelse(lt(sub(words(%q1),%1),1),1,inc(sub(words(%q1),%1))),inc(%1))]={@pemit&#160;%#=[u(%va/FN_READJOB,##,%q0)]};@wait 0={@pemit&#160;%#=[u(%va/FN_FOOTER,u(%va/FN_FLAGS,%q0))]};}
&amp;CMD_JOB/LOCK [v(JOB_GO)]=$+job/lock *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/FN_HASATTR,%q0,LOCKED))][udefault(%q0/LOK_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is an invalid job number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is already locked.},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have locked job&#160;%0. No further modifications can be made to this job until it is unlocked.;&amp;LOCKED_BY&#160;%q0=%#;&amp;LOCKED&#160;%q0=1;@trigger&#160;%va/TRIG_ADD=%q0,Locked by&#160;%n.,%#,LOK;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,LOK}
&amp;CMD_JOB/LOG [v(JOB_GO)]=$+job/log *:@switch [u(%va/HAS_ACCESS,%#)][u(%va/LOG_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/FN_HASATTRP,%q0,LOGFILE)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=There is no job by that name. Please type '+jobs/all' for all jobs or '+jobs/&lt;type&gt;' to list by type.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=There is no logfile for that bucket.},{@pemit&#160;%#=Logging Job&#160;%0 to game/[switch(first(version()),PennMUSH,log/command.log,TinyMUSH,netmush.log,RhostMUSH,[get(%q0/LOGFILE)]_manual.log,logs/M-[get(%q0/LOGFILE)].log%rNote that if the log file does not exist, then it did not get logged.)];@trigger&#160;%va/TRIG_LOG=%q0,%#}
&amp;CMD_JOB/MAIL [v(JOB_GO)]=$+job/mail *=*:@switch [u(%va/HAS_ACCESS,%#)][u(%va/MAIL_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/IS_PUBLIC,%q0)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/MAI_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=There is no job by that number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=+job/mail cannot be used on the job because the bucket in which it is stored is not set PUBLIC&#160;%(+myjobs-accessible%).},111110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},1111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have mailed [u(%va/FN_PLAYERLIST,%q0)] about job #%0, with the comments:&#160;%1;@trigger&#160;%va/TRIG_ADD=%q0,[u(%va/FN_STRTRUNC,ansi(h,Mail sent to [u(%va/FN_PLAYERLIST,%q0)]:)%r%r%1,get(%va/BUFFER))],%#,MAI;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,MAI,%q1}
&amp;CMD_JOB/MERGE [v(JOB_GO)]=$+job/merge *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%1))][setq(1,u(%va/FN_FIND-JOB,%0))][isdbref(%q1)][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/FN_ACCESSCHECK,parent(%q1),%#)][setq(2,u(%q0/NUM_COMMENT))][setq(3,u(%q1/NUM_COMMENT))][and(not(u(%va/IS_LOCKED,%q0,%#)),not(u(%va/IS_LOCKED,%q1,%#)))][not(eq(%0,%1))][udefault(%q0/MRG_ACCESS,1,%#)][udefault(%q1/MRG_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job number&#160;%0.},110*,{@pemit&#160;%#=There is no job number&#160;%1.},1110*,{@pemit&#160;%#=You do not have access to [name(%q0)].},11110*,{@pemit&#160;%#=You do not have access to [name(%q1)].},111110*,{@pemit&#160;%#=One of those jobs is locked or checked out.},1111110*,{@pemit&#160;%#=Sort of like a Klein bottle, eh?},11111110*,{@pemit&#160;%#=That action is not available for [name(%q0)].},111111110*,{@pemit&#160;%#=That action is not available for [name(%q1)].},{@trigger&#160;%va/TRIG_ADD=%q0,Job [secure(%0)] merged into this one.,%#,MRG;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,MRG,%q1;@wait 0={@dolist [sortby(%va/SORTBY_COMMENTS,lattr(%q1/COMMENT_*))]={@cpattr&#160;%q1/##=%q0/COMMENT_[get(%q0/NUM_COMMENT)];&amp;NUM_COMMENT&#160;%q0=[inc(get(%q0/NUM_COMMENT))]};@trigger&#160;%va/TRIG_DESTROY=%q1}};
&amp;CMD_JOB/NAME [v(JOB_GO)]=$+job/name *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/NAM_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have changed the name of Job&#160;%0 to&#160;%1.;&amp;TITLE&#160;%q0=[secure(%1)];@trigger&#160;%va/TRIG_ADD=%q0,Renamed to '[secure(%1)]'.,%#,NAM;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,NAM,[secure(%1)]}
&amp;CMD_JOB/NEW [v(JOB_GO)]=$+job/new *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][setq(1,default(%#/LAST_CONN,0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '+jobs/all' for all jobs or '+jobs/&lt;type&gt;' to list jobs by type.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_HEADER,View Job Number&#160;%0)]%r[ulocal(%va/FN_BANNER,%q0)][ifelse(u(%va/FN_HASATTRP,%q0,SUMMARY),[ulocal(%va/FN_SUMMARY,%q0)],)];@dolist [filter(%va/FIL_NEWCOMMENTS[default(%#/JOBSN,0)],sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*)))]={@pemit&#160;%#=[u(%va/FN_READJOB,##,%q0)]};@wait 0={@pemit&#160;%#=[ifelse(u(%va/IS_LOCKED,%q0,%#),u(%va/FN_FOOTER,u(%va/FN_FLAGS,%q0)),[u(%va/FN_FOOTER,New Activity on Job&#160;%0 since [convsecs(%q1)])])][u(%va/FN_READERS,%q0,%#)]};}
&amp;CMD_JOB/PUBLISH [v(JOB_GO)]=$+job/publish *:@switch [eq(words(%0,=),1)][u(%va/HAS_ACCESS,%#)][u(%va/EDIT_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/FN_HASATTRP,%q0,PUBLIC)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/PUB_ACCESS,1,%#)][eq(u(%q0/PUBLISH),1)]=0*,@@,10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=Permission denied.},1110*,{@pemit&#160;%#=There is no job by that number.},11110*,{@pemit&#160;%#=You do not have access to that job.},111110*,{@pemit&#160;%#=That job is not in a bucket that is accessible to +myjobs, so publication is moot.},1111110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},11111110*,{@pemit&#160;%#=That action is not available for that job.},111111110*,{@pemit&#160;%#=You have published Job&#160;%0.;&amp;PUBLISH&#160;%q0=1;@trigger&#160;%va/TRIG_ADD=%q0,Published by&#160;%n.,%#,PUB;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,PUB},{@pemit&#160;%#=Job&#160;%0 will now no longer be published.;&amp;PUBLISH&#160;%q0=0;@trigger&#160;%va/TRIG_ADD=%q0,Unpublished by&#160;%n.,%#,UNP;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,UNP}
&amp;CMD_JOB/PUBLISH2 [v(JOB_GO)]=$+job/publish *=*:@switch [u(%va/HAS_ACCESS,%#)][u(%va/EDIT_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][u(%va/IS_PUBLIC,%q0)][u(%va/FN_HASATTRP,%q0,COMMENT_%1)][udefault(%q0/PUB_ACCESS,1,%#)][neq(u(%q0/PUBLISH),1)][hasflag(%q0/COMMENT_%1,no_inherit)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=Permission denied.},110*,{@pemit&#160;%#=There is no job by that number.},1110*,{@pemit&#160;%#=You do not have access to that job.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That job is not in a bucket that is accessible to +myjobs, so publication is moot.},1111110*,{@pemit&#160;%#=That is not a valid comment number.},11111110*,{@pemit&#160;%#=That action is not available for that job.},111111110*,{@pemit&#160;%#=That job is published. Comment publication has no effect.},1111111110*,{@pemit&#160;%#=You have published Comment&#160;%1 on Job&#160;%0.;@set&#160;%q0/COMMENT_%1=no_inherit;@trigger&#160;%va/TRIG_ADD=%q0,Comment [secure(%1)] published by&#160;%n.,%#,PUB;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,PUB,%1},{@pemit&#160;%#=Job&#160;%0/Comment&#160;%1 will no longer be published.;@set&#160;%q0/COMMENT_%1=!no_inherit;@trigger&#160;%va/TRIG_ADD=%q0,Comment [secure(%1)] Unpublished by&#160;%n.,%#,UNP;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,UNP,%1}
&amp;CMD_JOB/QUERY [v(JOB_GO)]=$+job/query */*=*:@switch [and(u(%va/HAS_ACCESS,%#),u(%va/MAIL_ACCESS,%#))]=0*,{@pemit&#160;%#=Permission denied.},{@switch [setq(1,map(%va/MAP_SOURCE,secure(%0)))][setq(2,member(%q1,#-1))][not(gt(%q2,0))]=0,{@pemit&#160;%#='[extract(secure(%0),%q2,1)]' is not a valid player or jgroup.},{@pemit&#160;%#=You have sent a query to '%0' regarding '%1'.;@trigger&#160;%va/TRIG_CREATE=%#,locate(%vc,QUERY,i),2,[u(%va/FN_STRTRUNC,secure(%1),30)],Queried [u(%va/FN_ITEMIZE,map(%va/MAP_NAME,%q1,%b,|),|)]:%r%r[u(%va/FN_STRTRUNC,%2,get(%va/BUFFER))],%q1,,0}}
&amp;CMD_JOB/SET [v(JOB_GO)]=$+job/set *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][setq(2,dec(member(setr(a,HOLD NEW UNDERWAY 25 50 75 100),ucstr(%1))))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][and(isnum(%q2),gt(%q2,-1),lt(%q2,7))][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/STA_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid job.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That is an invalid setting. Valid job settings are:%r[u(%va/FN_ITEMIZE,lcstr(%qa))].},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You set Job Number [secure(%0)] to [setq(1,switch(%q2,0,ON HOLD,1,NEW,2,UNDERWAY,3,1/4 COMPLETE,4,1/2 COMPLETE,5,3/4 COMPLETE,COMPLETE))]%q1 status.;&amp;STATUS&#160;%q0=%q2;@trigger&#160;%va/TRIG_ADD=%q0,Set to&#160;%q1.,%#,STA;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,STA,%q1}
&amp;CMD_JOB/SOURCE [v(JOB_GO)]=$+job/source *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][setq(1,map(%va/MAP_SOURCE,secure(%1)))][setq(2,member(%q1,#-1))][not(gt(%q2,0))][udefault(%q0/SRC_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},11110*,{@pemit&#160;%#='[extract(secure(%1),%q2,1)]' is not a valid player or jgroup.},111110*,{@pemit&#160;%#=That action is not available for that job.},{&amp;opened_by&#160;%q0=%q1;@pemit&#160;%#=You have set job #%0 to have a source of [u(%va/FN_PLAYERLIST,%q0)].;@trigger&#160;%va/TRIG_ADD=%q0,Source changed to [u(%va/FN_PLAYERLIST,%q0)].,%#,SRC;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,SRC,%q1}
&amp;CMD_JOB/SUMMARY [v(JOB_GO)]=$+job/summary *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '[ansi(h,+jobs/all)]' for all jobs or '[ansi(h,+jobs/list &lt;bucket&gt;)]' to list by bucket.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_HEADER,View [name(%q0)])]%r[ulocal(%va/FN_BANNER,%q0)][ifelse(u(%va/FN_HASATTRP,%q0,SUMMARY),[ulocal(%va/FN_SUMMARY,%q0)],)][ifelse(u(%va/FN_WIZONLY,%#),[ulocal(%va/FN_STAFFSUM,%q0)],)];@wait 0={@pemit&#160;%#=[u(%va/FN_FOOTER,u(%va/FN_FLAGS,%q0))]};}
&amp;CMD_JOB/SUMSET [v(JOB_GO)]=$+job/sumset */*=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_HASATTRP,%q0,ACCESS_%1)][and(u(%va/CONFIG_ACCESS,%#),u(%q0/ACCESS_%1,%#))][not(u(%va/IS_LOCKED,%q0,%#))][u(%q0/PROCESS_%1,%2,%q0,%#)][udefault(%q0/SUM_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no such job. See '[ansi(h,+jobs)]' for a list of valid jobs.},110*,{@pemit&#160;%#='%1' is not a valid parameter. Valid parameters for [name(%q0)] are [u(%va/FN_ITEMIZE,map(%va/MAP_PARAMS,lattr(parent(%q0)/PROCESS_*)))].},1110*,{@pemit&#160;%#=You either can not use the +job/sumset command, or set that parameter.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=[u(%q0/ERROR_%1%q2)]},1111110*,{@pemit&#160;%#=That action is not available for that job.},{@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,SUM,[ucstr(%1)];&amp;%q3&#160;%q0=%q1;@trigger&#160;%va/TRIG_ADD=%q0,[ucstr(%1)] parameter updated to '%2',%#,SUM}
&amp;CMD_JOB/TAG [v(JOB_GO)]=$+job/tag *:@switch [u(%va/HAS_ACCESS,%#)][switch(strmatch(%0,*=*),1,[setq(8,secure(first(%0,=)))][setq(9,secure(rest(%0,=)))],[setq(8,secure(%0))][setq(9,%#)])][setq(7,map(%va/MAP_JGROUP,%q9))][setq(6,u(%va/fn_trim,squish(map(%va/MAP_JGROUPERROR,%q9))))][setq(0,u(%va/FN_FIND-JOB,%q8))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/TAG_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is an invalid job number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},11110*,{@pemit&#160;%#=That action is not available for that job.},{@switch [t(strlen(%q6))]=1,{@pemit&#160;%#=%q6},{@switch [strlen(setdiff(%q7,get(%q0/tagged_for)))]=0,{@pemit&#160;%#={[name(%q0)] is already tagged for the named player(s): [u(%va/FN_ITEMIZE,map(%va/MAP_NAME,%q7,%b,|),|)]}},{&amp;tagged_for&#160;%q0=[setunion(get(%q0/tagged_for),%q7)];@trigger&#160;%va/TRIG_ADD=%q0,Added tags for [setr(5,u(%va/FN_ITEMIZE,map(%va/MAP_NAME,%q7,%b,|),|))],%#,TAG,%q7;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,TAG,%q5;@pemit&#160;%#={Job&#160;%q8 updated - tags added. Now tagged for: [u(%va/FN_ITEMIZE,map(%va/MAP_NAME,get(%q0/tagged_for),%b,|),|)]}}}}
&amp;CMD_JOB/TRANS [v(JOB_GO)]=$+job/trans *=*:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][isdbref(setr(1,u(%va/FN_FIND-BUCKET,%1)))][udefault(%q0/TRN_ACCESS,1,%#)][udefault(%q1/TRN_ACCESS,1,%#)][not(u(%va/IS_LOCKED,%q0,%#))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=There is no bucket by that name. Type '[ansi(h,+buckets)]' for a list of valid buckets.},11110*,{@pemit&#160;%#=You cannot move that job from there.},111110*,{@pemit&#160;%#=You cannot move that job to there.},1111110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},{@pemit&#160;%#=You have transferred the job from [u(%va/FN_BUCKETNAME,%q0)] to [name(%q1)].;@set&#160;%q0=!going;&amp;going&#160;%q0;@parent&#160;%q0=%q1;@trigger&#160;%va/TRIG_ADD=%q0,Transferred to [name(%q1)].,%#,TRN;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,TRN,%q1}
&amp;CMD_JOB/UNDELETE [v(JOB_GO)]=$+job/undelete *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/FN_HASATTR,%q0,GOING)][udefault(%q0/UND_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job has not been deleted.},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have restored job&#160;%0.;@set&#160;%q0=!going;&amp;going&#160;%q0;@trigger&#160;%va/TRIG_ADD=%q0,Undeleted job.,%#,UND;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,UND,%q1}
&amp;CMD_JOB/UNLOCK [v(JOB_GO)]=$+job/unlock *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][u(%va/FN_HASATTRP,%q0,LOCKED)][udefault(%q0/UNL_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is an invalid job number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is not locked.},11110*,{@pemit&#160;%#=That action is not available for that job.},{@pemit&#160;%#=You have unlocked job&#160;%0.;&amp;LOCKED&#160;%q0=;&amp;LOCKED_BY&#160;%q0=;@trigger&#160;%va/TRIG_ADD=%q0,Unlocked by&#160;%n.,%#,UNL;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,UNL}
&amp;CMD_JOB/UNTAG [v(JOB_GO)]=$+job/untag *:@switch [u(%va/HAS_ACCESS,%#)][switch(strmatch(%0,*=*),1,[setq(8,secure(first(%0,=)))][setq(9,secure(rest(%0,=)))],[setq(8,secure(%0))][setq(9,%#)])][setq(7,map(%va/MAP_JGROUP,%q9))][setq(6,u(%va/fn_trim,squish(map(%va/MAP_JGROUPERROR,%q9))))][setq(0,u(%va/FN_FIND-JOB,%q8))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)][not(u(%va/IS_LOCKED,%q0,%#))][udefault(%q0/TAG_ACCESS,1,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is an invalid job number.},110*,{@pemit&#160;%#=You do not have access to that job.},1110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to [name(first(get(%q0/CHECKOUT)))],locked)]},11110*,{@pemit&#160;%#=That action is not available for that job.},{@switch [t(strlen(%q6))]=1,{@pemit&#160;%#=%q6},{@switch [strlen(setinter(%q7,get(%q0/tagged_for)))]=0,{@pemit&#160;%#={[name(%q0)] is not tagged for any of the named player(s): [u(%va/FN_ITEMIZE,map(%va/MAP_NAME,%q7,%b,|),|)]}},{&amp;tagged_for&#160;%q0=[setdiff(get(%q0/tagged_for),%q7)];@trigger&#160;%va/TRIG_ADD=%q0,Removed tags for [setr(5,u(%va/FN_ITEMIZE,map(%va/MAP_NAME,%q7,%b,|),|))],%#,TAG;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,TAG,%q5;@pemit&#160;%#={Job&#160;%q8 updated - tags removed. Now tagged for: [u(%va/FN_ITEMIZE,map(%va/MAP_NAME,get(%q0/tagged_for),%b,|),|)]}}}}
&amp;CMD_JOB/VIEW [v(JOB_GO)]=$+job *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,parent(%q0),%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no job by that name. Please type '[ansi(h,+jobs/all)]' for all jobs or '[ansi(h,+jobs/list &lt;bucket&gt;)]' to list by bucket.},110*,{@pemit&#160;%#=You do not have access to that job.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)][u(%va/FN_HEADER,View [name(%q0)])]%r[ulocal(%va/FN_BANNER,%q0,%#)][ifelse(u(%va/FN_HASATTRP,%q0,SUMMARY),[ulocal(%va/FN_SUMMARY,%q0,%#)],)];@dolist [filter(%va/FIL_COMMENTS,sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*)))]={@pemit&#160;%#=[u(%va/FN_READJOB,##,%q0)]};@wait 0={@pemit&#160;%#=[u(%va/FN_FOOTER,u(%va/FN_FLAGS,%q0))]};}
&amp;CMD_JOBS [v(JOB_GO)]=$+jobs:@fo&#160;%#=+jobs/select [switch(u(%va/FN_HASATTR,%#,JOBSELECT),1,get(%#/JOBSELECT),monitor)]
&amp;CMD_JOBS/ALL [v(JOB_GO)]=$+jobs/all:@fo&#160;%#=+jobs/select all
&amp;CMD_JOBS/CATCHUP [v(JOB_GO)]=$+jobs/catchup:@switch [u(%va/HAS_ACCESS,%#)]=0*,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=You are now caught up on jobs.;&amp;LAST_CONN&#160;%#=[secs()];@dolist lcon(%va)={think [u(%va/FN_READERS,##,%#)]}}
&amp;CMD_JOBS/CLEAN [v(JOB_GO)]=$+jobs/clean:@switch [u(%va/HAS_ACCESS,%#)]=0*,{@pemit&#160;%#=Permission denied.},{@trigger&#160;%va/TRIG_CLEAN;@pemit&#160;%#=Removing all non-player entries from Job Data.}
&amp;CMD_JOBS/COMPRESS [v(JOB_GO)]=$+jobs/compress:@switch [u(%va/FN_WIZONLY,%#)][words(remove(lcon(%va),#-1))]=0*,{@pemit&#160;%#=Permission denied.},10*,{&amp;JOBS_NUM&#160;%va=0;@pemit&#160;%#=Compressed. The next job number will be [inc(get(%va/JOBS_NUM))].},{@dolist [lnum(1,words(lcon(%va)))]={@name [extract(revwords(lcon(%va)),##,1)]=Job ##};&amp;JOBS_NUM&#160;%va=[words(lcon(%va))];@pemit&#160;%#=Compressed. The next job number will be [inc(get(%va/JOBS_NUM))].}
&amp;CMD_JOBS/CREDITS [v(JOB_GO)]=$+jobs/credits:@pemit&#160;%#=[u(%va/FN_HEADER,Anomaly Jobs)]%r%rVersion: [u(%va/VERSION)][space(5)]Release: [u(%va/RELEASE)]%r%rAuthor: [u(%va/CREDITS)]%r%rMaintainer: [u(%va/MAINTAINER)]%r%rContributors: [u(%va/CONTRIBUTORS)]%r%r[u(%va/LICENSE)]%r%r[u(%va/FN_FOOTER)]
&amp;CMD_JOBS/DATE [v(JOB_GO)]=$+jobs/date:@fo&#160;%#=+jobs/select all sort=date
&amp;CMD_JOBS/DUE [v(JOB_GO)]=$+jobs/due:@fo&#160;%#=+jobs/select all sort=due
&amp;CMD_JOBS/FROM [v(JOB_GO)]=$+jobs/from *:@fo&#160;%#=+jobs/select source=%0
&amp;CMD_JOBS/LIST [v(JOB_GO)]=$+jobs/list *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,u(%va/FN_FIND-BUCKET,%0))][isdbref(%q0)][u(%va/FN_ACCESSCHECK,%q0,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid bucket. Type '[ansi(h,+buckets)]' for a list of valid buckets.},110*,{@pemit&#160;%#=You do not have access to that bucket.},{@pemit&#160;%#=[u(%va/FN_JOBSHEADER,%#)];@dolist [sortby(%va/SORTBY_JOBNUM,remove(children(%q0),#-1))]={@pemit&#160;%#=[u(%va/FN_JOBLIST,##,%#)]};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER,* Denotes New Activity)];}
&amp;CMD_JOBS/MINE [v(JOB_GO)]=$+jobs/mine:@fo&#160;%#=+jobs/select mine
&amp;CMD_JOBS/NEW [v(JOB_GO)]=$+jobs/new:@fo&#160;%#=+jobs/select new
&amp;CMD_JOBS/OVERDUE [v(JOB_GO)]=$+jobs/overdue:@fo&#160;%#=+jobs/select overdue
&amp;CMD_JOBS/PRI [v(JOB_GO)]=$+jobs/pri:@fo&#160;%#=+jobs/select all sort=pri
&amp;CMD_JOBS/REPORTS [v(JOB_GO)]=$+jobs/reports *:@switch [and(u(%va/HAS_ACCESS,%#),u(%va/STATS_ACCESS,%#))][u(%va/FN_HASATTR,%va,REPORT_[first(%0,=)])][gt(words(%0,=),1)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no report by that name. See '[ansi(h,+jobs/reports)]' for a list of valid reports.},110*,{@pemit&#160;%#=[u(%va/FN_HEADER,[secure(ucstr(%0))] Report)]%r;@pemit&#160;%#=[u(%va/REPORT_[secure(%0)])];@pemit&#160;%#=[u(%va/FN_FOOTER)]},{@pemit&#160;%#=[u(%va/FN_HEADER,[secure(first(ucstr(%0),=))] Report)]%r;@pemit&#160;%#=[u(%va/REPORT_[first(secure(%0),=)],rest(secure(%0),=))];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_JOBS/REPORTS2 [v(JOB_GO)]=$+jobs/reports:@switch [and(u(%va/HAS_ACCESS,%#),u(%va/STATS_ACCESS,%#))]=0,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=[u(%va/FN_HEADER,Available Reports)]%r[ansi(hc,[ljust(Name,10)][ljust(Description,u(%va/FN_FLEXWIDTH,59))][rjust(Type,10)])]%r[u(%va/FN_BREAK)];@pemit&#160;%#=[iter(sort(ucstr(map(%va/MAP_REPORTS,lattr(%va/REPORT_*)))),[ljust(##,10)][u(%va/FN_STREXACT,rest(get(%va/RTITLE_##),|),u(%va/FN_FLEXWIDTH,59))][rjust(first(get(%va/RTITLE_##),|),10)],%B,%R)];@pemit&#160;%#=[u(%va/FN_FOOTER,[ansi(h,+jobs/reports &lt;report&gt;)])]}
&amp;CMD_JOBS/SEARCH [v(JOB_GO)]=$+jobs/search *:@switch [u(%va/HAS_ACCESS,%#)]=0*,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=[u(%va/FN_JOBSHEADER,%#)];@dolist revwords(lcon(%va))={@pemit [setq(0,%b)]%#=ifelse(and(u(%va/FN_ACCESSCHECK,parent(##),%#),gt(words(grepi(##,*,%0)),0)),[u(%va/FN_JOBLIST,##,%#)],)};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER,* Denotes New Activity)];}
&amp;CMD_JOBS/SELECT [v(JOB_GO)]=$+jobs/select *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,before(lcstr(%0),sort=))][setq(0,u(%va/FN_INFIX2POSTFIX,map(%va/MAP_JOBSELECT,u(%va/FN_TOKENLIST,%q0))))][not(strmatch(%q0,*#-1 MISMATCHED PARENS*))][not(strmatch(%q0,*#-1 SYNTAX ERROR*))][setq(9,u(%va/FN_TRIM,after(lcstr(%0),sort=)))][ifelse(setr(8,strmatch(%q9,-*)),setq(9,mid(%q9,1,dec(strlen(%q9)))),)][setq(9,ifelse(strlen(%q9),%q9,jobnum))][u(%va/FN_HASATTRP,%va,SORTBY_%q9)]=0*,@pemit&#160;%#=Permission denied.,10*,@pemit&#160;%#=Mismatched parentheses.,110*,@pemit&#160;%#=Syntax error.,1110,@pemit&#160;%#=Invalid sort type.,{@pemit&#160;%#=[u(%va/FN_JOBSHEADER,%#)];@dolist [setq(1,filter(%va/FIL_GOING,lcon(%va)))][u(%va/FN_S-INIT)][map(%va/MAP_PARSESTACK,%q0)][ifelse(%q8,revwords(sortby(%va/SORTBY_%q9,u(%va/FN_S-PEEK))),sortby(%va/SORTBY_%q9,u(%va/FN_S-PEEK)))]={@pemit&#160;%#=[ifelse(or(u(%va/FN_ACCESSCHECK,parent(##),%#),u(%va/FIL_MINE,##)),u(%va/FN_JOBLIST,##,%#),)];};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER,* Denotes New Activity)]}
&amp;CMD_JOBS/SORT [v(JOB_GO)]=$+jobs/sort:@fo&#160;%#=+jobs/select all sort=bucket
&amp;CMD_JOBS/WHO [v(JOB_GO)]=$+jobs/who *:@switch [u(%va/HAS_ACCESS,%#)][setq(0,pmatch(%0))][or(match(%0,none),isdbref(%q0))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#={There is no player by that name. Request must be by player or 'none'.}},{@pemit&#160;%#=[u(%va/FN_JOBSHEADER,%#)];@dolist [setq(1,switch(match(%0,none),0,%q0,))][u(%va/fn_trim,squish(iter(revwords(lcon(%va)),switch(u(%va/FIL_WHO,##,%q1),1,##))))]={@pemit&#160;%#=[ifelse(u(%va/FN_ACCESSCHECK,parent(##),%#),[u(%va/FN_JOBLIST,##,%#)],)]};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER,* Denotes New Activity)];}
&amp;CMD_JOBS/WHO2 [v(JOB_GO)]=$+jobs/who:@switch [u(%va/HAS_ACCESS,%#)]=0*,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=You must identify a player.}
&amp;CMD_MYJOB/ADD [v(JOB_GO)]=$+myjob/add *=*:@switch [not(haspower(%#,guest))][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][and(u(%va/IS_PUBLIC,%q0),match(get(%q0/opened_by),%#))][not(u(%va/FN_HASATTR,%q0,LOCKED))]=0*,{@pemit&#160;%#=This command is not available to guests.},10*,@pemit&#160;%#={That is an invalid job number.},110*,{@pemit&#160;%#=Job&#160;%0 is not yours. You can only modify your own jobs.},1110*,{@pemit&#160;%#=That job is locked and cannot be changed at this time.},{@pemit&#160;%#=Comments to job number&#160;%0 added.;@trigger&#160;%va/TRIG_ADD=%q0,%1,%#,ADD;@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,ADD}
&amp;CMD_MYJOB/HELP [v(JOB_GO)]=$+myjob/help *:@switch [setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)]=0*,{@pemit&#160;%#=That is not a valid job. Type '[ansi(h,+jobs)]' for a list of valid jobs.},{@pemit&#160;%#=[u(%va/FN_HEADER,MyJob Help)];@pemit&#160;%#=[ifelse(u(%va/FN_HASATTR,parent(%q0),MYHELP),u(%q0/MYHELP),No +myjob help has been defined for that bucket.)];@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_MYJOB/SUMSET [v(JOB_GO)]=$+myjob/sumset */*=*:@switch [not(haspower(%#,guest))][isdbref(setr(0,u(%va/FN_FIND-JOB,%0)))][u(%va/FN_HASATTRP,%q0,MYACCESS_[objeval(%#,%1)])][and(u(%va/CONFIG_ACCESS,%#),u(%q0/MYACCESS_[objeval(%#,%1)],%#))][not(u(%va/IS_LOCKED,%q0,%#))][u(%q0/MYPROCESS_[objeval(%#,%1)],objeval(%#,%2),%q0,%#)]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=There is no such job. See '[ansi(h,+jobs)]' for a list of valid jobs.},110*,{@pemit&#160;%#='%1' is not a valid parameter. Valid parameters for [name(%q0)] are [u(%va/FN_ITEMIZE,map(%va/MAP_PARAMS,lattr(parent(%q0)/MYPROCESS_*)))].},1110*,{@pemit&#160;%#=You either can not use the +myjob/sumset command, or set that parameter.},11110*,{@pemit&#160;%#=That job is presently [ifelse(u(%va/FN_HASATTRP,%q0,CHECKOUT),checked out to%b[name(first(get(%q0/CHECKOUT)))],locked)]},111110*,{@pemit&#160;%#=[u(%q0/MYERROR_[objeval(%#,%1)]%q2)]},{@trigger&#160;%va/TRIG_BROADCAST=%q0,%#,MYS,[ucstr([objeval(%#,%1)])];&amp;%q3&#160;%q0=%q1;@trigger&#160;%va/TRIG_ADD=%q0,[ucstr([objeval(%#,%1)])] parameter updated to '[objeval(%#,%2)]',%#,MYS}
&amp;CMD_MYJOB/VIEW [v(JOB_GO)]=$+myjob *:@switch [not(haspower(%#,guest))][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][or(gt(member(get(%q0/TAGGED_FOR),%#),0),u(%va/IS_TRANSPARENT,%q0),and(get(%q0/PUBLIC),match(get(%q0/OPENED_BY),%#)))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid job number.},110*,{@pemit&#160;%#=Job&#160;%0 is not yours. You can only view your own jobs.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)][u(%va/FN_HEADER,View [name(%q0)])]%r[u(%va/FN_MYBANNER,%q0)][ifelse(u(%va/FN_HASATTRP,%q0,MYSUMMARY),[ulocal(%va/FN_MYSUMMARY,%q0,%#)],)];@dolist [filter(%va/FIL_PUBLISHED,filter(%va/FIL_COMMENTS,sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*))))]={@pemit&#160;%#=[u(%va/FN_READJOB,##,%q0)]};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_MYJOB/LAST [v(JOB_GO)]=$+myjob/last *=*:@switch [not(haspower(%#,guest))][setq(0,u(%va/FN_FIND-JOB,%0))][isdbref(%q0)][or(gt(member(get(%q0/TAGGED_FOR),%#),0),u(%va/IS_TRANSPARENT,%q0),and(get(%q0/PUBLIC),match(get(%q0/OPENED_BY),%#)))]=0*,{@pemit&#160;%#=Permission denied.},10*,{@pemit&#160;%#=That is not a valid job number.},110*,{@pemit&#160;%#=Job&#160;%0 is not yours. You can only view your own jobs.},{@pemit&#160;%#=[u(%va/FN_READERS,%q0,%#)][u(%va/FN_HEADER,View [name(%q0)])]%r[u(%va/FN_MYBANNER,%q0)][ifelse(u(%va/FN_HASATTRP,%q0,MYSUMMARY),[ulocal(%va/FN_MYSUMMARY,%q0,%#)],)];@dolist [extract(setr(1,filter(%va/FIL_PUBLISHED,filter(%va/FIL_COMMENTS,sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*))))),ifelse(lt(sub(words(%q1),%1),1),1,inc(sub(words(%q1),%1))),inc(%1))]={@pemit&#160;%#=[u(%va/FN_READJOB,##,%q0)]};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER)]}
&amp;CMD_MYJOBS [v(JOB_GO)]=$+myjobs:@switch [haspower(%#,guest)]=1,@pemit&#160;%#={Sorry, this command is not available to guests.},{@pemit&#160;%#=[u(%va/FN_MYJOBSHEADER,%#)];@dolist revwords(lcon(%va))={@pemit&#160;%#=[ifelse(or(gt(member(get(##/TAGGED_FOR),%#),0),[or(and(get([parent(##)]/PUBLIC),match(get(##/OPENED_BY),%#)),u(%va/IS_TRANSPARENT,##))]),[u(%va/FN_MYJOBLIST,##,%#)],)]};@wait 0=@pemit&#160;%#=[u(%va/FN_FOOTER,[ansi(hr,*)] [ansi(hy,Denotes New Activity)])]}
&amp;CMD_PITCH [v(JOB_GO)]=$+pitch *=*:@switch [not(haspower(%#,guest))]=0*,{@pemit&#160;%#=Permission Denied.},{@pemit&#160;%#=You have pitched your idea to staff about '[secure(%0)]'. Please remember that this is merely an idea [ansi(hu,pitch)], and not a request. Staff, for one reason or many, may decide not to go with the idea.;@trigger&#160;%va/TRIG_CREATE=%#,locate(%vc,PITCH,i),1,[u(%va/FN_STRTRUNC,secure(%0),30)],%1,,,3}
&amp;CMD_REQUEST [v(JOB_GO)]=$+request *=*:@switch [not(haspower(%#,guest))]=0*,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=You have requested [secure(u(%va/FN_STRTRUNC,%0,30))] from staff. Please allow for some time to process it. Do not page staff about it - you will hear back soon.;@trigger&#160;%va/TRIG_CREATE=%#,[locate(%vc,REQ,i)],2,[u(%va/FN_STRTRUNC,secure(%0),30)],[u(%va/FN_STRTRUNC,%1,get(%va/BUFFER))],,,2}
&amp;CMD_TYPO [v(JOB_GO)]=$+typo *:@switch [not(haspower(%#,guest))]=0*,{@pemit&#160;%#=Permission denied.},{@pemit&#160;%#=You have notified production staff of the typo, with the details '[u(%va/FN_STRTRUNC,%0,get(%va/BUFFER))]';@trigger&#160;%va/TRIG_CREATE=%#,locate(%vc,BUILD,i),2,Typo Reported,[u(%va/FN_STRTRUNC,%0,get(%va/BUFFER))],,,4}
@dolist VA VB VC={@cpattr&#160;%#/JOB_##=[v(JOB_GO)]/##}
think [ansi(hc,ANOMALY JOBS:)] Setting controlling attributes.
@switch [v(JOB_PATCH)]=1,{@dolist STARTUP DATA_CHARS2 DISPLAY_MYHEADERS DISPLAY_MYJOB MYJOBS_HEADER FIL_DELETE FN_ANSIFY FN_EASYPIE_PENN FN_EASYPIE_TINY PENN_PIE PENN10_PIE PENN12_PIE FN_NEW_JOBS FN_PACK IS_PLAYER JOBS_HEADER JOBS_HEADER2 MAP_ANSIFY MAP_ARTSGRAPH MAP_NAME2 MAP_NEW SORTBY_JOB SORTBY_SORT={@switch [hasattr(v(JOB_VA),##)]=1,&amp;## [v(JOB_VA)]}}
&amp;CHARGRAPH [v(JOB_VA)]=@+-/!*ox#.X$^`~O&gt;
&amp;COLORGRAPH_1 [v(JOB_VA)]=gG
&amp;COLORGRAPH_2 [v(JOB_VA)]=yY
&amp;COLORGRAPH_3 [v(JOB_VA)]=rR
&amp;COLORGRAPH_4 [v(JOB_VA)]=cC
&amp;COLORGRAPH_5 [v(JOB_VA)]=bB
&amp;COLORGRAPH_6 [v(JOB_VA)]=mM
&amp;COLORGRAPH_7 [v(JOB_VA)]=wW
&amp;COLORGRAPH_8 [v(JOB_VA)]=hX
&amp;COLORGRAPH_9 [v(JOB_VA)]=hC
&amp;COLORGRAPH_10 [v(JOB_VA)]=hB
&amp;COLORGRAPH_11 [v(JOB_VA)]=hR
&amp;COLORGRAPH_12 [v(JOB_VA)]=hY
&amp;COLORGRAPH_13 [v(JOB_VA)]=hG
&amp;COLORGRAPH_14 [v(JOB_VA)]=hM
&amp;COLORGRAPH_15 [v(JOB_VA)]=hW
&amp;COLORGRAPH_16 [v(JOB_VA)]=hX
&amp;COLORGRAPH_17 [v(JOB_VA)]=hC
&amp;DATA_31-15 [v(JOB_VA)]=@@@@####$$$^^^&amp;&amp;&amp;**((())__+++{{}}//;;'':::&quot;&quot;&lt;&lt;&lt;&gt;&gt;&gt;???,,,....aaa&#160;!!@@@@###$$$^^^&amp;&amp;&amp;**(()))__++{{}}//;;''::&quot;&quot;&lt;&lt;&lt;&gt;&gt;???,,,....aaaab&#160;!!!!@@@@###$$$^^&amp;&amp;&amp;**(())__++{{}}//;''::&quot;&quot;&quot;&lt;&lt;&gt;&gt;???,,,...aaaabbb ~~!!!!@@@@###$$^^^&amp;&amp;**(())_++{{}}/;;''::&quot;&quot;&lt;&lt;&gt;&gt;???,,...aaaabbbbc =~~~~!!!@@@###$$^^^&amp;&amp;**())__+{{}//;;'::&quot;&quot;&lt;&lt;&gt;&gt;??,,,..aaabbbbcccc ===~~~~!!!@@@###$$^^&amp;&amp;*(())_++{}//;'':&quot;&quot;&lt;&lt;&gt;&gt;??,,..aaabbbbccccdd --====~~~~!!!@@##$$^^&amp;&amp;*(()_++{}//;'::&quot;&lt;&lt;&gt;??,,...aabbbccccdddde 0----====~~~!!!@@##$$^&amp;&amp;*())_+{}/;;':&quot;&lt;&lt;&gt;??,,..aabbbcccddddeeee 00000----===~~~!!@@#$$^&amp;&amp;*()_+{}/;':&quot;&lt;&lt;&gt;?,,..aabbcccdddeeeeefff 99990000----===~~!!@@#$^^&amp;*()+{}/;':&quot;&lt;&gt;?,..aabbccdddeeeefffffgg 888999990000---==~~!!@##$^&amp;()_+}/':&quot;&lt;&gt;?,.abbccdddeeeffffggggggh 7778888889999000--==~~!@#$^&amp;()+};'&quot;&lt;?,.abbcddeeefffggggghhhhhhh 66777777778888999900--=~!@#^&amp;(+};:&lt;?.abcddeeffgggghhhhhiiiiiiii 566666666666777778889900-=~@$&amp;)}'&lt;,abdeefggghhhiiiiiijjjjjjjjjj 5555555555555555666666778890=@&amp;}&lt;adegghiiijjjjjjjkkkkkkkkkkkkkk 4444444444444444444444444444444llllllllllllllllllllllllllllllll 3333332222222222221111```ZYXVSOHBwusrqppoooonnnnnnnnmmmmmmmmmmm 2222211111111`````ZZZYYXWVUSQOLHEBywvutsrrqqppppoooooooonnnnnnn 1111```````ZZZZYYYXXWWVUTSRQOMKHFDBzywvuutssrrrqqqqppppppoooooo ````ZZZZZZYYYYXXXWWVVUTSRQPOMLJHGECBAyxwwvuuttssrrrrqqqqqpppppp ZZZZZYYYYXXXXWWWVVUUTSSRQPONLKJHGFDCBAzyxwwvvuuttssssrrrrqqqqqq YYYYYXXXXWWWWVVUUTTSSRQQPONMLKJHGFEDCBAzyyxwwvvuuutttssssrrrrrq YXXXXXWWWVVVVUUTTSSRRQPPONMLKJIHGFEDDCBAzzyxxwwvvvuuutttsssssrr XXWWWWVVVVUUUTTSSRRQQPPONMMLKJIHHGFEDCCBAAzyyxxwwwvvuuuuttttsss WWWVVVVUUUTTTSSSRRQQPOONNMLKKJIHHGFEEDCCBAAzzyyxxwwwvvvuuuutttt VVVVUUUUTTTSSSRRQQPPOONNMLLKJJIHHGFFEDDCBBAAzzyyyxxwwwvvvvuuuut VVUUUUTTTSSSRRRQQPPOONNMMLKKJJIHHGFFEEDDCBBAAzzzyyxxxwwwvvvvuuu UUUTTTTSSSRRRQQQPPOONNMMLLKKJJIHHGGFFEDDCCBBAAAzzyyyxxxwwwwvvvv UTTTTSSSSRRRQQPPPOONNNMMLLKKJIIHHGGFFEEDDCCBBAAAzzzyyyxxxwwwwvv TTTSSSSRRRQQQPPPOONNNMMLLKKJJIIHHGGFFEEDDDCCBBBAAzzzyyyxxxxwwww TSSSSRRRRQQQPPPOONNNMMLLLKKJJIIHHGGGFFEEDDCCCBBBAAzzzzyyyxxxxww
&amp;DATA_CHARS [v(JOB_VA)]=abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`1234567890-=~!@#$^&amp;*()_+{}/;':&quot;&lt;&gt;?,.
&amp;DISPLAY_# [v(JOB_VA)]=[u(%va/FN_STREXACT,%0,default(%#/JOBSWIDTH_#,8))]
&amp;DISPLAY_A [v(JOB_VA)]=[u(%va/FN_STREXACT,ifelse(isdbref(get(%0/ASSIGNED_TO)),name(get(%0/ASSIGNED_TO)),-),default(%#/JOBSWIDTH_A,16))]
&amp;DISPLAY_B [v(JOB_VA)]=[u(%va/FN_STREXACT,u(%va/FN_BUCKETNAME,%0),default(%#/JOBSWIDTH_B,5))]
&amp;DISPLAY_C [v(JOB_VA)]=[u(%va/FN_STREXACT,u(%va/FN_SHORT_DATE,convsecs(get(%0/OPENED_ON))),default(%#/JOBSWIDTH_C,8))]
&amp;DISPLAY_D [v(JOB_VA)]=[u(%va/FN_STREXACT,switch(get(%0/STATUS),0,--HOLD--,ifelse(get(%0/DUE_ON),ifelse(gt(secs(),get(%0/DUE_ON)),OVERDUE!,[u(%va/FN_SHORT_DATE,convsecs(get(%0/DUE_ON)))]),--------)),default(%#/JOBSWIDTH_D,8))]
&amp;DISPLAY_F [v(JOB_VA)]=[u(%va/FN_STREXACT,[ifelse(u(me/IS_LOCKED,%0),ifelse(u(%va/FN_HASATTRP,%0,CHECKOUT),C,L),-)][ifelse(u(me/IS_PUBLIC,%0),M,-)][ifelse(u(me/IS_TAGGED,%0),T,-)][ifelse(u(me/IS_PUBLISHED,%0),P,-)],default(%#/JOBSWIDTH_F,4))]
&amp;DISPLAY_M [v(JOB_VA)]=[u(%va/FN_STREXACT,u(%va/FN_SHORT_DATE,convsecs(get(%0/MODIFIED_ON))),default(%#/JOBSWIDTH_M,8))]
&amp;DISPLAY_O [v(JOB_VA)]=[u(%va/FN_STREXACT,name(first(get(%0/OPENED_BY))),default(%#/JOBSWIDTH_O,16))]
&amp;DISPLAY_S [v(JOB_VA)]=[u(%va/FN_STRTRUNC,center(switch([u(%va/FN_HASATTRP,%0,LOCKED)][u(%va/FN_HASATTRP,%0,CHECKOUT)][get(%0/STATUS)],1*,LOCKED,01*,CHECKED,000,ON HOLD,001,NEW,002,UNDERWAY,003,1/4 DONE,004,1/2 DONE,005,3/4 DONE,006,COMPLETE,NEW),default(%#/JOBSWIDTH_S,8)),default(%#/JOBSWIDTH_S,8))]
&amp;DISPLAY_T [v(JOB_VA)]=[u(%va/FN_STREXACT,get(%0/TITLE),default(%#/JOBSWIDTH_T,u(%va/FN_LEFTOVER)))]
&amp;DISPLAY_BUCKET [v(JOB_VA)]=[rjust(ansi(h,Name:),20)] [name(%q0)] [ifelse(u(%va/FN_STAFFALL,%#),%(%q0%),)]&#160;%([words(remove(children(%q0),#-1))] jobs in bucket%)%r[rjust(ansi(h,Locked To:),20)] [ifelse(u(%va/FN_HASATTRP,%q0,ACCESS),[get(%q0/ACCESS)] [ifelse(u(%va/FN_ACCESSCHECK,%q0,%#),%(You have access%),%(You do not have access%))],*UNLOCKED*)]%r[rjust(ansi(h,Post Data:),20)]&#160;%(Job system will post to these boards%)%r[u(%va/fn_columns,Complete: [u(%va/FN_FIND-BBNUM,get(%q0/POST_COMPLETE))]|Approve: [u(%va/FN_FIND-BBNUM,get(%q0/POST_APPROVE))]|Deny: [u(%va/FN_FIND-BBNUM,get(%q0/POST_DENY))],16,|,21)][ifelse(u(%va/FN_HASATTRP,%q0,TURNAROUND),%r[rjust(ansi(h,Turnaround:),20)] [get(%q0/TURNAROUND)] hours&#160;%([div(get(%q0/TURNAROUND),24)] days%),)]%r[rjust(ansi(h,Logfile:),20)] [switch([first(version())]-[u(%va/FN_HASATTRP,%q0,LOGFILE)],PennMUSH-1,command.log,TinyMUSH-1,netmush.log,RhostMUSH-1,[get(%q0/LOGFILE)]_manual.log,*-1,M-[u(%q0/LOGFILE)].log,None)]%r[rjust(ansi(h,Hidden Status:),20)] [switch([u(%va/FN_HASATTRP,%q0,HIDDEN)][gt(member(u(%#/JOBSH),%q0),0)],00,Unhidden,01,Locally,11,Globally Hidden &amp; Locally Watched,10,Globally,UNKNOWN CASE)]%r[rjust(ansi(h,+Myjobs Status:),20)] [ifelse(u(%va/FN_HASATTRP,%q0,PUBLIC),Accessible,Inaccessible)]%r[rjust(ansi(h,Avg Resolve Time:),20)] [u(%va/fn_trim,u(%va/FN_ART,%q0))]%r[rjust(ansi(h,Closure Stats:),20)]%b[ljust(Completed: [after(grab(get(%q0/LIST_STATS),COM|*),|)],16)][ljust(Deleted: [after(grab(get(%q0/LIST_STATS),DEL|*),|)],16)][ljust(Approved: [after(grab(get(%q0/LIST_STATS),APR|*),|)],16)]Denied: [after(grab(get(%q0/LIST_STATS),DNY|*),|)]%r[rjust(ansi(h,Desc:),20)] [get(%q0/DESC)][ifelse(gt(words(setr(x,setdiff(lattr(%q0),u(%va/LIST_BADATTR,%q0)))),0),%r[rjust(ansi(h,Provides:),20)]&#160;%(Attributes provided to jobs in the bucket%)%r[u(%va/fn_columns,%qx,16,,21)],)][ifelse(gt(words(lattr(%q0/PROCESS_*)),0),%r[rjust(ansi(h,Settings:),20)]&#160;%(+job/sumset settings%)%r[u(%va/fn_columns,map(MAP_SETTINGS,lattr(%q0/PROCESS_*)),16,,21)],)]
&amp;DISPLAY_BUCKET2 [v(JOB_VA)]=[rjust(ansi(h,Players:),20)]&#160;%(Connected players with access to this bucket%)%r[u(%va/fn_columns,[u(%va/fn_trim,squish(iter(edit(objeval(%#,lwho()),%b,|),ifelse(and(u(%va/HAS_ACCESS,##),u(%va/FN_ACCESSCHECK,%q0,##)),name(##),),|,|),|),b,|)],16,|,21)]
&amp;FIL_ACCESS [v(JOB_VA)]=u(%va/FN_ACCESSCHECK,%0,%#)
&amp;FIL_BROADCAST [v(JOB_VA)]=ifelse(u(%va/FN_HASATTRP,%0,JOBS_SILENCE),0,u(%va/FN_ACCESSCHECK,%q0,%0))
&amp;FIL_BUCKET [v(JOB_VA)]=t(member(children(%1),%0))
&amp;FIL_COMMENTS [v(JOB_VA)]=t(member(get(%va/LIST_VISCOMMENTS),first(get(%q0/%0),|)))
&amp;FIL_DUEAFTER [v(JOB_VA)]=or(not(strlen(get(%0/DUE_ON))),eq(get(%0/DUE_ON),0),gt(get(%0/DUE_ON),%1))
&amp;FIL_ESC [v(JOB_VA)]=eq(get(%0/PRIORITY),%1)
&amp;FIL_GOING [v(JOB_VA)]=not(default(%0/GOING,0))
&amp;FIL_ISBUCKET [v(JOB_VA)]=member(%vc,parent(%0))
&amp;FIL_ISPLAYER [v(JOB_VA)]=or(hastype(%0,player),member(lcon(%vb),%0))
&amp;FIL_MINE [v(JOB_VA)]=gt(member([switch(loc(get(%0/assigned_to)),%vb,u(%va/FN_JGROUPMEMBERS,get(%0/assigned_to)),get(%0/assigned_to))] [get(%0/tagged_for)],%#),0)
&amp;FIL_NEW [v(JOB_VA)]=u(%va/FIL_NEW0,%0)
&amp;FIL_NEW0 [v(JOB_VA)]=gt(get(%0/MODIFIED_ON),get(%#/LAST_CONN))
&amp;FIL_NEW1 [v(JOB_VA)]=gt(dec(get(%0/NUM_COMMENT)),last(grab(get(%0/LIST_READERS),%#|*),|))
&amp;FIL_NEWCOMMENTS0 [v(JOB_VA)]=and(gt(extract(get(%q0/%0),2,1,|),%q1),gt(member(get(%va/LIST_VISCOMMENTS),first(get(%q0/%0),|)),0))
&amp;FIL_NEWCOMMENTS1 [v(JOB_VA)]=gt(last(%0,_),last(grab(get(%q0/LIST_READERS),%#|*),|))
&amp;FIL_NOSPAM [v(JOB_VA)]=not(u(%va/FN_HASATTR,%0,JOBS_NOSPAM))
&amp;FIL_NOTPLAYER [v(JOB_VA)]=not(or(hastype(%0,player),member(lcon(%vb),%0)))
&amp;FIL_OVERDUE [v(JOB_VA)]=ifelse(get(%0/DUE_ON),gt(secs(),get(%0/DUE_ON)),0)
&amp;FIL_PUBLISHED [v(JOB_VA)]=or(u(%q0/PUBLISH),hasflag(%q0/%0,no_inherit),member(get(%q0/TAGGED_FOR),%#),strmatch(extract(get(%q0/%0),3,1,|),%#))
&amp;FIL_SOURCE [v(JOB_VA)]=t(member(get(%0/OPENED_BY),%1))
&amp;FIL_STATUS [v(JOB_VA)]=eq(get(%0/STATUS),%1)
&amp;FIL_SEARCH [v(JOB_VA)]=t(words(grepi(%0,*,%1)))
&amp;FIL_WHO [v(JOB_VA)]=strmatch(get(%0/ASSIGNED_TO),%1)
&amp;FN_ACCESSCHECK [v(JOB_VA)]=and(or(u(%va/FN_WIZONLY,%1),switch([elock(%0/speech,%1)][gt(member(get(%1/JOBSB),%0),0)],01,1,10,1,11,0,0)),u(%va/HAS_ACCESS,%1))
&amp;FN_ADDSTAT [v(JOB_VA)]=[setq(x,ifelse(u(%va/FN_HASATTR,%1,LIST_STATS),get(%1/LIST_STATS),))][setq(0,match(%qx,%0|*))][setq(1,grab(%qx,%0|*))][ifelse(gt(%q0,0),[set(%1,LIST_STATS:[setunion(ldelete(%qx,%q0),[first(%q1,|)]|[inc(rest(%q1,|))])])],[set(%1,LIST_STATS:[setunion(%qx,%0|1)])])]
&amp;FN_ADDSTAT_ART [v(JOB_VA)]=null(set(%0,STAT_ART:[add(first(default(%0/STAT_ART,0 0)),sub(secs(),get(%1/OPENED_ON)))] [inc(last(default(%0/STAT_ART,0 0)))]))
&amp;FN_ART [v(JOB_VA)]=u(%va/FN_TIME,round(fdiv(first(default(%0/STAT_ART,0 0)),rest(default(%0/STAT_ART,0 1))),0))
&amp;FN_ASSEMBLEPIE [v(JOB_VA)]=[setq(1,%1)][setq(0,0)][map(%va/MAP_PIEDATA,%0,switch(%2,,%b,%2),|)]
&amp;FN_BANNER [v(JOB_VA)]=u(%va/FN_SKIN,BANNER,%0,%1,%2,%3)
&amp;FN_BARGRAPH [v(JOB_VA)]=[setq(4,ifelse(%5,%5,%B))][setq(5,ifelse(%2,%2,2))][setq(6,ifelse(%3,ifelse(gt(%3,16),16,%3),1))][setq(7,switch(%4,,#,%4))][setq(1,ifelse(%1,%1,18))][setq(2,%q1)][setq(0,last(sort(%0,n,%q4,%q4),%q4))][setq(3,fdiv(%q0,%q1))][setq(x,iter(lnum(%q1),[setq(9,0)][switch(%q2,%q1,rjust(u(FN_BARGRAPHAXIS,%q0),5),ifelse(mod(%q1,2),inc(div(%q1,2)),div(%q1,2)),rjust(u(FN_BARGRAPHAXIS,div(%q0,2)),5),[space(5)])]|[map(MAP_GRAPH,%0,%q4,%b)][setq(2,sub(%q2,1))],%B,%R))]%qx%R[space(4)]0+[repeat(-,dec(add(mul(words(%0,%q4),%q5),words(%0,%q4))))]
&amp;FN_BARGRAPHAXIS [v(JOB_VA)]=switch(log(%0),&lt;5,%0,&lt;6,[u(%va/FN_TRIM,u(%va/FN_STRTRUNC,fdiv(%0,1E3),4),r,.)]K,&lt;9,[u(%va/FN_TRIM,u(%va/FN_STRTRUNC,fdiv(%0,1E6),4),r,.)]M,[u(%va/FN_TRIM,u(%va/FN_STRTRUNC,fdiv(%0,1E9),4),r,.)]B)
&amp;FN_BREAK [v(JOB_VA)]=u(%va/FN_SKIN,BREAK,%0,%1,%2,%3)
&amp;FN_BUCKETHEADER [v(JOB_VA)]=u(%va/FN_SKIN,BUCKETHEADER,%0,%1,%2,%3)
&amp;FN_BUCKETLIST [v(JOB_VA)]=u(%va/FN_SKIN,BUCKETLIST,%0,%1,%2,%3)
&amp;FN_BUCKETNAME [v(JOB_VA)]=ifelse(get(%0/GOING),GOING,ifelse(isdbref(parent(%0)),name(parent(%0)),ERROR))
&amp;FN_CLEANFIND [v(JOB_VA)]=t(words(filter(%va/FIL_NOTPLAYER,get(%0/%1))))
&amp;FN_CLEANFIX [v(JOB_VA)]=[setq(0,filter(%va/FIL_ISPLAYER,get(%0/%1)))][ifelse(words(%q0),%q0,owner(me))]
&amp;FN_COLORPIE [v(JOB_VA)]=setq(0,u(fn_equalizepie,%1,%2))[setq(p,%0)][setq(1,u(%va/fn_rotatestr,setr(1,v(data_chars)),mod(round(fdiv(mul(%3,strlen(%q1)),360),0),360)))][setq(a,%]%])][setq(b,%qa%qa)][setq(c,%qb%qb)][null(map(map_colorpie,%q0,%2))][setq(p,edit(%qp,|,ansi(n,|)))]%qP
&amp;FN_COORD2ANG [v(JOB_VA)]=switch(%0:%1,-*:-*,add(180,atan(fdiv(%1,%0),deg)),-*:*,add(180,atan(fdiv(%1,%0),deg)),*:-*,add(360,atan(fdiv(%1,%0),deg)),0:0,0,atan(fdiv(%1,%0),deg))
&amp;FN_COLUMNS [v(JOB_VA)]=switch(first(version()),RhostMUSH,[columns(%0,min(sub(79,ifelse(gt(%3,78),1,%3)),%1),div(sub(79,ifelse(gt(%3,78),1,%3)),%1),l,,,ifelse(gt(words(%3),0),space(%3)),,,1,%2)],PennMUSH,[align([ifelse(%3,dec(%3),0)] [sub(78,ifelse(%3,dec(%3),0))],%B,[table(%0,%1,sub(78,ifelse(%3,dec(%3),0)),%2)])],columns(%0,%1,%2,%3))
&amp;FN_CUTPIE [v(JOB_VA)]=setq(0,inc(%2))[setq(1,fdiv(%1,%2))][setq(2,power(%3,2))][setq(5,iter(lnum(0,dec(%3)),round(mul(sqrt(sub(%q2,power(add(##,.7),2))),%q1),0)))][setq(5,revwords(%q5) [setr(8,inc(ceil(mul(%3,2))))]&#160;%q5)][iter(lnum(-%3,%3),space(sub(%q8,setr(9,extract(%q5,#@,1))))[mid(extract(%0,add(##,%q0),1),shl(sub(%1,%q9),1),shl(%q9,2))],,|)]
&amp;FN_DATECONV [v(JOB_VA)]=switch(words(%0,/),3,convtime(XXX [switch([rjust(first(%0,/),2,0)],01,Jan,02,Feb,03,Mar,04,Apr,05,May,06,Jun,07,Jul,08,Aug,09,Sep,10,Oct,11,Nov,12,Dec)] [rjust(extract(%0,2,1,/),2,0)] 23:59:00 [switch(strlen(setr(0,last(%0,/))),2,20[rjust(%q0,2,0)],%q0)]),switch(convtime(%0),*-*,fold(FOLD_DATECONV,%0,secs()),convtime(%0)))
&amp;FOLD_DATECONV [v(JOB_VA)]=add(%0,switch(%1,*d*,mul(86400,before(%1,d)),*h*,mul(3600,before(%1,h)),*m*,mul(60,before(%1,m)),*s*,before(%1,s),0))
&amp;FN_EASYPIE [v(JOB_VA)]=edit(u(%va/FN_PIELEGEND,u(%va/FN_COLORPIE,u(%va/FN_CUTPIE,foreach(%va/FOREACH_BRACKET,v(DATA_31-15)),31,15,%0),map(%va/MAP_EASYPIE,%1,%2),%2,%4),map(%va/MAP_EASYPIE2,%1,%2),%2,%3),|,%r)
&amp;FN_EQUALIZEPIE [v(JOB_VA)]=setq(0,u(FN_LADD,map(%va/MAP_EQUALIZEPIE,%0,%1),%1))[setq(1,strlen(v(DATA_CHARS)))][map(MAP_EQUALIZEPIE2,%0,%1)]
&amp;FN_FIND-BBDBREF [v(JOB_VA)]=extract(u([get(%vc/BBPOCKET)]/GROUPS),%0,1)
&amp;FN_FIND-BBNUM [v(JOB_VA)]=member(u([get(%vc/BBPOCKET)]/GROUPS),%0)
&amp;FN_FIND-BUCKET [v(JOB_VA)]=localize(ifelse(strmatch(name(setr(0,locate(%vc,%0,i))),%0),%q0,#-1))
&amp;FN_FIND-JGROUP [v(JOB_VA)]=localize(ifelse(strmatch(name(setr(0,locate(%vb,%0,i))),%0),%q0,#-1))
&amp;FN_FIND-JOB [v(JOB_VA)]=localize(ifelse(strmatch(name(setr(0,locate(%va,Job&#160;%0,i))),Job&#160;%0),%q0,#-1))
&amp;FN_FLAG [v(JOB_VA)]=[ansi(h,%[)][ansi(switch(%1,,hy,%1),%0)][ansi(h,%])]
&amp;FN_FLAGS [v(JOB_VA)]=u(%va/FN_SKIN,FLAGS,%0,%1,%2,%3)
&amp;FN_FLEXWIDTH [v(JOB_VA)]=add(%0,switch(default(%#/JOBSWIDTH,[width(%#)]),#-1*,0,sub(default(%#/JOBSWIDTH,width(%#)),80)))
&amp;FN_FOOTER [v(JOB_VA)]=u(%va/FN_SKIN,FOOTER,%0,%1,%2,%3)
&amp;FN_GENDATA [v(JOB_VA)]=setq(0,%0)[setq(z,fdiv(inc(shl(%1,1)),inc(shl(%0,1))))][setq(9,fdiv(dec(setr(m,strlen(setr(8,v(DATA_CHARS))))),360))][setq(s,%2)][map(map_gendata,lnum(-%1,%1))]
&amp;FN_HASATTR [v(JOB_VA)]=switch(first(version()),PennMUSH,hasattrval(%0,%1),hasattr(%0,%1))
&amp;FN_HASATTRP [v(JOB_VA)]=switch(first(version()),PennMUSH,hasattrpval(%0,%1),hasattrp(%0,%1))
&amp;FN_HEADER [v(JOB_VA)]=u(%va/FN_SKIN,HEADER,%0,%1,%2,%3)
&amp;FN_INFIX2POSTFIX [v(JOB_VA)]=[u(%va/FN_S-INIT)][setq(v,map(%va/MAP_PARAMS,lattr(%va/SEL_*)))][u(%va/FN_TRIM,squish([map(%va/MAP_INFIX2POSTFIX,%0)]%B[u(%va/FN_S-POP-BINARY)][switch(1,t(member(%(&#160;%),u(%va/FN_S-PEEK))),#-1 MISMATCHED PARENS)]))]
&amp;FN_ISNEW [v(JOB_VA)]=u(FIL_NEW[default(%1/JOBSN,0)],%0)
&amp;FN_ITEMIZE [v(JOB_VA)]=localize(switch([setr(0,[itemize(%0,%1)])],#-1*,switch([setr(1,[elist(%0,and,%1)])],#-1*,u(fn_pretty,%0,%1),%q1),%q0))
&amp;FN_JGROUPMEMBERS [v(JOB_VA)]=switch(first(version()),PennMUSH,lsearch(all,eplayers,\[u(%0/ISMEMBER,##)\]),RhostMUSH,searchng(eplayer=u(%0/ISMEMBER,##)),search(eplayer=u(%0/ISMEMBER,##)))
&amp;FN_JOBLIST [v(JOB_VA)]=ifelse(t(%0),u(%va/FN_SKIN,JOBLIST,%0,%1,%2,%3),)
&amp;FN_JOBSHEADER [v(JOB_VA)]=u(%va/FN_SKIN,JOBSHEADER,%0,%1,%2,%3)
&amp;FN_LADD [v(JOB_VA)]=switch([ladd(%0,%1)],#-1*,lmath(add,%0,%1),ladd(%0,%1))
&amp;FN_LEFTOVER [v(JOB_VA)]=max(5,sub(u(%va/FN_FLEXWIDTH,79),fold(%va/FOLD_ADD,7[foreach(%va/FOREACH_LEFTOVER,%qj)])))
&amp;FN_MAXWIDTH [v(JOB_VA)]=last(sort(map(map_maxwidth,%0,|,%b),n))
&amp;FN_MONITORCHECK [v(JOB_VA)]=and(or(u(%va/FN_ACCESSCHECK,%0,%1),u(%va/FN_WIZONLY,%1)),switch([u(%va/FN_HASATTRP,%0,HIDDEN)][gt(member(get(%1/JOBSH),%0),0)],01,0,10,0,11,1,1),isdbref(parent(%0)))
&amp;FN_MYBANNER [v(JOB_VA)]=u(%va/FN_SKIN,MYBANNER,%0,%1,%2,%3)
&amp;FN_MYJOBLIST [v(JOB_VA)]=ifelse(t(%0),u(%va/FN_SKIN,MYJOBLIST,%0,%1,%2,%3),)
&amp;FN_MYJOBSHEADER [v(JOB_VA)]=u(%va/FN_SKIN,MYJOBSHEADER,%0,%1,%2,%3)
&amp;FN_MYSUMMARY [v(JOB_VA)]=u(%va/FN_SKIN,MYSUMMARY,%0,%1,%2,%3)
&amp;FN_PCT [v(JOB_VA)]=mul(round(ifelse(gt(get(%va/MAX_JOBS),0),max(fdiv(words(remove(lcon(%va),#-1)),get(%va/MAX_JOBS)),fdiv(strlen(lcon(%va)),get(%va/BUFFER))),fdiv(strlen(lcon(%va)),get(%va/BUFFER))),2),100)
&amp;FN_PIEESCAPE [v(JOB_VA)]=case(ord(%0),92,%%%\,91,%%%[,93,%%%],37,%%%%,%0)
&amp;FN_PIELEGEND [v(JOB_VA)]=[setq(d,inc(u(fn_maxwidth,%0)))][setq(n,%0[repeat(|,max(0,sub(setr(a,add(words(%1,%2),%3)),setr(b,words(%0,|)))))])][setq(m,repeat(|,%3)[edit(%1,ifelse(%2,%2,%b),|)][repeat(|,max(0,sub(%qb,%qa)))])][map(map_pielegend,lnum(1,words(%qm,|)),%b,|)]
&amp;FN_PLAYERLIST [v(JOB_VA)]=u(%va/FN_ITEMIZE,map(MAP_NAME,get(%0/OPENED_BY),%b,|),|)
&amp;FN_PRETTY [v(JOB_VA)]=switch(words(%0,switch(%1,,%b,%1)),0,%0,1,%0,[ldelete(edit(%0,switch(%1,,%b,%1),%,%b),words(%0,switch(%1,,%b,%1)),%,)]%band%b[last(%0,switch(%1,,%b,%1))])
&amp;FN_READERS [v(JOB_VA)]=[set(%0,LIST_READERS:[setunion(setdiff(get(%0/LIST_READERS),grab(get(%0/LIST_READERS),%1|*)),%1|[dec(get(%0/NUM_COMMENT))])])]
&amp;FN_READJOB [v(JOB_VA)]=u(%va/FN_SKIN,READ,%0,%1,%2,%3)
&amp;FN_ROTATESTR [v(JOB_VA)]=mid(%0,%1,3999)[mid(%0,0,%1)]
&amp;FN_S-INIT [v(JOB_VA)]=setq(S,)
&amp;FN_S-PUSH [v(JOB_VA)]=setq(S,%0`%qS)
&amp;FN_S-POP [v(JOB_VA)]=[first(%qS,`)][setq(S,rest(%qS,`))]
&amp;FN_S-PEEK [v(JOB_VA)]=first(%qS,`)
&amp;FN_S-POP-BINARY [v(JOB_VA)]=switch(1,t(match(OR AND,u(fn_s-peek))),[u(fn_s-pop)]%B[u(fn_s-pop-binary)])
&amp;FN_S-POP-UNARY [v(JOB_VA)]=switch(1,t(match(NOT,u(fn_s-peek))),[u(fn_s-pop)]%B[u(fn_s-pop-unary)])
&amp;FN_SHORT_DATE [v(JOB_VA)]=[switch(extract(%0,2,1),Jan,01,Feb,02,Mar,03,Apr,04,May,05,Jun,06,Jul,07,Aug,08,Sep,09,Oct,10,Nov,11,Dec,12,??)]/[extract(%0,3,1)]/[mid(last(%0),2,2)]
&amp;FN_SKIN [v(JOB_VA)]=[setq(z,default(%#/JOBSKIN,DEFAULT))][ifelse(and(u(FN_HASATTR,me,%qz_SKIN),u(FN_HASATTR,me,%qz_%0)),u(%qz_%0,%1,%2,%3,%4),u(DEFAULT_%0,%1,%2,%3,%4))]
&amp;FN_STAFFSUM [v(JOB_VA)]=u(FN_SKIN,STAFFSUM,%0,%1,%2,%3)
&amp;FN_STREXACT [v(JOB_VA)]=ljust(u(FN_STRTRUNC,%0,%1),%1)
&amp;FN_STRINGSECS [v(JOB_VA)]=switch(first(version()),PennMUSH,stringsecs(%0),ladd(map(MAP_ETIME,%0)))
&amp;FN_STRTRUNC [v(JOB_VA)]=localize(switch([setr(0,[strtrunc(%0,%1)])],#-1*,left(%0,%1),%q0))
&amp;FN_SUMMARY [v(JOB_VA)]=u(FN_SKIN,SUMMARY,%0,%1,%2,%3)
&amp;FN_TIME [v(JOB_VA)]=localize([setq(2,mod(%0,86400))][rjust([div(%0,86400)],2,0)]:[rjust(div(%q2,3600),2,0)]:[rjust(div(mod(%q2,3600),60),2,0)]:[rjust(mod(%q2,60),2,0)])
&amp;FN_TOKENLIST [v(JOB_VA)]=u(fn_trim,squish(foreach(FN_TOKENPARSE,%0)))
&amp;FN_TOKENPARSE [v(JOB_VA)]=switch(%0,&quot;,setq(Q,switch(%qQ,1,0,1)),%B,switch(%qQ,1,~,%B),|,%BOR%B,&amp;,%BAND%B,!,%BNOT%B,%(,%B%(%B,%),%B%)%B,%0)
&amp;FN_TRIM [v(JOB_VA)]=switch(first(version()),PennMUSH,trimtiny(%0,%1,%2),trim(%0,%1,%2))
&amp;FOLD_ADD [v(JOB_VA)]=add(%0,%1)
&amp;FOREACH_BRACKET [v(JOB_VA)]=\[%0
&amp;FOREACH_COLORPIE [v(JOB_VA)]=setq(p,edit(%qp,%[%0,%]))
&amp;FOREACH_LEFTOVER [v(JOB_VA)]=%b[inc(switch(%0,#,default(%#/JOBSWIDTH_#,8),A,default(%#/JOBSWIDTH_A,16),B,default(%#/JOBSWIDTH_B,5),C,default(%#/JOBSWIDTH_C,8),D,default(%#/JOBSWIDTH_D,8),F,default(%#/JOBSWIDTH_F,4),M,default(%#/JOBSWIDTH_M,8),O,default(%#/JOBSWIDTH_O,16),S,default(%#/JOBSWIDTH_S,8),0))]
&amp;HEADER_# [v(JOB_VA)]=u(FN_STREXACT,DB#,default(%#/JOBSWIDTH_#,8))
&amp;HEADER_A [v(JOB_VA)]=u(FN_STREXACT,Assigned To,default(%#/JOBSWIDTH_A,16))
&amp;HEADER_B [v(JOB_VA)]=u(FN_STREXACT,Type,default(%#/JOBSWIDTH_B,5))
&amp;HEADER_C [v(JOB_VA)]=u(FN_STREXACT,Opened,default(%#/JOBSWIDTH_C,8))
&amp;HEADER_D [v(JOB_VA)]=u(FN_STREXACT,Due On,default(%#/JOBSWIDTH_D,8))
&amp;HEADER_F [v(JOB_VA)]=u(FN_STREXACT,Flag,default(%#/JOBSWIDTH_F,4))
&amp;HEADER_M [v(JOB_VA)]=u(FN_STREXACT,Modified,default(%#/JOBSWIDTH_M,8))
&amp;HEADER_O [v(JOB_VA)]=u(FN_STREXACT,Opened By,default(%#/JOBSWIDTH_O,16))
&amp;HEADER_S [v(JOB_VA)]=u(FN_STREXACT,Status,default(%#/JOBSWIDTH_S,8))
&amp;HEADER_T [v(JOB_VA)]=u(%va/FN_STREXACT,Title,default(%#/JOBSWIDTH_T,u(%va/FN_LEFTOVER)))
&amp;IS_HIDDEN [v(JOB_VA)]=udefault(%0/HIDDEN,0)
&amp;IS_LOCKED [v(JOB_VA)]=ifelse(u(%va/FN_HASATTRP,%0,CHECKOUT),switch(first(get(%0/CHECKOUT)),%1,0,1),udefault(%0/LOCKED,0))
&amp;IS_PUBLIC [v(JOB_VA)]=udefault(%0/PUBLIC,0)
&amp;IS_PUBLISHED [v(JOB_VA)]=udefault(%0/PUBLISH,0)
&amp;IS_SUMMARY [v(JOB_VA)]=u(%va/FN_HASATTRP,%0,SUMMARY)
&amp;IS_TAGGED [v(JOB_VA)]=t(words(get(%0/TAGGED_FOR)))
&amp;IS_TRANSPARENT [v(JOB_VA)]=u(%va/FN_HASATTRP,%0,TRANSPARENT)
&amp;JOBS_DEFAULT [v(JOB_VA)]=BTDAS
&amp;LIST_ACTIONS [v(JOB_VA)]=ADD Player input|ASN Assignment|CKI Check In|CKO Check Out|CLN Clone|CRE Create|DUE Due date|EDT Edited job|LOK Locked Job|MRG Merged job|NAM Re-name job|PUB Publication|SRC Source change|STA Status change|SUM Sumset change|TAG Job tag|TRN Transfer|UND Undelete job|UNL Unlock job|UNP Unpublish|COM +job/complete|DNY +job/deny|APR +job/approve|DEL +job/delete
&amp;LIST_BADATTR [v(JOB_VA)]=Created Modified ACCESS Desc [lattr(%0/ACCESS_*)] [lattr(%0/ERROR_*)] [lattr(%0/PROCESS_*)] LIST_STATS STAT_ART TURNAROUND
&amp;LIST_VISCOMMENTS [v(JOB_VA)]=ADD CRE COM MAI APR DEL DNY
&amp;MAP_ACTIONS [v(JOB_VA)]=rest(%0,|)
&amp;MAP_ACTIONS2 [v(JOB_VA)]=first(%0,|)
&amp;MAP_COLORPIE [v(JOB_VA)]=foreach(foreach_colorpie,mid(%q1,0,setr(9,last(%0,:))))[setq(x,before(mid(%0,1,100),:))][setq(h,u(%va/fn_pieescape,mid(%0,0,1)))][setq(i,%qh%qh)][setq(j,%qi%qi)][setq(k,%qj%qj)][setq(p,edit(edit(edit(edit(%qp,%qc,ansi(%qx,%qk)),%qb,ansi(%qx,%qj)),%qa,ansi(%qx,%qi)),%],ansi(%qx,%qh)))][setq(1,mid(%q1,%q9,256))]
&amp;MAP_EASYPIE [v(JOB_VA)]=extract(%0,1,switch(%0,:*,3,2),:)
&amp;MAP_EASYPIE2 [v(JOB_VA)]=ldelete(%0,switch(%0,:*,3,2),:)
&amp;MAP_ETIME [v(JOB_VA)]=switch(%0,*d,mul(86400,before(%0,d)),*h,mul(3600,before(%0,h)),*m,mul(60,before(%0,m)),*s,before(%0,s),0)
&amp;MAP_EQUALIZEPIE [v(JOB_VA)]=last(%0,:)
&amp;MAP_EQUALIZEPIE2 [v(JOB_VA)]=revwords(setr(8,round(fdiv(mul(%q1,setr(7,last(%0,:))),%q0),0))[setq(1,sub(%q1,%q8))][setq(0,sub(%q0,%q7))]:[rest(revwords(%0,:),:)],:)
&amp;MAP_GENDATA [v(JOB_VA)]=setq(1,%0)%[[map(%va/map_gendata2,lnum(-%q0,%q0),,%[)]
&amp;MAP_GENDATA2 [v(JOB_VA)]=mid(%q8,mod(round(mul(add(u(%va/fn_coord2ang,%0,%q1),%qs),%q9),0),%qm),1)
&amp;MAP_GRAPH [v(JOB_VA)]=[setq(9,ifelse(gt(inc(%q9),%q6),1,inc(%q9)))][ifelse(lte(%q2,add(fdiv(%0,%q3),0.5)),ansi(v(COLORGRAPH_%q9),repeat(%q7,%q5)),repeat(%b,%q5))]
&amp;MAP_INDENT2 [v(JOB_VA)]=%b%b%0
&amp;MAP_INFIX2POSTFIX [v(JOB_VA)]=switch(1,t(match(%qv,first(%0,=))),[%0]%B[u(%va/FN_S-POP-UNARY)],t(match(OR AND,%0)),[u(%va/FN_S-POP-BINARY)][u(%va/FN_S-PUSH,%0)],strmatch(NOT,%0),[u(%va/FN_S-PUSH,%0)],strmatch(%(,%0),[u(%va/FN_S-PUSH,%0)],strmatch(%),%0),[u(%va/FN_S-POP-BINARY)][switch(u(%va/FN_S-PEEK),%(,null(u(%va/FN_S-POP)),#-1 MISMATCHED PARENS)]%B[u(%va/FN_S-POP-UNARY)],#-1 SYNTAX ERROR)
&amp;MAP_ISPLAYER [v(JOB_VA)]=isdbref(pmatch(%0))
&amp;MAP_JGROUP [v(JOB_VA)]=switch(%0,+*,u(%va/FN_JGROUPMEMBERS,u(%va/FN_FIND-JGROUP,%0)),pmatch(%0))
&amp;MAP_JGROUPERROR [v(JOB_VA)]=ifelse(or(isdbref(pmatch(%0)),isdbref(u(%va/FN_FIND-JGROUP,%0))),,I don't recognize '%0' as a player or jgroup.)
&amp;MAP_JOBSELECT [v(JOB_VA)]=switch(1,t(match(and or not&#160;%(&#160;%) | &amp;&#160;!,%0)),%0,u(%va/FN_HASATTR,%#,JOBSELECT_%0),get(%#/JOBSELECT_%0),%0)
&amp;MAP_MAXWIDTH [v(JOB_VA)]=strlen(%0)
&amp;MAP_NAME [v(JOB_VA)]=name(%0)
&amp;MAP_PARAMS [v(JOB_VA)]=lcstr(rest(%0,_))
&amp;MAP_PARSESTACK [v(JOB_VA)]=switch([setr(2,first(%0,=))][setq(a,edit(rest(%0,=),~,%B))],OR,u(%va/FN_S-PUSH,setunion(u(%va/FN_S-POP),u(%va/FN_S-POP))),AND,u(%va/FN_S-PUSH,setinter(u(%va/FN_S-POP),u(%va/FN_S-POP))),NOT,u(%va/FN_S-PUSH,setdiff(%q1,u(%va/FN_S-POP))),u(%va/FN_S-PUSH,filter(%va/SEL_%q2,%q1)))
&amp;MAP_PIEDATA [v(JOB_VA)]=[mid(get(%va/CHARGRAPH),%q0,1)][setq(0,inc(%q0))][get(me/COLORGRAPH_%q0)]:%0:[extract(%q1,%q0,1)]
&amp;MAP_PIELEGEND [v(JOB_VA)]=ljust(extract(%qn,%0,1,|),%qd) [ansi(before(mid(setr(q,extract(%qm,%0,1,|)),1,10),:),mid(%qq,0,1))] [switch(%qq,:*,extract(%qq,3,100,:),after(%qq,:))]
&amp;MAP_PMATCH [v(JOB_VA)]=pmatch(%0)
&amp;MAP_READERS [v(JOB_VA)]=first(%0,|)
&amp;MAP_REPORTS [v(JOB_VA)]=after(lcstr(%0),_)
&amp;MAP_SETTINGS [v(JOB_VA)]=rest(%0,_)
&amp;MAP_SOURCE [v(JOB_VA)]=switch(%0,+*,u(FN_JGROUPMEMBERS,u(%va/FN_FIND-JGROUP,%0)),pmatch(%0))
&amp;MAP_STAT_ESC [v(JOB_VA)]=ifelse(and(u(%va/FN_HASATTRP,%0,DUE_ON),gt(secs(),get(%0/DUE_ON))),setq(3,inc(%q3)),switch(default(%0/PRIORITY,1),1,setq(1,inc(%q1)),2,setq(2,inc(%q2)),3,setq(3,inc(%q3)),setq(0,inc(%q0))))
&amp;MAP_STAT_STATUS [v(JOB_VA)]=ifelse(u(%va/FIL_OVERDUE,%0),setq(7,inc(%q7)),switch(default(%0/STATUS,1),1,setq(1,inc(%q1)),2,setq(2,inc(%q2)),3,setq(3,inc(%q3)),4,setq(4,inc(%q4)),5,setq(5,inc(%q5)),6,setq(6,inc(%q6)),setq(0,inc(%q0))))
think [ansi(hc,ANOMALY JOBS:)] Installing reports.
&amp;REPORT_ACTBY [v(JOB_VA)]=[switch(%0,,This report requires you to supply an action code.%r%rUse: '+jobs/reports ACTBY=&lt;action code&gt;'.%r,[setq(0,squish(iter(lcon(%vc),ifelse(eq(words(grab(u(##/LIST_STATS),%0|*)),0),,##))))][setq(1,squish(iter(%q0,rest(grab(u(##/LIST_STATS),%0|*),|))))][ifelse(lt(words(%q1),1),There is no action code '[ucstr(%0)]' presently in the system.%r,[ulocal(FN_BARGRAPH,%q1,10,2,16,#)]%r[space(6)][iter(%q0,[u(%va/FN_STREXACT,name(##),2)])]%r%r[center([ucstr(%0)] Actions by Bucket,u(%va/FN_FLEXWIDTH,79))])])]
&amp;REPORT_ACTIONS [v(JOB_VA)]=[ulocal(FN_BARGRAPH,setr(0,map(MAP_ACTIONS,v(LIST_STATS))),15,2,16,#)][setq(0,fold(FOLD_ADD,%q0,0))]%r[space(6)][setq(1,map(MAP_ACTIONS2,sort(v(LIST_STATS))))][iter(%q1,[mid(##,0,1)]%b)]%r[space(6)][iter(%q1,[mid(##,1,1)]%b)]%r[space(6)][iter(%q1,[mid(##,2,1)]%b)]%r%r[center(%q0 Actions Performed Since [v(INSTALL_DATE)],u(%va/FN_FLEXWIDTH,79))]
&amp;REPORT_ARTS [v(JOB_VA)]=[iter(sortby(%va/SORTBY_NAME,lcon(%vc)),[ifelse(u(%va/FN_HASATTR,##,STAT_ART),u(%va/FN_TIME,round(fdiv(first(get(##/STAT_ART)),rest(get(##/STAT_ART))),0)),[rjust(-,11)])]%b[ljust(ansi(hc,[name(##)]),20)],%B,%R)]%R[rjust(u(%va/FN_TIME,round(fdiv(first(default(%vc/STAT_ART,0 0)),rest(default(%vc/STAT_ART,0 1))),0)),11)]%b[ansi(hy,Total ART)]%r[center(Average Resolution Times by Bucket,u(%va/FN_FLEXWIDTH,79))]
&amp;REPORT_ARTSGRAPH [v(JOB_VA)]=[setq(0,iter(setr(1,sortby(%va/SORTBY_NAME,lcon(%vc))),ifelse(u(%va/FN_HASATTR,##,STAT_ART),[div(round(fdiv(first(get(##/STAT_ART)),rest(get(##/STAT_ART))),0),86400)],0)))][ulocal(%va/FN_BARGRAPH,%q0,15,2,16,#)]%r[space(6)][iter(%q1,mid([name(##)]%B,0,2))]%r%r[center(Average Resolution Time by Bucket&#160;%(in days%),u(%va/FN_FLEXWIDTH,79))]
&amp;REPORT_BACT [v(JOB_VA)]=[switch(%0,,This report requires you to supply a bucket name.%r%rUse: '+jobs/reports BACT=&lt;bucket name&gt;' to specify a bucket.%r,[setq(0,u(%va/FN_FIND-BUCKET,%0))][ifelse(isdbref(%q0),[ulocal(FN_BARGRAPH,map(MAP_ACTIONS,get(%q0/LIST_STATS)),15,1,16,#)]%r[space(6)][setq(1,map(MAP_ACTIONS2,sort(get(%q0/LIST_STATS))))][iter(%q1,mid(##,0,1))]%r[space(6)][iter(%q1,mid(##,1,1))]%r[space(6)][iter(%q1,mid(##,2,1))]%r%r[center(Number of Actions Performed on Bucket [name(%q0)],u(%va/FN_FLEXWIDTH,79))],That is not a valid bucket name. See '+buckets' for a list of valid buckets.)])]
&amp;REPORT_BUCKETS [v(JOB_VA)]=[u(FN_BARGRAPH,iter(sortby(SORTBY_NAME,lcon(%vc)),words(remove(children(##),#-1))),15,2,16,#)]%r[space(6)][iter(sortby(SORTBY_NAME,lcon(%vc)),mid([name(##)]%b,0,2))]%r%r[center(# of Jobs in Buckets,u(%va/FN_FLEXWIDTH,79))]
&amp;REPORT_CLOSURE [v(JOB_VA)]=[setq(0,iter(APR DNY COM DEL,grab(get(%va/LIST_STATS),##|*)))][u(%va/FN_EASYPIE,10,ulocal(%va/FN_ASSEMBLEPIE,map(MAP_ACTIONS,%q0),iter(map(MAP_ACTIONS2,%q0),case(##,APR,Approved,DNY,Denied,COM,Completed,Deleted))),|,16,45)]
&amp;REPORT_CODES [v(JOB_VA)]=[center(List of Action Codes:,u(%va/FN_FLEXWIDTH,79))]%r%r[setq(0,sort(get(%va/LIST_ACTIONS),b,|,|))][table(map(%va/MAP_INDENT2,%q0,|,|),25,u(%va/FN_FLEXWIDTH,78),|)]%r
&amp;REPORT_ESC [v(JOB_VA)]=[setq(z,[iter(lnum(1,3),setq(##,0))][map(%va/MAP_STAT_ESC,lcon(%va))])][u(FN_EASYPIE,10,@Gg:%q1:Green|#Yy:%q2:Yellow|.Rr:%q3:Red,|,16,45)]%r%r[center(Job Escalation Colors,u(%va/FN_FLEXWIDTH,79))]%r
&amp;REPORT_JACT [v(JOB_VA)]=[switch(%0,,This report requires you to supply a job.%r%rUse: +jobs/reports JACT=&lt;#&gt;%r,[setq(0,u(%va/FN_FIND-JOB,%0))][ifelse(isdbref(%q0),[ifelse(u(%va/FN_HASATTR,%q0,LIST_STATS),[ulocal(FN_BARGRAPH,map(MAP_ACTIONS,get(%q0/LIST_STATS)),15,1,16,#)]%r[space(6)][setq(1,map(MAP_ACTIONS2,sort(get(%q0/LIST_STATS))))][iter(%q1,mid(##,0,1))]%r[space(6)][iter(%q1,mid(##,1,1))]%r[space(6)][iter(%q1,mid(##,2,1))],No actions recorded for this job.)]%r%r[center(Actions Performed on [name(%q0)],u(%va/FN_FLEXWIDTH,79))],That is not a valid job.%r)])]
&amp;REPORT_STATS [v(JOB_VA)]=[rjust(ansi(hc,Install:),20)]%b[get(%va/INSTALL_DATE)]%r[rjust(ansi(hc,Version:),20)]%bAnomaly Jobs [get(%va/VERSION)][space(5)]%r[rjust(ansi(hc,Release:),20)]%b[get(%va/RELEASE)]%r[rjust(ansi(hc,Memory:),20)]%b[setr(a,fold(%va/FOLD_ADD,iter(setr(b,[num(me)] [loc(me)]&#160;%vb&#160;%vc [lcon(%vc)] [lcon(me)]),objmem(##))))]%b%([round(fdiv(%qa,1024),1)]k in [words(%qb)] objects%)%r[rjust(ansi(hc,Open Jobs:),20)]%b[words(remove(lcon(%va),#-1))]%r[rjust(ansi(hc,Capacity:),20)]%b[u(%va/FN_PCT)]%% Full%r[rjust(ansi(hc,Next Job:),20)]%b[inc(u(%va/JOBS_NUM))]%r[rjust(ansi(hc,Buckets:),20)]%b[words(lcon(%vc))]%r[rjust(ansi(hc,Opened:),20)]%b[last(grab(get(%va/LIST_STATS),CRE|*),|)][setq(x,iter(APR DNY COM DEL,grab(get(%va/LIST_STATS),##|*)))][setq(y,map(%va/MAP_ACTIONS,%qx))]%r[rjust(ansi(hc,Closed:),20)]%b[fold(%va/FOLD_ADD,%qy,0)]%r[rjust(ansi(hc,Actions To Date:),20)]%b[fold(FOLD_ADD,map(MAP_ACTIONS,v(LIST_STATS)),0)]%r[rjust(ansi(hc,ART:),20)]%b[u(%va/FN_ART,%vc)][space(10)] ART=Average Resolution Time%r[rjust(ansi(hc,REQ ART:),20)]%b[u(%va/FN_ART,locate(%vc,REQ,i))][space(18)]DD:HH:MM:SS%r[rjust(ansi(hc,CODE ART:),20)]%b[u(%va/FN_ART,locate(%vc,CODE,i))]%r[rjust(ansi(hc,TPS ART:),20)]%b[u(%va/FN_ART,locate(%vc,TPS,i))]%r[rjust(ansi(hc,BUILD ART:),20)]%b[u(%va/FN_ART,locate(%vc,BUILD,i))]%r
&amp;REPORT_STATUS [v(JOB_VA)]=[setq(x,[iter(lnum(10),setq(##,0))][map(%va/MAP_STAT_STATUS,lcon(%va))])][u(FN_EASYPIE,12,XRr:%q7:Overdue|-Bb:%q0:Hold|xGg:%q1:New|+Cc:%q2:Begun|*Ww:%q3:1/4|oYy:%q4:1/2|@Mm:%q5:3/4|/Xh:%q6:Done,|,10,45)]
&amp;RTITLE_ACTBY [v(JOB_VA)]=BAR|Graph of one action across all buckets
&amp;RTITLE_ACTIONS [v(JOB_VA)]=BAR|System-wide Actions
&amp;RTITLE_ARTS [v(JOB_VA)]=STATS|Average Resolution Times by Bucket
&amp;RTITLE_ARTSGRAPH [v(JOB_VA)]=BAR|Average Resolution Times Graph
&amp;RTITLE_BACT [v(JOB_VA)]=BAR|All actions on a specified bucket
&amp;RTITLE_BUCKETS [v(JOB_VA)]=BAR|Job Dispersal Among Buckets
&amp;RTITLE_CLOSURE [v(JOB_VA)]=PIE|Job Closure Patterns
&amp;RTITLE_CODES [v(JOB_VA)]=STATS|A list of system-generated action codes
&amp;RTITLE_ESC [v(JOB_VA)]=PIE|Job Escalation Status
&amp;RTITLE_JACT [v(JOB_VA)]=BAR|Actions performed on a job
&amp;RTITLE_STATS [v(JOB_VA)]=STATS|General System Stats
&amp;RTITLE_STATUS [v(JOB_VA)]=PIE|Job Status Settings
&amp;SEL_ALL [v(JOB_VA)]=1
&amp;SEL_NEW [v(JOB_VA)]=u(%va/FIL_NEW[default(%#/JOBSN,0)],%0)
&amp;SEL_OVERDUE [v(JOB_VA)]=u(%va/FIL_OVERDUE,%0)
&amp;SEL_MINE [v(JOB_VA)]=u(%va/FIL_MINE,%0)
&amp;SEL_WHO [v(JOB_VA)]=u(%va/FIL_WHO,%0,switch(%qa,none,,pmatch(%qa)))
&amp;SEL_SOURCE [v(JOB_VA)]=u(%va/FIL_SOURCE,%0,switch(%qa,none,,pmatch(%qa)))
&amp;SEL_PRI [v(JOB_VA)]=u(%va/SEL_ESC,%0)
&amp;SEL_ESC [v(JOB_VA)]=u(%va/FIL_ESC,%0,match(green yellow red,%qa*))
&amp;SEL_STATUS [v(JOB_VA)]=u(%va/FIL_STATUS,%0,dec(match(HOLD NEW UNDERWAY 25 50 75 100,%qa*)))
&amp;SEL_BUCKET [v(JOB_VA)]=u(%va/FIL_BUCKET,%0,u(%va/FN_FIND-BUCKET,%qa))
&amp;SEL_SEARCH [v(JOB_VA)]=u(%va/FIL_SEARCH,%0,%qa)
&amp;SEL_VIEWING [v(JOB_VA)]=u(%va/SEL_MONITOR,%0)
&amp;SEL_MONITOR [v(JOB_VA)]=u(%va/FN_MONITORCHECK,parent(%0),%#)
&amp;SEL_HIDDEN [v(JOB_VA)]=u(%va/IS_HIDDEN,parent(%0))
&amp;SEL_LOCKED [v(JOB_VA)]=u(%va/IS_LOCKED,%0)
&amp;SEL_TAGGED [v(JOB_VA)]=u(%va/IS_TAGGED,%0)
&amp;SEL_MYJOBS [v(JOB_VA)]=u(%va/SEL_PUBLIC,%0)
&amp;SEL_PUBLIC [v(JOB_VA)]=u(%va/IS_PUBLIC,parent(%0))
&amp;SEL_PUBLISHED [v(JOB_VA)]=u(%va/IS_PUBLISHED,%0)
&amp;SEL_SUMMARY [v(JOB_VA)]=u(%va/IS_SUMMARY,parent(%0))
&amp;SEL_DUE&gt; [v(JOB_VA)]=u(%va/FIL_DUEAFTER,%0,u(FN_DATECONV,%qa))
&amp;SEL_DUE&lt; [v(JOB_VA)]=not(u(%va/FIL_DUEAFTER,%0,u(FN_DATECONV,%qa)))
&amp;SORTBY_BUCKET [v(JOB_VA)]=comp(name(parent(%0)),name(parent(%1)))
&amp;SORTBY_COMMENTS [v(JOB_VA)]=sub(after(%0,_),after(%1,_))
&amp;SORTBY_DATE [v(JOB_VA)]=sub(get(%0/MODIFIED_ON),get(%1/MODIFIED_ON))
&amp;SORTBY_DUE [v(JOB_VA)]=comp(get(%0/DUE_ON),get(%1/DUE_ON))
&amp;SORTBY_JOBNUM [v(JOB_VA)]=sub(last(name(%0)),last(name(%1)))
&amp;SORTBY_NAME [v(JOB_VA)]=comp(name(%0),name(%1))
&amp;SORTBY_PRI [v(JOB_VA)]=sub(get(%0/PRIORITY),get(%1/PRIORITY))
&amp;TRIG_ADD [v(JOB_VA)]=think [setq(0,default(%0/NUM_COMMENT,1))][setq(1,last(grab(get(%0/LIST_READERS),%2|*),|))][setq(2,edit(%1,|,@@PIPE@@))][ifelse(eq(dec(%q0),%q1),set(%0,LIST_READERS:[setunion(remove(get(%0/LIST_READERS),%2|%q1),%2|%q0)]),)][ulocal(FN_ADDSTAT,%3,%va)][ulocal(FN_ADDSTAT,%3,%0)][ulocal(FN_ADDSTAT,%3,parent(%0))];&amp;COMMENT_%q0&#160;%0=%3|[secs()]|%2|[name(%2)]|[ifelse(u(%va/FN_HASATTRP,parent(%0),ALETTER_%3),u(%va/FN_STRTRUNC,u([parent(%0)]/ALETTER_%3,%0,%2,%q2),get(%va/BUFFER)),u(%va/FN_STRTRUNC,%q2,get(%va/BUFFER)))];&amp;NUM_COMMENT&#160;%0=[inc(%q0)];&amp;MODIFIED_ON&#160;%0=[secs()];&amp;MODIFIED_BY&#160;%0=%2;@trigger parent(%0)/HOOK_%3=%0,%2,[parent(%0)],%1;@trigger&#160;%va/TRIG_POST=%0,%3,%2,%1;@trigger&#160;%va/TRIG_MAIL=%0,%3,%2,%1
&amp;TRIG_APPLY [v(JOB_VA)]=@trigger&#160;%va/TRIG_CREATE=%0,[locate(%vc,APPS,i)],2,Application by [name(%0)],
&amp;TRIG_BROADCAST [v(JOB_VA)]=@switch isdbref(%1)=1,{@pemit/list [setq(0,parent(%0))][setq(0,ifelse(isdbref(%q0),%q0,%vc))][filter(%va/FIL_BROADCAST,setunion(lwho(),))]=[ansi(hc,JOBS:)]%b[u(%q0/BLETTER_%2,%0,%1,%3,%4)]},{@pemit/list [setq(0,%0)][filter(%va/FIL_BROADCAST,setunion(lwho(),))]=[ansi(hc,JOBS:)]%b%1}
&amp;TRIG_CLEAN [v(JOB_VA)]=@dolist [lcon(%va)] [lcon(%vb)]={@switch [u(FN_CLEANFIND,##,OPENED_BY)][u(FN_CLEANFIND,##,ASSIGNED_TO)][u(FN_CLEANFIND,##,TAGGED_FOR)][u(FN_CLEANFIND,##,PLAYERS)][u(FN_CLEANFIND,##,WRITER)][u(FN_CLEANFIND,##,MEMBERLIST)]=1?????,{&amp;OPENED_BY ##=U(FN_CLEANFIX,##,OPENED_BY)},?1????,{&amp;ASSIGNED_TO ##=U(FN_CLEANFIX,##,ASSIGNED_TO)},??1???,{&amp;TAGGED_FOR ##=U(FN_CLEANFIX,##,TAGGED_FOR)},???1??,{&amp;PLAYERS ##=U(FN_CLEANFIX,##,PLAYERS)},????1?,{&amp;WRITER ##=U(FN_CLEANFIX,##,WRITER)},?????1,{&amp;MEMBERLIST ##=U(FN_CLEANFIX,##,MEMBERLIST)}};
&amp;TRIG_CREATE [v(JOB_VA)]=@switch gte(u(%va/FN_PCT),100)=1,{@pemit&#160;%0=[ansi(hr,JOBS ERROR:)] Creation failed. The +jobs system is full. Contact staff immediately.;@trigger&#160;%va/TRIG_BROADCAST=%1,JOBS SYSTEM IS FULL! Please complete jobs or boost your MAX_JOBS configuration.},{think [setq(0,inc(u(%va/JOBS_NUM)))][setq(1,create(Job&#160;%q0,10))][setq(y,case(%7,1,CRE,OTH))];@tel&#160;%q1=%va;@link&#160;%q1=%va;&amp;OPENED_BY&#160;%q1=[switch(%5,,%0,%5)];&amp;OPENED_ON&#160;%q1=[secs()];&amp;MODIFIED_ON&#160;%q1=[secs()];&amp;STATUS&#160;%q1=1;&amp;TITLE&#160;%q1=%3;@parent&#160;%q1=[locate(%vc,%1,i)];&amp;NUM_COMMENT&#160;%q1=2;&amp;PRIORITY&#160;%q1=%2;&amp;COMMENT_1&#160;%q1=CRE|[secs()]|%0|[name(%0)]|[ifelse(u(%va/FN_HASATTRP,parent(%q1),ALETTER_%qy),u(%va/FN_STRTRUNC,u([parent(%q1)]/ALETTER_%qy,%q1,%0,edit(%4,|,@@PIPE@@)),get(%va/BUFFER)),u(%va/FN_STRTRUNC,edit(%4,|,@@PIPE@@),get(%va/BUFFER)))];&amp;LIST_READERS&#160;%q1=%0|1;&amp;ASSIGNED_TO&#160;%q1=%6;&amp;JOBS_NUM&#160;%va=%q0;&amp;DUE_ON&#160;%q1=[ifelse(u(%va/FN_HASATTRP,%q1,TURNAROUND),add(secs(),mul(60,60,get(%q1/TURNAROUND))),)];@trigger&#160;%va/TRIG_BROADCAST=%q1,%0,%qy,%3;@trigger&#160;%1/HOOK_%qy=%q1,%0,%1,%4;@trigger&#160;%va/TRIG_POST=%q1,%qy,%0,%4;@trigger&#160;%va/TRIG_MAIL=%q1,%qy,%0,%4;think [ulocal(FN_ADDSTAT,CRE,%va)][ulocal(FN_ADDSTAT,CRE,parent(%q1))];@switch gt(u(%va/FN_PCT),95)=1,{@trigger&#160;%va/TRIG_BROADCAST=%1,JOBS SYSTEM IS NEARING CAPACITY! Please complete jobs or boost your MAX_JOBS configuration.}}
&amp;TRIG_DESTROY [v(JOB_VA)]=&amp;going&#160;%0=1;@wait 60={@switch get(%0/GOING)=1,{@switch first(version())=PennMUSH,{@parent&#160;%0;@nuke&#160;%0;@wait 0=@nuke&#160;%0},{@parent&#160;%0;@dest/instant&#160;%0}}}
&amp;TRIG_LOG [v(JOB_VA)]=@switch [setq(0,%0)][setq(1,parent(%q0))][setq(x,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/OPENED_BY),%b,|),|))][and(u(%va/FN_HASATTRP,%va,JOB_LOGGING),u(%va/FN_HASATTRP,%q1,LOGFILE))]=0,{@@},{@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[center(| [name(%q0)] |,79,=)];@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[ljust([rjust(ansi(hc,Bucket:),10)]%b[u(FN_BUCKETNAME,%q0)],40)][rjust(ansi(hc,Due On:),12)]%b[ifelse(get(%q0/DUE_ON),ifelse(gt(secs(),get(%q0/DUE_ON)),OVERDUE!,convsecs(get(%q0/DUE_ON))),-)];@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[ljust([rjust(ansi(hc,Title:),10)]%b[get(%q0/TITLE)],40)][rjust(ansi(hc,Assigned To:),12)]%b[ifelse(isdbref(get(%q0/ASSIGNED_TO)),name(get(%q0/ASSIGNED_TO)),Nobody)];@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[ljust([rjust(ansi(hc,Opened On:),10)]%b[convsecs(get(%q0/OPENED_ON))],40)][rjust(ansi(hc,Status:),12)]%b[switch(get(%q0/PRIORITY),1,Green,2,Yellow,3,Red)]%b%([switch(get(%q0/STATUS),0,On Hold,1,New,2,Underway,3,25%%,4,50%%,5,75%%,6,100%%,?)]%);@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[rjust(ansi(hc,Opened By:),10)]&#160;%qx;@dolist sortby(%va/SORTBY_COMMENTS,lattr(%q0/COMMENT_*))={@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[repeat(-,79)];@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[extract(get(%q0/##),4,1,|)]%badded on%b[convsecs(extract(get(%q0/##),2,1,|))]:%b[edit(last(get(%q0/##),|),@@PIPE@@,|)]};@wait 1={@trigger&#160;%va/TRIG_LOG_WRITE=[u(%q1/LOGFILE)],[repeat(=,79)]}}
&amp;TRIG_LOG_WRITE [v(JOB_VA)]=@switch [first(version())]=RhostMUSH,{@log/file&#160;%0=%1},PennMUSH,{@log/cmd&#160;%1},{@log&#160;%0=%1}
&amp;TRIG_MAIL [v(JOB_VA)]=@switch [u(%va/FN_HASATTRP,%0,MLETTER_%1)]=1,{@wait 1={@trigger&#160;%vb/TRIG_MAIL=[switch(%1,MAI,[get(%0/OPENED_BY)],APR,[get(%0/OPENED_BY)],DNY,[get(%0/OPENED_BY)],filter(%va/FIL_NOSPAM,setunion(get(%0/OPENED_BY),)))],[switch(%1,APR,Approved:,DEL,Deleted:,DNY,Denied:,COM,Complete:,[name(%0)]:)]%b[get(%0/TITLE)],[u(parent(%0)/MLETTER_%1,%0,%1,%2,%3)]};}
&amp;TRIG_POST [v(JOB_VA)]=@switch [u(%va/FN_HASATTRP,%0,PLETTER_%1)]=1,{@wait 1={@trigger&#160;%vb/TRIG_POST=[get(%0/POST_[case(%1,APR,APPROVE,DEL,DELETE,DNY,DENY,COM,COMPLETE,APPROVE)])],[switch(%1,APR,A:,DNY,D:,COM,C:,[name(%0)]:)]%b[get(%0/TITLE)],[u(parent(%0)/PLETTER_%1,%0,%1,%2,%3)]};}
@dolist VA VB VC={@cpattr&#160;%#/JOB_##=[v(JOB_VA)]/##}
think [ansi(hc,ANOMALY JOBS:)] Installing skins.
&amp;DEFAULT_SKIN [v(JOB_VA)]=1
&amp;DEFAULT_BANNER [v(JOB_VA)]=[setq(0,%0)][setq(x,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/OPENED_BY),%b,|),|))][setq(y,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/TAGGED_FOR),%b,|),|))][ljust([rjust(ansi(hc,Bucket:),10)]%b[u(%va/FN_BUCKETNAME,%q0)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Due On:),12)]%b[ifelse(get(%q0/DUE_ON),ifelse(gt(secs(),get(%q0/DUE_ON)),OVERDUE!,convsecs(get(%q0/DUE_ON))),-)]%r[ljust([rjust(ansi(hc,Title:),10)]%b[get(%q0/TITLE)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Status:),12)]%b[switch(get(%q0/PRIORITY),1,Green,2,Yellow,3,Red)]%b%([switch(get(%q0/STATUS),0,On Hold,1,New,2,Underway,3,25%%,4,50%%,5,75%%,6,100%%,?)]%)%r[ljust([rjust(ansi(hc,Opened On:),10)] [convsecs(get(%q0/OPENED_ON))],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Assigned To:),12)]%b[ifelse(isdbref(get(%q0/ASSIGNED_TO)),name(get(%q0/ASSIGNED_TO)),Nobody)]%r[rjust(ansi(hc,Opened By:),10)]%b%qx[ifelse(words(%qy),%r[rjust(ansi(hc,Tagged:),10)]%b%qy,)]
&amp;DEFAULT_BREAK [v(JOB_VA)]=switch(%0,,repeat(-,u(FN_FLEXWIDTH,79)),rjust(%[%0%],u(FN_FLEXWIDTH,79),-))
&amp;DEFAULT_BUCKETHEADER [v(JOB_VA)]=[u(FN_HEADER,Bucket List)]%r[ifelse(u(%va/FN_WIZONLY,%#),[ansi(hc,[ljust(Name,9)][ljust(Flags,6)]%b%b[ljust(Description,u(FN_FLEXWIDTH,30))][rjust(#Jobs,5)][rjust(Pct,5)][space(3)]C%b%bA%b%bD%b%bDue[space(3)]ARTS)],[ansi(hc,[ljust(NAME,8)][ljust(Description,u(FN_FLEXWIDTH,50))]%b[rjust(Viewing,20)])])]%r[u(FN_BREAK)]
&amp;DEFAULT_BUCKETLIST [v(JOB_VA)]=[ifelse(u(%va/FN_WIZONLY,%#),[ljust(name(%0),6)]%b%b[ifelse(u(%va/FN_MONITORCHECK,%0,%#),V,-)][ifelse(u(%va/IS_HIDDEN,%0),H,-)][ifelse(u(%va/IS_LOCKED,%0),ifelse(u(%va/FN_HASATTRP,%0,CHECKOUT),C,L),-)][ifelse(u(%va/IS_TAGGED,%0),T,-)][ifelse(u(%va/IS_PUBLIC,%0),M,-)][ifelse(u(%va/IS_PUBLISHED,%0),P,-)][ifelse(u(%va/IS_SUMMARY,%0),S,-)]%b%b[u(%va/FN_STREXACT,get(%0/DESC),u(FN_FLEXWIDTH,30))][rjust(words(remove(children(%0),#-1)),5)][rjust(mul(round(fdiv(words(remove(children(%0),#-1)),max(1,words(lcon(%va)))),2),100)%%,5)]%b%b[rjust(u(%va/FN_FIND-BBNUM,get(%0/POST_COMPLETE)),2)]%b[rjust(u(%va/FN_FIND-BBNUM,get(%0/POST_APPROVE)),2)]%b[rjust(u(%va/FN_FIND-BBNUM,get(%0/POST_DENY)),2)][rjust(default(%0/TURNAROUND,0),5)][rjust([ifelse(u(%va/FN_HASATTR,%0,STAT_ART),[round(fdiv(fdiv(first(get(%0/STAT_ART)),rest(get(%0/STAT_ART))),86400),0)]d,-)],7)],[ljust(name(%0),6)]%b%b[u(%va/FN_STREXACT,get(%0/DESC),u(FN_FLEXWIDTH,50))]%b[rjust(ifelse(u(%va/FN_MONITORCHECK,%0,%#),Yes,-),20)])]
&amp;DEFAULT_FLAGS [v(JOB_VA)]=[ifelse(u(me/IS_LOCKED,%0),u(me/FN_FLAG,ifelse(u(%va/FN_HASATTRP,%0,CHECKOUT),CHECKED OUT,LOCKED),hr),)][ifelse(u(me/IS_PUBLIC,%0),u(me/FN_FLAG,Myjobs),)][ifelse(u(me/IS_PUBLISHED,%0),u(me/FN_FLAG,Published),)]
&amp;DEFAULT_FOOTER [v(JOB_VA)]=[switch(%0,,repeat(=,u(FN_FLEXWIDTH,79)),center(|&#160;%0 |,u(FN_FLEXWIDTH,79),=))]
&amp;DEFAULT_HEADER [v(JOB_VA)]=[switch(%0,,[repeat(=,u(FN_FLEXWIDTH,79))],[center(| [ansi(hy,%0)] |,u(FN_FLEXWIDTH,79),=)])]
&amp;DEFAULT_JOBLIST [v(JOB_VA)]=[setq(j,secure(ifelse(u(%va/FN_HASATTRP,%1,JOBS),lcstr(mid(get(%1/JOBS),0,20)),get(%va/JOBS_DEFAULT))))][setq(1,ifelse(get(%0/DUE_ON),ifelse(gt(secs(),get(%0/DUE_ON)),r,switch(get(%0/PRIORITY),1,g,2,y,3,r,g)),switch(get(%0/PRIORITY),1,g,2,y,3,r)))][ifelse(u(%va/FN_ISNEW,%0,%1),[ansi(hr,*)]%b,%b%b)][ansi(h%q1,[rjust([last(name(%0))],5)]%b[iter(lnum(strlen(%qj)),[u(%va/DISPLAY_[mid(%qj,##,1)],%0,%1)])])]
&amp;DEFAULT_JOBSHEADER [v(JOB_VA)]=[u(FN_HEADER,Anomaly Jobs [u(VERSION)])]%r[setq(j,[secure(switch(u(%va/FN_HASATTRP,%0,JOBS),1,lcstr(mid(get(%0/JOBS),0,20)),u(JOBS_DEFAULT)))])][ansi(hc,*%b%b[ljust(Job#,5)][iter(lnum(strlen(%qj)),u(HEADER_[mid(%qj,##,1)]))])]%r[u(FN_BREAK)]
&amp;DEFAULT_MYJOBLIST [v(JOB_VA)]=[ifelse(u(FN_ISNEW,%0,%1),[ansi(hr,*)],%b)]%b[setq(j,TDAS)][ansi(n,[rjust([last(name(%0))],5)]%b[iter(lnum(strlen(%qj)),u(DISPLAY_[mid(%qj,##,1)],%0,%1))])]
&amp;DEFAULT_MYJOBSHEADER [v(JOB_VA)]=[u(FN_HEADER,Anomaly Jobs [u(VERSION)])]%r[setq(j,TDAS)][ansi(ch,ljust(*%b%b[ljust(Job#,5)][iter(lnum(strlen(%qj)),u(HEADER_[mid(%qj,##,1)]))],[u(FN_FLEXWIDTH,79)]))]%r[u(FN_BREAK)]
&amp;DEFAULT_MYBANNER [v(JOB_VA)]=[setq(0,%0)][setq(x,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/OPENED_BY),%b,|),|))][ljust([rjust(ansi(hc,Bucket:),10)]%b[u(%va/FN_BUCKETNAME,%q0)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Due On:),12)]%b[ifelse(get(%q0/DUE_ON),ifelse(gt(secs(),get(%q0/DUE_ON)),OVERDUE!,convsecs(get(%q0/DUE_ON))),-)]%r[ljust([rjust(ansi(hc,Title:),10)]%b[get(%q0/TITLE)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Assigned To:),12)]%b[ifelse(isdbref(get(%q0/ASSIGNED_TO)),name(get(%q0/ASSIGNED_TO)),Nobody)]%r[ljust([rjust(ansi(hc,Opened On:),10)]%b[convsecs(get(%q0/OPENED_ON))],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Status:),12)]%b[switch(get(%q0/PRIORITY),1,Green,2,Yellow,3,Red)]%b%r[rjust(ansi(hc,Opened By:),10)]%b%qx
&amp;DEFAULT_MYSUMMARY [v(JOB_VA)]=%r[u(FN_BREAK,MySummary)]%r[u(parent(%0)/MYSUMMARY,%0)]
&amp;DEFAULT_READ [v(JOB_VA)]=[repeat(-,u(FN_FLEXWIDTH,79))]%r[ifelse(u(%va/EDIT_ACCESS,%#),[ansi(h,%[)][ifelse(and(or(u(%va/IS_PUBLISHED,%1),switch(extract(get(%1/%0),3,1,|),u(%1/OPENED_BY),1,0),hasflag(%1/%0,no_inherit)),u(%va/IS_PUBLIC,%1)),ansi(hc,[rest(%0,_)]+),ansi(hc,[rest(%0,_)]-))][ansi(h,%])]%b,)][ansi(h,[extract(get(%1/%0),4,1,|)]%badded on%b[convsecs(extract(get(%1/%0),2,1,|))]:%b )][edit(last(get(%1/%0),|),@@PIPE@@,|)]
&amp;DEFAULT_STAFFSUM [v(JOB_VA)]=%r[repeat(-,u(FN_FLEXWIDTH,79))]%r[rjust(ansi(hc,DB#:),10)]&#160;%0[space(10)][rjust(ansi(hc,Comments:),10)] [setr(z,words(lattr(%0/COMMENT_*)))]%r%r[rjust(ansi(hc,Players:),10)]&#160;%(Players contributing to this job%)%r[setq(y,setunion(iter(lattr(%0/COMMENT_*),extract(get(%0/##),4,1,|),%b,|),,|))][u(%va/fn_columns,%qy,20,|,11)][ifelse(u(%va/FN_HASATTR,%0,LIST_READERS),%r[rjust(ansi(hc,Readers:),10)]%b%(Players who have read this job in the past%)%r[setq(z,iter(get(%0/LIST_READERS),first(##,|)))][u(%va/fn_columns,map(%va/MAP_NAME,%qz,%b,|),20,|,11)],)]%r[rjust(ansi(hc,Stats:),10)]%r[u(%va/fn_columns,iter(ifelse(u(%va/FN_HASATTR,%0,LIST_STATS),sort(get(%0/LIST_STATS)),),[first(##,|)]%b[last(##,|)],%b,|),20,|,11)]%r
&amp;DEFAULT_SUMMARY [v(JOB_VA)]=%r[repeat(-,u(FN_FLEXWIDTH,79))]%r[u(parent(%0)/SUMMARY,%0)]
&amp;CHROME_SKIN [v(JOB_VA)]=1
&amp;CHROME_BANNER [v(JOB_VA)]=%r[setq(0,%0)][setq(x,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/OPENED_BY),%b,|),|))][setq(y,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/TAGGED_FOR),%b,|),|))][ljust([rjust(ansi(hc,Bucket:),10)]%b[u(%va/FN_BUCKETNAME,%q0)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Due On:),12)]%b[ifelse(get(%q0/DUE_ON),ifelse(gt(secs(),get(%q0/DUE_ON)),OVERDUE!,convsecs(get(%q0/DUE_ON))),-)]%r[ljust([rjust(ansi(hc,Title:),10)]%b[get(%q0/TITLE)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Status:),12)]%b[switch(get(%q0/PRIORITY),1,Green,2,Yellow,3,Red)]%b%([switch(get(%q0/STATUS),0,On Hold,1,New,2,Underway,3,25%%,4,50%%,5,75%%,6,100%%,?)]%)%r[ljust([rjust(ansi(hc,Opened On:),10)]%b[convsecs(get(%q0/OPENED_ON))],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(hc,Assigned To:),12)]%b[ifelse(isdbref(get(%q0/ASSIGNED_TO)),name(get(%q0/ASSIGNED_TO)),Nobody)]%r[rjust(ansi(hc,Opened By:),10)]%b%qx[ifelse(words(%qy),%r[rjust(ansi(hc,Tagged:),10)]%b%qy,)]
&amp;CHROME_BREAK [v(JOB_VA)]=rjust(ifelse(%0,%[%0%]),u(FN_FLEXWIDTH,79),_)
&amp;CHROME_FLAGS [v(JOB_VA)]=[edit(u(%va/fn_trim,squish([ifelse(u(me/IS_LOCKED,%0),%b[ansi(hr,ifelse(u(%va/FN_HASATTRP,%0,CHECKOUT),CHECKED_OUT,LOCKED))]%b,)][ifelse(u(me/IS_PUBLIC,%0),%bMYJOBS%b,)][ifelse(u(me/IS_PUBLISHED,%0),%bPUBLISHED%b,)])),%b,%b-%b)]
&amp;CHROME_FOOTER [v(JOB_VA)]=%r[switch(%0,,[repeat(~,u(FN_FLEXWIDTH,79))],[repeat(~,sub(u(FN_FLEXWIDTH,73),strlen(%0)))]|[ansi(Chw,%b[stripansi(%0)]%b)]|~~)]
&amp;CHROME_HEADER [v(JOB_VA)]=[switch(%0,,[repeat(_,u(FN_FLEXWIDTH,79))],__|[ansi(Chw,%b%0%b)]|[repeat(_,sub(u(FN_FLEXWIDTH,73),strlen(%0)))])]
&amp;CHROME_JOBLIST [v(JOB_VA)]=[setq(j,secure(ifelse(u(%va/FN_HASATTRP,%1,JOBS),lcstr(mid(get(%1/JOBS),0,20)),get(%va/JOBS_DEFAULT))))][setq(1,ifelse(get(%0/DUE_ON),ifelse(gt(secs(),get(%0/DUE_ON)),h,switch(get(%0/PRIORITY),1,hx,2,n,3,h,hx)),switch(get(%0/PRIORITY),1,hx,2,n,3,h)))][ifelse(u(%va/FN_ISNEW,%0,%1),[ansi(hr,*)]%b,%b%b)][ansi(h%q1,[rjust([last(name(%0))],5)]%b[iter(lnum(strlen(%qj)),[u(%va/DISPLAY_[mid(%qj,##,1)],%0,%1)])])]
&amp;CHROME_JOBSHEADER [v(JOB_VA)]=[u(FN_HEADER,Anomaly Jobs [u(VERSION)])]%r[setq(j,[secure(switch(u(%va/FN_HASATTRP,%0,JOBS),1,lcstr(mid(get(%0/JOBS),0,20)),u(JOBS_DEFAULT)))])][setq(2,*%b%b[ljust(Job#,5)][iter(lnum(strlen(%qj)),u(HEADER_[mid(%qj,##,1)]))])][ansi(Chcu,ljust(%q2,u(FN_FLEXWIDTH,79)))]%r
&amp;CHROME_MYJOBSHEADER [v(JOB_VA)]=[u(FN_HEADER,Anomaly Jobs [u(VERSION)])]%r[setq(j,TDAS)][ansi(Chcu,ljust(*%b%b[ljust(Job#,5)][iter(lnum(strlen(%qj)),u(HEADER_[mid(%qj,##,1)]))],u(FN_FLEXWIDTH,79)))]%r
&amp;CHROME_MYJOBLIST [v(JOB_VA)]=[ifelse(u(FN_ISNEW,%0,%1),[ansi(r,*)]%b,%b%b)]%b[setq(j,TDAS)][ansi(hx,[rjust([last(name(%0))],5)]%b[iter(lnum(strlen(%qj)),u(DISPLAY_[mid(%qj,##,1)],%0,%1))])]
&amp;CHROME_READ [v(JOB_VA)]=%r[setq(0,[ifelse(u(%va/EDIT_ACCESS,%#),[ansi(Xhu,%b[rest(%0,_)]:%b)],[ansi(Xhu,%b)])]|[ansi(Xhc,%b[extract(get(%1/%0),4,1,|)])]%b|)]%q0[ansi(Xhu,repeat(%b,sub(25,strlen(%q0))))][ifelse(and(or(u(%va/IS_PUBLISHED,%1),switch(extract(get(%1/%0),3,1,|),u(%1/OPENED_BY),1,0),hasflag(%1/%0,no_inherit)),u(%va/IS_PUBLIC,%1)),[ansi(Xhu,repeat(%b,div(u(FN_FLEXWIDTH,14),2)))]|[ansi(Xc,%b+Published+%b)]|[ansi(Xhu,repeat(%b,div(u(FN_FLEXWIDTH,14),2)))],[ansi(Xhu,repeat(%b,u(FN_FLEXWIDTH,29)))])][ansi(Xhu,[convsecs(extract(get(%1/%0),2,1,|))]%b)]%r[space(4)][edit(last(get(%1/%0),|),@@PIPE@@,|)]
&amp;CHROME_SUMMARY [v(JOB_VA)]=%r[repeat(_,u(FN_FLEXWIDTH,79))]%r[u(parent(%0)/SUMMARY,%0)]
&amp;WHITEBG_SKIN [v(JOB_VA)]=1
&amp;WHITEBG_JOBLIST [v(JOB_VA)]=[setq(j,secure(ifelse(u(%va/FN_HASATTRP,%1,JOBS),lcstr(mid(get(%1/JOBS),0,20)),get(%va/JOBS_DEFAULT))))][setq(1,ifelse(get(%0/DUE_ON),ifelse(gt(secs(),get(%0/DUE_ON)),r,switch(get(%0/PRIORITY),1,g,2,y,3,r,g)),switch(get(%0/PRIORITY),1,g,2,y,3,r)))][ifelse(u(%va/FN_ISNEW,%0,%1),[ansi(hr,*)]%b,%b%b)][ansi(%q1,[rjust([last(name(%0))],5)]%b[iter(lnum(strlen(%qj)),[u(%va/DISPLAY_[mid(%qj,##,1)],%0,%1)])])]
&amp;WHITEBG_FLAGS [v(JOB_VA)]=[ifelse(u(me/IS_LOCKED,%0),%[[ansi(r,ifelse(u(%va/FN_HASATTRP,%0,CHECKOUT),CHECKED OUT,LOCKED))]%],)][ifelse(u(me/IS_PUBLIC,%0),%[Myjobs%],)][ifelse(u(me/IS_PUBLISHED,%0),%[Published%],)]
&amp;WHITEBG_FOOTER [v(JOB_VA)]=[ansi(x,switch(%0,,repeat(=,u(FN_FLEXWIDTH,79)),center(| [stripansi(%0)] |,u(FN_FLEXWIDTH,79),=)))]
&amp;WHITEBG_JOBSHEADER [v(JOB_VA)]=[u(FN_HEADER,Anomaly Jobs [u(VERSION)])]%r[setq(j,[secure(switch(u(%va/FN_HASATTRP,%0,JOBS),1,lcstr(mid(get(%0/JOBS),0,20)),u(JOBS_DEFAULT)))])][ansi(c,*%b%b[ljust(Job#,5)][iter(lnum(strlen(%qj)),u(HEADER_[mid(%qj,##,1)]))])]%r[u(FN_BREAK)]
&amp;WHITEBG_MYJOBSHEADER [v(JOB_VA)]=[u(FN_HEADER,Anomaly Jobs [u(VERSION)])]%r[setq(j,TDAS)][ansi(c,ljust(%b*%b%b[ljust(Job#,5)][iter(lnum(strlen(%qj)),u(HEADER_[mid(%qj,##,1)]))],u(FN_FLEXWIDTH,79)))]%r[u(FN_BREAK)]
&amp;WHITEBG_MYBANNER [v(JOB_VA)]=[setq(0,%0)][setq(x,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/OPENED_BY),%b,|),|))][ljust([rjust(ansi(c,Bucket:),10)]%b[u(%va/FN_BUCKETNAME,%q0)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(c,Due On:),12)]%b[ifelse(get(%q0/DUE_ON),ifelse(gt(secs(),get(%q0/DUE_ON)),OVERDUE!,convsecs(get(%q0/DUE_ON))),-)]%r[ljust([rjust(ansi(c,Title:),10)]%b[get(%q0/TITLE)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(c,Assigned To:),12)]%b[ifelse(isdbref(get(%q0/ASSIGNED_TO)),name(get(%q0/ASSIGNED_TO)),Nobody)]%r[ljust([rjust(ansi(c,Opened On:),10)]%b[convsecs(get(%q0/OPENED_ON))],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(c,Status:),12)]%b[switch(get(%q0/PRIORITY),1,Green,2,Yellow,3,Red)]%b%r[rjust(ansi(c,Opened By:),10)]%b%qx
&amp;WHITEBG_HEADER [v(JOB_VA)]=[ansi(x,switch(%0,,[repeat(=,u(FN_FLEXWIDTH,79))],[center(| [stripansi(%0)] |,u(FN_FLEXWIDTH,79),=)]))]
&amp;WHITEBG_READ [v(JOB_VA)]=[repeat(-,u(FN_FLEXWIDTH,79))]%r[ifelse(u(%va/EDIT_ACCESS,%#),[ansi(x,%[)][ifelse(and(or(u(%va/IS_PUBLISHED,%1),switch(extract(get(%1/%0),3,1,|),u(%1/OPENED_BY),1,0),hasflag(%1/%0,no_inherit)),u(%va/IS_PUBLIC,%1)),ansi(c,[rest(%0,_)]+),ansi(c,[rest(%0,_)]-))][ansi(x,%])]%b,)][ansi(x,[extract(get(%1/%0),4,1,|)] added on [convsecs(extract(get(%1/%0),2,1,|))]:&#160;%b)][edit(last(get(%1/%0),|),@@PIPE@@,|)]
&amp;WHITEBG_BUCKETHEADER [v(JOB_VA)]=[u(FN_HEADER,Bucket List)]%r[ifelse(u(%va/FN_WIZONLY,%#),[ansi(c,[ljust(Name,9)][ljust(Flags,6)]%b%b[ljust(Description,u(FN_FLEXWIDTH,30))][rjust(#Jobs,5)][rjust(Pct,5)][space(3)]C%b%bA%b%bD%b%bDue[space(3)]ARTS)],[ansi(c,[ljust(NAME,8)][ljust(Description,u(FN_FLEXWIDTH,50))]%b[rjust(Viewing,20)])])]%r[u(FN_BREAK)]
&amp;WHITEBG_STAFFSUM [v(JOB_VA)]=%r[repeat(-,u(FN_FLEXWIDTH,79))]%r[rjust(ansi(c,DB#:),10)]&#160;%0[space(10)][rjust(ansi(c,Comments:),10)] [setr(z,words(lattr(%0/COMMENT_*)))]%r%r[rjust(ansi(c,Players:),10)]&#160;%(Players contributing to this job%)%r[setq(y,setunion(iter(lattr(%0/COMMENT_*),extract(get(%0/##),4,1,|),%b,|),,|))][u(%va/fn_columns,%qy,20,|,11)][ifelse(u(%va/FN_HASATTR,%0,LIST_READERS),%r[rjust(ansi(c,Readers:),10)]&#160;%(Players who have read this job in the past%)%r[setq(z,iter(get(%0/LIST_READERS),first(##,|)))][u(%va/fn_columns,map(%va/MAP_NAME,%qz,%b,|),20,|,11)],)][rjust(ansi(c,Stats:),10)]%r[u(%va/fn_columns,iter(ifelse(u(%va/FN_HASATTR,%0,LIST_STATS),sort(get(%0/LIST_STATS)),),[first(##,|)] [last(##,|)],%b,|),20,|,11)]%r
&amp;WHITEBG_BANNER [v(JOB_VA)]=[setq(0,%0)][setq(x,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/OPENED_BY),%b,|),|))][setq(y,u(%va/FN_ITEMIZE,map(MAP_NAME,get(%q0/TAGGED_FOR),%b,|),|))][ljust([rjust(ansi(c,Bucket:),10)] [u(%va/FN_BUCKETNAME,%q0)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(c,Due On:),12)] [ifelse(get(%q0/DUE_ON),ifelse(gt(secs(),get(%q0/DUE_ON)),OVERDUE!,convsecs(get(%q0/DUE_ON))),-)]%r[ljust([rjust(ansi(c,Title:),10)] [get(%q0/TITLE)],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(c,Status:),12)] [switch(get(%q0/PRIORITY),1,Green,2,Yellow,3,Red)]&#160;%([switch(get(%q0/STATUS),0,On Hold,1,New,2,Underway,3,25%%,4,50%%,5,75%%,6,100%%,?)]%)%r[ljust([rjust(ansi(c,Opened On:),10)] [convsecs(get(%q0/OPENED_ON))],div(u(FN_FLEXWIDTH,80),2))][rjust(ansi(c,Assigned To:),12)] [ifelse(isdbref(get(%q0/ASSIGNED_TO)),name(get(%q0/ASSIGNED_TO)),Nobody)]%r[rjust(ansi(c,Opened By:),10)]%b%qx[ifelse(words(%qy),%r[rjust(ansi(c,Tagged:),10)]%b%qy,)]
&amp;CREDITS [v(JOB_VA)]=Starfleet@Anomaly
&amp;MAINTAINER [v(JOB_VA)]=Minion@Crossroads
&amp;CONTRIBUTORS [v(JOB_VA)]=Firestorm@Ephemera, Grey@Anomaly, Ian@MUX, Minion@Crossroads
&amp;LICENSE [v(JOB_VA)]=You may port this code to any game provided that these credits remain intact. Please report any and all bugs, feedback, etc. to the project's home: http://code.google.com/p/anomalyjobs/
&amp;RELEASE [v(JOB_VA)]=August 20, 2010
&amp;VERSION [v(JOB_VA)]=v6.1
&amp;VERSION [v(JOB_VC)]=v6.1
@switch first(version())=RhostMUSH,{&amp;TRIG_MAIL [v(JOB_VB)]=lit(mail [remove(%0,owner(me))]=%1//%2)},PennMUSH,{&amp;TRIG_MAIL [v(JOB_VB)]=lit(@mail [remove(%0,owner(me))]=%1/%2)},{&amp;TRIG_MAIL [v(JOB_VB)]=lit(@mail/quick [remove(%0,owner(me))]/%1=%2)}
&amp;TRIG_POST [v(JOB_VB)]=+bbpost&#160;%0/%1=%2
think [ansi(hc,ANOMALY JOBS:)] Setting up master parent.
&amp;daily [v(JOB_VC)]=@dolist lcon(me)={@switch [u(%va/FN_HASATTR,##,HOOK_AUT)]=1,{@trigger ##/HOOK_AUT=[u(%va/fn_trim,## [remove(children(##),#-1)],b)],[owner(%va)]}}
@switch first(version())=PennMUSH,{think [ansi(hc,ANOMALY JOBS:)] PennMUSH does not have @daily.%BAdd a daily trigger to [v(JOB_VC)]/DAILY to your CRON object.},RhostMUSH,{think [ansi(hc,ANOMALY JOBS:)] RhostMUSH does not have @daily.%BInstall an @daily emulator or add a daily trigger to [v(JOB_VC)]/DAILY to your CRON object.}
@switch [v(JOB_PATCH)]=0,{&amp;ACCESS [v(JOB_VC)]=lit([u(%va/FN_STAFFALL,%#)]);&amp;ACCESS_DESC [v(JOB_VC)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;ACCESS_HELP [v(JOB_VC)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;ACCESS_HIDDEN [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_LOCKED [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_LOGFILE [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_MYJOBS [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_POST_APPROVE [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_POST_COMPLETE [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_POST_DENY [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_TURNAROUND [v(JOB_VC)]=lit([u(%va/FN_WIZONLY,%0)]);}
&amp;BLETTER_ADD [v(JOB_VC)]=Comments added to [name(%0)] by [name(%1)].
&amp;BLETTER_APR [v(JOB_VC)]=[name(%0)] has been approved by [name(%1)].
&amp;BLETTER_ASN [v(JOB_VC)]=[name(%0)] has been assigned to [switch(%2,,nobody,name(%2))] by [name(%1)].
&amp;BLETTER_CKI [v(JOB_VC)]=[name(%0)] has been checked in by [name(%1)].
&amp;BLETTER_CKO [v(JOB_VC)]=[name(%0)] has been checked out by [name(%1)].
&amp;BLETTER_CLN [v(JOB_VC)]=[name(%0)] has been cloned by [name(%1)]. [name(%2)] is the new job.
&amp;BLETTER_COM [v(JOB_VC)]=[name(%0)] has been completed by [name(%1)].
&amp;BLETTER_CRE [v(JOB_VC)]=[name(%0)] has been created by [name(%1)] in [name(parent(%0))]:&#160;%2
&amp;BLETTER_DNY [v(JOB_VC)]=[name(%0)] has been denied by [name(%1)].
&amp;BLETTER_DUE [v(JOB_VC)]=[name(%0)]'s due date changed by [name(%1)].
&amp;BLETTER_DEL [v(JOB_VC)]=[name(%0)] has been deleted by [name(%1)].
&amp;BLETTER_EDT [v(JOB_VC)]=[name(%0)] has been edited by [name(%1)].
&amp;BLETTER_ESC [v(JOB_VC)]=[name(%0)] has been escalated to&#160;%2 by [name(%1)].
&amp;BLETTER_LOK [v(JOB_VC)]=[name(%0)] has been locked by [name(%1)].
&amp;BLETTER_MAI [v(JOB_VC)]=[name(%1)] has sent mail regarding [name(%0)].
&amp;BLETTER_MRG [v(JOB_VC)]=[name(%2)] has been merged into [name(%0)] by [name(%1)].
&amp;BLETTER_MYS [v(JOB_VC)]=[name(%0)]/%2 mysummary setting has been modified by [name(%1)].
&amp;BLETTER_NAM [v(JOB_VC)]=[name(%0)] has been renamed to '%2' by [name(%1)].
&amp;BLETTER_OTH [v(JOB_VC)]=[name(%0)] has been created by [name(%1)] in [name(parent(%0))]:&#160;%2
&amp;BLETTER_PUB [v(JOB_VC)]=[name(%0)][ifelse(t(strlen(%2)),/Comment&#160;%2,)] has been published by [name(%1)].
&amp;BLETTER_SRC [v(JOB_VC)]=[name(%0)]'s source has been changed by [name(%1)].
&amp;BLETTER_STA [v(JOB_VC)]=[name(%0)]'s status has been changed by [name(%1)].
&amp;BLETTER_SUM [v(JOB_VC)]=[name(%0)]/%2 summary setting has been modified by [name(%1)].
&amp;BLETTER_TAG [v(JOB_VC)]=[name(%0)]'s tags have been altered by [name(%1)].
&amp;BLETTER_TRN [v(JOB_VC)]=[name(%0)] has been transferred to the [name(%2)] bucket by [name(%1)].
&amp;BLETTER_UND [v(JOB_VC)]=[name(%0)] has been undeleted by [name(%1)].
&amp;BLETTER_UNL [v(JOB_VC)]=[name(%0)] has been unlocked by [name(%1)].
&amp;BLETTER_UNP [v(JOB_VC)]=[name(%0)][ifelse(t(strlen(%2)),/Comment&#160;%2,)] has been unpublished by [name(%1)].
&amp;ERROR_HIDDEN [v(JOB_VC)]=Valid options for the HIDDEN parameter are 'yes' and 'no'.
&amp;ERROR_LOCKED [v(JOB_VC)]=Valid settings for the LOCKED parameter are 'yes' and 'no'.
&amp;ERROR_MYJOBS [v(JOB_VC)]=Valid settings for the MYJOBS parameter are 'yes' and 'no'.
&amp;ERROR_POST_APPROVE [v(JOB_VC)]=The setting for the POST_APPROVE parameter must be a positive integer.
&amp;ERROR_POST_COMPLETE [v(JOB_VC)]=The setting for the POST_COMPLETE parameter must be a positive integer.
&amp;ERROR_POST_DENY [v(JOB_VC)]=The setting for the POST_DENY parameter must be a positive integer.
&amp;ERROR_TURNAROUND [v(JOB_VC)]=You must provide a turnaround time in hours.
&amp;HELP [v(JOB_VC)]=%rThere is no help available for that bucket. To set help information for the [name(me)] bucket, use:%r%r[space(5)]+bucket/set [lcstr(name(me))]/help=&lt;information&gt;%r
&amp;HOOK_CKO [v(JOB_VC)]=@cpattr&#160;%0/ASSIGNED_TO=%0/TEMP_ASN;&amp;ASSIGNED_TO&#160;%0=%1
&amp;HOOK_CKI [v(JOB_VC)]=&amp;ASSIGNED_TO&#160;%0=[get(%0/TEMP_ASN)];&amp;TEMP_ASN&#160;%0=
&amp;HOOK_MAI [v(JOB_VC)]=@set&#160;%0/[last(sortby(%va/SORTBY_COMMENTS,lattr(%0/COMMENT_*)))]=no_inherit
&amp;MLETTER_APR [v(JOB_VC)]=[name(%0)] has been approved:%r%r[last(get(%0/COMMENT_1),|)]%r[repeat(-,75)]%r[ansi(h,Comments added by [name(%2)]:)]&#160;%3
&amp;MLETTER_DNY [v(JOB_VC)]=[name(%0)] has been denied:%r%r[last(get(%0/COMMENT_1),|)]%r[repeat(-,75)]%r[ansi(h,Comments added by [name(%2)]:)]&#160;%3
&amp;MLETTER_MAI [v(JOB_VC)]=[name(%2)] is mailing you regarding [name(%0)]:%r%r%3%r[repeat(-,75)]%rUnless this letter indicates otherwise%, you should respond with the following command:%r%r[space(5)][ansi(h,+myjob/add [last(name(%0))]=&lt;your comments&gt;)]
&amp;PLETTER_APR [v(JOB_VC)]=[space(10)][ansi(h,Job:)] #[last(name(%0))]%r[space(8)][ansi(h,Title:)] [get(%0/TITLE)]%r[space(4)][ansi(h,Opened By:)] [u(%va/FN_PLAYERLIST,%0)]%r[space(4)][ansi(h,Opened On:)] [convsecs(get(%0/OPENED_ON))]%r%b[ansi(h,Completed By:)] [name(%2)]%r%b[ansi(h,Completed On:)] [time()]%r%r[last(get(%0/COMMENT_1),|)]%r[repeat(-,78)]%r[ansi(h,Comments from [name(%2)]:)]&#160;%3%r%rThis job was approved.
&amp;PLETTER_COM [v(JOB_VC)]=Job [last(name(%0))] has been completed by [name(%2)]:%r%r[last(get(%0/COMMENT_1),|)]%r[repeat(-,78)]%r[ansi(h,Comments from [name(%2)]:)]&#160;%3
&amp;PLETTER_DNY [v(JOB_VC)]=[space(10)][ansi(h,Job:)] #[last(name(%0))]%r[space(8)][ansi(h,Title:)] [get(%0/TITLE)]%r[space(4)][ansi(h,Opened By:)] [u(%va/FN_PLAYERLIST,%0)]%r[space(4)][ansi(h,Opened On:)] [convsecs(get(%0/OPENED_ON))]%r%b[ansi(h,Completed By:)] [name(%2)]%r%b[ansi(h,Completed On:)] [time()]%r%r[last(get(%0/COMMENT_1),|)]%r[repeat(-,78)]%r[ansi(h,Comments from [name(%2)]:)]&#160;%3%r%rThis job was denied.
&amp;PROCESS_DESC [v(JOB_VC)]=[setq(3,DESC)][setq(1,%0)]1
&amp;PROCESS_HELP [v(JOB_VC)]=[setq(3,HELP)][setq(1,%0)]1
&amp;PROCESS_HIDDEN [v(JOB_VC)]=[setq(3,HIDDEN)][setq(1,switch(lcstr(%0),yes,1,no,,0))][switch(%q1,,1,%q1)]
&amp;PROCESS_LOCKED [v(JOB_VC)]=[setq(3,LOCKED)][setq(1,switch(lcstr(%0),yes,1,no,,0))][switch(%q1,,1,%q1)]
&amp;PROCESS_LOGFILE [v(JOB_VC)]=[setq(3,LOGFILE)][setq(1,%0)]1
&amp;PROCESS_MYJOBS [v(JOB_VC)]=[setq(3,PUBLIC)][setq(1,switch(lcstr(%0),yes,1,no,,0))][switch(%q1,,1,%q1)]
&amp;PROCESS_POST_APPROVE [v(JOB_VC)]=[setq(3,POST_APPROVE)][setq(1,u(%va/FN_FIND-BBDBREF,%0))][gt(%0,0)]
&amp;PROCESS_POST_COMPLETE [v(JOB_VC)]=[setq(3,POST_COMPLETE)][setq(1,u(%va/FN_FIND-BBDBREF,%0))][gt(%0,0)]
&amp;PROCESS_POST_DENY [v(JOB_VC)]=[setq(3,POST_DENY)][setq(1,u(%va/FN_FIND-BBDBREF,%0))][gt(%0,0)]
&amp;PROCESS_TURNAROUND [v(JOB_VC)]=[setq(3,TURNAROUND)][setq(1,%0)][isnum(%0)]
@switch [hasattr(v(JOB_VC),STAT_ART)]=0,{&amp;STAT_ART [v(JOB_VC)]=0 0}
@set [v(JOB_VC)]/STAT_ART=NO_INHERIT
@dolist VA VB VC={@cpattr&#160;%#/JOB_##=[v(JOB_VC)]/##}
@switch [v(JOB_PATCH)]=0,{think [ansi(hc,ANOMALY JOBS:)] Setting up buckets.},{think [ansi(hc,ANOMALY JOBS:)] Keeping your current bucket setup.}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(ADMIN,10))][setq(1,create(Job 1,10))];@Desc&#160;%q0=For game administrative issues.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)];think [ansi(hc,ANOMALY JOBS:)] Creating initial job.;&amp;OPENED_BY&#160;%q1=%#;&amp;OPENED_ON&#160;%q1=[secs()];&amp;MODIFIED_ON&#160;%q1=[secs()];&amp;STATUS&#160;%q1=1;&amp;TITLE&#160;%q1=Welcome;@parent&#160;%q1=%q0;@tel&#160;%q1=[v(JOB_VA)];&amp;NUM_COMMENT&#160;%q1=3;&amp;LIST_STATS&#160;%q1=ADD|1;&amp;PRIORITY&#160;%q1=1;&amp;COMMENT_1&#160;%q1=CRE|[secs()]|#0|Anomaly Jobs|Thank you for choosing Anomaly Jobs. This is fully-featured task tracking code that helps to keep games organized. Please see '+jobs/credits' for information on version, license and other credits.;&amp;COMMENT_2&#160;%q1=ADD|[secs()]|#0|Anomaly Jobs|Remember that /complete posts to the public BBS (unless changed for a bucket - see the help file on buckets). /approve and /deny sends mail to the job-creator, and posts to private BBS.;@set&#160;%q1=UNFINDABLE;&amp;JOBS_NUM [v(JOB_VA)]=1;&amp;MAX_JOBS [v(JOB_VA)]=200;@switch [first(version())]=TinyMUSH,{@set&#160;%q1=!COMMANDS},{@set&#160;%q1=NO_COMMAND}}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(APPS,10))];@Desc&#160;%q0=Character applications submitted for review.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ALETTER_OTH&#160;%q0=lit(Application for approval submitted by [name(%1)].);&amp;MLETTER_OTH&#160;%q0=lit(You have submitted an application for approval. Please give staff some time to process the application. You will hear back soon.);&amp;MLETTER_APR&#160;%q0=lit(You have been approved by [name(%2)].);&amp;PLETTER_APR&#160;%q0=lit([name(%2)] has approved [name(get(%0/OPENED_BY))] for roleplay.);&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(BUILD,10))];@Desc&#160;%q0=For building issues and typo reports.;@lock/Speech&#160;%q0=ACCESS/1;&amp;PUBLIC&#160;%q0=1;&amp;ACCESS&#160;%q0=lit([or(haspower(%#,builder),u(%va/FN_STAFFALL,%#))]);@set&#160;%q0=SAFE;@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(CGEN,10))];@Desc&#160;%q0=For character generation problems and updates.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(CODE,10))];@Desc&#160;%q0=For bugs and code enhancements.;@lock/Speech&#160;%q0=ACCESS/1;&amp;PUBLIC&#160;%q0=1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@set&#160;%q0=SAFE;@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(FEEP,10))];@Desc&#160;%q0=Storage for unimplemented game ideas.;@lock/Speech&#160;%q0=ACCESS/1;&amp;HIDDEN&#160;%q0=1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(FORUM,10))];@Desc&#160;%q0=Tabled discussion jobs. Feedback needed.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(PITCH,10))];@Desc&#160;%q0=Pitched plots and stories.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);&amp;HIDDEN&#160;%q0=1;@set&#160;%q0=SAFE;@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(PUB,10))];@Desc&#160;%q0=Public jobs. Everyone has +myjobs access.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);&amp;TRANSPARENT&#160;%q0=1;&amp;PUBLIC&#160;%q0=1;&amp;HOOK_CRE&#160;%q0=lit(@set&#160;%0/COMMENT_1=no_inherit);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(QUERY,10))];@Desc&#160;%q0=Query bucket.;@lock/Speech&#160;%q0=ACCESS/1;&amp;PRIORITY&#160;%q0=2;&amp;PUBLIC&#160;%q0=1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);&amp;TURNAROUND&#160;%q0=168;&amp;HOOK_OTH&#160;%q0=lit(@set&#160;%0/COMMENT_1=no_inherit;&amp;ASSIGNED_TO&#160;%0=%1);&amp;MLETTER_OTH&#160;%q0=lit(You have been issued an official query by the jobs system by [name(%2)]. You have [div(v(TURNAROUND),24)] days at the time of this mail to respond to the query%, otherwise staff may need to act on the issue without your input. To see your query%, please type '+myjob [last(name(%0))]'.);@set&#160;%q0=SAFE;@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(REQ,10))];@Desc&#160;%q0=Player requests.;@lock/Speech&#160;%q0=ACCESS/1;&amp;PUBLIC&#160;%q0=1;&amp;PRIORITY&#160;%q0=2;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);&amp;TURNAROUND&#160;%q0=72;&amp;LOGFILE&#160;%q0=reqlog;&amp;MLETTER_OTH&#160;%q0=lit(You have requested '[name(%0)]: [get(%0/TITLE)]' from staff:&#160;%r%r%3%r%r[repeat(-,75)]%rSee '[ansi(h,+help myjobs)]' for help on how to display and add to your jobs.%r%rPlease give staff at least [u(me/TURNAROUND)] hours from the date of this mail to process your request.);@set&#160;%q0=SAFE;@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(RP,10))];@Desc&#160;%q0=For storing potential plots.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);&amp;ACCESS_APPROVED&#160;%q0=lit([u(%va/FN_WIZONLY,%0)]);&amp;ACCESS_ARC&#160;%q0=lit([u(%va/FN_STAFFALL,%0)]);&amp;ACCESS_PLAYERS&#160;%q0=lit([u(%va/FN_STAFFALL,%0)]);&amp;ACCESS_SCHEDULE&#160;%q0=lit([u(%va/FN_STAFFALL,%0)]);&amp;ACCESS_STAFF&#160;%q0=lit([u(%va/FN_STAFFALL,%0)]);&amp;ACCESS_SYNOPSIS&#160;%q0=lit([u(%va/FN_STAFFALL,%0)]);&amp;ERROR_PLAYERS&#160;%q0=lit(I don't recognize [ansi(h,%qp)] as a player.);&amp;ERROR_STAFF&#160;%q0=lit(I don't recognize [ansi(h,%qp)] as a player.);&amp;HIDDEN&#160;%q0=1;&amp;MAP_NAME&#160;%q0=lit([name(*%0)]);&amp;PROCESS_APPROVED&#160;%q0=lit([setq(3,APPROVED)][setq(1,%0)]1);&amp;PROCESS_ARC&#160;%q0=lit([setq(3,PLOT_ARC)][setq(1,u(%va/FN_STRTRUNC,%0,50))]);&amp;PROCESS_PLAYERS&#160;%q0=lit([setq(3,PLAYERS)][ifelse(not(gt(strlen(u(%va/fn_trim,squish(iter(%0,ifelse(not(isdbref(pmatch(itext(0)))),setr(p,itext(0)),))))),0)),[setq(9,iter(%0,pmatch(itext(0))))][setq(8,get(%1/PLAYERS))][iter(%q9,ifelse(gt(member(%q8,##),0),setq(8,remove(%q8,##)),setq(8,setunion(%q8,##))))][setq(1,%q8)]1,0)]);&amp;PROCESS_SCHEDULE&#160;%q0=lit([setq(3,SCHEDULE)][setq(1,u(%va/FN_STRTRUNC,%0,50))]1);&amp;PROCESS_STAFF&#160;%q0=lit([setq(3,WRITER)][ifelse(not(gt(strlen(u(%va/fn_trim,squish(iter(%0,ifelse(not(isdbref(pmatch(itext(0)))),setr(p,itext(0)),))))),0)),[setq(9,iter(%0,pmatch(itext(0))))][setq(8,get(%1/WRITER))][iter(%q9,ifelse(gt(member(%q8,##),0),setq(8,remove(%q8,##)),setq(8,setunion(%q8,##))))][setq(1,%q8)]1,0)]);&amp;PROCESS_SYNOPSIS&#160;%q0=lit([setq(3,BRIEF)][setq(1,%0)]1);&amp;SUMMARY&#160;%q0=lit([rjust(ansi(hc,Approved:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,APPROVED),get(%0/APPROVED),Unapproved)]%r[rjust(ansi(hc,Players:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,PLAYERS),u(%va/FN_ITEMIZE,map(me/MAP_NAME,get(%0/PLAYERS),%b,|),|),Nobody)]%r[rjust(ansi(hc,Schedule:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,SCHEDULE),get(%0/SCHEDULE),Unset)]%r[rjust(ansi(hc,Arc:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,PLOT_ARC),get(%0/PLOT_ARC),Unset)]%r[rjust(ansi(hc,Staff:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,WRITER),u(%va/FN_ITEMIZE,map(me/MAP_NAME,get(%0/WRITER),%b,|),|),Nobody)]%r[rjust(ansi(hc,Synopsis:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,BRIEF),get(%0/BRIEF),Unset)]);&amp;HELP&#160;%q0=lit(%r[space(5)]This bucket is for plots that have potential but aren't yet ready to run. Jobs in this bucket should remain here until the plot is approved to be run.%r%r[u(%va/FN_BREAK,ansi(hc,Settings for +job/sumset))]%r[ljust(ansi(h,PLAYERS),10)] Accepts &lt;player&gt; as a valid parameter.%r[ljust(ansi(h,SCHEDULE),10)] Describe when the plot is in effect.%r[ljust(ansi(h,ARC),10)] Describes the story arc associated to this plot.%r[ljust(ansi(h,STAFF),10)] Accepts &lt;player&gt; as a valid parameter.%r[ljust(ansi(h,SYNOPSIS),10)] A brief synopsis of the plot.%r[ljust(ansi(h,APPROVED),10)] Wiz-only, for approving plots. Accepts 'yes' or 'no'.);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(TECH,10))];@Desc&#160;%q0=Technology issues - weapon objects, etc.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(THEME,10))];@Desc&#160;%q0=Thematic issues and discussion.;@lock/Speech&#160;%q0=ACCESS/1;&amp;ACCESS&#160;%q0=lit([u(%va/FN_STAFFALL,%#)]);@parent&#160;%q0=[v(JOB_VC)];@tel&#160;%q0=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{think [setq(0,create(TPS,10))];@Desc TPS=Actively running tiny plots.;@lock/Speech TPS=ACCESS/1;&amp;SUMMARY TPS=lit([rjust(ansi(hc,Approved:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,APPROVED),get(%0/APPROVED),Unapproved)]%r[rjust(ansi(hc,Players:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,PLAYERS),u(%va/FN_ITEMIZE,map(me/MAP_NAME,get(%0/PLAYERS),%b,|),|),Nobody)]%r[rjust(ansi(hc,Schedule:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,SCHEDULE),get(%0/SCHEDULE),Unset)]%r[rjust(ansi(hc,Arc:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,PLOT_ARC),get(%0/PLOT_ARC),Unset)]%r[rjust(ansi(hc,Staff:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,WRITER),u(%va/FN_ITEMIZE,map(me/MAP_NAME,get(%0/WRITER),%b,|),|),Nobody)]%r[rjust(ansi(hc,Synopsis:),10)]%b[ifelse(u(%va/FN_HASATTRP,%0,BRIEF),get(%0/BRIEF),Unset)]);&amp;MAP_NAME TPS=lit([name(*%0)]);&amp;ACCESS TPS=lit([u(%va/FN_STAFFALL,%#)]);&amp;ACCESS_PLAYERS TPS=lit([u(%va/FN_STAFFALL,%0)]);&amp;PROCESS_PLAYERS TPS=lit([setq(3,PLAYERS)][ifelse(not(gt(strlen(u(%va/fn_trim,squish(iter(%0,ifelse(not(isdbref(pmatch(itext(0)))),setr(p,itext(0)),))))),0)),[setq(9,iter(%0,pmatch(itext(0))))][setq(8,get(%1/PLAYERS))][iter(%q9,ifelse(gt(member(%q8,##),0),setq(8,remove(%q8,##)),setq(8,setunion(%q8,##))))][setq(1,%q8)]1,0)]);&amp;ERROR_PLAYERS TPS=lit(I don't recognize [ansi(h,%qp)] as a player.);&amp;ACCESS_SCHEDULE TPS=lit([u(%va/FN_STAFFALL,%0)]);&amp;PROCESS_SCHEDULE TPS=lit([setq(3,SCHEDULE)][setq(1,u(%va/FN_STRTRUNC,%0,50))]1);&amp;ERROR_SCHEDULE TPS=lit(You must enter a valid date string.);&amp;ACCESS_ARC TPS=lit([u(%va/FN_STAFFALL,%0)]);&amp;PROCESS_ARC TPS=lit([setq(3,PLOT_ARC)][setq(1,u(%va/FN_STRTRUNC,%0,50))]);&amp;ACCESS_STAFF TPS=lit([u(%va/FN_STAFFALL,%0)]);&amp;PROCESS_STAFF TPS=lit([setq(3,WRITER)][ifelse(not(gt(strlen(u(%va/fn_trim,squish(iter(%0,ifelse(not(isdbref(pmatch(itext(0)))),setr(p,itext(0)),))))),0)),[setq(9,iter(%0,pmatch(itext(0))))][setq(8,get(%1/WRITER))][iter(%q9,ifelse(gt(member(%q8,##),0),setq(8,remove(%q8,##)),setq(8,setunion(%q8,##))))][setq(1,%q8)]1,0)]);&amp;ERROR_STAFF TPS=lit(I don't recognize [ansi(h,%qp)] as a player.);&amp;ACCESS_SYNOPSIS TPS=lit([u(%va/FN_STAFFALL,%0)]);&amp;PROCESS_SYNOPSIS TPS=lit([setq(3,BRIEF)][setq(1,%0)]1);&amp;ACCESS_APPROVED TPS=lit([u(%va/FN_WIZONLY,%0)]);&amp;PROCESS_APPROVED TPS=lit([setq(3,APPROVED)][setq(1,%0)]1);&amp;HELP TPS=lit(%r[space(5)]This bucket is for currently active plots that are running on the grid. Care should be taken to keep the headers of these jobs up-to-date, especially in terms of Progress settings and due dates. When the plot is completed, the job should be set complete and left open until follow-up requests are completed.%r%r[u(%va/FN_BREAK,ansi(hc,Settings for +job/sumset))]%r[ljust(ansi(h,PLAYERS),10)] Accepts &lt;player&gt; as a valid parameter.%r[ljust(ansi(h,SCHEDULE),10)] Describe when the plot is in effect.%r[ljust(ansi(h,ARC),10)] Describes the story arc associated to this plot.%r[ljust(ansi(h,STAFF),10)] Accepts &lt;player&gt; as a valid parameter.%r[ljust(ansi(h,SYNOPSIS),10)] A brief synopsis of the plot.%r[ljust(ansi(h,APPROVED),10)] Wiz-only, for approving plots. Accepts 'yes' or 'no'.);@parent TPS=[v(JOB_VC)];@tel TPS=[v(JOB_VC)]}
@switch [v(JOB_PATCH)]=0,{&amp;HAS_ACCESS [v(JOB_VA)]=lit([or(haspower(%0,builder),u(%va/FN_STAFFALL,%0))]);&amp;ADD_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;APPROVE_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;COMPLETE_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;CREATE_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;DENY_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;EDIT_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;GIVE_ACCESS [v(JOB_VA)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;LOG_ACCESS [v(JOB_VA)]=lit([u(%va/FN_WIZONLY,%0)]);&amp;MAIL_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;STATS_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);&amp;CONFIG_ACCESS [v(JOB_VA)]=lit([u(%va/FN_STAFFALL,%0)]);}
@switch first(version())=RhostMUSH,{&amp;FN_WIZONLY [v(JOB_VA)]=lit([gte(bittype(%0),5)])},{&amp;FN_WIZONLY [v(JOB_VA)]=lit([hasflag(%0,WIZARD)])}
@switch first(version())=RhostMUSH,{&amp;FN_STAFFALL [v(JOB_VA)]=lit([gte(bittype(%0),2)])},PennMUSH,{&amp;FN_STAFFALL [v(JOB_VA)]=lit([orflags(%0,Wr)])},{&amp;FN_STAFFALL [v(JOB_VA)]=lit([orflags(%0,WZ)])}
@switch [v(JOB_PATCH)]=0,{&amp;JOB_LOGGING [v(JOB_VA)]=1;&amp;LOGFILE [v(JOB_VC)]=joblog}
@switch [first(version())]=TinyMUSH,{&amp;BUFFER [v(JOB_VA)]=4000},RhostMUSH,{&amp;BUFFER [v(JOB_VA)]=3999},{&amp;BUFFER [v(JOB_VA)]=8000}
think [ansi(hc,ANOMALY JOBS:)] Setting flags.
@switch [first(version())]=PennMUSH,{@set [v(JOB_GO)]=WIZARD},{@set [v(JOB_GO)]=INHERIT}
@switch [first(version())]=TinyMUSH,{@set [v(JOB_GO)]=COMMANDS},{@set [v(JOB_GO)]=!NO_COMMAND}
@switch [first(version())]=PennMUSH,{@set [v(JOB_GO)]=!HALT},{@set [v(JOB_GO)]=!HALTED}
@set [v(JOB_GO)]=UNFINDABLE
@set [v(JOB_GO)]=SAFE
@switch [first(version())]=RhostMUSH,{@set [v(JOB_GO)]=SIDEFX}
@switch [first(version())]=PennMUSH,{@set [v(JOB_VA)]=WIZARD},{@set [v(JOB_VA)]=INHERIT}
@set [v(JOB_VA)]=UNFINDABLE
@switch [first(version())]=TinyMUSH,{@set [v(JOB_VA)]=!COMMANDS},{@set [v(JOB_VA)]=NO_COMMAND}
@switch [first(version())]=PennMUSH,{@set [v(JOB_VA)]=!HALT},{@set [v(JOB_VA)]=!HALTED}
@set [v(JOB_VA)]=SAFE
@switch [first(version())]=RhostMUSH,{@set [v(JOB_VA)]=SIDEFX}
@set [v(JOB_VB)]=UNFINDABLE
@switch [first(version())]=TinyMUSH,{@set [v(JOB_VB)]=!COMMANDS},{@set [v(JOB_VB)]=NO_COMMAND}
@switch [first(version())]=PennMUSH,{@set [v(JOB_VB)]=!HALT},{@set [v(JOB_VB)]=!HALTED}
@set [v(JOB_VB)]=SAFE
@switch [first(version())]=PennMUSH,{@set [v(JOB_VC)]=WIZARD},{@set [v(JOB_VC)]=INHERIT}
@set [v(JOB_VC)]=SAFE
@set [v(JOB_VC)]=UNFINDABLE
@switch [first(version())]=TinyMUSH,{@set [v(JOB_VC)]=COMMANDS},{@set [v(JOB_VC)]=!NO_COMMAND}
@switch [first(version())]=PennMUSH,{@set [v(JOB_VC)]=!HALT},{@set [v(JOB_VC)]=!HALTED}
@switch [first(version())]=RhostMUSH,{@set [v(JOB_VC)]=SIDEFX}
@dolist lcon([v(JOB_VC)])={@switch [first(version())]=PennMUSH,{@set ##=!HALT},{@set ##=!HALTED};@switch [first(version())]=TinyMUSH,{@set ##=!COMMANDS},{@set ##=NO_COMMAND};@set ##=UNFINDABLE;@switch [first(version())]=PennMUSH,{@set ##=WIZARD},{@set ##=INHERIT};}
@switch [v(JOB_PATCH)]=0,{&amp;INSTALL_DATE [v(JOB_VA)]=[time()]}
think [ansi(hc,ANOMALY JOBS:)] Setting locks.
@lock [v(JOB_GO)]=me
@lock [v(JOB_VA)]=me
@lock [v(JOB_VB)]=me
@lock [v(JOB_VC)]=me
@switch [setq(0,switch(first(version()),PennMUSH,lsearch(all,eobjects,\[strmatch(name(##),bbpocket)\]),RhostMUSH,searchng(object=bbpocket),search(object=bbpocket)))][isdbref(%q0)][v(JOB_PATCH)]=0*,{think [ansi(hc,ANOMALY JOBS:)] Couldn't find Myrddin's BBS. Installation is not complete.},10,{think [ansi(hc,ANOMALY JOBS:)] Setting up the BBS.;&amp;BBPOCKET [v(JOB_VC)]=%q0;+bbnewgroup Job Tracker;@wait 2={+bbnewgroup Staff Job Tracker};@wait 5={&amp;POST_COMPLETE [setq(1,extract(u(%q0/GROUPS),dec(words(u(%q0/GROUPS))),1))][setq(2,last(u(%q0/GROUPS)))][setq(3,v(JOB_VB))][setq(4,switch(first(version()),RhostMUSH,lit(gte(bittype(%0),2)),PennMUSH,lit(orflags(%0,Wr)),lit(orflags(%0,WZ))))][v(JOB_VC)]=%q1;&amp;POST_APPROVE [v(JOB_VC)]=%q2;&amp;POST_DENY [v(JOB_VC)]=%q2;&amp;POST_DELETE [v(JOB_VC)]=%q2;&amp;CANREAD&#160;%q1=1;&amp;CANWRITE&#160;%q1=%[or%(strmatch%(%%0,%q3%),%q4%)%];&amp;CANREAD&#160;%q2=%q4;&amp;CANWRITE&#160;%q2=%[or%(strmatch%(%%0,%q3%),%q4%)%];}},{think [ansi(hc,ANOMALY JOBS:)] Updating BBS settings.;&amp;BBPOCKET [v(JOB_VC)]=%q0;@dolist [v(JOB_VC)] [lcon(v(JOB_VC))]={@switch [and(hasattr(##,POST_COMPLETE),isnum(get(##/POST_COMPLETE)))][and(hasattr(##,POST_APPROVE),isnum(get(##/POST_APPROVE)))][and(hasattr(##,POST_DENY),isnum(get(##/POST_DENY)))][and(hasattr(##,POST_DELETE),isnum(get(##/POST_DELETE)))]=1???,{&amp;POST_COMPLETE ##=[extract(u(%q0/GROUPS),get(##/POST_COMPLETE),1)]},?1??,{&amp;POST_APPROVE ##=[extract(u(%q0/GROUPS),get(##/POST_APPROVE),1)]},??1?,{&amp;POST_DENY ##=[extract(u(%q0/GROUPS),get(##/POST_DENY),1)]},???1,{&amp;POST_DELETE ##=[extract(u(%q0/GROUPS),get(##/POST_DELETE),1)]}}}
&amp;JOBSH me=
&amp;JOBSB me=
@switch [v(JOB_PATCH)]=&gt;0,{think [ansi(hc,ANOMALY JOBS:)] Checking hooks for compatibility.;@dolist [v(JOB_VC)] [lcon(v(JOB_VC))]={@switch [hasattr(##,HOOK_COMPLETE)][hasattr(##,HOOK_APPROVE)][hasattr(##,HOOK_DENY)][hasattr(##,HOOK_DELETE)]=1???,{think [ansi(hc,ANOMALY JOBS:)] ##/HOOK_COMPLETE not valid: move to ##/HOOK_COM;},?1??,{think [ansi(hc,ANOMALY JOBS:)] ##/HOOK_APPROVE not valid: move to ##/HOOK_APR;},??1?,{think [ansi(hc,ANOMALY JOBS:)] ##/HOOK_DENY not valid: move to ##/HOOK_DNY;},???1,{think [ansi(hc,ANOMALY JOBS:)] ##/HOOK_DELETE not valid: move to ##/HOOK_DEL;}}}
@wait 10={think [ansi(hc,ANOMALY JOBS:)] Script complete. Thanks for using Anomaly Jobs! You should drop the Job Global Object &lt;JGO&gt; in the master room. If you have opened up the system to more than just ROYALTY and WIZARD, you must have #1 lock and hide the attribute LAST_CONN. You should hide &amp; lock JOBSH and JOBSB no matter what. For example:%r%r@attribute/access JOBSB=WIZARD%r@attribute/access JOBSH=HIDDEN[switch(first(version()),PennMUSH,%r%(On PennMUSH\, you must use /retroactive and also add these to a wizard's @startup.%))];@set me=!quiet}
@@
@@ DONE WITH ANOMALY JOBS
@@
think [ansi(hc,MUX Core:)] Performing cleanup of Jobs installation and customizing buckets.
@switch [hasattr([v(JOB_VC)],STAT_ART)]=0,{&amp;STAT_ART [v(JOB_VC)]=0 0}
@set [v(JOB_VC)]/STAT_ART=NO_INHERIT
@name #22=&lt;JG&gt; Job Globals
drop #22
@aconnect #22=@switch [u(%va/HAS_ACCESS,%#)]=1,{@fo&#160;%#=+jobs/new},{@if not(haspower(%#,guest))=@fo&#160;%#=+myjobs}
@cpattr me/JOB_GO=#3/JOB_GO
@cpattr me/JOB_VA=#3/JOB_VA
@cpattr me/JOB_VB=#3/JOB_VB
@cpattr me/JOB_VC=#3/JOB_VC
@cpattr me/JOB_PATCH=#3/JOB_PATCH
&amp;JOB_GO me
&amp;JOB_VA me
&amp;JOB_VB me
&amp;JOB_VC me
&amp;JOB_PATCH me
&amp;HAS_ACCESS #23=[u(%va/FN_STAFFALL,%0)]
&amp;ACCESS #29=[u(%va/FN_STAFFALL,%#)]
&amp;HOOK_CRE #29=@tr #12/TR.CREATE=[get(%0/TITLE)],%1;@cpattr #11/APR_ACCESS=%0/APR_ACCESS;@cpattr #11/COM_ACCESS=%0/COM_ACCESS;@wait 0={&amp;D.BUILD&#160;%0=[locate(#12,ZMO: [get(%0/TITLE)],i)]}
&amp;HOOK_APR #29=@tr #11/TR.ADVANCE.[get(get(%0/D.BUILD)/D.STATUS)]=[get(%0/D.BUILD)],%1
&amp;HOOK_COM #29=@tr #11/TR.ADVANCE.[get(get(%0/D.BUILD)/D.STATUS)]=[get(%0/D.BUILD)],%1
&amp;HOOK_DNY #29=@if [get(get(%0/D.BUILD)/D.STATUS)]={@@ Do Nothing},{@tr #11/TR.DESTROY=[get(%0/D.BUILD)],%1}
&amp;HOOK_DEL #29=@if [get(get(%0/D.BUILD)/D.STATUS)]={@@ Do Nothing},{@tr #11/TR.DESTROY=[get(%0/D.BUILD)],%1}
&amp;HOOK_OTH #29=&amp;D.BUILD&#160;%0=[zone(%1)];@cpattr #11/APR_ACCESS=%0/APR_ACCESS;@cpattr #11/COM_ACCESS=%0/COM_ACCESS
&amp;MLETTER_APR #29=[name(%0)] has been approved:&#160;%r%r[last(get(%0/COMMENT_1),|)]%r[repeat(-,75)]%r%tYour building project has been approved. The builder name for your project is [name(get(get(%0/D.BUILD)/D.BUILDER))] and the starting password is [get(get(%0/D.BUILD)/D.INITIALPASS)]. Please change this password after you have logged in the builder. An initial room has been dug for you in the Building Nexus.&#160;%r[ansi(h,Comments added by [name(%2)]:)]&#160;%3
&amp;HOOK_COM #28=@unlock [setr(p,get(%0/OPENED_BY))]/D.APPROVAL;&amp;D.APPROVAL&#160;%qp=Approved for play by [name(%1)] on [time()].;@lock&#160;%qp/D.APPROVAL
&amp;HOOK_APR #28=@unlock [setr(p,get(%0/OPENED_BY))]/D.APPROVAL;&amp;D.APPROVAL&#160;%qp=Approved for play by [name(%1)] on [time()].;@lock&#160;%qp/D.APPROVAL
&amp;HOOK_DNY #28=@dolist [lattr(setr(p,get(%0/OPENED_BY))/D.BG.*)]={@unlock&#160;%qp/##};@unlock&#160;%qp/D.APPROVAL;&amp;D.APPROVAL&#160;%qp
&amp;HOOK_DEL #28=@dolist [lattr(setr(p,get(%0/OPENED_BY))/D.BG.*)]={@unlock&#160;%qp/##};@unlock&#160;%qp/D.APPROVAL;&amp;D.APPROVAL&#160;%qp
+bucket/create JNOTE=Proposed Jnotes and Jnote inquiries.
@wait 3={&amp;ACCESS #44=[u(%va/FN_STAFFALL,%#)]}
@@
&amp;HOOK_COM #44=@unlock [setr(p,first(get(%0/OPENED_BY)))]/JNOTE-[setr(n,edit(get(%0/TITLE),%b,_))];&amp;JNOTE-%qn&#160;%qp=[replace(get(%qp/JNOTE-%qn),1,{Approved by [name(%1)] (%1), [time()]},|)];@lock&#160;%qp/JNOTE-%qn
&amp;HOOK_APR #44=@unlock [setr(p,first(get(%0/OPENED_BY)))]/JNOTE-[setr(n,edit(get(%0/TITLE),%b,_))];&amp;JNOTE-%qn&#160;%qp=[replace(get(%qp/JNOTE-%qn),1,{Approved by [name(%1)] (%1), [time()]},|)];@lock&#160;%qp/JNOTE-%qn
&amp;HOOK_DNY #44=@unlock [setr(p,first(get(%0/OPENED_BY)))]/JNOTE-[setr(n,edit(get(%0/TITLE),%b,_))];&amp;JNOTE-%qn&#160;%qp
&amp;HOOK_DEL #44=@unlock [setr(p,first(get(%0/OPENED_BY)))]/JNOTE-[setr(n,edit(get(%0/TITLE),%b,_))];&amp;JNOTE-%qn&#160;%qp
@dolist lnum(22,44)={@chown #{##}=#3;@set #{##}=!HALTED}
@set #22=INHERIT SAFE
@set #23=INHERIT SAFE
@set #24=SAFE
@set #25=INHERIT SAFE
@set #26=INHERIT
@set #28=INHERIT
@set #29=INHERIT SAFE
@set #30=INHERIT
@set #31=INHERIT SAFE
@set #32=INHERIT
@set #33=INHERIT
@set #34=INHERIT SAFE
@set #35=INHERIT
@set #36=INHERIT SAFE
@set #37=INHERIT SAFE
@set #38=INHERIT
@set #39=INHERIT
@set #40=INHERIT
@set #41=INHERIT
@set #42=INHERIT SAFE
@set #43=INHERIT SAFE
@set #44=INHERIT
think [ansi(hc,MUX Core:)] Jobs install cleanup complete. If you install future +jobs patches, do so with CodeWIZ.
@@
@@ #45: Room Parent
@@
think [ansi(hc,MUX Core:)] Setting up Room and Build Parents.
@create Room Parent=10
@Desc Room Parent=%r%r%r
@NameFormat Room Parent=[header(name(me)[if(or(controls(%#,me),orflags(%#,WwZ)),([num(me)][flags(me)]))])]
@ConFormat Room Parent=[subheader(Players)][iter(%#&#160;%0,switch(type(##),thing,setq(o,setunion(%qo,%i0)),player,%r%b[ljust(strtrunc(ansi(ifelse(hasflag(%i0,DARK),xh,h),name(%i0)),19),20)][ljust(strtrunc(get(%i0/SHORT-DESC),47),48)][ljust(singletime(idle(%i0))%b,5)]),,@@)][if(words(%qo),%r[subheader(Objects)]%r%b[iter(%qo,[ljust([name(%i0)][if(or(controls(%i0,%#),hasflag(%#,WIZARD)),(%i0[flags(%i0)]))],38)][if(and(not(mod(inum(),2)),not(eq(inum(),words(%qo)))),%r)])])][setq(f,setunion(%qf,if(t(lattr(me/VIEW-*)),views),|))][setq(f,setunion(%qf,if(hasattr(me,PLACESMAX),places),|))][setq(f,setunion(%qf,if(hasattr(me,D.META-LINKS),rooms),|))][if(isstaff(%#),setq(f,setunion(%qf,if(t(u(#6/FN.JNOTES)),jnotes),|)))][ifelse(words(lexits(me)),,%r[footer(edit(%qf,|,%b))])]
@ExitFormat Room Parent=[setq(f,setunion(%qf,if(t(lattr(me/VIEW-*)),views),|))][setq(f,setunion(%qf,if(hasattr(me,PLACESMAX),places),|))][setq(f,setunion(%qf,if(hasattr(me,D.META-LINKS),rooms),|,))][if(isstaff(%#),setq(f,setunion(%qf,if(t(u(#6/FN.JNOTES)),jnotes),|)))][setq(m,regraball(iter(lexits(me),if(strmatch(name(%i0),*&lt;M:*),%i0)),.+))][case(words(lexits(me)),0,footer(edit(%qf,|,%b)),[if(words(%qm),[subheader(Meta Rooms)]%r[columns(iter(%qm,name(%i0),,|),39,|)])][subheader(Exits)]%r[columns(iter(if(hasflag(%#,WIZARD),setdiff(lexits(me),%qm),setdiff(%0,%qm)),if(hasflag(%i0,DARK),%xh%xx*%xn)[name(%i0)],,|),39,|)][footer(edit(%qf,|,%b))])]
@DescFormat Room Parent=%0[localize(if(isdbref(setr(0,zone(me))),u(#6/FN.DESC,%#,%q0)))]
@set Room Parent=!HALTED INHERIT SAFE
@@
@@ #46: Business Build Parent
@@
@create Business Build Parent=10
&amp;CMD.ADDOWNER Business Build Parent=$+addowner *:@switch [isstaff(%#)][isdbref(setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=No such player:&#160;%0},11,{&amp;D.OWNERS me=[setunion(v(D.OWNERS),%q0)];@pemit&#160;%#=Done. [name(%q0)] added to the list of owners for [rest(name(me),:%b)].}
&amp;CMD.DELOWNER Business Build Parent=$+delowner *:@switch [isstaff(%#)][ismember(v(D.OWNERS),setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=That player is not currently an owner.},11,{&amp;D.OWNERS me=[setdiff(v(D.OWNERS),%q0)];@pemit&#160;%#=Done. [name(%q0)] removed from the list of owners for [rest(name(me),:%b)].}
&amp;CMD.ADDTENANT Business Build Parent=$+addtenant *:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][isdbref(setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=No such player:&#160;%0},11,{&amp;D.TENANTS me=[setunion(v(D.TENANTS),%q0)];@pemit&#160;%#=Done. [name(%q0)] added to the list of tenants for [rest(name(me),:%b)].}
&amp;CMD.DELTENANT Business Build Parent=$+deltenant *:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][ismember(v(D.TENANTS),setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=That player is not currently a tenant.},11,{&amp;D.TENANTS me=[setdiff(v(D.TENANTS),%q0)];@pemit&#160;%#=Done. [name(%q0)] removed from the list of tenants for [rest(name(me),:%b)].}
&amp;CMD.GIVEKEY Business Build Parent=$+givekey *:@switch [or(ismember(v(D.OWNERS,%#),%#),ismember(v(D.TENANTS),%#),isstaff(%#))][isdbref(setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=No such player:&#160;%0},11,{&amp;D.KEYLIST me=[setunion(v(D.KEYLIST),%q0)];@pemit&#160;%#=Done. [name(%q0)] added to the list of keyholders for [rest(name(me),:%b)].}
&amp;CMD.TAKEKEY Business Build Parent=$+takekey *:@switch [or(ismember(v(D.OWNERS,%#),%#),ismember(v(D.TENANTS),%#),isstaff(%#))][ismember(v(D.KEYLIST),setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=That player is not currently a keyholder.},11,{&amp;D.KEYLIST me=[setdiff(v(D.KEYLIST),%q0)];@pemit&#160;%#=Done. [name(%q0)] removed from the list of keyholders for [rest(name(me),:%b)].}
&amp;CMD.SETLOCK Business Build Parent=$+setlock *=*:@switch/first [setr(0,locate(%#,%0,e))]|[or(ismember(get(zone(%q0)/D.OWNERS),%#),isstaff(%#))][isdbref(zone(%q0))][ismember(owners tenants keys none,%1)]=*|0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},#-1|*,{@pemit&#160;%#=No such exit:&#160;%0},#-2|*,{@pemit&#160;%#=Too many matches. Please be more specific.},*|10*,{@pemit&#160;%#=That exit is not set up as part of a building project.},*|110,{@pemit&#160;%#=You may only set a lock to owners, tenants, keys, or none.},*|111,{&amp;D.LOCK-%q0 me=[ifelse(strmatch(%1,none),,lcstr(%1))];&amp;D.LOCK-[setr(1,regrab(iter(lexits(loc(%q0)),if(strmatch(where(%q0),loc(%i0)),%i0)),.+))] me=[ifelse(strmatch(%1,none),,lcstr(%1))];@if [strmatch(none,%1)]={@unlock&#160;%q0;@unlock&#160;%q1;&amp;LOCK&#160;%q0;&amp;LOCK&#160;%q1},{&amp;LOCK&#160;%q0=\[\u(\zone(me)/FN.CANLOCK,\%#,\num(me))\];&amp;LOCK&#160;%q1=\[\u(\zone(me)/FN.CANLOCK,\%#,\num(me))\];@lock&#160;%q0=LOCK/1;@lock&#160;%q1=LOCK/1;@fail&#160;%q0=You do not have a key.;@fail&#160;%q1=You do not have a key.};@pemit&#160;%#=Done. Lock type for [name(%q0)] and [name(%q1)] set to [lcstr(%1)].}
&amp;CMD.SETLOCK/ONLY Business Build Parent=$+setlock/only *=*:@switch/first [setr(0,locate(%#,%0,e))]|[or(ismember(get(zone(%q0)/D.OWNERS),%#),isstaff(%#))][isdbref(zone(%q0))][ismember(owners tenants keys none,%1)]=*|0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},#-1|*,{@pemit&#160;%#=No such exit:&#160;%0},#-2|*,{@pemit&#160;%#=Too many matches. Please be more specific.},*|10*,{@pemit&#160;%#=That exit is not set up as part of a building project.},*|110,{@pemit&#160;%#=You may only set a lock to owners, tenants, keys, or none.},*|111,{&amp;D.LOCK-%q0 me=[ifelse(strmatch(%1,none),,lcstr(%1))];@if [strmatch(none,%1)]={@unlock&#160;%q0;&amp;LOCK&#160;%q0},{&amp;LOCK&#160;%q0=\[\u(\zone(me)/FN.CANLOCK,\%#,\num(me))\];@lock&#160;%q0=LOCK/1;@fail&#160;%q0=You do not have a key.};@pemit&#160;%#=Done. Lock type for [name(%q0)] set to [lcstr(%1)]. Note that this does not set the lock type for the &quot;other side&quot; of the exit.}
&amp;CMD.BUILDHELP Business Build Parent=$+buildhelp:@switch [or(ismember(v(D.OWNERS),%#),ismember(v(D.TENANTS),%#),isstaff(%#))]=0,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},1,{@pemit&#160;%#=[header(Building Project Commands)]%r[rjust(+buildhelp,17)]:%b%bShows this dialog.%r[if(or(ismember(v(D.TENANTS),%#),isstaff(%#)),[subheader(Tenant Commands)]%r[rjust(+givekey *,17)]:%b%b[wrap(Gives a key to a player. This will allow them to open any locks in the project that are set to &quot;keys&quot;.,58,,,,20)]%r[rjust(+takekey *,17)]:%b%b[wrap(Takes a key away from a player.,58,,,,20)]%r[rjust(+keys,17)]:%b%bShows a list of all keyholders.%r)][if(or(ismember(v(D.OWNERS),%#),isstaff(%#)),[subheader(Owner Commands)]%r[rjust(+setlock *=*,17)]:%b%b[wrap(Sets the lock type of an exit. Options are owners\\\, tenants\\\, keys\\\, and none. Exits set &quot;none&quot; cannot be locked. Exits set 'keys' can be locked and unlocked by keyholders\\\, tenants\\\, and owners. Locks set 'tenants' can be locked and unlocked by tenants and owners. Locks set 'owners' can be locked and unlocked only by owners. In all cases\\\, anyone who can lock or unlock the exit will pass it automatically. They only need to unlock it to let through people who are not on the list. This command automatically sets the same lock type on the corresponding exit from the other side.,58,,,,20)]%r[rjust(+setlock/only *=*,17)]:%b%b[wrap(As +setlock\\\, but only for the target exit.,58,,,,20)]%r[rjust(+addtenant *,17)]:%b%b[wrap(Adds a player to the list of tenants.,58,,,,20)]%r[rjust(+deltenant *,17)]:%b%b[wrap(Removes a player from the list of tenants.,58,,,,20)]%r[rjust(+tenants,17)]:%b%bShows a list of all tenants.%r[rjust(+owners,17)]:%b%bShows a list of all owners.%r)][if(isstaff(%#),[subheader(Staff Commands)]%r[rjust(+addowner *,17)]:%b%b[wrap(Adds a player as an owner of a project.,58,,,,20)]%r[rjust(+delowner *,17)]:%b%b[wrap(Removes a player from the list of owners.,58,,,,20)]%r)][footer()]}
&amp;CMD.KEYS Business Build Parent=$+keys:@switch [or(ismember(v(D.OWNERS),%#),ismember(v(D.TENANTS),%#),isstaff(%#))][t(setr(0,v(D.KEYLIST)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=There are no keyholders for [rest(name(me),:%b)].},,11,{@pemit&#160;%#=The following people are keyholders for [rest(name(me),:%b)]: [itemize(iter(v(D.KEYLIST),name(%i0),,|),|)].}
&amp;CMD.TENANTS Business Build Parent=$+tenants:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][t(setr(0,v(D.TENANTS)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=There are no tenants for [rest(name(me),:%b)].},11,{@pemit&#160;%#=The following people are tenants of [rest(name(me),:%b)]: [itemize(iter(v(D.TENANTS),name(%i0),,|),|)].}
&amp;CMD.OWNERS Business Build Parent=$+owners:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][t(setr(0,v(D.OWNERS)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=There are no owners set for [rest(name(me),:%b)].},11,{@pemit&#160;%#=The following people are owners of [rest(name(me),:%b)]: [itemize(iter(v(D.OWNERS),name(%i0),,|),|)].}
&amp;FN.CANLOCK Business Build Parent=switch(v(D.LOCK-%1),owners,or(ismember(v(D.OWNERS),%0),isstaff(%0)),tenants,or(ismember(v(D.OWNERS),%0),ismember(v(D.TENANTS),%0),isstaff(%0)),keys,or(ismember(v(D.OWNERS),%0),ismember(v(D.TENANTS),%0),ismember(v(D.KEYLIST),%0),isstaff(%0)),0)
&amp;FN.DESC Business Build Parent=if(or(ismember(v(D.OWNERS),%0),ismember(v(D.TENANTS),%0),isstaff(%0)),%r%r[center(See +buildhelp for Building Project commands,78)])
@chown Business Build Parent=#3
@set Business Build Parent=!HALTED INHERIT SAFE
@@
@@ #47: Residential Build Parent
@@
@create Residential Build Parent=10
&amp;CMD.ADDOWNER Residential Build Parent=$+addowner *:@switch [isstaff(%#)][isdbref(setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=No such player:&#160;%0},11,{&amp;D.OWNERS me=[setunion(v(D.OWNERS),%q0)];@pemit&#160;%#=Done. [name(%q0)] added to the list of owners for [rest(name(me),:%b)].}
&amp;CMD.DELOWNER Residential Build Parent=$+delowner *:@switch [isstaff(%#)][ismember(v(D.OWNERS),setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=That player is not currently an owner.},11,{&amp;D.OWNERS me=[setdiff(v(D.OWNERS),%q0)];@pemit&#160;%#=Done. [name(%q0)] removed from the list of owners for [rest(name(me),:%b)].}
&amp;CMD.ADDTENANT Residential Build Parent=$+addtenant *:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][isdbref(setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=No such player:&#160;%0},11,{&amp;D.TENANTS me=[setunion(v(D.TENANTS),%q0)];@pemit&#160;%#=Done. [name(%q0)] added to the list of tenants for [rest(name(me),:%b)].}
&amp;CMD.DELTENANT Residential Build Parent=$+deltenant *:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][ismember(v(D.TENANTS),setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=That player is not currently a tenant.},11,{&amp;D.TENANTS me=[setdiff(v(D.TENANTS),%q0)];@pemit&#160;%#=Done. [name(%q0)] removed from the list of tenants for [rest(name(me),:%b)].}
&amp;CMD.GIVEKEY Residential Build Parent=$+givekey *:@switch [or(ismember(v(D.OWNERS,%#),%#),ismember(v(D.TENANTS),%#),isstaff(%#))][isdbref(setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=No such player:&#160;%0},11,{&amp;D.KEYLIST me=[setunion(v(D.KEYLIST),%q0)];@pemit&#160;%#=Done. [name(%q0)] added to the list of keyholders for [rest(name(me),:%b)].}
&amp;CMD.TAKEKEY Residential Build Parent=$+takekey *:@switch [or(ismember(v(D.OWNERS,%#),%#),ismember(v(D.TENANTS),%#),isstaff(%#))][ismember(v(D.KEYLIST),setr(0,pmatch(%0)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=That player is not currently a keyholder.},11,{&amp;D.KEYLIST me=[setdiff(v(D.KEYLIST),%q0)];@pemit&#160;%#=Done. [name(%q0)] removed from the list of keyholders for [rest(name(me),:%b)].}
&amp;CMD.SETLOCK Residential Build Parent=$+setlock *=*:@switch/first [setr(0,locate(%#,%0,e))]|[or(ismember(get(zone(%q0)/D.OWNERS),%#),isstaff(%#))][isdbref(zone(%q0))][ismember(owners tenants keys none,%1)]=*|0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},#-1|*,{@pemit&#160;%#=No such exit:&#160;%0},#-2|*,{@pemit&#160;%#=Too many matches. Please be more specific.},*|10*,{@pemit&#160;%#=That exit is not set up as part of a building project.},*|110,{@pemit&#160;%#=You may only set a lock to owners, tenants, keys, or none.},*|111,{&amp;D.LOCK-%q0 me=[ifelse(strmatch(%1,none),,lcstr(%1))];&amp;D.LOCK-[setr(1,regrab(iter(lexits(loc(%q0)),if(strmatch(where(%q0),loc(%i0)),%i0)),.+))] me=[ifelse(strmatch(%1,none),,lcstr(%1))];@if [strmatch(none,%1)]={@unlock&#160;%q0;@unlock&#160;%q1;&amp;LOCK&#160;%q0;&amp;LOCK&#160;%q1},{&amp;LOCK&#160;%q0=\[\u(\zone(me)/FN.CANLOCK,\%#,\num(me))\];&amp;LOCK&#160;%q1=\[\u(\zone(me)/FN.CANLOCK,\%#,\num(me))\];@lock&#160;%q0=LOCK/1;@lock&#160;%q1=LOCK/1;@fail&#160;%q0=You do not have a key.;@fail&#160;%q1=You do not have a key.};@pemit&#160;%#=Done. Lock type for [name(%q0)] and [name(%q1)] set to [lcstr(%1)].}
&amp;CMD.SETLOCK/ONLY Residential Build Parent=$+setlock/only *=*:@switch/first [setr(0,locate(%#,%0,e))]|[or(ismember(get(zone(%q0)/D.OWNERS),%#),isstaff(%#))][isdbref(zone(%q0))][ismember(owners tenants keys none,%1)]=*|0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},#-1|*,{@pemit&#160;%#=No such exit:&#160;%0},#-2|*,{@pemit&#160;%#=Too many matches. Please be more specific.},*|10*,{@pemit&#160;%#=That exit is not set up as part of a building project.},*|110,{@pemit&#160;%#=You may only set a lock to owners, tenants, keys, or none.},*|111,{&amp;D.LOCK-%q0 me=[ifelse(strmatch(%1,none),,lcstr(%1))];@if [strmatch(none,%1)]={@unlock&#160;%q0;&amp;LOCK&#160;%q0},{&amp;LOCK&#160;%q0=\[\u(\zone(me)/FN.CANLOCK,\%#,\num(me))\];@lock&#160;%q0=LOCK/1;@fail&#160;%q0=You do not have a key.};@pemit&#160;%#=Done. Lock type for [name(%q0)] set to [lcstr(%1)]. Note that this does not set the lock type for the &quot;other side&quot; of the exit.}
&amp;CMD.BUILDHELP Residential Build Parent=$+buildhelp:@switch [or(ismember(v(D.OWNERS),%#),ismember(v(D.TENANTS),%#),isstaff(%#))]=0,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},1,{@pemit&#160;%#=[header(Building Project Commands)]%r[rjust(+buildhelp,17)]:%b%bShows this dialog.%r[if(or(ismember(v(D.TENANTS),%#),isstaff(%#)),[subheader(Tenant Commands)]%r[rjust(+givekey *,17)]:%b%b[wrap(Gives a key to a player. This will allow them to open any locks in the project that are set to &quot;keys&quot;.,58,,,,20)]%r[rjust(+takekey *,17)]:%b%b[wrap(Takes a key away from a player.,58,,,,20)]%r[rjust(+keys,17)]:%b%bShows a list of all keyholders.%r)][if(or(ismember(v(D.OWNERS),%#),isstaff(%#)),[subheader(Owner Commands)]%r[rjust(+setlock *=*,17)]:%b%b[wrap(Sets the lock type of an exit. Options are owners\\\, tenants\\\, keys\\\, and none. Exits set &quot;none&quot; cannot be locked. Exits set 'keys' can be locked and unlocked by keyholders\\\, tenants\\\, and owners. Locks set 'tenants' can be locked and unlocked by tenants and owners. Locks set 'owners' can be locked and unlocked only by owners. In all cases\\\, anyone who can lock or unlock the exit will pass it automatically. They only need to unlock it to let through people who are not on the list. This command automatically sets the same lock type on the corresponding exit from the other side.,58,,,,20)]%r[rjust(+setlock/only *=*,17)]:%b%b[wrap(As +setlock\\\, but only for the target exit.,58,,,,20)]%r[rjust(+addtenant *,17)]:%b%b[wrap(Adds a player to the list of tenants.,58,,,,20)]%r[rjust(+deltenant *,17)]:%b%b[wrap(Removes a player from the list of tenants.,58,,,,20)]%r[rjust(+tenants,17)]:%b%bShows a list of all tenants.%r[rjust(+owners,17)]:%b%bShows a list of all owners.%r)][if(isstaff(%#),[subheader(Staff Commands)]%r[rjust(+addowner *,17)]:%b%b[wrap(Adds a player as an owner of a project.,58,,,,20)]%r[rjust(+delowner *,17)]:%b%b[wrap(Removes a player from the list of owners.,58,,,,20)]%r)][footer()]}
&amp;CMD.KEYS Residential Build Parent=$+keys:@switch [or(ismember(v(D.OWNERS),%#),ismember(v(D.TENANTS),%#),isstaff(%#))][t(setr(0,v(D.KEYLIST)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=There are no keyholders for [rest(name(me),:%b)].},,11,{@pemit&#160;%#=The following people are keyholders for [rest(name(me),:%b)]: [itemize(iter(v(D.KEYLIST),name(%i0),,|),|)].}
&amp;CMD.TENANTS Residential Build Parent=$+tenants:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][t(setr(0,v(D.TENANTS)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=There are no tenants for [rest(name(me),:%b)].},11,{@pemit&#160;%#=The following people are tenants of [rest(name(me),:%b)]: [itemize(iter(v(D.TENANTS),name(%i0),,|),|)].}
&amp;CMD.OWNERS Residential Build Parent=$+owners:@switch [or(ismember(v(D.OWNERS),%#),isstaff(%#))][t(setr(0,v(D.OWNERS)))]=0*,{@pemit&#160;%#=Huh?%b%b(Type &quot;help&quot; for help.)},10,{@pemit&#160;%#=There are no owners set for [rest(name(me),:%b)].},11,{@pemit&#160;%#=The following people are owners of [rest(name(me),:%b)]: [itemize(iter(v(D.OWNERS),name(%i0),,|),|)].}
&amp;FN.DESC Residential Build Parent=if(or(ismember(v(D.OWNERS),%0),ismember(v(D.TENANTS),%0),isstaff(%0)),%r%r[center(See +buildhelp for Building Project commands,78)])
&amp;FN.CANLOCK Residential Build Parent=switch(v(D.LOCK-%1),owners,or(ismember(v(D.OWNERS),%0),isstaff(%0)),tenants,or(ismember(v(D.OWNERS),%0),ismember(v(D.TENANTS),%0),isstaff(%0)),keys,or(ismember(v(D.OWNERS),%0),ismember(v(D.TENANTS),%0),ismember(v(D.KEYLIST),%0),isstaff(%0)),0)
@chown Residential Build Parent=#3
@set Residential Build Parent=!HALTED INHERIT SAFE
@@
@@ #48: &lt;OS&gt; Object Storage
@@
@create &lt;OS&gt; Object Storage=10
@chown &lt;OS&gt; Object Storage=#3
@set &lt;OS&gt; Object Storage=!HALTED SAFE
@@
@@ #49: Public Channel
@@
think [ansi(hc,MUX Core:)] Creating channels...
@ccreate Public
@create Channel Object: Public
@chown Channel Object: Public=#3
@set Channel Object: Public=!HALTED SAFE
@cchown Public=#3
@cset/object Public=#49
@cset/log Public=200
@cset/timestamp_logs Public=1
@cset/public Public
@@
@@ #50: Guests Channel
@@
@ccreate Guests
@create Channel Object: Guests
@chown Channel Object: Guests=#3
@set Channel Object: Guests=!HALTED SAFE
@cchown Guests=#3
@cset/object Guests=#50
@cset/log Guests=200
@cset/timestamp_logs Guests=1
@cset/public Guests
@@
@@ #51: Scan Channel
@@
@ccreate Scan
@create Channel Object: Scan
@chown Channel Object: Scan=#3
@set Channel Object: Scan=!HALTED SAFE
@cchown Scan=#3
@cset/object Scan=#51
@cset/log Scan=200
@cset/timestamp_logs Scan=1
@cpflags Scan=!join
@coflags Scan=!join
&amp;JOIN #51=isstaff(%#)
@lock #51=JOIN/1
@fo #3={addcom scan=Scan;addcom pub=Public;addcom g=Guests}
@fo #4={addcom scan=Scan;addcom pub=Public;addcom g=Guests}
@parent #0=#45
@parent #2=#45
@tel #0
@@
@@ #52-#54: Staff Nexus
@@
think [ansi(hc,MUX Core:)] @Restarting and setting up basic rooms.
@restart
@dig Staff Nexus=Staff Nexus &lt;SN&gt;;staff;sn,Limbo &lt;O&gt;;limbo;o;back
&amp;ISSTAFF #53=isstaff(%#)
@lock #53=isstaff/1
@fail #53=You must be Staff to enter the Staff Nexus.
@dolist #52 #53 #54={@chown ##=#4;@set ##=!HALTED}
@@
@@ #55-#57: Building Nexus
@dig Building Nexus=Building Nexus &lt;BN&gt;;building;bn,Limbo &lt;O&gt;;limbo;o;back
@set #55=LINK_OK OPEN_OK
&amp;LINK #55=or(isstaff(%#),haspower(%#,BUILDER))
&amp;OPEN #55=or(isstaff(%#),and(haspower(%#,BUILDER),eq(ladd(iter(lexits(#57),if(strmatch(%#,owner(%i0)),1))),0)))
@lock/linklock #55=LINK/1
@lock/openlock #55=OPEN/1
sn
@dolist #55 #56 #57={@chown ##=#4;@set ##=!HALTED}
@@
@@ #58-#60: Auxiliary Room
@@
@dig Auxiliary Room=Auxiliary Room &lt;AUX&gt;;auxiliary;room;aux,Out &lt;O&gt;;out;o;back
@dolist #58 #59 #60={@chown ##=#4;@set ##=!HALTED}
@@
@@ Final Setup!
@@
think [ansi(hc,MUX Core:)] Almost done. Performing final housecleaning.
@tel #51=#48
@tel #50=#48
@tel #49=#48
@tel #47=#48
@tel #46=#48
@tel #45=#48
@tel #48=#58
@tel #5=#58
@tel #0
@attribute/access JOBSB=WIZARD
@attribute/access JOBSH=HIDDEN
@fo me=@pcreate Guest Parent=[scramble(sha1(secs(,6)))]
@restart
think [ansi(hc,MUX Core:)] MUX Core installation complete. Initial passwords for #1, CodeWIZ, and BuildWIZ are set to 'potrzebie'. You should use the @newpassword command to change them at this time.
</pre>

<!-- 
NewPP limit report
CPU time usage: 0.085 seconds
Real time usage: 0.087 seconds
Preprocessor visited node count: 4/1000000
Preprocessor generated node count: 24/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key homesitewiki-mw_:pcache:idhash:225-0!*!*!*!*!*!* and timestamp 20150118060356
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://www.gwen-morse.com/wiki/index.php?title=Local_MUXCore_Archive&amp;oldid=1297">http://www.gwen-morse.com/wiki/index.php?title=Local_MUXCore_Archive&amp;oldid=1297</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-login"><a href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Local+MUXCore+Archive&amp;returntoquery=oldid%3D1297" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/index.php/Local_MUXCore_Archive"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/wiki/index.php?title=Talk:Local_MUXCore_Archive&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/wiki/index.php/Local_MUXCore_Archive" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="/wiki/index.php?title=Local_MUXCore_Archive&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/wiki/index.php?title=Local_MUXCore_Archive&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="/wiki/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Search" title="Search Gwen Morse's Wiki [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="/wiki/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(/home/public/wiki/guestbook.jpg);" href="/wiki/index.php/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="/wiki/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-MUSHing"><a href="/wiki/index.php/MUSHing">MUSHing</a></li>
			<li id="n-Softcode-Archive"><a href="/wiki/index.php/Gwen%27s_MUSHcode_Archive">Softcode Archive</a></li>
			<li id="n-Tinyfugue-Client"><a href="/wiki/index.php/Tinyfugue">Tinyfugue Client</a></li>
			<li id="n-Tabletop-Roleplay"><a href="/wiki/index.php/Roleplay">Tabletop Roleplay</a></li>
			<li id="n-Sims"><a href="/wiki/index.php/Sims">Sims</a></li>
			<li id="n-Linux"><a href="/wiki/index.php/Linux">Linux</a></li>
			<li id="n-Health-and-Beauty"><a href="/wiki/index.php/HABA">Health and Beauty</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Wiki_Help' aria-labelledby='p-Wiki_Help-label'>
	<h3 id='p-Wiki_Help-label'>Wiki Help</h3>
	<div class="body">
		<ul>
			<li id="n-portal"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-currentevents"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:Current_events" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" rel="nofollow" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/wiki/index.php/Special:WhatLinksHere/Local_MUXCore_Archive" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/wiki/index.php/Special:RecentChangesLinked/Local_MUXCore_Archive" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/wiki/index.php?title=Local_MUXCore_Archive&amp;oldid=1297&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/wiki/index.php?title=Local_MUXCore_Archive&amp;oldid=1297" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/wiki/index.php?title=Local_MUXCore_Archive&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 4 April 2012, at 06:02.</li>
											<li id="footer-info-viewcount">This page has been accessed 1,486 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:Privacy_policy" title="Gwen Morse's Wiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:About" title="Gwen Morse's Wiki:About">About Gwen Morse&#039;s Wiki</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:General_disclaimer" title="Gwen Morse's Wiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.556 secs. -->
	</body>
</html>
