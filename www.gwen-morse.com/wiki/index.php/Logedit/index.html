<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Logedit - Gwen Morse's Wiki</title>
<meta name="generator" content="MediaWiki 1.22.8" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/wiki/opensearch_desc.php" title="Gwen Morse's Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.gwen-morse.com/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Gwen Morse's Wiki Atom feed" href="/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://www.gwen-morse.com/wiki/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: homesitewiki-mw_:resourceloader:filter:minify-css:7:caed6998fab899483c805c3e2c432ff5 */</style>

<script src="http://www.gwen-morse.com/wiki/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Logedit","wgTitle":"Logedit","wgCurRevisionId":2401,"wgRevisionId":2401,"wgArticleId":623,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Logedit","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: homesitewiki-mw_:resourceloader:filter:minify-js:7:5a69c7e0fa6557851b6dea8a62efaffb */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Logedit skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Logedit</span></h1>
			<div id="bodyContent">
								<div id="siteSub">From Gwen Morse&#039;s Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><pre>
#!/usr/bin/perl
'di';
'ig00';
#
# $Header: /home/alansz/src/logedit/logedit-dev/RCS/logedit.dist,v 1.13 1995/04/24 01:00:40 alansz Exp alansz $
#
# Perl version of logedit
# #!/cygdrive/c/Perl5/bin/
# This perl script is also its own manual page. Make a link from the
# script in the binary directory to &quot;logedit.1&quot; in the man1 directory
# to install the manpage.
#
#
# logedit - automatic beautifying of MU* logs
# Copyright (C) 1993, 1994 Alan Schwartz &lt;alansz@cogsci.berkeley.edu&gt;
#
#    This program is free software; you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation; either version 2 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program; if not, write to the Free Software
#    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#

#$unix = 1;

$version = &quot;2.6.9pl&quot;;
# $conf_file = $ENV{&quot;HOME&quot;}.&quot;/.logeditrc&quot;;
$conf_file = &quot;.logeditrc&quot;;
$LINE =
&quot;-----------------------------------------------------------------------\n&quot;;
chop($maildelim=$LINE);
$doing_end{&quot;tiny&quot;} = 'Players logged in.$';
$doing_end{&quot;penn&quot;} = 'There.*player.*connected.$';
$doing_start = 'Player Name.*On For';
$say{&quot;tiny&quot;} = '^You say ';
$say{&quot;penn&quot;} = '^You say, ';

&amp;syntax, exit 0 if ($#ARGV == -1 &amp;&amp; -t STDIN);
&amp;myGetopts('ab~cdef:ghijk:lmno~pqr:stuvwx:y:zABCDEF:GHIJKLMNOPQRSTUVW~XYZ12');
undef $opt_2 if $opt_1;
$mushtype  = &quot;tiny&quot;;
$conf_file = shift(@opt_F) if @opt_F;
$opt_b[0] = $conf_file if $opt_b;
$opt_o[0] = &quot;-&quot; if $opt_o;

print &quot;Editing a ${mushtype}mush log, using $conf_file for instructions\n&quot; if $opt_v;
&amp;process_config_file($conf_file) unless $opt_n;

&amp;syntax, exit 0 if ($opt_h || $opt_H);

print &quot;Building new config file: $opt_b[0]\n&quot; if (@opt_b &amp;&amp; $opt_v);
&amp;make_config($opt_b[0]) if @opt_b;

if ($opt_q) {
  $opt_p = 1;
  $opt_w = 1;
  $opt_d = 1;
  $opt_a = 1;
  $opt_l = 1;
  $opt_c = 1;
  $opt_T = 1;
}

&amp;set_lists;
&amp;set_files;

if (($opt_s || $opt_q || $opt_t) &amp;&amp; defined($PRE)) {
  print &quot;Prescanning log to build up name information\n&quot; if $opt_v;
  &amp;prescan;
}
@opt_W = split(&quot;,&quot;,$opt_W[0]) if @opt_W;

# ***Changed Wrapping Manually***
@opt_W=(80,0,0);

print &quot;Producing log header\n&quot; if $opt_v;
&amp;header;
print &quot;Editing log\n&quot; if $opt_v;
&amp;logedit;
print &quot;Calculating statistics\n&quot; if ($opt_s &amp;&amp; $opt_v);
&amp;footer if $opt_s;
exit 0;

sub strip { @strips =(@strips,@_); }

# Go through all the options and set up the @keeps and @strips
# lists.
sub set_lists {
        &amp;strip(&quot;^MAIL:&quot;);
        &amp;strip(&quot;^GAME:&quot;);
        &amp;strip(&quot;^DESC:&quot;);
        &amp;strip(&quot;Set.&quot;);
        &amp;strip(&quot;^There is no mail in folder 'main'&quot;);
        &amp;strip(&quot;^You may now enter the body of the message.&quot;);
        &amp;strip(&quot;^Blabberings spewed.&quot;);
        &amp;strip(&quot;^You toss up the mail and hope it gets there.&quot;);
        &amp;strip(&quot;has .*connected.\$&quot;);
        &amp;strip('^Huh\? \(Type .?help.? for help');
        &amp;strip(&quot;(Flag|Doing|-)+ [Ss]et.\$&quot;);
        &amp;strip(&quot;^Admin: &quot;);
        &amp;strip(&quot;^Broadcast: &quot;);
        &amp;strip(&quot;^Announcement: &quot;);
        &amp;strip(&quot;^Sorry you've voted for &quot;);
        &amp;strip(&quot;^You spend a vote on &quot;);
        &amp;strip(&quot;^You've just been voted for!&quot;);
        &amp;strip(&quot;^&lt;Watch&gt; &quot;);
        &amp;strip(&quot; has left.\$&quot;);
        &amp;strip(&quot; has arrived.\$&quot;);
        &amp;strip(&quot; goes home.\$&quot;);
        &amp;strip(&quot; just +fingered you.\$&quot;);
        $opt_c &amp;&amp; &amp;strip(&quot;^&lt;.*&gt; &quot;);
        $opt_p &amp;&amp; &amp;strip(&quot;^From afar,&quot;);
        $opt_p &amp;&amp; &amp;strip(&quot;pages(,|:) &quot;);
        $opt_p &amp;&amp; &amp;strip(&quot;^You paged&quot;);
        $opt_p &amp;&amp; &amp;strip(&quot;^Long distance to &quot;);
        &amp;strip(@opt_r);
        $opt_w &amp;&amp; &amp;strip(&quot;whispers(,|:) &quot;);
        $opt_w &amp;&amp; &amp;strip(&quot;^You whisper:? &quot;);
        $opt_w &amp;&amp; &amp;strip(&quot;^You sense:? &quot;);
        $opt_w &amp;&amp; &amp;strip(&quot;senses:&quot;);
        grep(s/^/^/,@opt_x);
        &amp;strip(@opt_x);
        $opt_C &amp;&amp; &amp;strip('^%');
        $opt_R &amp;&amp; &amp;strip('^(:|&quot;)');
        $opt_N &amp;&amp; &amp;strip('^\[.*\] ');
        $opt_P &amp;&amp; &amp;strip(&quot;^.*&gt; &quot;);
        $opt_T &amp;&amp; &amp;strip(&quot;^\[\d+:\d+\] \w+ message sent to&quot;);
        $opt_T &amp;&amp; &amp;strip(&quot;^(Idle|Haven|Away) message from&quot;);
        @keeps = @opt_k;
        @keep_worlds = (@keep_worlds,grep(/^[^-!]/, @opt_f));
        @strip_worlds = (@strip_worlds,grep(s/^[-!](.*)/$1/, @opt_f));
}

# Handle the config file
sub process_config_file {
        local($config_file) = shift(@_);
        unless (-r $config_file) {
          warn &quot;Unable to open $config_file, continuing.\n&quot;;
          return;
        }
        die &quot;Error opening $config_file\n&quot; unless open(CONF,$config_file);
        $_ = &lt;CONF&gt;;
        if (/logedit ([\.\d]+)/i) {
          if ($1 &lt; 2.6) {
            &amp;read_old_config;
          } else {
            &amp;read_new_config;
          }
        } else {
          &amp;read_old_config;
        }
}

# Open up the input and output files
sub set_files {
  # Input: via command line, or stdin
  if (@ARGV) {
    @ARGV = ($ARGV[0]);
    open(PRE,&quot;$ARGV[0]&quot;) || warn &quot;Unable to prescan input\n&quot;;
    print &quot;filename: $ARGV[0] \n&quot;;
    $infilename = $ARGV[0];
    $PRE = 1;
  } else {
    $infilename = &quot;stdin&quot;;
    @ARGV = ();
  }
  if (@opt_o) {
    if ($opt_o[0] eq &quot;-&quot;) {
      open(OUT,&quot;&gt;&amp;STDOUT&quot;) || die &quot;Can't dup stdout!\n&quot;;
      $outfilename = &quot;stdout&quot;;
    } else {
      open(OUT,&quot;&gt;$opt_o[0]&quot;) || die &quot;Unable to open $opt_o[0] for output\n&quot;;
      $outfilename = $opt_o[0];
    }
  } elsif (@ARGV) {
    local($out) = $ARGV[0] . &quot;.log&quot;;
    open(OUT,&quot;&gt;$out&quot;) || die &quot;Unable to open $out for output\n&quot;;
    $outfilename = $out;
  } else {
    open(OUT,&quot;&gt;&amp;STDOUT&quot;) || die &quot;Can't dup stdout!\n&quot;;
    $outfilename = &quot;stdout&quot;;
  }
}

# Handle the header
sub header {
  $OLD = select OUT;
  print &quot;Log edited with Logedit $version on &quot;, `date`, &quot;\n&quot;;
  print &quot;Using configuration file $conf_file\n&quot; unless $opt_n;
  print &quot;Editing out:&quot;;
  # Here we go
  print &quot; \@admin&quot; if $opt_a;
  print &quot; \@chat&quot; if $opt_c;
  print &quot; DOING/WHO&quot; if $opt_d;
  print &quot; arrive/left&quot; if $opt_l;
  print &quot; \@mail&quot; if $opt_m;
  print &quot; pages&quot; if $opt_p;
  print &quot; roomdescs&quot; if $opt_t;
  print &quot; whispers&quot; if $opt_w;
  print &quot; ANSI&quot; if $opt_A;
  print &quot; tf-messages&quot; if $opt_C;
  print &quot; NOSPOOF&quot; if $opt_N;
  print &quot; O-spam&quot; if $opt_O;
  print &quot; Puppets&quot; if $opt_P;
  print &quot; Raw-telnet&quot; if $opt_R;
  print &quot; Timestamps&quot; if $opt_T;
  print &quot;\n&quot;;
  print &quot;Regexp stripping: &quot;, join(&quot;, &quot;,@opt_r), &quot;\n&quot; if @opt_r;
  print &quot;Excluding players: &quot;, join(&quot; &quot;,@excludes), &quot;\n&quot; if @excludes;
  print &quot;Keeping in: &quot;, join(&quot; &quot;, @keeps), &quot;\n&quot; if @keeps;
  print &quot;Using only these tf-worlds: &quot;, join(&quot; &quot;,@keep_worlds), &quot;\n&quot; if @keep_worlds;
  print &quot;Ignoring these tf-worlds: &quot;, join(&quot; &quot;,@strip_worlds), &quot;\n&quot; if @strip_worlds;
  print &quot;Logged by $opt_y[0]\n&quot; if @opt_y;
  print &quot;Quickstrip mode\n&quot; if $opt_q;
  print &quot;Word-wrapping at &quot;,join(&quot;, &quot;,@opt_W),&quot;\n&quot; if @opt_W;
  print &quot;Statistics at end of log\n&quot; if $opt_s;
  print $LINE;
  select($OLD);
}

# Prescan the input in order to determine player/puppet names!
# What's a player/puppet?
# * Anybody who says anything
# * Anybody who does certain actions
# * Anybody who connects/disconnects/leaves/arrives
# * Anybody who appears on a WHO list
# * Anybody with (#*P*) or (#*p*) after their name
# * Beware of ANSI!
sub prescan {
  local(@actions) = ('^(\S+) smile', '^(\S+) frown', '^(\S+) chuckle',
                     '^(\S+) rotf', '^(\S+) grin', '^(\S+) wave',
                     '^(\S+) laugh', '^(\S+) nod', '^(\S+) giggle');
  local($actprog);
  $actprog = &lt;&lt;EOP;
ACTLOOP: {
EOP
  for $act (@actions) {
    $actprog .= &lt;&lt;EOP;
        if (/$act/) {
          last ACTLOOP if \$allnames{\$1};
          \@player_names = \&amp;setpush(\$1,\@player_names);
EOP
    $actprog .= &lt;&lt;EOP if $opt_v;
          print &quot;'\$1' did a player-like action, so let's say it's a player\n&quot;;
EOP
    $actprog .= &quot;last ACTLOOP; } &quot;;
  }
  $actprog .= &quot;}&quot;;
  local($indoing);
  print &quot;Prescanning the log to build a name list\n&quot; if $opt_v;
  @player_names = &amp;setpush(&quot;You&quot;,@player_names);
  @player_names = &amp;setpush($opt_y[0],@player_names) if @opt_y;
  while (&lt;PRE&gt;) {
      $origlines++;
      s/\033\[[\d;]*[A-Za-z]//go;  # Strip ansi codes, I hope
      s/^GAME:\s*//o;
      s/^Announcement:\s*//o;
      s/^Broadcast:\s*//o;
      s/^Admin:\s*//o unless $opt_2;
      s/^&lt;.*&gt;\s*//o;
      s/^Suspect\s*//o;
      if (/^(\w+)&gt;/) {
        # It's a puppet
        next if $allnames{$1};
        print &quot;'$1' is likely to be a puppet\n&quot; if $opt_v;
        @puppet_names = &amp;setpush($1,@puppet_names);
        next;
      }
      # Deal with WHO/DOING
      if (/$doing_end{$mushtype}/o) {
        undef $indoing;
        next;
      }
      if (/$doing_start/o) {
        $indoing = 1;
        next;
      }
      if ($indoing) {
        # First word is a name
        next if $allnames{&amp;firstword($_)};
        print &quot;'&quot;, &amp;firstword($_), &quot;' was in a WHO, therefore a player\n&quot; if $opt_v;
        @player_names = &amp;setpush(&amp;firstword($_),@player_names);
        next;
      }
      if (/(.*) says,? &quot;.*&quot;/o) {
        next if $allnames{$1};
        if ($1 =~ / /) {
          # Two-word name - must be a puppet, eh?
          print &quot;'$1' spoke, but players have 1-word names. A puppet.\n&quot; if $opt_v;
          @puppet_names = &amp;setpush($1,@puppet_names);
        } else {
          print &quot;'$1' spoke, probably a player.\n&quot; if $opt_v;
          @player_names = &amp;setpush($1,@player_names);
        }
        next;
      }
      if (/(.*) has (left|arrived)\./o) {
        next if $allnames{$1};
        if ($1 =~ / /) {
          # Two-word name - must be a puppet, eh?
          print &quot;'$1' moved, but players have 1-word names. A puppet.\n&quot; if $opt_v;
          @puppet_names = &amp;setpush($1,@puppet_names);
        } else {
          print &quot;'$1' moved, probably a player.\n&quot; if $opt_v;
          @player_names = &amp;setpush($1,@player_names);
        }
        next;
      }
      if (/(.*) goes home\./o) {
        next if $allnames{$1};
        if ($1 =~ / /) {
          # Two-word name - must be a puppet, eh?
          print &quot;'$1' went home, but players have 1-word names. A puppet.\n&quot; if $opt_v;
          @puppet_names = &amp;setpush($1,@puppet_names);
        } else {
          print &quot;'$1' went home, probably a player.\n&quot; if $opt_v;
          @player_names = &amp;setpush($1,@player_names);
        }
        next;
      }
      if (/(.*) has .*connected\./o) {
        next if $allnames{$1};
        print &quot;'$1' connected or disconnected - that's a player.\n&quot; if $opt_v;
        @player_names = &amp;setpush($1,@player_names);
        next;
      }
      if (/(\S+)\(#\d+\w*P\w*\)/o) {
        next if $allnames{$1};
        print &quot;'$1' has a P flag, and is therefore a player.\n&quot; if $opt_v;
        @player_names = &amp;setpush($1,@player_names);
        next;
      }
      if (/(\S+)\(#\d+\w*p\w*\)/o) {
        next if $allnames{$1};
        print &quot;'$1' has a p flag, and is therefore a puppet.\n&quot; if $opt_v;
        @puppet_names = &amp;setpush($1,@puppet_names);
        next;
      }
      # Handle actions
      eval $actprog;
      die $@ if $@;
  }
}

sub firstword {
  local(@l) = split(&quot; &quot;,$_[0]);
  return $l[0];
}

# push onto a list, but don't duplicate!
sub setpush {
  $allnames{$_[0]} = &quot;0 but true&quot;;
  @_;
}

# Handle the footer

# The real work
# A loop over these steps:
# 1. If we are forced to keep the line, keep it and goto 3.
# 2. If we are forced to strip the line, strip and get next line
# 3. If we've still got the line, process it and print it
sub logedit {
  local($prog,$inlog,$indoing);
  local($keepit,$keepprog,$stripprog,$goodname,$expr,$name);

 # set up loop, and handle #log's
 $prog = &lt;&lt;EOP;
 \$nextline = &lt;&gt;;
LOOP:
  while (\$nextline) {
      (\$lastline, \$_) = (\$_, \$nextline);
      \$nextline = &lt;&gt;;
      next LOOP if /^\s*\$/; # ditch blank lines here
      \$inlog =&#160;!\$inlog, next LOOP if /^#log/;
      next LOOP if \$inlog;
      \$alreadyedited = 1, next LOOP if /^Log edited with Logedit/;
      \$alreadyedited = 0, next LOOP if (\$alreadyedited &amp;&amp;
                        /^----------------------------/);
      next LOOP if \$alreadyedited;
EOP

 # Worlds
      if (@opt_f) {
        $prog .= &lt;&lt;EOP;
          if (/^---- World (.*) ----/o) {
EOP
            $prog .= &quot;\$inbadworld = 0;&quot; if @strip_worlds;
        foreach $world (@strip_worlds) {
          $prog .=&lt;&lt;EOP;
            \$inbadworld = 1, next LOOP if \$1 eq $world;
EOP
        }
        $prog .=&quot;\$inbadworld = 1;&quot; if @keep_worlds;
        foreach $world (@keep_worlds) {
          $prog .=&lt;&lt;EOP;
            \$inbadworld = 0 if \$1 eq $world;
EOP
        }
        $prog .= &lt;&lt;EOP;
        }
        next LOOP if \$inbadworld;
EOP
      }

 # DOING/WHO
      if ($opt_d) {
  $prog .= &lt;&lt;EOP;
        \$indoing=0, next LOOP if /$doing_end{$mushtype}/o;
        \$indoing=1 if /$doing_start/o;
        next LOOP if \$indoing;
EOP
      }

  # @mail
     if ($opt_m) {
  $prog .= &lt;&lt;EOP;
       \$inmail = 0, next LOOP if (/$maildelim/o &amp;&amp; (\$inmail == 2));
       \$inmail = 1, next LOOP if (/$maildelim/o &amp;&amp; (\$nextline =~ /From:/));
       \$inmail = 2 if /$maildelim/o;
        next LOOP if \$inmail;
EOP
     }

  # ANSI removal
  if ($opt_A) {
    $prog .= &lt;&lt;'EOP';
      s/\033\[[\d;]*[A-Za-z]//go;
EOP
  }

 # Setup
  $prog .= &quot;\$firstword = \&amp;firstword(\$_);&quot; if ($opt_t || $opt_I || $opt_q || $opt_s);

 # Room descs
   if ($opt_t) {
     $prog .= &lt;&lt;EOP;
       \$inroom = 0 if (/^Contents:/o || /^Exits:/o || /^Obvious exits:/o ||
                        \$allnames{\$firstword});
       \$inroom = 1, \$newlines++, print OUT if /\(#\\d+R\\w*\)/o;
       next LOOP if \$inroom;
       \$incontents = 0, \$newlines++, print OUT &quot;\\n&quot; if (\$incontents &amp;&amp; (/^Exits:/o || /^Obvious exits:/o
                        || \$allnames{\$firstword}));
       \$incontents = 1 if /^Contents:/o;
       chop, \$_ .= &quot; &quot; if \$incontents;
EOP
  }

  # Regexps to keep at all costs!
  $prog .= &quot;\$keepit = 0;&quot;;
  if (@keeps) {
  $prog .= &lt;&lt;EOP;
        KEEP: {
EOP
  foreach $expr (@keeps) {
    $prog .= &lt;&lt;EOP;
      \$keepit=1,last KEEP if /$expr/;
EOP
  }
  $prog .= &quot; } &quot;;
  }
  $prog .= &lt;&lt;EOP;
    \$keepit=1 if /^[a-z]/o;
EOP
  $prog .= &quot;unless (\$keepit) {&quot;;
  if ($opt_q || $opt_s) {
    $prog .= &lt;&lt;EOP;
        \$goodname = 0;
        GOODNAME: {
           \$goodname = 1, \$allnames{\$firstword}++, last GOODNAME if /^\\w/ &amp;&amp; \$allnames{\$firstword};
EOP
  }
  $prog .= &quot;}&quot; if ($opt_s &amp;&amp;&#160;! $opt_q);
  if ($opt_q) {
    foreach $name (@puppet_names) {
        $prog .= &lt;&lt;EOP;
        \$goodname = 1, last GOODNAME if /^$name/;
EOP
    }
    $prog .= &quot;} next LOOP unless (\$goodname);&quot;;
  }
  foreach $expr (@strips) {
    $prog .= &lt;&lt;EOP;
        \$_ = \$lastline, next LOOP if /$expr/o;
EOP
  }
  $prog .= &quot;} &quot;;
        # Output processing - wraps, you say, blank lines, etc.
        $prog .= 's/^\[.*\] (.*)/\1/o;' if $opt_S;
        if ($opt_M) {
           $prog .= &lt;&lt;'EOP';
                s/^([^&lt;]+)&gt; You say(.*)/\1 says\2/o;
                s/^([^&lt;]+)&gt; You (.*)/\1 \2/o;
                s/^[^&lt;]+&gt; (.*)/\1/o;
EOP
        }
        # You say conversion
        if (@opt_y) {
          $prog .= &lt;&lt;'EOP';
                if (/^You say/) {
                  s/^You say/$opt_y[0] says/o;
                  $firstword = $opt_y[0];
                }
EOP
        }
        $prog .= &quot;next if \$lastline eq \$_;&quot;;
        $prog .= &quot;next if \&amp;spam_match(\$lastline,\$_);&quot; if $opt_O;
        # Blank lines and output grouping
        # Fix this to handle exits right!
        if ($opt_I) {
            $prog .= &lt;&lt;EOP;
                \$inexits = 0 unless /leads to/;
                \$inexits = 1, \$incontents = 0 if
                        (/^Obvious exits:/ ||  /^Exits:/);
                \$incontents = 0 if (\$incontents &amp;&amp;
                        \$allnames{\$firstword});
                \$incontents = 1 if /^Contents:/;
EOP
          if ($opt_g) {
            $prog .= &lt;&lt;EOP;
          \$newlines++, print OUT &quot;\\n&quot; unless (\$inexits || \$incontents || (\$firstword eq \&amp;firstword(\$lastline)));
EOP
          } else {
             $prog .= &lt;&lt;EOP;
                \$newlines++, print OUT &quot;\\n&quot; unless (\$incontents || \$inexits);
EOP
          }
        }
        # Wrapping
        if (@opt_W) {
            $prog .= &quot;\&amp;wrap_print(\$_,\@opt_W);&quot;;
        } else {
            $prog .= &quot;print OUT; \$newlines++;&quot;;
        }
  $prog .= &quot; } &quot;;
  eval $prog;
  die $@ if $@;
}

sub spam_match {
  # Given two lines, decide if they are &quot;o-spam&quot;, this way:
  # 1. Remove the first word of each line
  # 2. Remove all pronouns in each line
  # 3. See if they're the same
  local($l1,$l2) = @_;
  $l1 =~ s/^\S+\s+(.*)/$1/;
  $l2 =~ s/^\S+\s+(.*)/$1/;
  $l1 =~ s/ (him|her|his|he|she) //g;
  $l2 =~ s/ (him|her|his|he|she) //g;
  return $l1 eq $l2;
}

sub wrap_print {
  local($line,$wrapcol,$ind1,$indrest) = @_;
  local($cc) = $ind1;
  local($word);
  chop($line);
  local(@words) = split(&quot; &quot;,$line);
  print OUT &quot; &quot; x $ind1;
  foreach $word (@words) {
    $cc=$indrest, $newlines++,
      print OUT &quot;\n&quot;, &quot; &quot; x $indrest
        if ($cc + length($word) &gt; $wrapcol);
    print OUT $word, &quot; &quot;;
    $cc += length($word) + 1;
  }
  $newlines++, print OUT &quot;\n&quot;;
}

#
# Read in a new-style config file. Syntax: &amp;read_new_config(filename)
#
sub read_new_config {
    local($op,$val);
    while (&lt;CONF&gt;) {
        next if /^#/;
        next if /^$/;
        chop;
        if (/(.)\S*\s*=\s*(.*)/) {
            $op = $1; $val = $2;
            if ($val =~ /^on/io) {
                eval &quot;\$opt_$op = 1 unless \$opt_$op&quot;;
            } elsif ($2 =~ /^off/i) {
                eval &quot;undef \$opt_$op unless \$opt_$op&quot;;
            } elsif ($2) {
                # List-type one
                eval &quot;push(\@opt_$op,\$val)&quot;;
            }
        }
    }
}

#
# Read in an old-style config file (for compatibility)
# People will hopefully run logedit -b to convert to new file, though
# Syntax: &amp;read_old_config(filename)
#
sub read_old_config {
    local($ele);
    while (&lt;CONF&gt;) {
        next if /^#/;
        next if /^$/;
        chop;
        if (/sw.*=\s*(.*)/) {
            local(@list) = unpack(&quot;C*&quot;,$1);
            foreach $ele (@list) {
                $ele = pack(&quot;C&quot;,$ele);
                eval &quot;\$opt_$ele = 1&quot;;
            }
        } elsif (/you\s*=\s*(.*)/) {
            push(@opt_y,$1);
        } elsif (/exclude\s*=\s*(.*)/) {
            unshift(@opt_x,split(&quot; &quot;,$1));
        } elsif (/remove\s*=\s*(.*)/) {
            unshift(@opt_r,$1);
        } elsif (/wrap\s*=\s*(.*)/) {
            unshift(@opt_W,$1);
        } elsif (/world\s*=\s*(.*)/) {
            foreach $ele (split(&quot; &quot;,$1)) {
                if ($ele =~ /^!/) {
                    unshift(@strip_worlds,substr($ele,1));
                } else {
                    unshift(@keep_worlds,$ele);
                }
            }
        }
    }
}

#
# Write out a syntax display
#
sub syntax {
  print &quot;Logedit $version - by Alan Schwartz\n&quot;;
  print &quot;Syntax: logedit [-acdghilmnpqstvwACHINOPRST] [-b file] [-f [-]world]\n&quot;;
  print &quot;                [-o [file]] [-k regexp] [-r regexp] [-x name] [-y name]\n&quot;;
  print &quot;                [-F file] [-W [&lt;col&gt;[,&lt;first&gt;[,&lt;rest&gt;]]]] filename\n&quot;;

  print &amp;onoff('a'), &quot; -a\tRemove \@wall/\@rwall/\@wizwall\n&quot;;
  print &amp;onoff('b'), &quot; -b &lt;file&gt;\tBuild a new config file\n&quot;;
  print &amp;onoff('c'), &quot; -c\tRemove \@channels\n&quot;;
  print &amp;onoff('d'), &quot; -d\tRemove DOING/WHO lists\n&quot;;
  print &amp;onoff('f'), &quot; -f &lt;world&gt;\tUse output from &lt;world&gt; (-&lt;world&gt; to skip world)\n&quot;;
  print &amp;onoff('g'), &quot; -g\tGroup output from some player when using -I\n&quot;;
  print &amp;onoff('i'), &quot; -i\tRead input from the stdin instead of a file\n&quot;;
  print &amp;onoff('k'), &quot; -k &lt;regexp&gt;\tKeep lines matching this regexp\n&quot;;
  print &amp;onoff('l'), &quot; -l\tRemove * has arrived and * has left\n&quot;;
  print &amp;onoff('m'), &quot; -m\tRemove \@mail read during logging\n&quot;;
  print &amp;onoff('n'), &quot; -n\tIgnore configuration file (~/.logeditrc)\n&quot;;
  print &quot;      -o [&lt;file&gt;]\tUse &lt;file&gt; as output file, instead of filename.log\n\t\t\tIf no &lt;file&gt; is specified, write to stdout\n&quot;;
  print &amp;onoff('p'), &quot; -p\tRemove pages to you and from you\n&quot;;
  print &amp;onoff('q'), &quot; -q\tQuick-strip everything but player actions!\n&quot;;
  print &amp;onoff('r'), &quot; -r\tRemove lines containing the given regexp\n&quot;;
  print &amp;onoff('s'), &quot; -s\tInclude stats on attendance and such\n&quot;;
  print &amp;onoff('t'), &quot; -t\tRemove room descriptions/contents (admin/see_all log req.)\n&quot;;
  if ($unix) {
        print &quot;&lt;Press any key for more&gt;\n&quot;;
        system('stty raw -echo');
  } else {
        print &quot;&lt;Press return for more&gt;\n&quot;;
  }
  exit if (getc(STDIN) eq &quot;\cC&quot;);
  system('stty -raw echo') if ($unix);
  print &amp;onoff('v'), &quot; -v\tChatter verbosely while processing logs\n&quot;;
  print &amp;onoff('w'), &quot; -w\tRemove whispers to you and from you\n&quot;;
  print &amp;onoff('x'), &quot; -x\tRemove anything by &lt;name&gt;\n&quot;;
  print &amp;onoff('y'), &quot; -y\tConvert 'You say,' to '&lt;name&gt; says,'\n&quot;;
  print &amp;onoff('A'), &quot; -A\tRemove ANSI codes\n&quot;;
  print &amp;onoff('C'), &quot; -C\tRemove tf Client lines (starting with&#160;%)\n&quot;;
  print &amp;onoff('I'), &quot; -I\tInsert a blank line between each action in the log\n&quot;;
  print &amp;onoff('M'), &quot; -M\tMerge puppets - remove puppet&gt;, but leave the rest\n&quot;;
  print &amp;onoff('N'), &quot; -N\tRemove lines with Nospoof markers []\n&quot;;
  print &amp;onoff('O'), &quot; -O\tRemove O-spam (successive osucc/odrop messages)\n&quot;;
  print &amp;onoff('P'), &quot; -P\tRemove Puppet output\n&quot;;
  print &amp;onoff('R'), &quot; -R\tRaw telnet mode - remove lines starting with&#160;: or \&quot;\n&quot;;
  print &amp;onoff('S'), &quot; -S\tSpoof mode - remove just the []'s from the front of lines\n&quot;;
  print &amp;onoff('T'), &quot; -T\tRemove Timestamped messages: \@idle/\@away/\@haven\n&quot;;
  print &amp;onoff('W'), &quot; -W [&lt;wrap-column&gt;[,&lt;first line indent&gt;[,&lt;hanging indent&gt;]]]\n         Word-wrap the log at the specified column, with optional indents\n&quot;;
  if ($opt_2) {
    print &quot;(off) -1\tAssume log is from PennMUSH 1.50\n&quot;;
  } else {
    print &quot; (on) -1\tAssume log is from PennMUSH 1.50\n&quot;;
  }
  print &amp;onoff('2'), &quot; -2\tAssume log is from TinyMUSH 2.0\n&quot;;
}

sub onoff {
  local($op) = $_[0];
  $prog = &lt;&lt;EOP;
    return (\$opt_$op || \@opt_$op)&#160;? &quot; (on)&quot;&#160;: &quot;(off)&quot;;
EOP
  return eval $prog;
}

#
# Write out a new-style config file. Syntax: &amp;make_config(filename)
#
sub make_config {
    local($config_file) = shift(@_);
    if (-r $config_file) {
       print STDERR &quot;Are you sure you want to create a new config file, overwriting $config_file?\nContinue [y/n]: &quot;;
       $yn = &lt;STDIN&gt;;
       if ($yn&#160;!~ /^y/i) {
         print STDERR &quot;Ok, not overwriting $config_file, continuing.\n&quot;;
         return;
       }
    }
    open(FILE,&quot;&gt;$config_file&quot;) || die &quot;Can't create $config_file: $!\n&quot;;
    local($old);
    $old = select(FILE);
    print &quot;# Config file for logedit $version\n&quot;;
    local(@date) = localtime(time);
    local($date) = $date[4] + 1 . &quot;/$date[3]/$date[5]&quot;;
    print &quot;# Built from command line on $date\n&quot;;
    print &quot;# The names of the options *ARE* case-sensitive\n&quot;;
    print &quot;# For toggle options, 'on' means strip, and 'off' means don't.\n&quot;;
    print &quot;#\n&quot;;
    print &quot;# Strip admin chatter (\@rwall, \@wizwall)\n&quot;;
    print &quot;admin=&quot;, ($opt_a&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Build new config file every time we run\n&quot;;
    print &quot;# This causes logedit to 'remember' your last settings\n&quot;;
    print &quot;# BE SURE YOU WANT THIS! IF YOU DON'T, COMMENT IT OUT\n&quot;;
    print &quot;build=&quot;, (@opt_b&#160;? $opt_b[0]&#160;: &quot;&quot;), &quot;\n&quot;;
    print '# Strip MUSH chat channels (the &lt;&gt; kind)', &quot;\n&quot;;
    print &quot;chat=&quot;, ($opt_c&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip DOING/WHO lists\n&quot;;
    print &quot;doing=&quot;, ($opt_d&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # e is available
    print &quot;# Tinyfugue worlds to always include, or to strip (-world)\n&quot;;
    @keep_worlds &amp;&amp; print &quot;worlds=@keep_worlds\n&quot;;
    @strip_worlds &amp;&amp; print &quot;worlds=@strip_worlds\n&quot;;
    @keep_worlds || @strip_worlds || print &quot;worlds=\n&quot;;
    print &quot;# Group output from same player together when using -I\n&quot;;
    print &quot;group_output=&quot;, ($opt_g&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # h, j available
    print &quot;# Keep lines matching these regexps in the log, no matter what!\n&quot;;
    print &quot;# (Use one keep= line per regexp)\n&quot;;
    if (@opt_k) {
        foreach $expr (@opt_k) {
            print &quot;keep=$expr\n&quot;;
        }
    } else {
        print &quot;keep=\n&quot;;
    }
    print &quot;# Strip leaving/arriving messages\n&quot;;
    print &quot;leave=&quot;, ($opt_l&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip \@mail\n&quot;;
    print &quot;mail=&quot;, ($opt_m&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip pages to and from you\n&quot;;
    print &quot;page=&quot;, ($opt_p&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Quick-strip everything but player actions\n&quot;;
    print &quot;quick=&quot;, ($opt_q&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip these regular expressions (one line per regexp)\n&quot;;
    if (@opt_r) {
        foreach $expr (@opt_r) {
            print &quot;regexp=$expr\n&quot;;
        }
    } else {
        print &quot;regexp=\n&quot;;
    }
    print &quot;# Include statistics at the end of the log\n&quot;;
    print &quot;statistics=&quot;, ($opt_s&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Terse mode - strip room descriptions\n&quot;;
    print &quot;terse=&quot;, ($opt_t&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # u available
    print &quot;# Verbose: chatter while we process the log\n&quot;;
    print &quot;verbose=&quot;, ($opt_v&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip whispers to and from you\n&quot;;
    print &quot;whisper=&quot;, ($opt_w&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Exclude any actions by given player (one line per player)\n&quot;;
    if (@excludes) {
        foreach $expr (@excludes) {
            print &quot;exclude=$expr\n&quot;;
        }
    } else {
        print &quot;exclude=\n&quot;;
    }
    print &quot;# Convert 'You say' to '&lt;Name&gt; says'. List name here\n&quot;;
    print &quot;you=$opt_y[0]\n&quot;;
    # z available
    print &quot;# Strip ANSI codes from logs\n&quot;;
    print &quot;ANSI=&quot;, ($opt_A&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # B available
    print &quot;# Remove tinyfugue Client messages starting with&#160;%\n&quot;;
    print &quot;CLIENT_TF=&quot;, ($opt_C&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # D, E, G, H available
    print &quot;# Insert a blank line between each action in log\n&quot;;
    print &quot;# (see also -g/group puppet above)\n&quot;;
    print &quot;INSERT=&quot;, ($opt_I&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # J, K, L, M available
    print &quot;# Remove just the puppet&gt; beginning of lines which start like\n&quot;;
    print &quot;# that, so logs taken from puppets will look more normal\n&quot;;
    print &quot;MERGE_PUPPETS=&quot;, ($opt_M&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print '# Strip all lines with Nospoof markers [] at the beginning', &quot;\n&quot;;
    print '# Warning - some MUSHes use [] for chat channels', &quot;\n&quot;;
    print '# See also SPOOF, below.', &quot;\n&quot;;
    print &quot;NOSPOOF=&quot;, ($opt_N&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip O-Message spam (successive osucc/odrop messages)\n&quot;;
    print &quot;OSPAM=&quot;, ($opt_O&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip Puppet output\n&quot;;
    print &quot;PUPPET=&quot;, ($opt_P&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # Q available
    print '# Strip Raw telnet stuff (lines starting with &quot; or&#160;:)', &quot;\n&quot;;
    print &quot;RAW_TELNET=&quot;, ($opt_R&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print '# Remove just the []s from lines which start with them',&quot;\n&quot;;
    print '# This de-NOSPOOFs a log. Warning - some MUSHes use []',&quot;\n&quot;;
    print '# for chat channels, and this will make channel messages appear',&quot;\n&quot;;
    print '# as if they are in the room!', &quot;\n&quot;;
    print &quot;SPOOF=&quot;, ($opt_S&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    print &quot;# Strip Timestamped messages: \@idle/\@away/\@haven\n&quot;;
    print &quot;TIMESTAMPED=&quot;, ($opt_T&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    # U, V available
    print &quot;# Wrap log: Syntax can be:\n&quot;;
    print &quot;# WRAP=72     (wrap at column 72)\n&quot;;
    print &quot;# WRAP=75,5   (wrap at 75, indent first line by 5 spaces)\n&quot;;
    print &quot;# WRAP=70,0,2 (wrap at 70, no first indent, hanging indent of 2)\n&quot;;
    print &quot;WRAP=$opt_W[0]\n&quot;;
    # X, Y, Z available
    print &quot;# Assume log came from a TinyMUSH 2.0, rather than PennMUSH 1.50\n&quot;;
    print &quot;2.0=&quot;, ($opt_2&#160;? &quot;on&quot;&#160;: &quot;off&quot;), &quot;\n&quot;;
    select($old);
}

# Print out stats for a log
sub footer {
  print OUT &quot;---------------------LOG ENDS - STATISTICS----------------\n&quot;;
  print OUT &quot;Original file ($infilename): $origlines lines\n&quot;;
  print OUT &quot;This file ($outfilename): $newlines lines\n&quot;;
  print OUT &quot;Player Statistics:\n&quot;;
  printf OUT &quot;%-30s%10s\n&quot;, &quot;PLAYER&quot;, &quot;# of ACTIONS&quot;;
  foreach (sort keys&#160;%allnames) {
    printf OUT &quot;%-30s%10d\n&quot;, $_, $allnames{$_} if $allnames{$_} &gt; 0;
  }
  print OUT &quot;\nQuiet players:\n&quot;;
  local(@quiet) = grep($allnames{$_} == 0,sort keys&#160;%allnames);
  local($quiet) = join(&quot;, &quot;,@quiet);
  &amp;wrap_print($quiet,72,0,0);
  print OUT &quot;\n&quot;;
}

# Usage:
#      do Getopts('a:b~c'); # -a requires arg. -b has optional arg
#                           # &amp; -c not.
# For argless switches, sets $opt_&lt;switch&gt;. For arg'd switches,
# @opt_&lt;switch&gt; is set to list of stuff passed via multiple uses of
# the switch.
# Argless switches may be clustered.

sub myGetopts {
    local($argumentative) = @_;
    local(@args,$_,$first,$rest);
    local($errs) = 0;
    local($[) = 0;

    @args = split( / */, $argumentative );
    while(@ARGV &amp;&amp; ($_ = $ARGV[0]) =~ /^-(\S)(\S*)/) {
        ($first,$rest) = ($1,$2);
        $pos = index($argumentative,$first);
        if($pos &gt;= $[) {
            if($args[$pos+1] eq '~') {  # Arg is optional
                shift(@ARGV);
                if($rest eq '') {
                    ++$errs unless @ARGV;
                    $rest = shift(@ARGV);
                }
                if ($rest =~ /^-/) {
                  # Oops - another switch. Put it back
                  unshift(@ARGV,$rest);
                  eval &quot;\$opt_$first = 1&quot;;
                } elsif (! $rest) {
                  # Last switch
                  eval &quot;\$opt_$first = 1&quot;;
                } else {
                  eval &quot;\@opt_$first = (\@opt_$first,\$rest);&quot;;
                }
            } elsif($args[$pos+1] eq ':') { # Arg is required
                shift(@ARGV);
                if($rest eq '') {
                    ++$errs unless @ARGV;
                    $rest = shift(@ARGV);
                }
                die &quot;Switch -$first requires an argument!\n&quot; if ($rest eq '');
                eval &quot;\@opt_$first = (\@opt_$first,\$rest);&quot;;
            }

            else {
                eval &quot;\$opt_$first = 1&quot;;
                if($rest eq '') {
                    shift(@ARGV);
                }
                else {
                    $ARGV[0] = &quot;-$rest&quot;;
                }
            }
        }
        else {
            print STDERR &quot;Unknown option: $first\n&quot;;
            ++$errs;
            if($rest ne '') {
                $ARGV[0] = &quot;-$rest&quot;;
            }
            else {
                shift(@ARGV);
            }
        }
    }
    $errs == 0;
}

1;
##############################################################################

        # These next few lines are legal in both Perl and nroff.

.00;                    # finish .ig

'di                     \&quot; finish diversion--previous line must be blank
.nr nl 0-1              \&quot; fake up transition to first page again
.nr&#160;% 0                 \&quot; start at page 1
'; __END__
.ex


</pre>

<!-- 
NewPP limit report
CPU time usage: 0.024 seconds
Real time usage: 0.026 seconds
Preprocessor visited node count: 4/1000000
Preprocessor generated node count: 24/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key homesitewiki-mw_:pcache:idhash:623-0!*!*!*!*!*!* and timestamp 20160813145842
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="http://www.gwen-morse.com/wiki/index.php?title=Logedit&amp;oldid=2401">http://www.gwen-morse.com/wiki/index.php?title=Logedit&amp;oldid=2401</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-login"><a href="/wiki/index.php?title=Special:UserLogin&amp;returnto=Logedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/index.php/Logedit"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/wiki/index.php?title=Talk:Logedit&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/wiki/index.php/Logedit" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="/wiki/index.php?title=Logedit&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/wiki/index.php?title=Logedit&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="/wiki/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Search" title="Search Gwen Morse's Wiki [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="/wiki/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(/home/public/wiki/guestbook.jpg);" href="/wiki/index.php/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="/wiki/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-MUSHing"><a href="/wiki/index.php/MUSHing">MUSHing</a></li>
			<li id="n-Softcode-Archive"><a href="/wiki/index.php/Gwen%27s_MUSHcode_Archive">Softcode Archive</a></li>
			<li id="n-Tinyfugue-Client"><a href="/wiki/index.php/Tinyfugue">Tinyfugue Client</a></li>
			<li id="n-Tabletop-Roleplay"><a href="/wiki/index.php/Roleplay">Tabletop Roleplay</a></li>
			<li id="n-Sims"><a href="/wiki/index.php/Sims">Sims</a></li>
			<li id="n-Linux"><a href="/wiki/index.php/Linux">Linux</a></li>
			<li id="n-Health-and-Beauty"><a href="/wiki/index.php/HABA">Health and Beauty</a></li>
			<li id="n-Recipes"><a href="/wiki/index.php/Recipes">Recipes</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Wiki_Help' aria-labelledby='p-Wiki_Help-label'>
	<h3 id='p-Wiki_Help-label'>Wiki Help</h3>
	<div class="body">
		<ul>
			<li id="n-portal"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-currentevents"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:Current_events" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" rel="nofollow" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/wiki/index.php/Special:WhatLinksHere/Logedit" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/wiki/index.php/Special:RecentChangesLinked/Logedit" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/wiki/index.php?title=Logedit&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/wiki/index.php?title=Logedit&amp;oldid=2401" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/wiki/index.php?title=Logedit&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 25 July 2014, at 07:36.</li>
											<li id="footer-info-viewcount">This page has been accessed 828 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:Privacy_policy" title="Gwen Morse's Wiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:About" title="Gwen Morse's Wiki:About">About Gwen Morse&#039;s Wiki</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/index.php/Gwen_Morse%27s_Wiki:General_disclaimer" title="Gwen Morse's Wiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.383 secs. -->
	</body>
</html>
