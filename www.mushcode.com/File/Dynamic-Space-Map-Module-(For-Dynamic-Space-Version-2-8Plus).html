<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Dynamic Space Map Module (For Dynamic Space Version 2.8+)</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#">Dynamic Space Map Module (For Dynamic Space Version 2.8+)</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Dynamic Space Map Module (For Dynamic Space Version 2.8+)
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>This code allows you to define vast areas of a Dynamic Space with default names, descs, succs, etc, by the use of a simple-to-create ASCII map. (This code requires Dynamic Space 2.8 code to be installed first, as it is an add-on for it.)</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <a href="../Author/Unknown.html">Unknown</a>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="http://www.mushcode.com/Command/@create" class="command">@create</a>,
                    <a href="http://www.mushcode.com/Command/@describe" class="command">@describe</a>,
                    <a href="http://www.mushcode.com/Command/@force" class="command">@force</a>,
                    <a href="http://www.mushcode.com/Command/@set" class="command">@set</a>,
                    <a href="../Command/@vm.html" class="command">@vm</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/add.html" class="function">add&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/member.html" class="function">member&#40;&#41;</a>,
                        <a href="../Function/mid.html" class="function">mid&#40;&#41;</a>,
                        <a href="../Function/mul.html" class="function">mul&#40;&#41;</a>,
                        <a href="../Function/not.html" class="function">not&#40;&#41;</a>,
                        <a href="../Function/num.html" class="function">num&#40;&#41;</a>,
                        <a href="../Function/r.html" class="function">r&#40;&#41;</a>,
                        <a href="../Function/setq.html" class="function">setq&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/trunc.html" class="function">trunc&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/CobraMUSH.html" class="server">CobraMUSH</a>,
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>,
                        <a href="../Server/RhostMUSH.html" class="server">RhostMUSH</a>,
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>,
                        <a href="../Server/TinyMUSH.html" class="server">TinyMUSH</a>,
                        <a href="../Server/TinyMUX.html" class="server">TinyMUX</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Dynamic Space Map Module (For Dynamic Space Version 2.8+)
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Dynamic-Space-Map-Module-(For-Dynamic-Space-Version-2-8Plus).html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        @@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ DYNAMIC SPACE  -  Map Module		Version 1.2<br/><br/>@@ This code allows you to define vast areas of a Dynamic Space with <br/>@@ default names, descs, succs, etc, by the use of a simple-to-create<br/>@@ ASCII map. The normal room altering commands provided by the Dynamic<br/>@@ Space system override anything created by the Map module, so these<br/>@@ areas can be further customized.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Changes:<br/>@@ 1.2<br/>@@	- Use of TinyMUSH 2.2isms<br/>@@	- Mostly a cosmetic release to complement DS-2.8<br/>@@ 1.1<br/>@@	- Notes on using ISNULL from DS-2.7<br/>@@	- Note about slight optimizations possible with DS-2.7<br/>@@	- Optimized bits and bobs with registers and %vm<br/>@@	- Added example code for a "+map key" global<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@                     READ ME NOW!<br/>@@                     ~~~~~~~~~~~~<br/>@@<br/>@@ This script requires: Dynamic_Space-2.8 (or later)<br/><br/>@@ The following will make little sense until you have read the <br/>@@ Dynamic Space script. This is an add on! IT WILL NOT WORK ON<br/>@@ ITS OWN, and should be read after the DS script has at least been<br/>@@ configured.<br/>@@<br/>@@ You MUST read all of the directions contained within this script!<br/>@@<br/>@@ Using this script with just the defaults is pointless.<br/><br/>@@ Suggested course of action:<br/>@@<br/>@@	1. Get this script and the matching DS script<br/>@@	2. Read the DS script<br/>@@	3. Read this script<br/>@@	4. Configure the DS script with whatever custom stuff you want<br/>@@	5. Configure this script (limits, dimensions, scale, the map)<br/>@@	6. Upload the DS script<br/>@@	7. Upload this script<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Make the Object to hold the Map and Functions<br/><br/>@create Dynamic Map Object<br/>@set Dynamic Map Object=SAFE<br/><br/>@fo me=@vm Dynamic Exit Parent=[num(Dynamic Map Object)]<br/>@fo me=@vm Dynamic Map Object=[num(Dynamic Map Object)]<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 1: Making the Map<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~<br/>@@ The first thing you need to do is draw the map. Pick some key,<br/>@@ each character representing one room. (or possibly more, see<br/>@@ below under "Scales") You should not use % or \ as a symbol for <br/>@@ your key, and do NOT use spaces. Using a text editor like Emacs,<br/>@@ or even a word processor like Word Perfect (but use a fixed <br/>@@ width font like Courier!), draw a box like the one below, and <br/>@@ fill it with the symbols to create the map. Its a good idea to<br/>@@ keep the key around, commented out in the script.<br/><br/>@@ Key<br/><br/>@@ oooo = forest	~~~~ = ocean<br/>@@ ,,,, = grassland	#    = docks<br/>@@ .... = desert	*    = Capital City<br/>@@ ^^^^ = mountains	@    = Small Village<br/>@@ nnnn = hills		"    = rocky coast<br/><br/><br/>@@		     21111111111        -|+        11111111112   <br/>@@		     09876543210987654321012345678901234567890<br/>&amp;LINE-9  Map Object=+-----------------------------------------+<br/>&amp;LINE-8	 Map Object=|^^^^^o,ooooooooooo,,,,,,,,"~~~~~~~~~~~~~~| <br/>&amp;LINE-7	 Map Object=|^^oo,,,,,oooo,ooooooo,,,,@#~~~~~~~~~~~~~~|<br/>&amp;LINE-6	 Map Object=|^^^^oo,oooooooo,,,nnn,,,,,"~~~~~~~~~~~~~~|<br/>&amp;LINE-5	 Map Object=|^,,^^^^oooooooo,,nn,,,,oo,""~~~~~~~~~~~~~|<br/>&amp;LINE-4	 Map Object=|^^^,,^^^^^oooo,,nn,,oooo,""~~~~~~~~~~~~~~|<br/>&amp;LINE-3	 Map Object=|^^^^^,,,^^^o,,,,,,,oooo"""~~~~~~~~~~~~~~~|<br/>&amp;LINE-2	 Map Object=|^,,,,,,,,,,,,,,,,oooo"""~~~~~~~"""""""~~~|<br/>&amp;LINE-1	 Map Object=|^^^^^nnn,,,,,,,,,,o"""~~~~~~~~~#@ono,"~~~|<br/>&amp;LINE-0	 Map Object=|^^^^^^^nnn,,,,,,o,,,*#~~~~~~~~~"",,"""~~~|<br/>&amp;LINE--1 Map Object=|...^^^^^^nnn,,,,oooo""~~~~~~~~~~""""~~~~~|<br/>&amp;LINE--2 Map Object=|.......^^^^nn,,,,o,""~~~~~~~~~~~~~~~~~~~~|<br/>&amp;LINE--3 Map Object=|.........^^^n,,oo,,,""~~~~~~~~~~~~~~~~~~~|<br/>&amp;LINE--4 Map Object=|.......n^^nn,,oooo,,@#~~~~~~~"~~~~~~~~~~~|<br/>&amp;LINE--5 Map Object=|.....nn^^^^,,ooooo,,,,""""""""~~~~~~~~~~~|<br/>&amp;LINE--6 Map Object=|^.....nnn^^^^,,,ooooo,,,,,,,"~~~~~~~~~~~~|<br/>&amp;LINE--7 Map Object=|^^.......nnn^^^^,,,,,,,,,"""~~~~~~~~~~~~~|<br/>&amp;LINE--8 Map Object=|^^^^..........^^^^^oo,,"""~~~~~~~~~~~~~~~|<br/>&amp;LINE--9 Map Object=+-----------------------------------------+<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 2: Making it MUSHcode<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ As you can see in the example, each line is prefixed by<br/>@@ &amp;LINE-&lt;some number&gt; The numbers can either increase or<br/>@@ decrease, but making them decrease southward is preferred.<br/>@@ I've also included an X-axis label. I placed the Capital<br/>@@ City at 0,0 to make life simple. Once your labels are<br/>@@ complete, they will tell you what size your Dynamic Space<br/>@@ should be defined as, and you can set the limits<br/>@@ appropriately. Be warned - anything not on the space<br/>@@ will end up blank. The frame lines are optional, but make<br/>@@ the map clearer when examining the object.<br/><br/>&amp;X-LIMITS Dynamic Array Object=1<br/>&amp;Y-LIMITS Dynamic Array Object=1<br/>&amp;Z-LIMITS Dynamic Array Object=1<br/><br/>&amp;MAXX Dynamic Array Object=20<br/>&amp;MINX Dynamic Array Object=-20<br/>&amp;MAXY Dynamic Array Object=8<br/>&amp;MINY Dynamic Array Object=-8<br/>&amp;MAXZ Dynamic Array Object=0<br/>&amp;MINZ Dynamic Array Object=0<br/><br/>@@ Note - I made this example 2 dimensional. There is no reason it<br/>@@ won't work with three, but more work is required in the functions<br/>@@ below, where the changes are explained.<br/><br/>@@ The following attributes hold the offset of the map's coordinates <br/>@@ from the Dynamic Space's coordinates. For X coordinates, the first <br/>@@ character on the line is counted as 0. The offset is the value added <br/>@@ to the X coordinate when looking for a character. In this example, the <br/>@@ 21st character in each line (counting from 0) represents X=0. For Y <br/>@@ coordinates, LINE-0 is assumed to hold the Y=0 descriptors. If you set <br/>@@ Y_OFFSET to 1, then LINE-1 on the map represents the Y=0 line.<br/><br/>&amp;X_OFFSET Dynamic Map Object=21<br/>&amp;Y_OFFSET Dynamic Map Object=0<br/><br/>@@ X_SCALE and Y_SCALE are used prior to the lookup. These have two<br/>@@ uses: The first is to cause a mirror effect, if you want the Y-axis<br/>@@ reversed on the map (eg, LINE-# counting down). The second effect<br/>@@ is to make each character on the map represent a larger area. If<br/>@@ values of 0.5 are used, then each character represents 4 rooms.<br/><br/>&amp;X_SCALE Dynamic Map Object=1<br/>&amp;Y_SCALE Dynamic Map Object=1<br/><br/>@@ Take your key and write the symbols out in a space-seperated list,<br/>@@ replacing the list below. This is why having your key handy helps.<br/>@@ The order will matter later, so make sure you know what symbol <br/>@@ represents what.<br/><br/>&amp;TERRAIN_LIST Dynamic Map Object=o , . ^ n ~ # * @ "<br/><br/>@@ This function finds the object terrain type given the map and a list<br/>@@ of types. It returns the number within the list. You should not<br/>@@ have to change this.<br/><br/>&amp;TERRAIN_TYPE Dynamic Map Object=member(get(%vm/TERRAIN_LIST),mid(get(%vm/LINE-[trunc(add(mul(%1,get(%vm/Y_SCALE)),get(%vm/Y_OFFSET)))]),trunc(add(mul(%0,get(%vm/X_SCALE)),get(%vm/X_OFFSET))),1))<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 3: Build the lookup functions<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ Usually you will only need to change the Name, Desc and Succ <br/>@@ attributes. I've made this simpler I'm just doing the Name. Please<br/>@@ remember - if you DO want the PARENT to be read off the map, it <br/>@@ should be the dbref# of something that is a close duplicate of the<br/>@@ Dynamic Room Parent or things will get seriously screwed up.<br/><br/>@@ This is how the Map does a Name Lookup. MAP-NAME is passed the<br/>@@ X, Y and Z coordinates in %0, %1 and %2. To be modular, the<br/>@@ NAME-* attributes are evaluated with u() and passed the coordinates<br/>@@ as well. You could have the name changed based on the Z coordinate<br/>@@ by checking %2, and using 0 as the ground level, 1 "Just above",<br/>@@ 2 "High above" and 3 "Far above", for example. I'm assuming<br/>@@ for this example that nothing can fly in this land.<br/><br/>&amp;MAP-NAME Dynamic Map Object=u(%vm/NAME-[u(%vm/TERRAIN_TYPE,%0,%1)],%0,%1,%2)<br/><br/>@@ These should be in the same order as the TERRAIN_LIST symbols were.<br/><br/>&amp;NAME-1  Dynamic Map Object=Deep in the Forest<br/>&amp;NAME-2  Dynamic Map Object=On the Open Grasslands<br/>&amp;NAME-3  Dynamic Map Object=In the Desert<br/>&amp;NAME-4  Dynamic Map Object=Amidst the Towering Mountains<br/>&amp;NAME-5  Dynamic Map Object=In the Rolling Hills<br/>&amp;NAME-6  Dynamic Map Object=On the Open Ocean<br/>&amp;NAME-7  Dynamic Map Object=Down on the Docks<br/>&amp;NAME-8  Dynamic Map Object=In the Streets of the Capital City<br/>&amp;NAME-9  Dynamic Map Object=In a Small Village<br/>&amp;NAME-10 Dynamic Map Object=On the Rocky Coastline<br/><br/>@@ This line fixes the existing Dynamic Space code to look at the<br/>@@ Map Object, IF NO NAME IS SAVED ON THE ARRAY OBJECT. The Map is<br/>@@ used as a last recourse. You shouldn't need to touch it.<br/><br/>&amp;GETNAME Dynamic Exit Parent=[setq(1,get(v(ARRAY)/NAME-%0.%1.%2))][switch(r(1),,u(%vm/MAP-NAME,%0,%1,%2),r(1))]<br/><br/>@@ You can tweak the speed of the above function marginally if you<br/>@@ are using DS-2.7 or later by replacing v(ARRAY) with %va<br/><br/>@@ To do Descs, Succs, etc, simply take the above code and duplicate<br/>@@ it, changing NAME to DESC, SUCC, etc.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 3.5: How I do it: Parents<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ On Narnia, for the desert, I use parents for different regions.<br/>@@ I create one object for each region, apply the appropriate<br/>@@ Desc, Succ, etc (they are weather dependent) and then parent <br/>@@ all of these to the Dynamic Room Parent. For a gorge, I set<br/>@@ BLOCKED_EXITS on the gorge parent.<br/>@@<br/>@@ Then I have GETPARENT and MAP-PARENT functions to parent individual<br/>@@ DS rooms to these region parents. It works well!<br/>@@<br/>@@ If you do parents, you'll want to alter *all* of the GET* functions<br/>@@ on the Dynamic Exit Parent - they provide defaults for descs,<br/>@@ and you'll want the parents to override.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 4: Cows Can't Swim<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ DS-2.7 and later allow "null" rooms that are useful for constructing<br/>@@ hedge-maze type layouts. However, they can also be used to disallow<br/>@@ certain players or creatures into certain terrain types without <br/>@@ much additional code.<br/><br/>@@ Use "NULL-#" attributes. Anything which evaluates to non-zero <br/>@@ blocks the user (%#) from passing. You can just leave the NULL-#<br/>@@ attributes off for completely passable terrain, which counts<br/>@@ as zero.<br/><br/>@@ This sample disallows anything from entering or moving around in the<br/>@@ water unless it has a CAN_SWIM attribute set to a non-zero value.<br/>@@ Presuming, of course, that the CAN_SWIM attribute is !private (which<br/>@@ a wizard has to do with @attribute/access). It also stops anything<br/>@@ from entering the mountains, much to the chagrin of any goats you<br/>@@ may have on the MUSH:<br/><br/>&amp;NULL-4 Dynamic Map Object=1<br/>&amp;NULL-6 Dynamic Map Object=not(get(%#/CAN_SWIM))<br/><br/>&amp;MAP-NULL Dynamic Map Object=u(%vm/NULL-[u(%vm/TERRAIN_TYPE,%0,%1)],%0,%1,%2)<br/><br/>&amp;ISNULL Dynamic Exit Parent=u(%vm/MAP-NULL,%0,%1,%2)<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 5: Extras<br/>@@ ~~~~~~~~~~~~~~<br/>@@ There are some things the existing Dynamic Space code script does<br/>@@ that we probably don't want any more. The first is that the (0,0,0)<br/>@@ room is prenamed.<br/><br/>&amp;NAME-0.0.0 Dynamic Array Object<br/><br/>@@ Note: If you "FIX"ed the initial room, you'll want to unfix it.<br/>@@ This will allow the Map to rename/desc/succ/etc it. I've left the <br/>@@ next line commented, but it'll do the unfixing for you. Commented<br/>@@ out for your safety: remember, *something* has to stay fixed.<br/><br/>@@ @Aleave get(Dynamic Array Object/num-0.0.0)<br/><br/>@@ Nuking the default desc is probably a good idea as well:<br/><br/>@Desc Dynamic Room Parent <br/><br/>@@ While it is simplest to take the ASCII map, tidy it up, and put it<br/>@@ in the MUSH's News file as an entry on its own, it is possible to make<br/>@@ a global do it within the MUSH. For example:<br/><br/>@@ &amp;MAP_OBJECT Global Commands=&lt;dbref# of Dynamic Map Object&gt;<br/><br/>@@ &amp;CMD_SHOW_MAP Global Commands=$+map:<br/>@@ 	@dolist lattr(v(MAP_OBJECT)/LINE-*)=<br/>@@ 		@pemit %#=get(v(map_object)/##)<br/><br/>@@ And this does a key, just associating names with symbols.<br/><br/>@@ &amp;CMD_SHOW_MAP_KEY Global Commands=$+map key:<br/>@@ 	@dolist lnum(words(get(v(MAP_OBJECT)/TERRAIN_LIST)))=<br/>@@		@pemit %#=<br/>@@	`[extract(get(v(MAP_OBJECT)/TERRAIN_LIST),add(##,1),1)]' = <br/>@@	[get(v(MAP_OBJECT)/NAME-[add(##,1)])]<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Step 6: Party Time<br/>@@ ~~~~~~~~~~~~~~~~~~<br/>@@ Thats it! Now that you have the scripts patched the way you want<br/>@@ them, run the Dynamic_Space script first, then this second.<br/>@@ You may have to walk one space north and then one more south<br/>@@ before the map kicks in, but you should now have a perfectly<br/>@@ functional landscape to play with!<br/><br/>@@ Final Note:<br/>@@ I recommend removing the @@ comment lines before running this script<br/>@@ This will increase the speed of the script, and probably make your <br/>@@ client and your MUSH happier. It will NOT affect the code during <br/>@@ operation, however. From unix:<br/><br/>@@ grep -v ^@@ Dynamic_Space_Map-1.2 &gt; dsmap_script<br/><br/>@@ Then run the dsmap_script file.<br/><br/>@@ Alternately (since you needed to get it *anyway* to use the <br/>@@ Dynamic Space code itself), pass this through mpp.<br/><br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>