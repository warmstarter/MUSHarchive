<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Dynamic Space 2.8</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-2-8.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-2-8.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Dynamic-Space-2-8.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Dynamic-Space-2-8.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-2-8.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Dynamic-Space-2-8.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Dynamic-Space-2-8.html#">Dynamic Space 2.8</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Dynamic Space 2.8
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>This code lets you set up rectilinear grids of rooms that only exist when needed. This is useful for doing sky areas, oceans, terrain, or even the surfaces of entire planets!</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <span>
                    <a href="../Author/Algol@NarniaGolden.html">Algol</a>@<a href="../Source/NarniaGolden.html">NarniaGolden</a>
                </span>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="http://www.mushcode.com/Command/@adescribe" class="command">@adescribe</a>,
                    <a href="../Command/@afail.html" class="command">@afail</a>,
                    <a href="../Command/@aleave.html" class="command">@aleave</a>,
                    <a href="../Command/@amhear.html" class="command">@amhear</a>,
                    <a href="http://www.mushcode.com/Command/@create" class="command">@create</a>,
                    <a href="http://www.mushcode.com/Command/@describe" class="command">@describe</a>,
                    <a href="../Command/@destroy.html" class="command">@destroy</a>,
                    <a href="../Command/@dig.html" class="command">@dig</a>,
                    <a href="http://www.mushcode.com/Command/@dolist" class="command">@dolist</a>,
                    <a href="http://www.mushcode.com/Command/@drain" class="command">@drain</a>,
                    <a href="http://www.mushcode.com/Command/@failure" class="command">@failure</a>,
                    <a href="http://www.mushcode.com/Command/@force" class="command">@force</a>,
                    <a href="http://www.mushcode.com/Command/@link" class="command">@link</a>,
                    <a href="../Command/@listen.html" class="command">@listen</a>,
                    <a href="http://www.mushcode.com/Command/@lock" class="command">@lock</a>,
                    <a href="http://www.mushcode.com/Command/@name" class="command">@name</a>,
                    <a href="../Command/@notify.html" class="command">@notify</a>,
                    <a href="../Command/@odrop.html" class="command">@odrop</a>,
                    <a href="../Command/@open.html" class="command">@open</a>,
                    <a href="../Command/@osuccess.html" class="command">@osuccess</a>,
                    <a href="http://www.mushcode.com/Command/@parent" class="command">@parent</a>,
                    <a href="http://www.mushcode.com/Command/@pemit" class="command">@pemit</a>,
                    <a href="http://www.mushcode.com/Command/@set" class="command">@set</a>,
                    <a href="http://www.mushcode.com/Command/@startup" class="command">@startup</a>,
                    <a href="../Command/@success.html" class="command">@success</a>,
                    <a href="http://www.mushcode.com/Command/@switch" class="command">@switch</a>,
                    <a href="http://www.mushcode.com/Command/@teleport" class="command">@teleport</a>,
                    <a href="http://www.mushcode.com/Command/@trigger" class="command">@trigger</a>,
                    <a href="http://www.mushcode.com/Command/@va" class="command">@va</a>,
                    <a href="../Command/@vn.html" class="command">@vn</a>,
                    <a href="http://www.mushcode.com/Command/@wait" class="command">@wait</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/add.html" class="function">add&#40;&#41;</a>,
                        <a href="../Function/and.html" class="function">and&#40;&#41;</a>,
                        <a href="../Function/cat.html" class="function">cat&#40;&#41;</a>,
                        <a href="../Function/comp.html" class="function">comp&#40;&#41;</a>,
                        <a href="../Function/edit.html" class="function">edit&#40;&#41;</a>,
                        <a href="../Function/eq.html" class="function">eq&#40;&#41;</a>,
                        <a href="../Function/filter.html" class="function">filter&#40;&#41;</a>,
                        <a href="../Function/first.html" class="function">first&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/get_eval.html" class="function">get_eval&#40;&#41;</a>,
                        <a href="../Function/gt.html" class="function">gt&#40;&#41;</a>,
                        <a href="../Function/gte.html" class="function">gte&#40;&#41;</a>,
                        <a href="../Function/hasflag.html" class="function">hasflag&#40;&#41;</a>,
                        <a href="../Function/iter.html" class="function">iter&#40;&#41;</a>,
                        <a href="../Function/lattr.html" class="function">lattr&#40;&#41;</a>,
                        <a href="../Function/lcon.html" class="function">lcon&#40;&#41;</a>,
                        <a href="../Function/lcstr.html" class="function">lcstr&#40;&#41;</a>,
                        <a href="../Function/lexits.html" class="function">lexits&#40;&#41;</a>,
                        <a href="../Function/locate.html" class="function">locate&#40;&#41;</a>,
                        <a href="../Function/lt.html" class="function">lt&#40;&#41;</a>,
                        <a href="../Function/lte.html" class="function">lte&#40;&#41;</a>,
                        <a href="../Function/member.html" class="function">member&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/neq.html" class="function">neq&#40;&#41;</a>,
                        <a href="../Function/not.html" class="function">not&#40;&#41;</a>,
                        <a href="../Function/num.html" class="function">num&#40;&#41;</a>,
                        <a href="../Function/or.html" class="function">or&#40;&#41;</a>,
                        <a href="../Function/parent.html" class="function">parent&#40;&#41;</a>,
                        <a href="../Function/rest.html" class="function">rest&#40;&#41;</a>,
                        <a href="../Function/s.html" class="function">s&#40;&#41;</a>,
                        <a href="../Function/setdiff.html" class="function">setdiff&#40;&#41;</a>,
                        <a href="../Function/setq.html" class="function">setq&#40;&#41;</a>,
                        <a href="../Function/setunion.html" class="function">setunion&#40;&#41;</a>,
                        <a href="../Function/squish.html" class="function">squish&#40;&#41;</a>,
                        <a href="../Function/sub.html" class="function">sub&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/time.html" class="function">time&#40;&#41;</a>,
                        <a href="../Function/trim.html" class="function">trim&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>,
                        <a href="../Function/words.html" class="function">words&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>,
                        <a href="../Server/TinyMUSH.html" class="server">TinyMUSH</a>,
                        <a href="../Server/TinyMUX.html" class="server">TinyMUX</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Dynamic Space 2.8
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Dynamic-Space-2-8.html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        @@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Dynamic Space - The Next Generation<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ Release:  2.8<br/>@@ Date:     95-04-14<br/>@@<br/>@@ Requires: TinyMUSH 2.2 or later<br/>@@           mpp MUSH Pre-processor (distributed as mpp.c)<br/>@@<br/>@@ Author:   Joshua Bell, jsbell@acs.ucalgary.ca<br/>@@           Algol@NarniaGolden, dobest.lib.virginia.edu 6250<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Changes:<br/>@@ ~~~~~~~~<br/>@@ 2.8<br/>@@	- Rewrote the whole damn exit-display stuff<br/>@@	- Made dimension-locks easier to add<br/>@@	- Lots of internal reorganizations of comments and config stuff<br/>@@	- Conversion to TinyMUSH 2.2isms (NOT COMPLETE!)<br/>@@<br/>@@ See "HISTORY" section at end of file for a complete list.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Dynamic Space:<br/>@@ ~~~~~~~~~~~~~~<br/>@@ This code lets you set up rectilinear grids of rooms that only <br/>@@ exist when needed. This is useful for doing sky areas, oceans, <br/>@@ terrain, or even the surfaces of entire planets!<br/>@@ <br/>@@ This code runs under TinyMUSH 2.2 or later, and does NOT require <br/>@@ Wizard powers. Its internal recycling queue allows it to operate <br/>@@ with limited quota or limited funds (although having lots of <br/>@@ money is a major advantage), and for the technically inclined, <br/>@@ requires only two queue cycles per movement inside the semaphore<br/>@@ protection.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Installation notes:<br/>@@ ~~~~~~~~~~~~~~~~~~~<br/>@@ The script will have to be piped through my mpp.c "MUSH Pre-<br/>@@ Processor" to get rid of the comments and formatting.<br/>@@ The source code is available from the MUSHcode archive site<br/>@@ located at: ftp://caisr2.caisr.cwru.edu/pub/mush/mushcode<br/>@@<br/>@@           Read the CONFIGURATION AND SETUP NOTES <br/>@@           section *before* running this script!<br/>@@<br/>@@ The script as written will run without changes, but it is <br/>@@ doubtful that you will like, or be able to use the results.<br/>@@<br/>@@ You may also want to grab and read: Dynamic_Space_Map-1.2<br/>@@ which is the optional map module.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Features:<br/>@@ ~~~~~~~~~<br/>@@<br/>@@ - Up to three dimensions of movement. Locks can be applied to any<br/>@@ direction of travel.<br/>@@ <br/>@@ - Space can be limited to a fixed size, made to wrap around, or extended<br/>@@ infinitely in each dimension.<br/>@@ <br/>@@ - Individual exits within a room can be blocked or hidden.<br/>@@ <br/>@@ - Exits are transparent to those who pass them.<br/>@@ <br/>@@ - The desc, succ, name, parent, and transient-status of a room can be<br/>@@ altered using simple commands within the DS.<br/>@@ <br/>@@ - Permission to alter the DS can be granted via as something as simple<br/>@@ as a flag or lock, or any function you wish.<br/>@@ <br/>@@ - Administrators can teleport to any valid location within the DS<br/>@@ volume. <br/>@@ <br/>@@ - The size of the room queue (used to avoid actual creation/destruction<br/>@@ of rooms) can be adjusted to suit the traffic expected.<br/>@@ <br/>@@ - An optional map module which allows you to "sketch" areas in ASCII<br/>@@ and have them realized in the DS.<br/>@@ <br/>@@ - Using the map, rooms can be eliminated entirely leaving "walls"<br/>@@ behind in the space.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Conditions of use and disclaimer<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@<br/>@@ I make no claims as to the safety, reliability, or usefulness<br/>@@ of this code, other than: it has worked for me, and has not caused<br/>@@ any harm to the MUSHes I have tried it on. There are probably<br/>@@ still bugs in it, although I attempt to patch these as I find them.<br/>@@<br/>@@ I'm willing to answer questions about setting up DS, modifying it<br/>@@ for custom use, or how portions of the code work. I'm not willing<br/>@@ to set it up for you, or to teach you everything required to<br/>@@ do it yourself (this is not for the beginner!). <br/>@@<br/>@@ Permission is granted to run this code on any platform you chose,<br/>@@ with the provision that you let me know if you port it to another<br/>@@ server platform, find bugs, patch bugs, or add functionality that <br/>@@ may be of interest to others.<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Available Ports<br/>@@ ~~~~~~~~~~~~~~~<br/>@@<br/>@@ TinyMUSH 2.0.9p2<br/>@@ ~~~~~~~~~~~~~~~~<br/>@@ The last dedicated code for the 2.0 line of TinyMUSH<br/>@@ is Dynamic_Space-2.7p2. Look for it where you found this code.<br/>@@ Development on this line probably won't continue.<br/>@@<br/>@@ PennMUSH 1.5p10<br/>@@ ~~~~~~~~~~~~~~~<br/>@@ Joe Bui &lt;jsb11@dewey.EEAP.CWRU.Edu&gt; has ported DS 2.7 to PennMUSH.<br/>@@ "I doubt that it will work with lower versions of PennMUSH since I<br/>@@  used db-modifying functions."<br/>@@ Joshua Bell has applied patches to bring it in line with 2.7p2<br/>@@ code but these have not been tested.<br/>@@<br/>@@ TinyMUSE<br/>@@ ~~~~~~~~<br/>@@ A MUSE port (of sorts) is also available. Contact<br/>@@ czar@Wittenberg.EDU for more information<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Credits:<br/>@@ ~~~~~~~~<br/>@@ Code: 	  Algol@NarniaGolden (was Tash@Narnia)<br/>@@ Concept: 	  Talek@PernMUSH<br/>@@ Instigator: 	  Ehlrick@TooMUSH<br/>@@ Suggestions:   The Hermit@Narnia, Tangent@TooMUSH, Edmund@Narnia, <br/>@@		  Pomona@TooMUSH, Talek@PernMUSH, Fumblethumb@Narnia,<br/>@@ 		  Andrew Molitor, Rilian@Narnia, Maud@Narnia, <br/>@@		  Drayton@Narnia, Frank@Narnia, Kent Jenkins<br/>@@<br/>@@ PennMUSH Ports: Rilian@Narnia (2.3)<br/>@@                 Joe Bui &lt;jsb11@dewey.EEAP.CWRU.Edu&gt;  (2.7)<br/>@@<br/>@@ TinyMUSE Port:  czar@Wittenberg.EDU (2.?)<br/><br/>@@ -----8&lt;----CUT HERE----8&lt;--------8&lt;--------8&lt;--------8&lt;--------8&lt;----<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Create the Origin Room<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~<br/><br/>@dig/tel Center of a Vast Plane<br/>&amp;XCOOR here=0<br/>&amp;YCOOR here=0<br/>&amp;ZCOOR here=0<br/>@set here=FLOATING<br/><br/>@@ Create the relevant objects<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/><br/>@create Dynamic Room Parent<br/>@create Dynamic Exit Parent<br/>@create Dynamic Array Object<br/><br/>@parent here=Dynamic Room Parent<br/><br/>@set Dynamic Room Parent=SAFE<br/>@set Dynamic Room Parent=HALTED<br/>@set Dynamic Exit Parent=SAFE<br/>@set Dynamic Array Object=SAFE<br/><br/>@@ Store object dbref#s<br/>@@ ~~~~~~~~~~~~~~~~~~~~<br/><br/>@fo me=&amp;NAME-0.0.0 Dynamic Array Object=[name(here)]<br/>@fo me=&amp;NUM-0.0.0 Dynamic Array Object=[num(here)]<br/><br/>@fo me=&amp;ARRAY Dynamic Room Parent=[num(Dynamic Array Object)]<br/>@fo me=&amp;ARRAY Dynamic Exit Parent=[num(Dynamic Array Object)]<br/>@fo me=@va Dynamic Room Parent=[num(Dynamic Array Object)]<br/>@fo me=@va Dynamic Exit Parent=[num(Dynamic Array Object)]<br/><br/>@fo me=&amp;ROOM_PARENT Dynamic Exit Parent=[num(Dynamic Room Parent)]<br/>@fo me=&amp;EXIT_PARENT Dynamic Room Parent=[num(Dynamic Exit Parent)]<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ <br/>@@ CONFIGURATION AND SETUP NOTES SECTION<br/>@@ <br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Entry and Exit to/from a DS<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ ...should be done via normal exits linked to/from the DS, or <br/>@@ teleportation to rooms which are "fixed" using the "fix here" <br/>@@ building command.<br/>@@<br/>@@ All non-dynamic exits in a DS should be set DARK; use the<br/>@@ "hide exit=&lt;exitname&gt;" building command to conceal them.<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Set up the Inherited Exits<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ Note: If you only want N/S/E/W, just delete the NE/NW/SE/SW code.<br/>@@ Similarly, if you only want two dimensions, delete out U/D<br/><br/>@@ If you want more exits (to have the 26 possible 3D directions, say)<br/>@@ add lines to make and parent the new exits, and just add the <br/>@@ appropriate X/Y/ZNEW attributes. North, East, and Up should be <br/>@@ add(), South, West, and Down should be sub(). All exits need to<br/>@@ be set DARK. To hide exits (say, Up and Down) add:<br/>@@<br/>@@           &amp;DARK_EXITS Dynamic Room Parent=|Up|Down<br/><br/>@@ @Succ, @Osucc, @Odrop work like they normally do, but %0 is the<br/>@@ dbref# of the player attempting the exit; to emulate %p you need<br/>@@ to use [poss(%0)]. FAKE_FAIL is the same as @fail (which cannot<br/>@@ be used!), again with %0 being the player dbref#.<br/><br/>@@ The exits attempt to be transparent to those who can pass through;<br/>@@ NO_DESC is seen if the target room is out of range, and the<br/>@@ FAIL_DESC is seen if the exit is blocked or not passable. <br/><br/>drop Dynamic Room Parent<br/>enter Dynamic Room Parent<br/><br/>@open Up;u<br/>@set Up=DARK<br/>@parent Up=Dynamic Exit Parent<br/>@lock Up=me&amp;!me<br/>@link Up=here<br/>&amp;ZNEW Up=add(get(%0/ZCOOR),1)<br/>@set Up=DARK<br/>@Succ Up=You head upwards.<br/>@Osucc Up=heads upwards.<br/>@Odrop Up=comes up from below.<br/>&amp;FAKE_FAIL Up=You find you cannot travel further upward.<br/>&amp;NO_DESC Up=You cannot discern anything further above you.<br/>&amp;FAIL_DESC Up=It appears impossible to travel further upwards.<br/><br/>@open Down;d<br/>@set Down=DARK<br/>@parent Down=Dynamic Exit Parent<br/>@lock Down=me&amp;!me<br/>@link Down=here<br/>&amp;ZNEW Down=sub(get(%0/ZCOOR),1)<br/>@set Down=DARK<br/>@Succ Down=You head downwards.<br/>@Osucc Down=heads downwards.<br/>@Odrop Down=comes down from above.<br/>&amp;FAKE_FAIL Down=You find you cannot travel further downward.<br/>&amp;NO_DESC Down=You cannot discern anything further below you.<br/>&amp;FAIL_DESC Down=It appears impossible to descend further.<br/><br/>@open Northwest;nw<br/>@set Northwest=DARK<br/>@parent Northwest=Dynamic Exit Parent<br/>@lock Northwest=me&amp;!me<br/>@link Northwest=here<br/>&amp;YNEW Northwest=add(get(%0/YCOOR),1)<br/>&amp;XNEW Northwest=sub(get(%0/XCOOR),1)<br/>@Succ Northwest=You head northwest.<br/>@Osucc Northwest=heads northwest.<br/>@Odrop Northwest=comes in from the southeast.<br/>&amp;FAKE_FAIL Northwest=You find you cannot travel further northwest.<br/>&amp;NO_DESC Northwest=You cannot discern anything further to the northwest.<br/>&amp;FAIL_DESC Northwest=Travel to the northwest appears blocked.<br/><br/>@open North;n<br/>@set North=DARK<br/>@parent North=Dynamic Exit Parent<br/>@lock North=me&amp;!me<br/>@link North=here<br/>&amp;YNEW North=add(get(%0/YCOOR),1)<br/>@Succ North=You head north.<br/>@Osucc North=heads north.<br/>@Odrop North=comes in from the south.<br/>&amp;FAKE_FAIL North=You find you cannot travel further north.<br/>&amp;NO_DESC North=You cannot discern anything further to the north.<br/>&amp;FAIL_DESC North=Travel to the north appears blocked.<br/><br/>@open Northeast;ne<br/>@set Northeast=DARK<br/>@parent Northeast=Dynamic Exit Parent<br/>@lock Northeast=me&amp;!me<br/>@link Northeast=here<br/>&amp;YNEW Northeast=add(get(%0/YCOOR),1)<br/>&amp;XNEW Northeast=add(get(%0/XCOOR),1)<br/>@Succ Northeast=You head northeast.<br/>@Osucc Northeast=heads northeast.<br/>@Odrop Northeast=comes in from the southwest.<br/>&amp;FAKE_FAIL Northeast=You find you cannot travel further northeast.<br/>&amp;NO_DESC Northeast=You cannot discern anything further to the northeast.<br/>&amp;FAIL_DESC Northeast=Travel to the northeast appears blocked.<br/><br/>@open East;e<br/>@set East=DARK<br/>@parent East=Dynamic Exit Parent<br/>@lock East=me&amp;!me<br/>@link East=here<br/>&amp;XNEW East=add(get(%0/XCOOR),1)<br/>@Succ East=You head east.<br/>@Osucc East=heads east.<br/>@Odrop East=comes in from the west.<br/>&amp;FAKE_FAIL East=You find you cannot travel further east.<br/>&amp;NO_DESC East=You cannot discern anything further to the east.<br/>&amp;FAIL_DESC East=Travel to the east appears blocked.<br/><br/>@open Southeast;se<br/>@set Southeast=DARK<br/>@parent Southeast=Dynamic Exit Parent<br/>@lock Southeast=me&amp;!me<br/>@link Southeast=here<br/>&amp;XNEW Southeast=add(get(%0/XCOOR),1)<br/>&amp;YNEW Southeast=sub(get(%0/YCOOR),1)<br/>@Succ Southeast=You head southeast.<br/>@Osucc Southeast=heads southeast.<br/>@Odrop Southeast=comes in from the northwest.<br/>&amp;FAKE_FAIL Southeast=You find you cannot travel further southeast.<br/>&amp;NO_DESC Southeast=You cannot discern anything further to the southeast.<br/>&amp;FAIL_DESC Southeast=Travel to the southeast appears blocked.<br/><br/>@open South;s<br/>@set South=DARK<br/>@parent South=Dynamic Exit Parent<br/>@lock South=me&amp;!me<br/>@link South=here<br/>&amp;YNEW South=sub(get(%0/YCOOR),1)<br/>@Succ South=You head south.<br/>@Osucc South=heads south.<br/>@Odrop South=comes in from the north.<br/>&amp;FAKE_FAIL South=You find you cannot travel further south.<br/>&amp;NO_DESC South=You cannot discern anything further to the south.<br/>&amp;FAIL_DESC South=Travel to the south appears blocked.<br/><br/>@open Southwest;sw<br/>@set Southwest=DARK<br/>@parent Southwest=Dynamic Exit Parent<br/>@lock Southwest=me&amp;!me<br/>@link Southwest=here<br/>&amp;XNEW Southwest=sub(get(%0/XCOOR),1)<br/>&amp;YNEW Southwest=sub(get(%0/YCOOR),1)<br/>@Succ Southwest=You head southwest.<br/>@Osucc Southwest=heads southwest.<br/>@Odrop Southwest=comes in from the northeast.<br/>&amp;FAKE_FAIL Southwest=You find you cannot travel further southwest.<br/>&amp;NO_DESC Southwest=You cannot discern anything further to the southwest.<br/>&amp;FAIL_DESC Southwest=Travel to the southwest appears blocked.<br/><br/>@open West;w<br/>@set West=DARK<br/>@parent West=Dynamic Exit Parent<br/>@lock West=me&amp;!me<br/>@link West=here<br/>&amp;XNEW West=sub(get(%0/XCOOR),1)<br/>@Succ West=You head west.<br/>@Osucc West=heads west.<br/>@Odrop West=comes in from the east.<br/>&amp;FAKE_FAIL West=You find you cannot travel further west.<br/>&amp;NO_DESC West=You cannot discern anything further to the west.<br/>&amp;FAIL_DESC West=Travel to the west appears blocked.<br/><br/>leave<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Builder Lock<br/>@@ ~~~~~~~~~~~~<br/>@@ Look at the ISBUILDER code - anything for which that function<br/>@@ returns a 1 is allowed to use the commands in the next section.<br/>@@ You could do a member list, or whatever. <br/><br/>&amp;ISBUILDER Dynamic Room Parent=[hasflag(%#,builder)]<br/>@lock/UseLock Dynamic Room Parent=ISBUILDER/1<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Limits<br/>@@ ~~~~~~<br/>@@ You can define the limits of the Dynamic Space in three ways for<br/>@@ each of the three dimensions. Set the corresponding *-LIMITS to:<br/>@@ 0 - No Limits. Object may travel forever in that direction.<br/>@@ 1 - Hard Limits. Objects hit a 'wall' when they reach the boundary.<br/>@@ 2 - Wrapping. Objects that reach one edge pass through to the opposite<br/>@@  edge of the plane.<br/><br/>&amp;X-LIMITS Dynamic Array Object=2<br/>&amp;Y-LIMITS Dynamic Array Object=1<br/>&amp;Z-LIMITS Dynamic Array Object=1<br/><br/>&amp;MAXX Dynamic Array Object=10<br/>&amp;MINX Dynamic Array Object=-10<br/>&amp;MAXY Dynamic Array Object=10<br/>&amp;MINY Dynamic Array Object=-10<br/>&amp;MAXZ Dynamic Array Object=5<br/>&amp;MINZ Dynamic Array Object=0<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Room Queue <br/>@@ ~~~~~~~~~~<br/>@@ The default is between 3 and 6 rooms on the queue at any one time, <br/>@@ create or destroy any extra as needed. If you anticipate heavy use,<br/>@@ you can up the lower end. I don't think more than 5 will ever be<br/>@@ needed. The maximum limit is just an 'in case', and should never be<br/>@@ set too high, although it should be at least 3 more than the minimum.<br/><br/>&amp;QUEUE-MIN Dynamic Array Object=3<br/>&amp;QUEUE-MAX Dynamic Array Object=6<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Dimension Locks<br/>@@ ~~~~~~~~~~~~~~~<br/>@@ The default to allow anyone to move in any direction. To restrict<br/>@@ motion in certain directions, do something like this:<br/>@@<br/>@@         &amp;DIM_LOCK Up=strmatch(get(%#/HAS_WINGS),Yes)<br/>@@<br/>@@ Travel is permitted if this function returns a true value (non-0)<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Null Rooms<br/>@@ ~~~~~~~~~~<br/>@@ While the code for these is built in here, the best description<br/>@@ and implementation is in the optional Map Module. If you want to<br/>@@ use this feature without maps, you need to write something like this:<br/>@@<br/>@@         &amp;ISNULL Dynamic Exit Parent=&lt;MyFunction&gt;<br/>@@<br/>@@ %0, %1 and %2 are preset to the X, Y and Z coords of the target room.<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ SEE ALSO:<br/>@@ ~~~~~~~~~<br/>@@ There's a section later in the code titled "Generic Attributes" that<br/>@@ you should look at.<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ <br/>@@ END OF CONFIGURATION AND SETUP NOTES SECTION<br/>@@ <br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Description Generation<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~<br/>@@ All exits must be kept dark, so the Adesc provides both the<br/>@@ exit list and instructions on how builders can see a command <br/>@@ list. TERSE players see neither, you may want to alter that. <br/><br/>@Desc Dynamic Room Parent=The plane is featureless.<br/><br/>@Adesc Dynamic Room Parent=@pemit %#=[switch(hasflag(%#,TERSE),0,[setq(1,setunion(v(DARK_EXITS),u(DE_HIDE_BORDER),|))][setq(0,filter(DE_FILTER,lexits(%!)))][switch(words(%q0),0,,Obvious exits:%r[iter(%q0,name(##)%b)])][switch(u(ISBUILDER),1,%rType "DS Help" for DS Builder commands.)])]<br/><br/>&amp;DE_FILTER Dynamic Room Parent=switch(member(lcstr(%q1),lcstr(name(%0)),|),0,1,0)<br/><br/>@@ Border exits are hidden if you're using hard limits.<br/>@@ If you don't want this. just remove DE_HIDE_BORDER<br/><br/>&amp;DE_HIDE_BORDER Dynamic Room Parent=edit(trim(squish([switch(11,[get(%va/X-LIMITS)][eq(v(XCOOR),get(%va/MAXX))],East|Northeast|Southeast)]%b[switch(11,[get(%va/X-LIMITS)][eq(v(XCOOR),get(%va/MINX))],West|Northwest|Southwest)]%b	[switch(11,[get(%va/Y-LIMITS)][eq(v(YCOOR),get(%va/MAXY))],North|Northwest|Northeast)]%b[switch(11,[get(%va/Y-LIMITS)][eq(v(YCOOR),get(%va/MINY))],South|Southwest|Southeast)]%b[switch(11,[get(%va/Z-LIMITS)][eq(v(ZCOOR),get(%va/MAXZ))],Up)]%b[switch(11,[get(%va/Z-LIMITS)][eq(v(ZCOOR),get(%va/MINZ))],Down)])),%b,|)<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Building Commands<br/>@@ ~~~~~~~~~~~~~~~~~<br/>@@ You can add to these, just remember to add code to the Afail code<br/>@@ of the Exit Parent. <br/><br/>&amp;DESC_HERE Dynamic Room Parent=$desc here=*:@desc me=%0;&amp;desc-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=%0;@pemit %#=Desc set.<br/><br/>&amp;SUCC_HERE Dynamic Room Parent=$succ here=*:@succ me=%0;&amp;succ-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=%0;@pemit %#=Succ set.<br/><br/>&amp;NAME_HERE Dynamic Room Parent=$name here=*:@name me=%0;&amp;name-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=%0;@pemit %#=Name set.<br/><br/>&amp;COORDS_HERE Dynamic Room Parent=$coords:@pemit %#=X coordinate = [v(XCOOR)], Y coordinate = [v(YCOOR)], Z coordinate = [v(ZCOOR)]<br/><br/>&amp;FIX_HERE Dynamic Room Parent=$fix here:@aleave me=@@;@pemit %#=Room fixed.<br/><br/>&amp;PARENT_HERE Dynamic Room Parent=$parent here=*:@parent me=%0;&amp;parent-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=%0;@pemit %#=Parent set.<br/><br/>@@ WARNING! If you change the Parent on a room, you MUST be sure that<br/>@@ the Dynamic Room Parent (or a close copy) occurs SOMEWHERE in the<br/>@@ new Parent chain, otherwise the room will not have the proper exits.<br/><br/>@@ You'll also want to make sure you change the GETDESC function<br/>@@ and replace the {Default description.} with {}<br/><br/>&amp;CMD_HIDE_EXIT Dynamic Room Parent=$hide exit=*:@switch locate(%L,%0,c)=#-1,{@pemit %#=I don't see that exit here.},#-2,{@pemit %#=I don't know which exit you mean!},{&amp;DARK_EXITS %!=setunion(v(DARK_EXITS),lcstr(name(locate(%L,%0,c))),|);&amp;DARK_EXITS-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=v(DARK_EXITS);@pemit %#=Exit hidden.	}<br/><br/>&amp;CMD_SHOW_EXIT Dynamic Room Parent=$show exit=*:@switch locate(%L,%0,c)=#-1,{@pemit %#=I don't see that exit here.},#-2,{@pemit %#=I don't know which exit you mean!},{&amp;DARK_EXITS %!=setdiff(v(DARK_EXITS),lcstr(name(locate(%L,%0,c))),|);&amp;DARK_EXITS-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=v(DARK_EXITS);@pemit %#=Exit revealed.}<br/><br/>&amp;CMD_HIDDEN_EXITS Dynamic Room Parent=$list hidden exits:@pemit %#=Hidden exits: [edit(v(DARK_EXITS),|,%b%b)]<br/><br/><br/>&amp;CMD_BLOCK_EXIT Dynamic Room Parent=$BLOCK exit=*:@switch locate(%L,%0,c)=#-1,{@pemit %#=I don't see that exit here.},#-2,{@pemit %#=I don't know which exit you mean!},{&amp;BLOCKED_EXITS %!=setunion(v(BLOCKED_EXITS),lcstr(name(locate(%L,%0,c))),|);&amp;BLOCKED_EXITS-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=v(BLOCKED_EXITS);@pemit %#=Exit blocked.	}<br/><br/>&amp;CMD_OPEN_EXIT Dynamic Room Parent=$OPEN exit=*:@switch locate(%L,%0,c)=#-1,{@pemit %#=I don't see that exit here.},#-2,{@pemit %#=I don't know which exit you mean!},{&amp;BLOCKED_EXITS %!=setdiff(v(BLOCKED_EXITS),lcstr(name(locate(%L,%0,c))),|);&amp;BLOCKED_EXITS-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=v(BLOCKED_EXITS);@pemit %#=Exit opened.}<br/><br/>&amp;CMD_BLOCKED_EXITS Dynamic Room Parent=$list BLOCKED exits:@pemit %#=Blocked exits: [edit(v(BLOCKED_EXITS),|,%b%b)]<br/><br/>@parent Dynamic Room Parent=Dynamic Exit Parent<br/><br/>&amp;CMD_TELTO Dynamic Room Parent=$telto * * *:@wait %va={@trigger v(EXIT_PARENT)/[setq(7,add(%0,0))][setq(8,add(%1,0))][setq(9,add(%2,0))][switch(0,u(INBOUNDS,%q7,%q8,%q9),DUMMY,comp(get(%va/NUM-%q7.%q8.%q9),),ALLOC_ROOM,TEL_TO_ROOM)]=%#,%L,%N,%q7,%q8,%q9}<br/><br/><br/>&amp;CMD_DS_HELP Dynamic Room Parent=$DS Help:@pemit %#={%rYou can use the following commands:%r%b'name here=&lt;new name&gt;'%b %b'coords' - find out your current coordinates%r%b'desc here=&lt;new desc&gt;'%b %b'fix here' - stop this room from being recycled%r%b'succ here=&lt;new succ&gt;'%b %b'parent here=&lt;new parent&gt;' - be careful!!%r%b'hide exit=&lt;exitname&gt;'%b %b'show exit=&lt;exitname&gt;' %b 'list hidden exits'%r%b'block exit=&lt;exitname&gt;'%b 'open exit=&lt;exitname&gt;' %b 'list blocked exits'%r%b'telto &lt;x&gt; &lt;y&gt; &lt;z&gt;' - teleport to those coordinates, if they're valid%r}<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Recycling Code<br/>@@ ~~~~~~~~~~~~~~<br/>@@ This code allows you to get away with not @digging at every step.<br/>@@ The system keeps a short queue of rooms to reuse.<br/><br/>@@ Rooms get recycled when they have no contents, and only their <br/>@@ inherited exits remain, unless they have been 'fixed'.<br/><br/>@Aleave Dynamic Room Parent=@switch and(eq(words(lcon(me)),0),eq(words(lexits(me)),words(lexits(parent(me)))))=1,{&amp;num-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)] %va=setdiff(get(%va/num-[v(XCOOR)].[v(YCOOR)].[v(ZCOOR)]),num(me));&amp;recycle_list %va=setunion(get(%va/RECYCLE_LIST),num(me));@name me=DS Recycled Room;@parent me;@dolist lattr(me)={&amp;## me};@trigger %va/RECYCLE}<br/><br/>@@ In case of spurious rooms, force a check on startup.<br/><br/>@Startup Dynamic Room Parent=@trigger me/Aleave<br/><br/>@@ The Array Object itself handles the queue, creation and destruction <br/>@@ of rooms as needed.<br/><br/>&amp;RECYCLE Dynamic Array Object=@switch words(v(RECYCLE_LIST))=&lt;[v(QUEUE-MIN)],{@dig DS Recycled Room;@trigger me/RECYCLE},&gt;[v(QUEUE-MAX)],{@destroy first(v(RECYCLE_LIST));&amp;recycle_list me=rest(v(RECYCLE_LIST));@trigger me/RECYCLE}<br/><br/>@Listen Dynamic Array Object=* created with room number *.<br/>@Amhear Dynamic Array Object=&amp;RECYCLE_LIST me=cat(v(RECYCLE_LIST),#%1);@set #%1=FLOATING<br/><br/>@@ Generate an Initial Queue<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~<br/><br/>@trigger Dynamic Array Object/RECYCLE<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Locks and Defaults<br/>@@ ~~~~~~~~~~~~~~~~~~<br/><br/>@@ No Fail message - the &amp;FAKE_FAIL takes care of that.<br/><br/>@Fail Dynamic Exit Parent=\<br/><br/>@@ The lock for exits - non-blocked and non-null and valid dimension lock<br/><br/>&amp;PASS_LOCK Dynamic Exit Parent=[and(not(member(lcstr(get(%L/BLOCKED_EXITS)),lcstr(name(%!)),|)),not(u(ISNULL,%q7,%q8,%q9)),u(DIM_LOCK))]<br/><br/>@@ Default dimension lock, everyone passes<br/><br/>&amp;DIM_LOCK Dynamic Exit Parent=1<br/><br/>@@ Default null-room status<br/><br/>&amp;ISNULL Dynamic Exit Parent=0<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Transparent Exit Description<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/>@@ The desc and succ are seen if the exit is passable to the looker, <br/>@@ defaulting to the parent room if nothing can be found in the array. <br/>@@ The NO_DESC attrib is seen if the target room is out of range, and <br/>@@ the FAIL_DESC is seen if the exit is blocked or not passable. <br/>@@<br/>@@ If you are modelling sky, you may wish to copy the @desc attribute to <br/>@@ your up/down exits, and comment out the chunk:<br/>@@                 not(u(PASS_LOCK)),v(FAIL_DESC),<br/>@@ This will allow unpassable exits (eg, to non-fliers) to be seen <br/>@@ from the ground.<br/><br/>@@ The second [setq(... line handles the @succ view. Remove if unwanted.<br/><br/>@Desc Dynamic Exit Parent=[setq(7,u(DXNEW,u(XNEW,%L)))][setq(8,u(DYNEW,u(YNEW,%L)))][setq(9,u(DZNEW,u(ZNEW,%L)))][switch(1,not(u(INRANGE,%q7,%q8,%q9)),v(NO_DESC),not(u(PASS_LOCK)),v(FAIL_DESC),[setq(0,s(u(GETDESC,%q7,%q8,%q9)))][switch(%q0,,get_eval(u(GETPARENT,%q7,%q8,%q9)/Desc),%q0)][setq(0,s(u(GETSUCC,%q7,%q8,%q9)))][switch(%q0,,setq(0,get_eval(u(GETPARENT,%q7,%q8,%q9)/Succ)))][switch(%q0,,,%r%q0)])]<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Target Room Calculation Functions<br/>@@ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br/><br/>&amp;INRANGE Dynamic Exit Parent=and(or(neq(get(%va/X-LIMITS),1),u(IS_IN_X,%0)),or(neq(get(%va/Y-LIMITS),1),u(IS_IN_Y,%1)),or(neq(get(%va/Z-LIMITS),1),u(IS_IN_Z,%2)))<br/><br/>&amp;INBOUNDS Dynamic Exit Parent=and(or(not(get(%va/X-LIMITS)),u(IS_IN_X,%0)),or(not(get(%va/Y-LIMITS)),u(IS_IN_Y,%1)),or(not(get(%va/Z-LIMITS)),u(IS_IN_Z,%2)))<br/><br/>&amp;IS_IN_X Dynamic Exit Parent=and(lte(%0,get(%va/MAXX)),gte(%0,get(%va/MINX)))<br/><br/>&amp;IS_IN_Y Dynamic Exit Parent=and(lte(%0,get(%va/MAXY)),gte(%0,get(%va/MINY)))<br/><br/>&amp;IS_IN_Z Dynamic Exit Parent=and(lte(%0,get(%va/MAXZ)),gte(%0,get(%va/MINZ)))<br/><br/>@@ These three are generic, actual exits modify the values with add/sub<br/><br/>&amp;XNEW Dynamic Exit Parent=get(%0/XCOOR)<br/>&amp;YNEW Dynamic Exit Parent=get(%0/YCOOR)<br/>&amp;ZNEW Dynamic Exit Parent=get(%0/ZCOOR)<br/><br/>@@ Compute the new location, if wrapping is enabled and relevant.<br/><br/>&amp;DXNEW Dynamic Exit Parent=<br/>	switch(get(%va/X-LIMITS),<br/>		2,switch(1,<br/>			gt(%0,get(%va/MAXX)),get(%va/MINX),<br/>			lt(%0,get(%va/MINX)),get(%va/MAXX),<br/>			%0<br/>		),<br/>		%0<br/>	)<br/><br/>&amp;DYNEW Dynamic Exit Parent=switch(get(%va/Y-LIMITS),2,switch(1,gt(%0,get(%va/MAXY)),get(%va/MINY),lt(%0,get(%va/MINY)),get(%va/MAXY),%0),%0)<br/><br/>&amp;DZNEW Dynamic Exit Parent=switch(get(%va/Z-LIMITS),2,switch(1,gt(%0,get(%va/MAXZ)),get(%va/MINZ),lt(%0,get(%va/MINZ)),get(%va/MAXZ),%0),%0)<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Do the Dynamic Thing<br/>@@ ~~~~~~~~~~~~~~~~~~~~<br/>@@ ALLOC_ROOM is responsible for the snatching of new rooms from the <br/>@@ queue, if necessary. Semaphores are used on the internal loop here;<br/>@@ when the Afail is called upon, it puts the commands on the semaphore <br/>@@ queue and uses the Array Object as the file lock. When the Array <br/>@@ Object gets @notified, one batch of waiting commands gets run. <br/><br/>@Afail Dynamic Exit Parent=@wait %va={@trigger me/[setq(7,u(DXNEW,u(XNEW,%L)))][setq(8,u(DYNEW,u(YNEW,%L)))][setq(9,u(DZNEW,u(ZNEW,%L)))][switch(0,u(INRANGE,%q7,%q8,%q9),DUMMY,u(PASS_LOCK),DUMMY,comp(get(%va/NUM-%q7.%q8.%q9),),ALLOC_ROOM,TEL_TO_ROOM)]=%#,%L,%N,%q7,%q8,%q9}<br/><br/>&amp;DUMMY Dynamic Exit Parent=@pemit %0=u(FAKE_FAIL,%0,%3,%4,%5);@notify %va<br/><br/>@@ This FAKE_FAIL is seen by admins trying to teleport.<br/><br/>&amp;FAKE_FAIL Dynamic Exit Parent=Sorry, you can't go to (%1,%2,%3).<br/><br/>&amp;ALLOC_ROOM Dynamic Exit Parent=@VN me=first(cat(get(%va/num-%3.%4.%5),get(%va/recycle_list)));&amp;RECYCLE_LIST %va=setdiff(get(%va/RECYCLE_LIST),%vn);@trigger %va/RECYCLE;&amp;num-%3.%4.%5 %va=%vn;&amp;XCOOR %vn=%3;&amp;YCOOR %vn=%4;&amp;ZCOOR %vn=%5;@set %vn=FLOATING;@name %vn=u(GETNAME,%3,%4,%5);@desc %vn=u(GETDESC,%3,%4,%5);@succ %vn=u(GETSUCC,%3,%4,%5);@parent %vn=u(GETPARENT,%3,%4,%5);&amp;DARK_EXITS %vn=u(GETDARKEXITS,%3,%4,%5);&amp;BLOCKED_EXITS %vn=u(GETBLOCKEDEXITS,%3,%4,%5);@pemit %0=switch(hasflag(%0,TERSE),1,,u(Succ,%0));@tel %0=%vn;@pemit/contents %1=%2 [u(Osucc,%0)];@notify %va<br/><br/>&amp;TEL_TO_ROOM Dynamic Exit Parent=@VN me=get(%va/num-%3.%4.%5);@pemit/contents %vn=%2 [u(Odrop,%0)];@pemit %0=switch(hasflag(%0,TERSE),1,,u(Succ,%0));@tel %0=%vn;@pemit/contents %1=%2 [u(Osucc,%0)];@notify %va<br/><br/>@@ Since we need it to run the first time through, notify the Array Object.<br/><br/>@notify Dynamic Array Object<br/><br/>@@ And on each startup. Also attempt to purge rooms.<br/><br/>@Startup Dynamic Array Object=@drain me;@notify me;@wait 1200={@dolist lattr(%!/NUM-*)={@trigger v(##)/Aleave}}<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Generic Attributes<br/>@@ ~~~~~~~~~~~~~~~~~~<br/><br/>@@ These functions are used to grab names, descs, etc from the Array<br/>@@ Object. If nothing is present, they default to something silly.<br/><br/>@@ To customize, modify whatever is in the {} inside the [switch()].<br/>@@ %0, %1 and %2 hold the X, Y, and Z coordinates.<br/><br/>@@ A common thing to do is have an auto-name function, or even an<br/>@@ auto-desc, that uses a map or other form of table instead of the<br/>@@ array storage, and allows a more intuitive customization. If many<br/>@@ rooms will have the same desc, however, the use of parents to <br/>@@ provide the descs will lighten the load on the server.<br/><br/>@@ SHAMELESS PLUG: See the Dynamic Space Mapping Module add on!<br/><br/>&amp;GETNAME Dynamic Exit Parent=[setq(1,get(%va/NAME-%0.%1.%2))][switch(%q1,,{Dynamic Room %0 %1 %2},%q1)]<br/><br/>&amp;GETDESC Dynamic Exit Parent=[setq(1,get(%va/DESC-%0.%1.%2))][switch(%q1,,{Default description.},%q1)]<br/><br/>&amp;GETSUCC Dynamic Exit Parent=[setq(1,get(%va/SUCC-%0.%1.%2))][switch(%q1,,{},%q1)]<br/><br/>&amp;GETPARENT Dynamic Exit Parent=[setq(1,get(%va/PARENT-%0.%1.%2))][switch(%q1,,v(ROOM_PARENT),%q1)]<br/><br/>&amp;GETDARKEXITS Dynamic Exit Parent=[setq(1,get(%va/DARK_EXITS-%0.%1.%2))][switch(%q1,,{},%q1)]<br/><br/>&amp;GETBLOCKEDEXITS Dynamic Exit Parent=[setq(1,get(%va/BLOCKED_EXITS-%0.%1.%2))][switch(%q1,,{},%q1)]<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ Cleanup<br/>@@ ~~~~~~~<br/>@@ Set these to point to somewhere Safe and Inaccessable. You DON'T<br/>@@ want people screwing with these. Do NOT put the Array Object inside<br/>@@ anything that will do @digging.<br/><br/>@tel Dynamic Room Parent=me<br/>@tel Dynamic Exit Parent=me<br/>@tel Dynamic Array Object=me<br/><br/>@@ If you aren't planning to open an exit from 0,0,0, or fix it manually, <br/>@@ make sure you link or fix SOMEWHERE in the Dynamic Space, or it will<br/>@@ all vanish when you leave it. For safety, you might want to uncomment<br/>@@ the following line:<br/><br/>@aleave here=@@<br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/><br/>@pemit me=Script Complete at [time()]<br/><br/>@@ -----8&lt;----CUT HERE----8&lt;--------8&lt;--------8&lt;--------8&lt;--------8&lt;----<br/><br/><br/>@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br/>@@ HISTORY<br/><br/>@@ 2.8<br/>@@  - Changed exit locks to me&amp;!me from #0<br/>@@	- Made dimension-locks easier to add<br/>@@	- Lots of internal reorganizations of comments and config stuff<br/>@@	- Rewrote the whole damn exit-display stuff<br/>@@	- Conversion to TinyMUSH 2.2isms (NOT COMPLETE!)<br/><br/>@@ 2.7p2<br/>@@	- Exit-display patch retrofit from 2.8<br/>@@ 2.7p1<br/>@@	- DE_FILTER buglet (hides all owned local exits) fixed<br/>@@ 2.7<br/>@@	- "Null rooms" added, which allow things like mazes or<br/>@@	  impassable terrain (or terrain passable only by certain<br/>@@	  types of creatures).<br/>@@	- use of %va, setq() and r() to minimize DB accesses<br/>@@	  (although that could doubtless be improved further)<br/>@@	- telto &lt;x&gt; &lt;y&gt; &lt;z&gt; admin command added<br/>@@	- hide/show/block/open exit commands actually error check<br/>@@	  their arguments now. Oooooh. Ooooh. :)<br/>@@	- border exits (for areas with limits) automagically hidden, <br/>@@	  if desired<br/><br/>@@ 2.6<br/>@@ <br/>@@ 	- Descs added to exits (semi-transparency)<br/>@@	- Patched some silly bugs in the block/hide code<br/>@@	- Rooms now wipe attributes/parent upon recycling<br/><br/>@@ 2.5<br/>@@   	- Startup purge of misplaced rooms added<br/>@@   	- Converted to MPP format<br/>@@   	- Room Parent created HALTED for safety<br/>@@   	- Added blocked and darkened exits (doc'd in header)<br/>@@   	- Patched DE_FILTER to handle non-dynamic exits properly<br/> <br/>@@ 2.4<br/>@@	- Sempahores added - slightly slower but MUCH more secure<br/>@@	- Internal allocation error protection<br/>@@	- Improved/added commenting all over the code<br/>@@	- SUCC/OSUCC/ODROP/FAIL messages redone, pros and cons<br/>@@	- Some internals changed to speed up the code<br/>@@	- Optional Map Module<br/><br/>@@ 2.3<br/>@@	- Problem with room allocation patched. (Afail)<br/>@@	- Room recycling loophole fixed. (Aleave)<br/>@@	- Various typos fixed and some small code bits enhanced.<br/>@@	- A few new comments.<br/><br/>@@ 2.2p1<br/>@@	- Problem with room allocation patched. (Afail)<br/>@@	- Room recycling loophole fixed. (Aleave)<br/>@@ 2.2<br/>@@	- Third dimension (Z) added.<br/>@@	- "Locks" on parent exits can restrict travel.<br/>@@	- Limits can now wrap in X, Y or Z.<br/>@@	- The initial room is set FLOATING.<br/>@@	- Parent exits are linked to something (security).<br/><br/>@@ 2.1<br/>@@	- Limits can now wrap in X or Y.<br/>@@	- The initial room is set FLOATING<br/>@@	- Parent exits are linked to something (security)<br/><br/><br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>