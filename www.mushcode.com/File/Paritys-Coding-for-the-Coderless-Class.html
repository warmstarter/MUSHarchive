<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Parity&#39;s &quot;Coding for the Coderless&quot; Class</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Paritys-Coding-for-the-Coderless-Class.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Paritys-Coding-for-the-Coderless-Class.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Paritys-Coding-for-the-Coderless-Class.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Paritys-Coding-for-the-Coderless-Class.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Paritys-Coding-for-the-Coderless-Class.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Paritys-Coding-for-the-Coderless-Class.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Softcode.html">Softcode</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Paritys-Coding-for-the-Coderless-Class.html#">Parity&#39;s &quot;Coding for the Coderless&quot; Class</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Parity&#39;s &quot;Coding for the Coderless&quot; Class
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p></p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <span>
                    <a href="../Author/Parity@OGR.html">Parity</a>@<a href="../Source/OGR.html">OGR</a>
                </span>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Softcode.html">Softcode</a>
        </div>


            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/add.html" class="function">add&#40;&#41;</a>,
                        <a href="../Function/and.html" class="function">and&#40;&#41;</a>,
                        <a href="../Function/cat.html" class="function">cat&#40;&#41;</a>,
                        <a href="../Function/center.html" class="function">center&#40;&#41;</a>,
                        <a href="../Function/div.html" class="function">div&#40;&#41;</a>,
                        <a href="../Function/first.html" class="function">first&#40;&#41;</a>,
                        <a href="../Function/force.html" class="function">force&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/get_eval.html" class="function">get_eval&#40;&#41;</a>,
                        <a href="../Function/gt.html" class="function">gt&#40;&#41;</a>,
                        <a href="../Function/gte.html" class="function">gte&#40;&#41;</a>,
                        <a href="../Function/hasflag.html" class="function">hasflag&#40;&#41;</a>,
                        <a href="../Function/idle.html" class="function">idle&#40;&#41;</a>,
                        <a href="../Function/ifelse.html" class="function">ifelse&#40;&#41;</a>,
                        <a href="../Function/isdbref.html" class="function">isdbref&#40;&#41;</a>,
                        <a href="../Function/isnum.html" class="function">isnum&#40;&#41;</a>,
                        <a href="../Function/iter.html" class="function">iter&#40;&#41;</a>,
                        <a href="../Function/lit.html" class="function">lit&#40;&#41;</a>,
                        <a href="../Function/ljust.html" class="function">ljust&#40;&#41;</a>,
                        <a href="../Function/loc.html" class="function">loc&#40;&#41;</a>,
                        <a href="../Function/lt.html" class="function">lt&#40;&#41;</a>,
                        <a href="../Function/lwho.html" class="function">lwho&#40;&#41;</a>,
                        <a href="../Function/match.html" class="function">match&#40;&#41;</a>,
                        <a href="../Function/mod.html" class="function">mod&#40;&#41;</a>,
                        <a href="../Function/mudname.html" class="function">mudname&#40;&#41;</a>,
                        <a href="../Function/mul.html" class="function">mul&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/num.html" class="function">num&#40;&#41;</a>,
                        <a href="../Function/objeval.html" class="function">objeval&#40;&#41;</a>,
                        <a href="../Function/or.html" class="function">or&#40;&#41;</a>,
                        <a href="../Function/parent.html" class="function">parent&#40;&#41;</a>,
                        <a href="../Function/parse.html" class="function">parse&#40;&#41;</a>,
                        <a href="../Function/pmatch.html" class="function">pmatch&#40;&#41;</a>,
                        <a href="../Function/rand.html" class="function">rand&#40;&#41;</a>,
                        <a href="../Function/repeat.html" class="function">repeat&#40;&#41;</a>,
                        <a href="../Function/rest.html" class="function">rest&#40;&#41;</a>,
                        <a href="../Function/rjust.html" class="function">rjust&#40;&#41;</a>,
                        <a href="../Function/room.html" class="function">room&#40;&#41;</a>,
                        <a href="../Function/setq.html" class="function">setq&#40;&#41;</a>,
                        <a href="../Function/sub.html" class="function">sub&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/time.html" class="function">time&#40;&#41;</a>,
                        <a href="../Function/type.html" class="function">type&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>,
                        <a href="../Function/words.html" class="function">words&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/TinyMUSH.html" class="server">TinyMUSH</a>.
            </div>

    </div>
</div>


<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Parity&#39;s &quot;Coding for the Coderless&quot; Class
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Paritys-Coding-for-the-Coderless-Class.html#">
                    <i class="icon-resize-full"></i> Select Content
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        Â©2004 Parity@OGR. You may copy and redistribute this document provided that it remains complete, with credits intact, and is used only for non-profit purposes.<br/>******<br/>Coding for the Coderless<br/><br/>Attendees:<br/>Fyrn | Indi | Iuz | Jayanti | Lady Rosalynne | Odin | Parity | Sabbath | Siobhan | Trek | Virgo | Whirlaway<br/><br/>Parity says, "Good morning, class. I'm going to ask you all to keep the off-topic chatter to a minimum from this point on, and, yes, I want you to raise your hand when you have a question - ie, any -short- pose indicating you want to speak."<br/><br/>Odin enters the room through the double doors, which swing closed behind it.<br/><br/>Odin has arrived.<br/><br/>Parity says, "Okay, this class is particularly focused on the needs of someone without much prior experience in coding just about everything on a MUSH."<br/><br/>Parity says, "The first thing I'm going to say, is -"<br/><br/>Jayanti enters the room through the double doors, which swing closed behind it.<br/><br/>Jayanti has arrived.<br/><br/>Parity says, "-Don't- write your own +finger, +who, etc, even though I'm using such things as examples. It's a waste of time. There's the sandbox globals project, and if you don't like that system, there's other free code available on the web."<br/><br/>Parity says, "However, you're going to need to understand them. So. I'd like everyone to look at (exa) player commands."<br/><br/>    Player Commands(#3474V)<br/>    Type: THING Flags: VISUAL<br/>    Owner: Parity Key: Parity(#384PXcF) Pennies: 1<br/>    Zone: *NOTHING*<br/>    Parent: Player Functions(#3472)<br/>    Powers:<br/>    Created: Tue Aug 03 12:38:29.487797 2004<br/>    Modified: Wed Aug 11 18:59:38.809211 2004<br/>    PLAYER-CMD: $+player *:@pemit %#=[setq(0,num(*%0))][switch(and(isdbref(%q0),match(type(%q0),player)),1,{'[name(%q0)]' is the player identified by '%0'.},{'%0' is not a player.})]<br/>    FINGER-CMD: $+finger *:@pemit %#=[setq(0,num(*%0))][switch(and(isdbref(%q0),match(type(%q0),player)),1,{ [center(&lt;%b[name(%q0)]%b&gt;,76,-)]%rName: [name(%q0)]%rSex: [switch(get(%q0/sex),M*,Male,F*,Female,Other)]%rIdle: [idle(%q0)] seconds%r[repeat(-,76)] },{'%0' is not a player.})]<br/>    WHO-CMD: $+who:@pemit %#=[setq(0,objeval(%#,lwho()))][center(%b[mudname()]%b,76,-)][iter(%q0,%r[ljust(name(##),15)][rjust(u(idle-fn,idle(##)),5)][repeat(.,20)][rjust(switch(loc(##),#-1,Unfindable,name(loc(##))),36,.)])]%r[center(%b[words(%q0)]%bPlayers,76,-)]<br/>    FLOATING-LOCK: [or(hasflag(%#,floating),hasflag(%#,wizard))]<br/>    UseLock: FLOATING-LOCK/1<br/>    Contents:<br/>    Player Functions(#3472)<br/>    No exits.<br/>    Home: Parity's Circuitry Room(#1071RJ)<br/>    Location: Lecture Room(#14RJs)<br/><br/>Parity says, "The first attribute on there is 'player-cmd', which is a typical $-command. I believe you all know what $-commands are, if not, now would be a good time to wave panickedly."<br/><br/>Indi fulfulls her destiny, and raises her hand.<br/><br/>Fulfills*<br/><br/>Parity okays, "Briefly, a $-command is an attribute on an object that specifies a command. In this case, the first part of the attribute's value, '$+player *:' says 'The command I define is '+player' followed by a space and one argument'. Does that help Indi, or did you have more of a question?<br/><br/>Indi says, "Answered. =)"<br/><br/>Parity says, "Everyone should, right now, '@set me=floating'."<br/><br/>Parity says, "We'll get to the why of that later, but I locked this object so that that's what you need to do. :)"<br/><br/>Parity says, "Now, you can '+player parity' and get one thing, and '+player flyingpurplepeopleeater' and get another."<br/><br/>Parity says, "Not so exciting, I know."<br/><br/>Parity says, "But, almost every command you make will need to figure out that the target is or is not a valid player, and we use some helpful techniques along the way. The first thing is the command, of course, is '@pemit %#='"<br/><br/>Parity says, "%# is the player (or other object) who -invoked the command-."<br/><br/>Parity says, "OKay. More interesting is setq() ... how many people here know setq()?"<br/><br/>Indi does not.<br/><br/>Siobhan shakes her head.<br/><br/>Trek says, "I know /of/ it... :P"<br/><br/>Parity says, "setq() is how you store values temporarily, so you can use them repeatedly."<br/><br/>Jayanti does not either.<br/><br/>Parity says, "This is particularly useful for, say, calculating 'hours' because you don't want to type a complicated expression every time. So, if you type, 'setq(0,foobar)', then further along in the attribute you type '', '' will be replaced with 'foobar'."<br/><br/>Fyrn says, "Sweet!"<br/><br/>Parity erms.<br/><br/>Parity missed an escape there.<br/><br/>Trek thinks someone forgot to use escape characters. :P<br/><br/>Parity says, "This is particularly useful for, say, calculating 'hours' because you don't want to type a complicated expression every time. So, if you type, 'setq(0,foobar)', then further along in the attribute you type '%q0', '%q0' will be replaced with 'foobar'."<br/><br/>Indi says, "That's cool."<br/><br/>Jayanti raises her hand.<br/><br/>Parity also lost the hours expression, 'setq(0,div(&lt;seconds&gt;,3600))' ... %q0 for hours.<br/><br/>Parity says, "Yes, Jayanti?"<br/><br/>Jayanti says, "nevermind :) That was the question."<br/><br/>Parity ahs.<br/><br/>Parity says, "I changed my example halfway. ):"<br/><br/>Parity says, "Anyway. . is the value of the first argument in a command."<br/><br/>Parity says, "In the case of +player it's everything after '+player'. (Technically, everything after the space after +player)."<br/><br/>Parity says, "So if you type '+player this sentence is false' then will be 'this sentence is false'."<br/><br/>Parity says, "num(*this sentence is false), of course, will return #-1, because there's no such player."<br/><br/>Siobhan says, "And num searches for the dbref# of a player, right?"<br/><br/>Siobhan says, "Oops."<br/><br/>Parity says, "num() returns a dbref of an object... * means check for players &amp; aliases, as opposed to checking for things-near-the-evaluating-object."<br/><br/>Fyrn sighs and leaves.<br/><br/>Parity says, "So, num(*siobhan) will return siobhan's dbref."<br/><br/>Trek raises a metaphorical hand.<br/><br/>Parity says, "While we're in the same room with her, so will num(siobhan) - but globals are usually in the Master Room, nowhere near the player-in-question."<br/><br/>Parity says, "So ... setq(0,num(*%0)) ... store in q0 the dbref of the player named whatever-was-stored in %0 - which came from the person typing '+player parity' or whatever."<br/><br/>Parity says, "Everybody with me so far?"<br/><br/>Indi is. =)<br/><br/>Siobhan nodnods.<br/><br/>Jayanti thinks she is ;)<br/><br/>Virgo says, "Sort of."<br/><br/>Trek ayups.<br/><br/>Parity says, "Anybody feeling a little lost may want to try 'think num(trek)', 'think num(flattenedtuba)', 'think num(sparks)', and 'think num(*sparks)' ..."<br/><br/>Virgo shakes her head and raises her hand.<br/><br/>Parity says, "So, %q0 is now either '#-1' or a dbref of a player, and the next part is where q-values become happy happening things."<br/><br/>Parity nods, "Yes virgo?"<br/><br/>Virgo says, "Is the comma in the setq bit just something like an 'and', as in an addition to? A list?"<br/><br/>Siobhan also puts up her hand after Virgo.<br/><br/>Parity ohs, "In a function, the comma separates arguments. setq() takes two arguments, one before the comma, one after. switch(), which we're comming up on, takes as many arguments as you can throw at it, all seperated by commas."<br/><br/>Parity says, "Yes, Siobhan."<br/><br/>Parity says, "You can follow up if you need to Virgo."<br/><br/>Siobhan says, "So I understand that '%q0' is temporary... it's just set temporarily while that command is being executed? It doesn't actually store it physically on an object?"<br/><br/>Parity says, "Right."<br/><br/>Siobhan says, "Gotcha. :)"<br/><br/>Parity says, "The way I'd say it, being technical, is exists during the current evaluation."<br/><br/>Indi raises a hand.<br/><br/>Parity says, "Yes, Indi?"<br/><br/>Indi says, "Oh, never mind. I reread what you said. Now I get it. =)"<br/><br/>Virgo says, "Sorry, dog distraction. I'm not sure I understand the term argument in relation to this."<br/><br/>Parity says, "Arguments are the values 'given to' a function or command."<br/><br/>Virgo nods. "Okay, got it."<br/><br/>Parity says, "In a command, they're the things after the command name. In a function, they're the things inside the parens ()."<br/><br/>Parity says, "So, going into the next segment, we enter a switch() function and make our q work for us. We want to know, first, that we got a valid dbref, and second, that we got a player."<br/><br/>Parity says, "So, 'switch(and(isdbref(%q0),match(type(%q0),player)), ... )' is what I'm talking about."<br/><br/>Parity says, " and() just returns 1 if -both- things are true (which in computer term means a non-zero number); isdbref() returns 1 if the argument is a valid dbref."<br/><br/>Parity says, "match is a bit tricky, but in this case, we're using it as a case-insensitive 'are these strings equal'."<br/><br/>Parity says, "The actual value of type(*parity) would be 'PLAYER'"<br/><br/>Parity says, "So you can think that we're asking, 'Are isdbref(num(*Parity)) AND match(type(num(*Parity),PLAYER) both true?'"<br/><br/>Parity says, "Having asked that, switch() lets us make a decision based on the answer."<br/><br/>Parity says, "switch() is your friend. ;) switch() is a lot like ifelse(), if that helps."<br/><br/>Parity says, "In this case, it's -exactly- like ifelse()."<br/><br/>Jayanti hehs. Uhhh *hand*<br/><br/>Parity says, "However, switch() can do a whole -bunch- of if's at once if you need to, and exists on every codebase I know."<br/><br/>Parity says, "Yes Jayanti?"<br/><br/>Jayanti says, "Well, may be jumping the gun here, but what are the differences between switch() and @switch?"<br/><br/>Parity says, "switch() is a function, and @switch is a command."<br/><br/>Indi raises a hand.<br/><br/>Parity says, "So, you can either, '@pemit %#=switch(condition,1,true,false)' -or- '@switch condition=1,@pemit %#=true,@pemit %#=false'"<br/><br/>Jayanti nods. ok<br/><br/>Parity says, "Generally speaking, switch() is preferable, but there are exceptions - ie, '@switch &lt;condition&gt;=1,@remit %#=Something happens.,@pemit %#=You can't do that!'"<br/><br/>Parity says, "Now you're using two different commands in that example, hence, @switch."<br/><br/>Jayanti says, "cool"<br/><br/>Parity says, "Yes, Indi?"<br/><br/>Indi says, "The differences between a command and a function are, basically, commands are automatic and simple whereas functions can include a number of commands? Like, the difference between buying peanut butter and making it?"<br/><br/>Indi says, "It's the little things that mess me up."<br/><br/>Parity ponders this one for a moment.<br/><br/>Parity says, "A command is something you can type, and have it do something. '+who' is a command. '@emit' is a command."<br/><br/>Parity says, "A function is something that replaces itself with another string."<br/><br/>Parity says, "That used to be 100% true, and for now we'll pretend it is. ;)"<br/><br/>Virgo holds up her hand for after Indi's question is answered.<br/><br/>Parity says, "So, a command can do anything. Create objects, destroy them, cause the database to be backed up..."<br/><br/>Indi likes to use comparisons. "So, commands are like opening a door when functions are like.. the stuff inside the handle (like locks) that are interchangeable and make it work?"<br/><br/>Parity says, "A function can only replace itself with a string. Okay, setq() has a 'side effect' of setting %q0... but it's mostly true."<br/><br/>Trek inserts a remark, if that's okay?<br/><br/>Parity says, "Sure, Trek."<br/><br/>Parity doesn't have a good comparison ready to hand...<br/><br/>Parity says, "If I make one up on the spot, I'd say functions are like laws of nature and commands are like actions in the world, but I can also poke big holes in that anology. :)"<br/><br/>Trek says, "Functions replace themselves with strings--putting commands inside of them doesn't work, hence why there's an @switch."<br/><br/>Parity ahs, "Good point."<br/><br/>Parity says, "Functions go inside commands, -never- the other way around."<br/><br/>Indi nods, "I think I got it."<br/><br/>Trek says, "Indi's analogy actually seems pretty good to me, but I'm no more than an acolyte with MUSHcode. :P"<br/><br/>Parity says, "It is technically possible to reverse that, but I encourage all good mushdieties to disable the force() function, as it is an abberation of nature and a security hole. ;)"<br/><br/>Parity says, "Here's a point... you can 'say' any function."<br/><br/>Parity says, "like, 'say time()' for example."<br/><br/>Parity says, "Commands cannot be said, they have to be 'done' ... they're the first thing you type if you enter them directly."<br/><br/>Parity says, "Virgo, still have a question?"<br/><br/>Indi says, "Ah, gotcha. That helped cement it. =)"<br/><br/>Virgo says, "With switch(), do the last two arguments always have to be the true and false parameter?"<br/><br/>Parity moves forward in any case, although we may have more questions forthcoming, there it is... , "So, switch() here, briefly, works like, 'switch(something,checkthis,dothis,checkthat,dothat,defaultaction)'<br/><br/>Parity says, "So the -last- argument is the 'false' parameter."<br/><br/>Parity says, "However, you can have - and this will actually show a last argument that is 'true' - and often we see this - switch(rand(3),0,nothing,1,snake-eyes,2,a winner!)"<br/><br/>Parity says, "SO this says, 'if 0, then 'nothing', if '1', then 'snake-eyes', if 2 then 'a-winner' ... since we've covered every possibility, we don't need an 'else' or 'false' condition."<br/><br/>Jayanti grins. Uhh, question.<br/><br/>Parity nods, "Yes, Jayanti?"<br/><br/>Jayanti says, "That breaks down to (pick a random number from 0-3, blah blah blah, if it is 2 or 3 it is a winner?"<br/><br/>Parity says, "Sorry, no, pick a number from 0 to 2."<br/><br/>Parity says, "To get what you describe, we want,"<br/><br/>Parity says, "... switch(rand(4),0,nothing,1,snake-eyes,a winner!)"<br/><br/>Parity says, "rand() returns a number between zero and the argument minus one."<br/><br/>Jayanti says, "Ok...little confusing, cleared up now ;)"<br/><br/>Parity says, "And the rand(4) example goes back to using an 'else' at the end. 'if 0 ... if 1 ... else ...'"<br/><br/>Jayanti nods. Got it.<br/><br/>Parity says, "Anymore questions? It's okay. switch() is -important-."<br/><br/>Siobhan -thinks- she's got it.<br/><br/>Parity says, "A lot of these things I brush over. You can look up num(), rand(), whatever, in the help files. switch() and setq() are tricky. ;)"<br/><br/>Virgo raises her hand... again.<br/><br/>Jayanti noddles. Was just confused as to whether it was a default on switch after 2 or if it ended there ;)<br/><br/>Parity says, "Yes, Virgo?"<br/><br/>Virgo says, "Okay, how does it know if the argument is for a true or false?"<br/><br/>Parity mmms. "switch() doesn't care about true or false, really. It cares about 'does this match'.<br/><br/>Parity says, "It happens that the boolean (meaning 'returns true or false') functions return '0' or '1'."<br/><br/>Parity says, "So, we can switch(somethingboolean(),1,this is a true case,0,this is a false case)"<br/><br/>Parity says, "Does that answer the question, or did you mean something else?"<br/><br/>Virgo says, "Oh, so you need the 0 and 1 in there for it to differentiate?"<br/><br/>Parity nods.<br/><br/>Virgo says, "Gotcha."<br/><br/>Parity says, "ifelse(somethingboolean(),true case,false case) ... switch(somethingboolean(),1,true case,0,false case) ..."<br/><br/>Parity says, "Although, I'd encourage you to write it, 'switch(somethingboolean(),1,true case,false case)' ... subtle difference there being I'm using a default instead of explicitly checking for zero."<br/><br/>Parity says, "Generally speaking, you want all your failures to fall into the 'default' cases so that unexpected errors get handled."<br/><br/>Virgo nodnods. "Makes sense."<br/><br/>Parity nods. "OKay."<br/><br/>Parity says, "So, in our example, we have, for the '1' case, "'Coding for the Coderless' is the player identified by ''.""<br/><br/>Parity says, "I don't think the string itself is anything exciting, though I will mention I almost always use name() rather than values passed in as arguments... it ensures you get the capitalization the player with the name uses."<br/><br/>Parity says, "The default case is even more dull, only printing out what was passed in."<br/><br/>Parity says, "More interesting, is that wrapped it in {}..."<br/><br/>Parity says, "This is utterly unnecessary, but also harmless, and a good habit."<br/><br/>Parity says, "I shall now do the obnoxious teachery thing of asking the class, ahem, 'Can anyone tell me why?'"<br/><br/>Siobhan shakes her head.<br/><br/>Whirlaway can guess?<br/><br/>Parity says, "Yes, Whirlaway?"<br/><br/>Whirlaway says, "Because if what you want to print out has commas, it confuses the switch()? I always get my switch()es wrong and have to go back and escape my commas."<br/><br/>Jayanti raises her hand :)<br/><br/>Indi raises her hand.<br/><br/>Parity nods! "Three cheers for Whirlaway. ;) If I changed it to output like: 'Whirlaway,' a player identified by 'whirlaway'. ... then we'd have a problem. {} will group stuff as a single string so this doesn't happen. Also useful in @switch.<br/><br/>Parity says, "Yes, Jayanti?"<br/><br/>Jayanti says, "ers and was lagged I think. didn't see Whirlaway's answer until I had typed :) Came up in scroll."<br/><br/>Parity ahs. "Okay. ;)"<br/><br/>Parity says, "Indi?"<br/><br/>Indi says, "When you guys keep talking about 'escaping' your commas, uh, what does that mean?"<br/><br/>Parity says, "It means prefixing them with a % or a \"<br/><br/>Indi says, "Which makes them..?"<br/><br/>Parity says, "It makes them no longer have special significance."<br/><br/>Parity says, "You may have noticed that you can't say % ..."<br/><br/>Parity says, "You have to say %% to say % ..."<br/><br/>Indi nods. "Got it."<br/><br/>Parity says, "That's the idea of escaping. '%' has special meaning, but by putting another in front of it we 'cancel' the special meaning. Similarly, %[ just about everywhere."<br/><br/>Parity says, "Commas don't -normally- need escaping, not just to talk, but they do in functions."<br/><br/>Siobhan puts up her hand.<br/><br/>Parity says, "Yes, Siobhan?"<br/><br/>Siobhan says, "So, if you want the function (through the command) to spit out a string, you'd put the curly brackets in, right? Thereby negating the need to use next to special characters?"<br/><br/>Parity says, "Mmm... the curly braces {} only help with commas. [] and % would still have their effect."<br/><br/>Siobhan says, "Okay. That makes sense. :)"<br/><br/>Parity says, "If you truly want -everything- to be treated literally, you can (hopefully, on most codebases) use lit()."<br/><br/>Parity says, "I consider lit() to new to trust, but then, I consider ifelse() to new to trust... ;)"<br/><br/>Siobhan nods. :)<br/><br/>Parity says, "So, if you're not planning on running on a tinymush 2.x or a tinymux 1.x, you're probably safe. I'm not as up with penn versions."<br/><br/>Parity says, "Penn's versions aren't so dramatic since it's got a pretty normal free-software-project continuous-tweaking life."<br/><br/>Whirlaway says, "Penn 1.7.4 has lit()"<br/><br/>Parity nods, "Thanks W.<br/><br/>Parity says, "Okay, that leaves unanalyzed only the []..."<br/><br/>Parity says, "The square brackets are used to force a command evaluation in the midst of a string."<br/><br/>Parity says, "So, they're somewhat computationally expensive, and for that reason among others - like squishing spaces - you want to be careful not to use more than you need, but to use all that you need."<br/><br/>Parity says, "Technically, I used one more than I need."<br/><br/>Parity says, "Immediately after the equals sign, a function would be expected, so I don't have to specially signal evaluation for setq()."<br/><br/>Jayanti *hand up*<br/><br/>Parity says, "It's pretty much true that whenever you -begin an argument- you can have a function there, that's where functions are expected. Anywhere else, you need to signal that you have a function."<br/><br/>Parity says, "Yes Jayanti?"<br/><br/>Jayanti says, "can you show the command again? There are several in the scrollback and I'm not seeing the one with brackets. :)"<br/><br/>Parity is referring to the whole command, "One moment."<br/><br/>Parity says, "$+player *:@pemit %#=[setq(0,num(*%0))][switch(and(isdbref(%q0),match(type(%q0),player)),1,{'[name(%q0)]' is the player identified by '%0'.},{'%0' is not a player.})]"<br/><br/>Indi shivers. Scary.<br/><br/>Jayanti says, "ohh cool. I totally missed that one :)"<br/><br/>Parity says, "That's the whole command on the 'player commands' object."<br/><br/>Parity says, "You can 'exa player commands/player-cmd' any time you like."<br/><br/>Jayanti says, "oh, sorry sorry"<br/><br/>Parity says, "sokay. Gets it into the log for Sio. :)"<br/><br/>Siobhan grins.<br/><br/>Parity says, "Okay. So, I didn't -have- to wrap setq() because it was at the beginning. I -did- have to wrap switch() because it followed setq and was part of the same single-string argument to @pemit."<br/><br/>Parity says, "With those around the switch() the player would literally see, 'switch' and a bunch of other stuff after it."<br/><br/>Sabbath enters the room through the double doors, which swing closed behind her.<br/><br/>Sabbath has arrived.<br/><br/>Parity says, "Generally speaking, if your command does that to you unexpectedly, you didn't match up your parentheses () or square brackets [] somewhere."<br/><br/>Parity says the command once more to put it on your screens.<br/><br/>Parity says, "$+player *:@pemit %#=[setq(0,num(*%0))][switch(and(isdbref(%q0),match(type(%q0),player)),1,{'[name(%q0)]' is the player identified by '%0'.},{'%0' is not a player.})]"<br/><br/>Parity says, "Now I think we've pretty much torn this poor piece of code to shreds, but just in case, are there any remaining questions?"<br/><br/>Indi says, "Explain it all again? (Just kidding)."<br/><br/>Parity chuckles, and summarizes quickly, anyway, to get back to the big picture, "When some types '+player &lt;something&gt;', look up the num() of &lt;something&gt;, store in q0. Check q0 for being a dbref and for being a player. Switch on the boolean result of that check. If it -is- a valid player dbref, then print out a message saying so (with name()), otherwise print out an informative error message.<br/><br/>Parity says, "The -reason- for this as our first example, is this is what we call 'boilerplate' code."<br/><br/>Parity says, "You'll have a thousand commands that look an awful lot like this but vary in the details that they @pemit."<br/><br/>Parity says, "But when you have a +background command or a +charsheet command, the first thing you're going to look for is, 'is this argument a valid player?'"<br/><br/>Parity whews. "Okay. I'm going to take five minutes or so break. ;)<br/><br/>Whirlaway raises a hand.<br/><br/>Parity says, "Ah, Whirlaway?"<br/><br/>Parity answers question before break. ;)<br/><br/>Whirlaway says, "I've been using pmatch() to check if something's a valid player. Is using isdbref() and match(type(),player) better?"<br/><br/>Parity says, "It depends on what you want, and how portable you want to be. For your own mu*s code, portability may not be an issue if you love your codebase."<br/><br/>Lady Rosalynne unidles jsut in time for the break she sees. &lt;grin&gt;<br/><br/>Parity says, "However, I don't like the partial-matching, personally... it's too often the cause of mistakes. ;)"<br/><br/>Parity says, "But since it's hardcoded into page and that's the -worst- place for it... well, putting the same partial matching everywhere else might be fine, especially if you love it for being able to, say, match rosalynne when referring to lady rosalynne."<br/><br/>Parity says, "Of course, some mu*bases are supporting multiple aliases now. I prefer strict-matching and multiple-aliases, but when as diety of your own mu* you can do what -you- prefer. ;)"<br/><br/>Parity says, "Okay, feel free to exa the other attributes on 'player commands'."<br/><br/>Parity says, "We'll not be going through those in such excrutiating detail, of course. ;)"<br/><br/>Parity is going to take that few minutes break now. Will be back.<br/><br/>Parity says, "Okay."<br/><br/>Parity says, "A brief word more about setq(), btw. You can have q's from 0-9. setq(1,something) will mean now evaluates to 'something', and so on."<br/><br/>Parity says, "It's sort of obvious to me that that would be the case, but then, I've been working with setq() for years. ;)"<br/><br/>Parity says, "Now. Finger-cmd..."<br/><br/>Parity says, "$+finger *:@pemit %#=[setq(0,num(*%0))][switch(and(isdbref(%q0),match(type(%q0),player)),1,{ [center(&lt;%b[name(%q0)]%b&gt;,76,-)]%rName: [name(%q0)]%rSex: [switch(get(%q0/sex),M*,Male,F*,Female,Other)]%rIdle: [idle(%q0)] seconds%r[repeat(-,76)] },{'%0' is not a player.})]"<br/><br/>Parity says, "That's the value of the finger-cmd attribute. Similarly to the other one, but the '1' case in the switch has gotten more convoluted."<br/><br/>Parity says, "There's not a lot to say about this one that we didn't say about the other, it's really just a way of showing how changing only the switch() turns a stupid-example into an almost-useful function."<br/><br/>Parity says, "It does have a 'nested' switch, which is to say, a switch inside of another switch. You can do that. :)"<br/><br/>Parity says, "It does -not- check people's &amp;info, &amp;mu-addy, etc., because, as an ordinary player, I can't see those, and so my object can't either."<br/><br/>Parity says, "Now, when you, as a wizard on your own world write a finger you can grab all kinds of attributes, but you need to remember, for your -object- to have that power it must be set 'inherit'."<br/><br/>Parity says, "If you don't do that, your command will fail when an ordinary player runs it."<br/><br/>Parity says, "It also means, of course, to be careful with any code you put on an object set inherit."<br/><br/>Parity thinks that's really about it, unless there's questions?<br/><br/>Siobhan is good. :)<br/><br/>Indi doesn't have any, no.<br/><br/>Parity okays.<br/><br/>Parity says, ""$+who:@pemit %#=[setq(0,objeval(%#,lwho()))][center(%b[mudname()]%b,76,-)][iter(%q0,%r[ljust(name(##),15)][rjust(u(idle-fn,idle(##)),5)][repeat(.,20)][rjust(switch(loc(##),#-1,Unfindable,name(loc(##))),36,.)])]%r[center(%b[words(%q0)]%bPlayers,76,-)]"<br/><br/>Parity says, "Now we get more excitement. ;)"<br/><br/>Parity says, "Kind of silly on a player object, but i stuck objeval() in here anyway."<br/><br/>Parity says, "objeval() evaluates an expression (a function, a string with or without substitutions, etc.) from the point of view of the first argument."<br/><br/>Parity says, "In this case, the invoking player."<br/><br/>Parity says, "So, objeval(%#,lwho()) will get the list of players logged in, -as the invoker- of +who would see it. Meaning, specifically, they don't see dark wizards."<br/><br/>Parity says, "So, objeval() is basically useful when you want to limit powers in one part of a command, but have wizard powers in another part of the command (like getting various attributes, &amp;position or &amp;race or whatever.)"<br/><br/>Parity says, "lwho() is the classic example, but loc() is also a common one, since wizards can ignore 'unfindable' flags but players can't."<br/><br/>Parity says, "Any questions on objeval?"<br/><br/>Parity didn't objeval() around loc() in this example, but should have, and would on a real one.<br/><br/>Siobhan has no questions.<br/><br/>Jayanti either.<br/><br/>Indi nopes.<br/><br/>Parity says, "OKay. More formatting commands, and then, 'iter()' .."<br/><br/>Parity says, "iter() is the most basic and common loop in mushcoding."<br/><br/>Parity says, "In this case, we set %q0 to a list of player dbrefs, seperated by spaces, because that's what lwho() returns."<br/><br/>Parity says, "So, iter(%q0,##) would simply print out that list."<br/><br/>Parity says, "And iter(%q0,name(##)) would print out a list of names, seperated by spaces, that belong to the dbrefs in that list."<br/><br/>Parity says, "We went a little further than that here. ;)"<br/><br/>Parity says, "If you can see through the maze of parentheses and find where the iter() begins, you can see, it's a series of items, most referring to ## in some way. name(##), u(idle-fn,idle(##)), loc(##)..."<br/><br/>Parity says, "Each 'run' of the loop replaces ## with a different dbref."<br/><br/>Parity says, "So, each time we get a line with name, idle time, and either the location or the word unfindable (see the switch -inside- the iter.)"<br/><br/>Parity says, "When looking at stuff like this, it helps to try to trim away the excess, either mentally by looking for the 'key' pieces, or physically, by putting it in your favorite text editor and moving it around, especially putting more spaces in so you can see the pieces."<br/><br/>Parity personally, writes everything in emacs, and then uploads it to the mu*.<br/><br/>Parity says, "When I'm confused by code, I put it in an editor, match up the big chunks blocked of inside of and put them on separate lines, stick spaces or tabs in... and so on."<br/><br/>Parity says, "Of course, then you have to put it back together... but, if you end up doing it a lot, there's a tool out there called 'molitor's mush formatter' (and unformatter) which spaces things out and crunches them together."<br/><br/>Parity says, "I don't use it, but many excellent codewizards out there rely on it daily."<br/><br/>Parity says, "OKay, the u() we'll get to in a moment... any questions on iter()?"<br/><br/>Sabbath shakes her head.<br/><br/>Siobhan is good, she thinks.<br/><br/>Lady Rosalynne raises her hand.<br/><br/>Parity says, "Yes, Lady R?"<br/><br/>Lady Rosalynne says, "Any thing against using parse()? I know iter can do some things that parse cannot, but if both are available, is there a perf?"<br/><br/>Parity says, "Nothing wrong with parse at all."<br/><br/>Parity says, "I actually changed this code -from- parse ;)"<br/><br/>Lady Rosalynne says, "so, interchangeable?"<br/><br/>Parity says, "I just think iter() is an easier mnemonic."<br/><br/>Parity nods.<br/><br/>Parity says, "Pretty much."<br/><br/>Lady Rosalynne nods and thanks.<br/><br/>Parity thinks for a moment, "I'd vaguely recommend iter() over parse() in that I see iter() in -lots- of code out there and hardly ever parse().<br/><br/>Parity says, "So if one were to vanish from the codebases, I know where I'd put my money."<br/><br/>Lady Rosalynne nods.<br/><br/>Parity says, "But, generally, codebases only grow, so that's not likely."<br/><br/>Parity says, "Okay. If we evaluate 'parent(player commands)' we get a dbref like #3472."<br/><br/>Parity says, "If you exa #3472, you'll see on it an attribute called 'idle-fn'."<br/><br/>    Player Functions(#3472V)<br/>    Type: THING Flags: VISUAL<br/>    Owner: Parity Key: *UNLOCKED* Pennies: 1<br/>    Zone: *NOTHING*<br/>    Powers:<br/>    Created: Thu Aug 05 13:00:01.461707 2004<br/>    Modified: Thu Aug 05 13:00:54.677242 2004<br/>    IDLE-FN: [ifelse(lt(%0,86400),ifelse(lt(%0,3600),ifelse(lt(%0,60),%0s,div(%0,60)m),div(%0,3600) h),div(%0,86400)d)]<br/>    No exits.<br/>    Home: Parity's Circuitry Room(#1071RJ)<br/>    Location: Player Commands(#3474V)<br/><br/>Jayanti shakes her head<br/><br/>Parity says, "no? Oh."<br/><br/>Parity sets it visual!<br/><br/>Parity says, "Sorry!"<br/><br/>Jayanti says, "yay!"<br/><br/>Parity says, "Okay, so. Here's another piece of ancient code of mine. Hm."<br/><br/>Parity says, "s"<br/><br/>Parity says, "First, I have it wrapped in unnecessary ... []"<br/><br/>Parity says, "Then after extolling switch() it's got an ifelse() ... I don't know what I was thinking back then. :)"<br/><br/>Parity says, "Anyway. When we say, back in who-cmd, 'u(idle-fn,idle(##))', what happens - aside from getting the number of seconds a player has been idle - is that the mu* looks for an attribute 'idle-fn' on the current object."<br/><br/>Parity says, "Failing to find it, it looks for such an attribute on the parent."<br/><br/>Parity says, "Then, basically, it acts as if the contents of that attribute were in the place of u(idle-fn) ..."<br/><br/>Parity says, "However, we called idle-fn with an -argument- ..."<br/><br/>Jayanti has a kinda off topic kinda on topic question<br/><br/>Parity says, "That argument becomes '%0' when the contents of idle-fn are evaluated. Similarly, more arguments would become %1, %2 and so on, the same as in $-commands."<br/><br/>Parity says, "Yes, Jayanti?"<br/><br/>Jayanti says, "If it looks on the object first for something and doesnt find it, then on the parent...but finds something that wants to store information or modify information on "me"--where does it modify/store?"<br/><br/>Parity erms. "Don't do that. :)"<br/><br/>Jayanti laughs. Ok<br/><br/>Parity tries to remember, "I went through this upon a time... it was a pain."<br/><br/>Parity says, "you won't want to do that anyway."<br/><br/>Jayanti grins. I'm such a pain. OK :) will accept that answer<br/><br/>Parity says, "When you're creating global system, you want your commands on one object, your functions on another, and your data somewhere else."<br/><br/>Parity says, "Either on a data-object, which I'm fond of, or on a player, which has a lot of good points too."<br/><br/>Jayanti nods<br/><br/>Parity says, "For stuff you create as a normal player to carry on your person, you'll probably not have parents involved anyawy."<br/><br/>Parity says, "The reason for shoving all the functions off onto a parent, is that when your command-object lives in the master room, every time a player types a command, every attribute on every object in the master room is checked..."<br/><br/>Parity says, "Well, until a match is found, of course. But it eats cpu time to check 300 functions..."<br/><br/>Parity says, "A command object in your own inventory has the same issue, of course, but on such a small scale that it's not relevant. And you probably don't have 300 functions on it, you probably have 3. ;)"<br/><br/>Parity okays. "So, back to topic, u() basically evaluates the contents of an attribute, with argument substitution, effectively letting you create your own functions."<br/><br/>Parity says, "And, btw, u() and friend v() are basically like get_eval(me/...) and get(me/...)."<br/><br/>Parity ponders.<br/><br/>Iuz says, "+ritual/eesha"<br/><br/>Parity blinks.<br/><br/>Sabbath has wondered about that.<br/><br/>Iuz says, "Whups :)."<br/><br/>Whirlaway says, "WTF?"<br/><br/>Parity ahems. "Anyway."<br/><br/>Iuz says, "Code command from another MU*. Sorry, been idling to catch this class in my backscroll."<br/><br/>Parity says, "That brings us to floating-lock."<br/><br/>Parity says, "This is the reason I made you all set yourself floating. ;)"<br/><br/>Parity says, "[or(hasflag(%#,floating),hasflag(%#,wizard))]"<br/><br/>Parity says, "Unlike the functions, the are actually necessary here. On some codebases. And don't hurt on others."<br/><br/>Sabbath says, "We had to be set floating?"<br/><br/>Parity says, "So, there they are."<br/><br/>Parity says, "In order to invoke the commands. ;)"<br/><br/>Parity says, "If you @set me=floating, you can use +player and the local-to-this-room +finger and +who."<br/><br/>Jayanti says, "ohhh"<br/><br/>Parity says, "Of course, siobhan was exempt from needing to set floating."<br/><br/>Parity says, "Not that I would have copied a check for royalty-or-wizard and modified it or anything."<br/><br/>Sabbath ahhs.<br/><br/>Parity says, "But now that I think about it... ;) If you wanted to have a bunch of uber-cool-staff-commands, you could put them all on an object like this. Create attribute that evaluates to 1 for people who should have access to staff commands, with a variety of flag checks and boolean functions... and then @lock it up."<br/><br/>Parity says, "In this case, '@lock/uselock player commands=floating-lock/1'"<br/><br/>Sabbath idles for a bit.<br/><br/>Parity says, "Which basically means, 'only evaluate commands on me when floating-lock evaluates to 1'."<br/><br/>Parity says, "It could as easily be floating-lock/yessireebob ..."<br/><br/>Parity says, "But then you'd have to write switches that return yessireebob and people would look at you funny."<br/><br/>Jayanti grins<br/><br/>Parity doesn't know why the syntax is that way. "If I'd been in charge, you'd pass function-locks that evaluate to 1 and fail those that evaluate to zero. But, the way it -is- written, you have to specify the 'passing' return value.<br/><br/>Parity mumbles.<br/><br/>Parity says, "Lessee."<br/><br/>Parity says, "I brought with me for show and tell..."<br/><br/>Parity coughs.<br/><br/>Parity says, "Anyway. 'MoneyCode' is an actual, if not yet complete, softcode system I'm working on."<br/><br/>Parity says, "If you 'l moneycode' you will see I've stuffed inside it, 'moneyfunc' and 'moneydata'."<br/><br/>    MoneyCode(#3590V)<br/>    Type: THING Flags: VISUAL<br/>    Owner: Parity Key: Parity(#384PXcF) Pennies: 1<br/>    Zone: *NOTHING*<br/>    Parent: MoneyFunc(#3589V)<br/>    Powers:<br/>    Created: Wed Aug 11 12:34:29.946883 2004<br/>    Modified: Wed Aug 11 12:37:13.76777 2004<br/>    DATA: #3591<br/>    MONEY-OTHER-CMD: $+money *:@switch hasflag(%#,wizard)=1,{ @pemit %#=[setq(0,num(*%0))][name(%q0)] has [u(money-format-fn,u(money-fn,add(%q0,0)))]. },{ @pemit %#=Huh?%b%b(Type "help" for help.) }<br/>    PAY-CMD: $+pay *=*:@switch/first [setq(0,num(*%0))][and(isdbref(%q0),match(type(%q0),player))][setq(2,switch(rest(%1),gold,10,dubloons,10,dubloon,10,silver,1,silvers,1,moon,1,moons,1,0))][setq(1,mul(first(%1),%q2))][and(isnum(%q1),gte(u(money-fn,%#),%q1))][gt(%q2,0)]=0??,{ @pemit %#=I don't know who you mean. },??0,{ @pemit %#=I don't understand that amount. },?0?,{ @pemit %#=You don't have that much money! },111,{ &amp;money-%q0-amt [v(data)]=add(u(money-fn,%q0),%q1) ; &amp;money-%#-amt [v(data)]=sub(u(money-fn,%#),%q1) ; @pemit %#=You give [name(%q0)] [u(money-format-fn,%q1)].; @pemit %q0=%n gives you [u(money-format-fn,%q1)].; &amp;money-%#-log [v(data)]=cat(get(v(data)/money-%#-log),|%q0 %q1) }<br/>    MONEY-GIVE-CMD: $+money/give *=*:@switch/first [setq(0,num(*%0))][and(isdbref(%q0),match(type(%q0),player))][setq(2,switch(rest(%1),gold,10,dubloons,10,dubloon,10,silver,1,silvers,1,moon,1,moons,1,0))][setq(1,mul(first(%1),%q2))][and(isnum(%q1),gte(u(money-fn,%#),%q1))][gt(%q2,0)]=0??,{ @pemit %#=I don't know who you mean. },??0,{ @pemit %#=I don't understand that amount. },?0?,{ @pemit %#=You don't have that much money! },111,{ &amp;money-%q0-amt [v(data)]=add(u(money-fn,%q0),%q1) ; &amp;money-%#-amt [v(data)]=sub(u(money-fn,%#),%q1) ; @pemit %#=You give [name(%q0)] [u(money-format-fn,%q1)].; @pemit %q0=%n gives you [u(money-format-fn,%q1)].; &amp;money-%#-log [v(data)]=cat(get(v(data)/money-%#-log),|%q0 %q1) }<br/>    MONEY-CMD: $+money:@pemit %#=You have [u(money-format-fn,u(money-fn,%#))].<br/>    MONEY-SET-CMD: $+money/set *=*:@switch/first [hasflag(%#,floating)][setq(0,num(*%0))][and(isdbref(%q0),match(type(%q0),player))]=0?,@pemit %#=You're not authorized to set anyone's money.,?0,@pemit %#=I don't know who you mean.,&amp;money-%q0-amt [v(data)]=%1<br/>    Contents:<br/>    MoneyFunc(#3589V)<br/>    MoneyData(#3591V)<br/>    No exits.<br/>    Home: Parity's Circuitry Room(#1071RJ)<br/>    Location: Lecture Room(#14RJs)<br/><br/>Parity says, "In light of our earlier discussion, you might quickly guess that moneycode's parent is moneyfunc."<br/><br/>    MoneyFunc(#3589V)<br/>    Type: THING Flags: VISUAL<br/>    Owner: Parity Key: *UNLOCKED* Pennies: 1<br/>    Zone: *NOTHING*<br/>    Powers:<br/>    Created: Wed Aug 11 12:34:26.396479 2004<br/>    Modified: Thu Aug 12 09:25:20.06567 2004<br/>    MONEY-FORMAT-FN: [switch(%0,0,no money,switch(div(%0,10),0,,div(%0,10) Crown[switch(div(%0,10),1,,s)][switch(mod(%0,10),0,,%band%b)]))][switch(mod(%0,10),0,,1,1 Noble,mod(%0,10) Nobles)]<br/>    MONEY-FN: get(v(data)/money-%0-amt)<br/>    No exits.<br/>    Home: Parity's Circuitry Room(#1071RJ)<br/>    Location: MoneyCode(#3590V)<br/><br/>Parity says, "Now, the 'real' version of this code lives in a text file, and between each attribute theres an '@@' or three with text after it. '@@' is the 'comment' command so when I send my file to mush, my comments don't do anything."<br/><br/>Parity says, "If I had to actually work with just the object as it is here, I'd probably go mad... err, though some might say that's already happened. However."<br/><br/>Parity says, "The deal with the moneycode is, it uses a number of common conventions, so when you grab myrddin's bbs or such off the net you may see this."<br/><br/>Jayanti raises her hand<br/><br/>Parity says, "IIRC, keran's weather has a completely convoluted setup involving a special room for most of the code to live in, but it needs a parent room anyway. ;)"<br/><br/>Parity says, "Yes, Jayanti?"<br/><br/>Jayanti says, "You mean the fn. stuff that denotes it as a function, or that it has a function that is used so prevalently in the object that it deserves a reference function?" 
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>