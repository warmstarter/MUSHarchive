<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: +Search</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="PlusSearch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="PlusSearch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="PlusSearch.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="PlusSearch.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="PlusSearch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="PlusSearch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Globals.html">Globals</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="PlusSearch.html#">+Search</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            +Search
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>Checks all objects and exits in the room, as well as the room itself, for an attribute named HIDDEN. If present, it&#39;s evaluated as a ufun.</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <a href="../Author/Raevnos.html">Raevnos</a>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Globals.html">Globals</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="http://www.mushcode.com/Command/@create" class="command">@create</a>,
                    <a href="http://www.mushcode.com/Command/@describe" class="command">@describe</a>,
                    <a href="http://www.mushcode.com/Command/@dolist" class="command">@dolist</a>,
                    <a href="http://www.mushcode.com/Command/@drain" class="command">@drain</a>,
                    <a href="http://www.mushcode.com/Command/@edit" class="command">@edit</a>,
                    <a href="../Command/@oemit.html" class="command">@oemit</a>,
                    <a href="../Command/@select.html" class="command">@select</a>,
                    <a href="http://www.mushcode.com/Command/@set" class="command">@set</a>,
                    <a href="http://www.mushcode.com/Command/@startup" class="command">@startup</a>,
                    <a href="http://www.mushcode.com/Command/@switch" class="command">@switch</a>,
                    <a href="http://www.mushcode.com/Command/@trigger" class="command">@trigger</a>,
                    <a href="../Command/@verb.html" class="command">@verb</a>,
                    <a href="http://www.mushcode.com/Command/@wait" class="command">@wait</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/and.html" class="function">and&#40;&#41;</a>,
                        <a href="../Function/capstr.html" class="function">capstr&#40;&#41;</a>,
                        <a href="../Function/cat.html" class="function">cat&#40;&#41;</a>,
                        <a href="../Function/controls.html" class="function">controls&#40;&#41;</a>,
                        <a href="../Function/eq.html" class="function">eq&#40;&#41;</a>,
                        <a href="../Function/filter.html" class="function">filter&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/hasattrval.html" class="function">hasattrval&#40;&#41;</a>,
                        <a href="../Function/hastype.html" class="function">hastype&#40;&#41;</a>,
                        <a href="../Function/lcon.html" class="function">lcon&#40;&#41;</a>,
                        <a href="../Function/lexits.html" class="function">lexits&#40;&#41;</a>,
                        <a href="../Function/lt.html" class="function">lt&#40;&#41;</a>,
                        <a href="../Function/match.html" class="function">match&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/rand.html" class="function">rand&#40;&#41;</a>,
                        <a href="../Function/setdiff.html" class="function">setdiff&#40;&#41;</a>,
                        <a href="../Function/setr.html" class="function">setr&#40;&#41;</a>,
                        <a href="../Function/space.html" class="function">space&#40;&#41;</a>,
                        <a href="../Function/subj.html" class="function">subj&#40;&#41;</a>,
                        <a href="../Function/t.html" class="function">t&#40;&#41;</a>,
                        <a href="../Function/tagwrap.html" class="function">tagwrap&#40;&#41;</a>,
                        <a href="../Function/ulocal.html" class="function">ulocal&#40;&#41;</a>,
                        <a href="../Function/words.html" class="function">words&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>,
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for +Search
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="PlusSearch.html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        @@ -*- mushcode -*- $Id: search.txt 1.2 Wed, 02 Aug 2000 22:39:31 -0700 shawnw $<br/>@create +search code<br/>@lock/Basic +search code==me<br/>@set +search code = VISUAL<br/>@set +search code = !NO_COMMAND<br/>&amp;+SEARCH_CMD +search code=$+search:@select 0=hastype(%#, player), @pemit/s %#=Sorry\, only players can +search., match(get(%#/status), IC), {@pemit/s %#=+SEARCHing while OOC only checks objects you control.; @trigger %xa/search_trg=%#, [setr(1, filter(%xa/found, setr(0, filter(%xa/controls, cat(lcon(%l), lexits(%l), %l)))))], [setdiff(%q0, %q1)]},@trigger %xa/search_trg=%#, [setr(1, filter(%xa/found, setr(0, cat(lcon(%l), lexits(%l), %l))))], [setdiff(%q0, %q1)]<br/>&amp;CONTROLS +search code=controls(%#,%0)<br/>@DESCRIBE +search code=+search is a system for creating hidden details or events that can be triggered by players. It's meant mostly for RP Mushes, but can be used in social ones also if you want. The code has only been tested on PennMUSH, but hopefully should work without modification on TinyMUSH and TinyMUX. Examine +SEARCH/INSTALL for hints on setting it up, and the HELP_X attributes for help on using it.<br/>@set +search code/DESCRIBE=no_command visual<br/>&amp;FOUND +search code=t(ulocal(%0/hidden, %#))<br/>&amp;HASOSFAIL +search code=hasattrval(%0,osearchfail)<br/>&amp;HASSFAIL +search code=hasattrval(%0,searchfail)<br/>&amp;HELP_+SEARCH +search code=+SEARCH:%r%r[space(5)]This command allows you to ICl	y search a room, it's contents, and it's exits for concealed features and details that may be present. Normally, it can only be used while IC. When OOC, it only works on objects you control, and has no time delay, for testing purposes.%r%rFor information on how to set up objects to be +search-able, see +HELP +SEARCH CODING<br/>&amp;HELP_+SEARCH_CODING +search code=The +search code checks all objects and exits in the room, as well as the room itself, for an attribute named HIDDEN. If present, it's evaluated as a ufun, with the dbref of the +searcher passed as \%0. If it returns a value that makes t() return 1 (See HELP T()), the object is considered found. Otherwise, the search on it fails.%r%rWhen a +search succeeds, the searcher sees the contents of the object's SEARCH attribute, others in the room see the object's OSEARCH attribute prefixed by the searcher's name, and the code in the object's ASEARCH attribute is triggered, with \%0 as the dbref of the +searcher. If the SEARCH and OSEARCH attributes are not set, default messages are displayed.%r%rIf the search fails, the same process occurs, with the SEARCHFAIL, OSEARCHFAIL, and ASEARCHFAIL attributes respectively. There are no defaults for these.%r%rFor an example, see +HELP +SEARCH EXAMPLE<br/>&amp;HELP_+SEARCH_EXAMPLE +search code=Here is a simple example of an object that is +searchable:%r%r@create Gopher Hole%r@set Gopher Hole=DARK%r&amp;HIDDEN Gopher Hole=\[lt(rand(100),50)\]%r&amp;SEARCH Gopher Hole=You stumble into a gopher hole and nearly twist your ankle.%r&amp;OSEARCH Gopher Hole=stumbles into a gopher hole and nearly twists \%p ankle.%r&amp;ASEARCH Gopher Hole=@set me=!dark%r&amp;OSEARCHFAIL Gopher Hole=narrowly avoids stepping into a gopher hole, though \%s doesn't realize it.%r%rWhen Bob +searchs and succeeds (Which happens 50\% of the time), he sees:%rYou stumble into a gopher hole and nearly twist your ankle.%rOthers in the room see:%rBob stumbles into a gopher hole and nearly twists his ankle.%rAnd, the gopher hole object become visible.<br/>&amp;INSTALL +search code=To use this code on your mush, install the HELP_X attributes into your local +help. Put the +SEARCH_CMD attribute on a wizard object in the master room. Put everything else on a wizard object not in the master room. Change the +SEARCH_CMD attribute now in the master room by replacing '%xa' with the dbref of the object everything else is on. @edit can be used for this. Then, change the match(get(%#/status),IC) part of the +SEARCH_CMD attribute to whatever code your mush uses to check to see if a player is In Character. That should be all you need.<br/>&amp;LICENSE +search code=All code on this object (Raevnos' +search code) is released under the Gnu Public License. A copy of that license is avaliable at [tagwrap(a, href="http://www.gnu.org/copyleft/gpl.html", http://www.gnu.org/copyleft/gpl.html)]<br/>&amp;SEARCH_TRG +search code=@pemit/s %0=You search around for anything interesting...;@oemit %0=[name(%0)] searchs around for anything interesting...;@dolist %1=@verb ##=%0,SEARCH,You find [name(##)]!,OSEARCH,finds [name(##)]!,ASEARCH,%0,%q0;@dolist/notify setdiff(%2,%1)=@verb ##=%0,SEARCHFAIL,,OSEARCHFAIL,,ASEARCHFAIL,%0,%q0;@wait me={@switch and(eq(words(%1),0),eq(words(filter(hassfail,%2)),0))=1,@pemit/s %0=You didn't find anything.;@switch and(eq(words(%1),0),eq(words(filter(hasosfail,%2)),0))=1,@oemit %0=[capstr(subj(%0))] didn't find anything.};@@ This @wait and the /notify switch to the @dolist can be removed, leaving the plain @dolist and @switches without harm. It simply adds a slight delay to the final message (If shown) to simulate the time it takes to search. You can replace with a timed @wait, or take it out entirely if you wish. @@<br/>@STARTUP +search code=@drain me<br/>@set +search code/STARTUP=no_command<br/>think Setup complete<br/><br/><br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>