<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Lukthil&#39;s Efficiency Coding Workshop</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Lukthils-Efficiency-Coding-Workshop.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Lukthils-Efficiency-Coding-Workshop.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Lukthils-Efficiency-Coding-Workshop.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Lukthils-Efficiency-Coding-Workshop.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Lukthils-Efficiency-Coding-Workshop.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Lukthils-Efficiency-Coding-Workshop.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Softcode.html">Softcode</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Lukthils-Efficiency-Coding-Workshop.html#">Lukthil&#39;s Efficiency Coding Workshop</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Lukthil&#39;s Efficiency Coding Workshop
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p></p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <span>
                    <a href="../Author/Lukthil@ElendorMUSH.html">Lukthil</a>@<a href="../Source/ElendorMUSH.html">ElendorMUSH</a>
                </span>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Softcode.html">Softcode</a>
        </div>


            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/add.html" class="function">add&#40;&#41;</a>,
                        <a href="../Function/and.html" class="function">and&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/hasflag.html" class="function">hasflag&#40;&#41;</a>,
                        <a href="../Function/iter.html" class="function">iter&#40;&#41;</a>,
                        <a href="../Function/lsearch.html" class="function">lsearch&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/nearby.html" class="function">nearby&#40;&#41;</a>,
                        <a href="../Function/or.html" class="function">or&#40;&#41;</a>,
                        <a href="../Function/pemit.html" class="function">pemit&#40;&#41;</a>,
                        <a href="../Function/s.html" class="function">s&#40;&#41;</a>,
                        <a href="../Function/secs.html" class="function">secs&#40;&#41;</a>,
                        <a href="../Function/set.html" class="function">set&#40;&#41;</a>,
                        <a href="../Function/setq.html" class="function">setq&#40;&#41;</a>,
                        <a href="../Function/shuffle.html" class="function">shuffle&#40;&#41;</a>,
                        <a href="../Function/sign.html" class="function">sign&#40;&#41;</a>,
                        <a href="../Function/strmatch.html" class="function">strmatch&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>,
                        <a href="../Function/vadd.html" class="function">vadd&#40;&#41;</a>,
                        <a href="../Function/vsub.html" class="function">vsub&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/CobraMUSH.html" class="server">CobraMUSH</a>,
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>,
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>,
                        <a href="../Server/TinyMUSH.html" class="server">TinyMUSH</a>,
                        <a href="../Server/TinyMUX.html" class="server">TinyMUX</a>.
            </div>

    </div>
</div>


<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Lukthil&#39;s Efficiency Coding Workshop
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Lukthils-Efficiency-Coding-Workshop.html#">
                    <i class="icon-resize-full"></i> Select Content
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        Class Name: Efficiency Coding Workshop<br/>Class Instructor: Lukthil<br/>Date: Wed May 8th, 1996<br/>Time: 4:30 pm gametime until whenever<br/>Difficulty: Advanced<br/><br/>Abstract:<br/>This class is BYOC (Bring Your Own Code). Students should bring code that<br/>they are willing to set visual. We will streamline the example code provided<br/>by the students until it as efficient as possible. This streamlining process<br/>will be used to explain what makes code efficient and why. We will examine<br/>design decisions and algorithmic and computational concepts which can help<br/>coders to code projects that meet speed and size constraints. Many elements<br/>of the class will be Elendor-specific including (where necessary)<br/>explanations and outlines of the latest Elendor hardcode modifications.<br/>Familiarity with hardcode or C is not required. The class is targeted<br/>towards students with some degree of coding skill such as mush admins,<br/>rulers, and local admins as well as anyone else who has coded a sizeable<br/>project in the past. Not everyone needs to bring code. Interested players<br/>who do not have code available are welcome to sit in and listen and ask<br/>questions. Essentially this is a no holds barred "Lukthil explains anything<br/>you want him to" kind of class. Bring your inquisitive minds.<br/><br/>Transcript:<br/><br/>Lukthil says, "Testing 1 2 3..."<br/>Frodo has arrived.<br/>Sabrina has arrived.<br/>Frodo says, "Ah... is this where the class is going to be?"<br/>Lukthil nods.<br/>Sabrina says, "Ah-ha!"<br/>Sabrina was expecting it to be in the code-school class room :)<br/>Nolindil wavers<br/>Nolindil says, "Let me know when you really begin, so I can start logging. :)"<br/>Across Middle-earth, Lukthil shouts, "The class posted on Code-School 3 is<br/>        happening right now in the Auditorium in the OOC School if you're<br/>        interested."<br/>Thranduil has arrived.<br/>Beta has arrived.<br/>Thranduil waves and takes a seat in the back.<br/>Gandalf says, "The first thing you should learn is how to spam the queue."<br/>Halbarad has arrived.<br/>Sabrina pokes Gandy for having arrived silently!<br/>Donovan has arrived.<br/>Lukthil begins placing exacto knives of various shapes and sizes one by one<br/>        on the table in front.<br/>Nolindil grins.<br/>Thranduil oohhs and gets all excited.<br/>Danico has arrived.<br/>Mithdae has arrived.<br/>Sabrina's eyes grow wide and she erps quietly, holding her hands up, "Really!<br/>        I didn't mean it!"<br/>Lukthil gingerly places a jar with someone's vital organ in it on the table.<br/>Krutt has arrived.<br/>Nolindil laughs<br/>Nolindil looks around for the huge, thick printouts of MUSH profiling...<br/>Lukthil looks at Nolindil with a curious expression on his face. "I<br/>        memorized them."<br/>Nolindil grins<br/>Sabrina oooohs<br/>Lukthil says, "Okay let's begin."<br/>There's a crackle of thunder and the door closes on its own with a slam.<br/>Sabrina jumps out of her seat and looks around nervously.<br/>Thranduil moves further away from da teacher.<br/>Lukthil says, "I assume you've all read the abstract. This class is on what<br/>        comes _after_ you already know how to code stuff that works. So if<br/>        you're a newbie coder, you probably won't find this useful. It's<br/>        about why one piece of code that works is better than another that<br/>        also works. :)"<br/>Sabrina offers a Coke to da teach if he promises not to kill her.<br/>Mithdae has arrived.<br/>Lifan has arrived.<br/>Arlo has arrived.<br/>Lukthil says, "I'll be taking examples of working code from people and we'll<br/>        streamline it together if we have time. First of all, I'd like to<br/>        start of with a few questions that I've received from people in<br/>        preparation for the class. These are very good examples of what I'd<br/>        like to talk about here today."<br/>Danico has arrived.<br/>Lukthil says, "Also, a little disclaimer: I may experience connection<br/>        problems near the beginning of this class but they should improve<br/>        as time goes on. The network that I pass through to connect to the<br/>        mush appears to be very lagged during business hours every day."<br/>Gandalf says, "can you teach me to make a puppet that follows me and barks<br/>        when I say good dog?"<br/>Sabrina giggles<br/>Thranduil can teach you that Gandz.<br/>Lukthil says, "Let's start with a few questions that were sent to me by<br/>        Nolindil. I'll answer them in order and if you have questions or<br/>        need additional information about any of them, just shout out your<br/>        question."<br/>Arlo looks Nolindil over.<br/>Lukthil says, "Gandy, I should think that would be something you would teach<br/>        a puppet by example. :)"<br/>Gandalf says, "I meant in RL."<br/>Lukthil says, "So did I. :)"<br/>Thranduil grins.<br/>Sabrina laughs<br/>Beta has disconnected.<br/>Lukthil says, "Okay first one..."<br/>Lukthil says, "1) Does Elendor have what is called "short circuit evaluation"<br/>        in Turbo Pascal - Viz. when an AND() or OR() function is being<br/>        evaluated, does evaluation STOP as soon as it is clear the condition<br/>        will fail? This could save a good amount of CPU if you can figure out<br/>        how to do it with MUSH code."<br/>Beta heads back to Middle-earth.<br/>Paleran has arrived.<br/>Lukthil says, "To clarify this in case anyone isn't sure what the question<br/>        means: Most languages parse arguments to an AND or OR function only<br/>        as far as necessary. I.e. Why evaluate the second argument to an<br/>        AND if the first evaluates to false? You already know it's going<br/>        to be false... etc."<br/>Lukthil says, "Answer 1: Actually it's interesting that you would choose to<br/>        ask this question. Until last week the answer was no. The MUSH code<br/>        fully parsed all arguments to boolean functions. Naturally this is<br/>        not a very efficient way to do things, however what may surprise you<br/>        is that the difference doesn't really make much of a speed impact on<br/>        the mush has a whole. The softcode AND() and OR() functions are<br/>        relatively unused compared to most functions. (Just think about how<br/>        many times you use GET() for example or SWITCH().) Last week I<br/>        inserted a change into the code so that arguments to AND() will be<br/>        parsed until a "false" is reached and arguments to OR() will be<br/>        parsed until a "true" is reached just like most modern languages<br/>        like Turbo Pascal do. The reason the change is useful is more one<br/>        of programming options than of speed. Making the booleans operate<br/>        this way gives programmers like us a useful way to establish<br/>        conditionals in our code. For example, putting a side-effect<br/>        function in a later argument can cause that side-effect to operate<br/>        conditional upon the previous arguments to the boolean."<br/>Belegril has arrived.<br/>Belegril waves.<br/>Paleran tiptoes in and takes a seat in the back with a big grin on his face :)<br/>Gandalf says, "Ew...Cool."<br/>Vinyesse has arrived.<br/>Lifan has disconnected.<br/>Lifan heads back to Middle-earth.<br/>Lifan has left.<br/>Mithdae has disconnected.<br/>Lukthil says, "Essentially what this means practically to softcoders like us<br/>        is that you should try to put the SHORTEST functions in the FIRST<br/>        arguments to and() and or(). That way it will be less likely that<br/>        the later intensive functions will ever be evaluated."<br/>Mithdae heads back to Middle-earth.<br/>Gandalf says, "So now if I did an and() filled with a series of side affects<br/>        it would go through them all until one returned a false..."<br/>Lukthil nods to Gandy. "Exactly."<br/>Beta has arrived.<br/>Arlo stands and exits the auditorium, realising this class is a bit above<br/>        his head. :)<br/>Vinyesse raises a hand.<br/>Arlo has left.<br/>Lukthil says, "If you're not sure what a "false" is, it is defined under<br/>        HELP BOOLEAN VALUES I believe."<br/>Galdor has arrived.<br/>Mithdae has arrived.<br/>Galdor hands Gandy his hall pass and takes a seat.<br/>Lukthil says, "Second question.. 2) Is it better to use<br/>switch(&lt;condition&gt;,&lt;result1&gt;,switch(&lt;condition&gt;,etc),&lt;result2&gt;,<br/>switch(&lt;condition&gt;,etc.))<br/>OR...<br/>switch(condition/condition/condition,1/1/1,actions,1/1/0,actions,1/0/1,<br/>actions...etc.)"<br/>Danico says, "Could you give an example of where a Boolean would be used?"<br/>Belegril bets on the latter. :)<br/>Paleran raises his hand quickly.<br/>Vinyesse grins.<br/>Paleran would bet on the romer, but the lag prevents him from doing so.<br/>Vinyesse blinks at Pal.<br/>Paleran says, "romer? former..."<br/>Thranduil just waits for the answer no needs to bet here.:P<br/>Paleran dohs.<br/>Lukthil says, "Let me answer Danico's question first... A simple example?<br/>        Maybe something like: say<br/>switch(and(hasflag(%#,connected),strmatch(name(%#),G*)),1,You<br/>are a connected player and your name begins with a G.)"<br/>Paleran grins to Viny.<br/>Lukthil says, "Answer to the switch() question... Answer 2: The answer to<br/>        this question calls for a design decision. If a later &lt;condition&gt;<br/>        is particularly intensive and an earlier &lt;condition&gt; is likely to<br/>        be true, you definitely want to use the first form you gave with<br/>        the nested SWITCH()'s. Since SWITCH() evaluates its arguments one<br/>        by one until a match is found, it won't tend to evaluate that<br/>        intensive &lt;condition&gt; unless it absolutely has to and you'll save<br/>        time. However, notice that the first form requires more functions<br/>        than the second. You have all those extra SWITCH()'es in there.<br/>        That means that if none of the &lt;conditions&gt; are particularly<br/>        intensive, you probably want to use the second form where you<br/>        evaluate all the &lt;conditions&gt; every time. You'll save time in<br/>        general because you'll have less function invocations in total<br/>        (less SWITCH()'es)."<br/>Beta heads back to Middle-earth.<br/>Beta has left.<br/>Belegril says, "Ooh, too bad I don't have any obvious conditions. :)"<br/>Lukthil says, "This brings up something that serves as a pretty good rule of<br/>        thumb as to what's fast and what's not. Usually the number of<br/>        functions you call during the execution of a routine is a pretty<br/>        good indicator of how CPU intensive your code is. This isn't a<br/>        perfect rule of course. Somethings like lsearch() are very intensive.<br/>        However it's pretty good. Also remember that when you count function<br/>        invocations, you must count functions inside loops multiple times.<br/>        Like inside an iter(), all the functions in the second argument get<br/>        evaluated the same number of times as elements in the list of the<br/>        first argument."<br/>Belegril has reconnected.<br/>Paleran hopes to gawd Lukthil isn't typing all this out. That's &gt;100 wpm :P<br/>Sabrina laughs and was thinking that too :)<br/>Danico has disconnected.<br/>Vinyesse grins.<br/>Sabrina says, "but suspects that he is ;)"<br/>Belegril thinks of Bethphel's typing speed, though. :)<br/>Danico heads back to Middle-earth.<br/>Belegril has partially disconnected.<br/>Lukthil says, "That's really why iter()'s are so dangerous. You couldn't<br/>        possibly end up with on the order of thousands of function<br/>        invocations without iters. You'd wimp out while typing it. :)<br/>        But with an iter, all you need is to put a hefty number of<br/>        functions in the second argument and then something that evaluates<br/>        to a long list in the first argument, and you end up lagging the<br/>        whole mush."<br/>Belegril heads back to Middle-earth.<br/>Belegril has left.<br/>Belegril has arrived.<br/>Lukthil says, "For that reason, one should be very desirous of making the<br/>        body of iter() functions small. Loops are where you save the most<br/>        time. Other stuff will only get evaluated rarely and won't matter<br/>        nearly as much. There are of course a few places other than loops<br/>        where speed is very desireable and that will come up in one of the<br/>        later questions."<br/>Lukthil says, "Here's the second half of question #2... On a related tangent,<br/>        is switch(&lt;data&gt;,&lt;string1&gt;,actions...etc.) better than<br/>        switch(strmatch(&lt;data&gt;,&lt;string&gt;),1,actions...etc.) ???"<br/>Vinyesse says, "Yes?"<br/>Lukthil says, "The answer this question is more clear: It is better to use<br/>        the SWITCH() without the STRMATCH(). Putting a STRMATCH() inside<br/>        there is redundant. The code for the SWITCH() function itself needs<br/>        to do the equivalent of a STRMATCH() anyways so actually putting<br/>        STRMATCH() in there makes it do it twice. This isn't to say that<br/>        STRMATCH() should never appear inside a SWITCH() though. Sometimes<br/>        in certain cases you'll save time by combining rather desparate<br/>        checks under one big SWITCH(). In those cases you might have<br/>        something like:<br/>    switch(1,sign(add(%0,%1)),do something,strmatch(%0,%1),do something, ...)"<br/>Paleran hehs, "That's &gt;1000 wpm there :) No way :)"<br/>Sabrina laughs<br/>Galdor says, "Luk moves in mysterious waaaaaays."<br/>Vinyesse waves.<br/>Gandalf says, "He is just really lagged. He started typing yesterday."<br/>Sabrina laughs!<br/>Nolindil grins<br/>Thranduil chuckles.<br/>Lukthil says, "This isn't very accurate as far as my typing speed. I lag so<br/>        you'll notice long pauses and then suddenly everything I'm typing<br/>        will come spewing out onto your screens. :)"<br/>Paleran ahs, "Kinda like me the other day :)"<br/>Belegril grins.<br/>Lukthil says, "Like for example I just got Gandy's statement. :P"<br/>Sabrina patpats Luk<br/>Mithdae chuckles.<br/>Lukthil says, ":goes on: 3) We need a whole BOOK written about how to<br/>        _avoid_ string processing when possible. :) As a long time Turbo<br/>        Pascal programmer, I have got into this habit already. But I am<br/>        sure my understanding of how MUSH code handles strings is not as<br/>        good as my understanding of TP, so I guess I could benefit from a<br/>        good summary as much as most others. Of course, since MUSH code is<br/>        interpreted, there are TWO issues: parsing of the code, and the<br/>        actual execution. I know that curly braces and even square brackets<br/>        need a function call to be stripped off, and that any "substitution"<br/>        that does use a pair of parentheses is faster than an equivalent<br/>        function that does. BUT... what about things like calls to<br/>        "subfunctions" &lt;u(object/attribute)&gt; under this new "speed<br/>        attributes" code of yours? Is it better now to try to make lots of<br/>        subfunctions that can be re-used with u() calls and &amp; save DB space?"<br/>Lukthil says, "Needless to say I'm pasting the questions. :)"<br/>Paleran grins, "Gee, ya think?"<br/>Lukthil says, "Answer 3: There seem to be several things sort of mashed<br/>        together in this question. :) First of all, avoiding string<br/>        processing on a mush is totally impossible. Almost EVERYTHING on the<br/>        mush is parsed as a string. Every result of every function is of<br/>        datatype string. That means no matter what you do with your code,<br/>        it's gonna primarily parse strings so don't worry about it. :) Now<br/>        as for "subfunctions," this is *the* classic design question of<br/>        space vs speed. My speed-attributes modification doesn't really<br/>        impact on this question all that much. A u() function call is rather<br/>        quick in itself. It's only a single function invocation and does<br/>        work equivalent (in most cases) to a get() and a pair of [] brackets.<br/>        So if it's just sitting there by itself and it's going to save you<br/>        typing and db space, go for it. The only place where it could be a<br/>        bad idea is if it's somewhere where it's going to get executed a<br/>        lot. Examples: In a zone, use, or listen lock. Inside a loop like<br/>        an iter() or @dolist. In these places you want to save time and<br/>        function invocations at all costs so directly inserting the code<br/>        without using u() calls is probably the better choice."<br/>Paleran wonders real quick if anyone is /logging this?<br/>Sabrina thinks Nolin is?<br/>Lukthil says, "I'm logging it."<br/>Sabrina cools.<br/>Paleran phews, "Cause I'm missing some of it :) Thanks Luk."<br/>Thranduil phewwwwwwssss...<br/>Nolindil is!<br/>Belegril cheers. :)<br/>Gandalf says, "When are we getting inline ufuns?"<br/>Gandalf winks<br/>Thranduil grins and does too<br/>Lukthil says, "This brings up an important point that I want to highlight:<br/>        Zone locks, Listen locks, and Use Locks are BAD NEWS. They get<br/>        evaluated *all the time*. I'll say more about this later."<br/>Nolindil laughs. "I have a question almost like that to add later, Gandy..."<br/>Arlo has arrived.<br/>Lukthil says, "Oh cool. Next question leads right into the lock issue. Here<br/>        it is..."<br/>Lukthil says, "4) How about locks? I'm sure that attribute/string testing<br/>        locks (Species: or Culture:) use a lot of CPU. Is there some way to<br/>        optimize these? (Come to think of it "short circuit" evaluation of<br/>        these would be good too! Why _keep_testing if you know the lock has<br/>        been passed. I hope the MUSH is smart enough to quit when it knows<br/>        the result?)"<br/>Lukthil says, "Answer 4: Yes the MUSH lock evaluation code is pretty smart.<br/>        It will stop early if it can. Don't worry about attribute-testing<br/>        locks. Those are rather fast. The locks you need to to worry about<br/>        are function locks of the form func/result. Those things can get<br/>        real nasty real quick. But worst of all are zone, use, or listen<br/>        locks that are function locks. Consider that the zone lock on ZMO<br/>        objects is evaluated EVERY time someone comes in contact in any way<br/>        with anything zoned to that ZMO. Just being in a room with an object<br/>        means the code needs to figure out whether you should see the<br/>        object's dbref listed along side its name in the contents listing<br/>        or not. And to figure that out, it needs to evaluate the zone lock<br/>        on the object's ZMO to see if you pass. Use and Listen locks are<br/>        almost as bad. Anytime anyone says anything near the object, those<br/>        locks are evaluated. So never never put function type locks on those<br/>        locks if at all possible."<br/>Paleran says, "Can we comment freely?"<br/>Lukthil says, "Sure go ahead."<br/>Gandalf says, "What about Indirect locks?"<br/>Paleran says, "Doesn't the MUSH know enough to stop its evaluation when it<br/>        hits the first match in its evaluation order? So when something is<br/>        said, it isn't checked to any objects (command wise), but when a<br/>        global is typed, each object nearby() is checked first before the<br/>        master Room is ultimately checkly last?"<br/>Nolindil says, "A zonelock of Species:*Quendi* is less laggy that is_elf/1<br/>        where is_elf is strmatch(get(%#/species),*Quendi)?"<br/>Lukthil says, "Indirect locks aren't much of an issue. The real work is done<br/>        when it hits the end of the indirect links and tries to evaluate the<br/>        meat of it. If the indirect links end in a function lock, then you're<br/>        hosed as usual of course. :)"<br/>Sabrina erps. Indirect lock?<br/>Donovan has left.<br/>Lukthil says, "Paleran: Yes evaluation order saves you sometimes, but<br/>        remember that multiple matches are allowed on the same level of<br/>        evaluation. So it doesn't actually save you very often."<br/>Gandalf says, "When you @lock foo=@bar so that foo uses the same lock as bar."<br/>Lukthil says, "Nolindil: Definitely yes."<br/>Sabrina ahhhs, okay. Thanks Gandy :)<br/>Nolindil hmms...<br/>Lukthil says, "Incidentally, I'd like to add a functionality for indirect<br/>        locks like @lock foo=@bar/enter sometime so be on the lookout for that."<br/>Lukthil says, "Currently indirects only use Basic lock."<br/>Gandalf says, "Very cool... I was annoyed by that."<br/>Sabrina says, "So I guess 'tis much better to have a long string of people<br/>        who can use something than a function saying .. right?"<br/>Sabrina says, "Nevermind, of course :)"<br/>Paleran says, "Think before you type, Rina ;)"<br/>Sabrina pokes.<br/>Lukthil says, "Sabrina, yes it's better to have a lock like<br/>        =person|=person|=person than function/1<br/>        &amp;function =[inlist(person person person,%#)].<br/>        I see this done a lot and it's a real lagger."<br/>Lukthil says, "The usual solution is to create a little command on your zone<br/>        that redoes the zonelock when you add someone or remove someone."<br/>Sabrina makes a few quiet adjustments. :)<br/>Nolindil likes the function that Lukthil made for us.... :)<br/>Paleran says, "Whassat, Nolin?"<br/>Belegril says, "But that little command will just redone the lock, as you<br/>        say. Why not just paste another dbref to the list? :)"<br/>Lukthil says, "This brings up a concept that is extremely valuable in<br/>        gauging the efficiency of a piece of code and making design<br/>        decisions of this sort but it is hard to describe in words..."<br/>Nolindil says, "A command to relock our ZMO effiiciently."<br/>Lukthil says, "Belegril: The lock is changed less times than it is<br/>        evaluated. So making a piece of code that takes more time to change<br/>        the lock is MUCH more desireable then making the code do that work<br/>        every time the lock gets evaluated."<br/>Paleran ohs, "Pretty easy :) I don't mind typing it as I've got cut-n-paste."<br/>Lukthil says, "I'm going to skip to question six because it highlights the<br/>        point I'm trying to get across..."<br/>Lukthil says, "6) How about "audible" exits, rooms, objects, and the<br/>        filter/infilter attributes. Aren't these also a BIG drain of CPU?<br/>        Can these be optimized? Are there alternative ways to transmit sound<br/>        where necessary that is less of a load on the MUSH?"<br/>Lukthil says, "Answer 6: Audible things aren't too bad for the mush to<br/>        handle. The MUSH propagates messages all over the place all the<br/>        time so a couple more aren't going to hurt too much. Filter/infilter<br/>        attributes are somewhat more of a concern. They are slightly more<br/>        painful CPU-wise than the Listen and Use locks I mentioned earlier.<br/>        Use them sparingly and if at all possible don't put functions in<br/>        them. In looking for alternatives, you need to ask yourself whether<br/>        the amount of work your alternative solution does is really less<br/>        than the audible/inprefix/outprefix. If you code some kind of big<br/>        @pemit that does exactly the same job, it's going to run slower<br/>        than an audible/inprefix/outprefix. The mush has to read and figure<br/>        out your @pemit code and then end up doing the same work it would<br/>        have done before. In general, if you have two ways of telling the<br/>        mush to do precisely the same thing, the way that places more of the<br/>        work in the hands of the hardcode will run faster. It takes time to<br/>        read your instructions so if you have a succinct way of getting the<br/>        message across, it's usually better."<br/>From Sabrina, Pheona trots along quietly.<br/>Sabrina smiles innocently.<br/>Lukthil says, "This bit about sending the mush SUCCINCT instructions on how<br/>        to do something is true for every interpreted language. It's also<br/>        the rule of thumb I often use when *figuring out* the things I'm<br/>        telling you now. Basically the reason this is so is because I (and<br/>        others) sit around and use every expert coding trick we know to make<br/>        the hardcode handle things really fast. So once it figures out what<br/>        you want it to do, it will probably choose the fastest possible way<br/>        to get it done."<br/>Lukthil says, "Often the biggest lag from evaluating code is figuring out<br/>        what the heck you want it to do and not actually doing it. :) So<br/>        telling the mush what to do in as short a form as possible is a good<br/>        way to go when looking for efficiency. :)"<br/>Paleran looks up SUCCINCT in his online dictionary.<br/>Thranduil looks over Pal's shoulder<br/>Lukthil says, "Succinct - short and to the point."<br/>Sabrina laughs<br/>Thranduil nods,<br/>Paleran okays, "Makes sense :)"<br/>Belegril has a piece of code it take me myself a lot of time to figure what<br/>        the heck I want it to do. :)<br/>Nolindil says, "Avoiding unnecessaty {} and [] is a major point of<br/>        succintness, isn't it? :)"<br/>Lukthil says, "Example: pemit(person person person/list,message) is more<br/>        succinct than iter(person person person,pemit(##,message)) even<br/>        though exactly the same thing is done and exactly the same work is<br/>        performed. Yet the first executes much faster than the second."<br/>Gandalf grins as he was considering making that point exactly.<br/>Paleran nods, "The parser has to strip and reattach each set of [], so<br/>        that's two more operations that are most of the time unnecessary :)"<br/>Sabrina gulps and looks longingly at her {}'s before pushing them away to a<br/>        dark corner on a high shelf.<br/>Belegril has 10 pairs of {} in all of his 100+Kbytes code. :)<br/>Krutt has arrived.<br/>Paleran says, "They're necessary for separating code, sometimes."<br/>Lukthil says, "Well the issue with {} and [] is a variant of what I'm<br/>        talking about yes. In that case it is simply confusing the matter<br/>        for the parser to use them where not necessary. It takes the parser<br/>        longer to figure out what is going on because it has to strip them<br/>        out and then make a special attempt to evaluate what's inside when<br/>        maybe it would have evaluated it anyways."<br/>Belegril says, "Very rarely, in fact."<br/>Nolindil says, "Using hard code functions whenever possible, staying close<br/>        to the hardcode, as it were, is the other point."<br/>Nolindil stripped 3 pairs of {} out of his corkboard parent a couple weeks<br/>        ago &amp; it still runs fine. :)<br/>Gandalf wonders if that is his bastard corkboard he wrote so long ago.<br/>Lukthil says, "Also, and this is probably surprising to someone who doesn't<br/>        know the hardcode and doesn't know language parsing theory, the \<br/>        escape operator is faster than the % escape and faster than {}<br/>        escape."<br/>Belegril raises a hand.<br/>Nolindil says, "You would not recognize it, Gandy. EVERYTHING happens in one<br/>        queue cycle now, powered by @pe/s, no @swi or @sel or any of that.<br/>        All functions. :)"<br/>Lukthil says, "Belegril?"<br/>Nolindil says, "Lots of fancy admin functions have been added, too."<br/>Belegril had exactly the same question in mind, "I have most of attributes,<br/>        sometimes 30 lines long, organized as a single command with a lot of<br/>        side-effect functions. Is it better than using a number of ;<br/>        separated commands?<br/>Lukthil says, "Actually Frodo sent me a question about that and so if you'll<br/>        wait, I'll answer you both in my answer to that one when we get there. :)"<br/>Belegril says, "OKie."<br/>Nolindil sent in 8 questions total... :)<br/>Lukthil says, "Let me momentarily backtrack to question 5 which is really a<br/>        hardcode issue, but perhaps of some interest..."<br/>Belegril says, "OK, I guess I had to login on time. :)"<br/>Paleran grins and envisions Lukthil's display being questions on one side,<br/>        answers on the other and the MUSH window in the middle :)<br/>Lukthil says, "5) Big, messy, technical question: Is there some way to add<br/>        MORE flags to objects on this MUSH? If we could somehow have FLAGS<br/>        (bits) instead of attributes for many character/object qualities if<br/>        would cut out a lot of string processing. Can the numbers 0-9 be<br/>        used for some "user defined bitfield" on objects? It would be nice<br/>        if there were Local Admin and +ruler flags so the list on #10000<br/>        didn't have to be checked for so many commands."<br/>Gandalf says, "Wish people would stop mailing me asking me to show them the<br/>        code for objects I haven't seen or coded in over a year."<br/>Nolindil laughs.<br/>Sabrina laughs.<br/>Paleran hehs, "If you were more like Lukthil and not show anyone your code,<br/>        you wouldn't be asked :)"<br/>Lukthil says, "Just what I was about to say. :)"<br/>Sabrina laughs!<br/>Belegril chuckles.<br/>Nolindil heehees... "I can remove you from the credits, Gandy. That way no<br/>        one will ask you..."<br/>Gandalf says, "I always say no but people send them to me."<br/>Thranduil glances at Gandy and grins.<br/>Lukthil says, "Answer 5: There's certainly a way to add more flags but not<br/>        one that we would want to do. Flags are stored internally as a large<br/>        bit field. That is, every object gets two words of memory in which<br/>        are stored flags. One of those words are for "notype" flags (flags<br/>        that are independent of the object type -- room, exit, player,<br/>        thing). The other word is for type-specific flags. If we wanted to<br/>        add more room for flags, it would require adding another word of<br/>        space to every object on the MUSH. And due to certain programming<br/>        restrictions, we'd actually have to add two more words not just one.<br/>        Such a thing might be possible but we really don't want to do it<br/>        unless we have to. It would both increase the size of the database<br/>        and also increase the size of our runtime mush process for compiler<br/>        reasons that I don't want to go into here."<br/>Gandalf says, "Just don't tell people you won't show them them code without<br/>        my permission. If it isn't my code I don't see the big deal..:) Also<br/>        lord knows I wrote it in less than an hour and at best it is an<br/>        excercise in how easy it is for anyone to write a database program."<br/>Paleran says, "Isn't there a limit as to how many flags you can have on a<br/>        MUSH anyway? Like FORCE_WHITE is 0x8000000 or something huge."<br/>Sabrina pokes Gandy cos she doubts she could do something like that without<br/>        a great deal of work. :)<br/>Lukthil says, "Well that would be the limitation of the size of a word in<br/>        memory. Words are two bytes - 16 bits long."<br/>Lukthil says, "So to add more, we would have to add two more words to the<br/>        size of that struct field and we could have higher-valued flags."<br/>Sabrina timidly raises a hand.<br/>Lukthil says, "Yes, Rina? :)"<br/>Nolindil says, "I didn't tell anyone that. Someone misrepresented me. :-/<br/>        I just don't want to give my code to someone who wants to take it<br/>        to another MUSH."<br/>Paleran is hazy on those memory things, but this isn't a class for<br/>        hardcode :)<br/>Lukthil places a straw in the jar on his desk.<br/>Sabrina umms, "This is likely to sound really dense, but how much of a<br/>        difference does it make as to the number of flags a person has<br/>        set? For instance, look at my line of flags. Obviously, my chown_ok<br/>        flag serves no purpose, but does it take up that much space by my<br/>        having it set? :)"<br/>Lukthil says, "No, that's a good question. It doesn't take up any extra room<br/>        or extra time. That's because the space for all those flags is<br/>        essentially allocated whehter or not they are set. That's how<br/>        flags work."<br/>Sabrina cools and remains chown_ok then! :)<br/>Belegril still doesn't know what flag 'l' would stand for. :)<br/>Lukthil says, "And that's also why we wouldn't want to add more flag<br/>        options. Because every object would need the space for those<br/>        flags allocated on them even if they were unused."<br/>Sabrina says, "That is 'light', Bele. It means you show up in the contents<br/>        of a dark room."<br/>Belegril arrgs, "Don't visit my ship with such a nasty flag. :)<br/>Nolindil laughs, "I think he was referring to 0-9"<br/>Thranduil grins.<br/>Sabrina cackles<br/>Lukthil says, "7) As a ZMO programming LA, I'd like to know a little about<br/>        command parsing. Is it more efficient to use ONE command with a *<br/>        after it for multiple options: viz -<br/>        $elfwho/*:@sel %0=&lt;letter1&gt;,action,&lt;letter2&gt;,action,etc.<br/>        OR: have elfwho/m and elfwho/n and etc. as seperate commands calling<br/>        a function attribute with u()?"<br/>Gandalf says, "Ew.. I was curious about this myself."<br/>Sabrina guesses the first? :)<br/>Paleran hrms and could think of a few BS answer, but will wait for a real one :)<br/>Lukthil says, "Answer 7: For the most part, there is not much of a difference<br/>        between the two choices as far as CPU goes. One thing you may need<br/>        to think about is that making one command with many options often<br/>        involves a bunch of extra code to figure out what option was<br/>        specified. If that code becomes unwieldly, you may wish to separate<br/>        it into separate commands. Personally, the way I do things is that<br/>        if the various options share any code, I make them one command.<br/>        Otherwise I split them up."<br/>Sabrina chuckles and guesses wrong. :)<br/>Lukthil says, "So essentially it is mostly a database-savings problem. CPU<br/>        is relatively unaffected unless you have gobs of extra code to parse<br/>        the options."<br/>Paleran says, "It doesn't mater that its a zone command that would most<br/>        likely get used alot?"<br/>Sabrina says, "gobs .. now there is a word ya don't hear too often :)"<br/>Belegril notes that gob also means sailor. :)<br/>Lukthil says, "Not really, Paleran. The $command scanning routine is quite<br/>        fast and a single extra attribute on the object doesn't really<br/>        matter. There have been a few rare cases where this became an issue<br/>        but they are fairly rare. For example at one time in the mush's<br/>        history, the +com database object sat in the master room. This was<br/>        a rather bad thing because in the case of a big database object,<br/>        you start getting a LOT of attributes to check for $commands. When<br/>        it gets that bad, it starts making a difference."<br/>Nolindil gets back to the inline ufun() that Gandy winked about. "OK, how<br/>        about putting CODE in a register &amp; calling it? Is this possible &amp;<br/>        if so, worthwhile? I.e. setq(5,get(me/big_function))<br/>        iter(&lt;list&gt;,&lt;set data in other registers&gt;switch(&lt;test&gt;,yes,%q5,etc...))<br/>        -- Does that save the ufun() overhead somewhat? Would code called in<br/>        the way properly evaluate %0, %1, etc, and the other q registers?<br/>Lukthil says, "Well first of all, Nolindil, what you gave there wouldn't<br/>        exactly work. The %q5 would evaluate out into the body of the<br/>        programming and that programming wouldn't get evaluated. However,<br/>        s(%q5) would probably do the trick. It is doubtful however that this<br/>        would save you much. First of all you've got just as many or more<br/>        function invocations (at least one s() for every u()). Secondly the<br/>        only thing you are saving is one less attribute lookup IF the %q5 is<br/>        used in more than one place on a given run of the code. That's not<br/>        very much especially considering how fast lookups go now."<br/>Nolindil If you need the s() then I can see how it doesn't save anything.<br/>        Oh, well.<br/>Lukthil says, "That's it for Nolindil's set of questions. Frodo has a few<br/>        and I typed out the answer to the first one during the save..."<br/>Lukthil says, "1. Cloning vs. Parenting: I've always assumed that parenting<br/>        was A Good Thing. And that any contribution to lag caused by<br/>        parenting was negligible, and completely swamped by the space-saving.<br/>        Is this in fact correct? I've heard people say that parenting should<br/>        be avoided in favor of cloning since it causes lag, but I assume<br/>        this is totally false."<br/>Lukthil says, "Answer 1: You're instinct is correct. Any lag caused by<br/>        parenting an object is completely inconsequential compared to the<br/>        db savings. Parenting is definitely preferred to @cloning where<br/>        possible. The only time this could ever be a problem is if either<br/>        the parent object was incredibly huge but if it were split into<br/>        cloned objects, each cloned object would not be huge (you'd have<br/>        to have some pretty bizarre code for that...) or if you had some<br/>        kind of chain of parented objects which had up to like 10 or 15<br/>        levels of parents. I've never seen anything like that so I don't<br/>        think that's a concern."<br/>Belegril has a parent in third degree. :)<br/>Nolindil eeps<br/>Sabrina thought everyone had parents.<br/>Lukthil says, "I've had up to about 5 but never anything like 10. And if<br/>        you keep the size of each object small, it's not much of a big deal<br/>        anyways."<br/>Belegril chuckles, "Coded, not biological." :)<br/>Sabrina says, "Hmm ... what're you meaning by levels of parents, Luk? :)"<br/>Lukthil says, "No I'm talking about my biological parents. Computers breed<br/>        in sets of 5 to 10."<br/>Sabrina giggles.<br/>Thranduil laughs.<br/>Nolindil laughs. "You didn't know Luk is an AI???"<br/>Belegril says, "The second one is small. The first one is big. The third<br/>        one is just the help object. :)"<br/>Belegril LOL!<br/>Sabrina says, "an Al?"<br/>Nolindil says, "The third one is unnecessary then. Just hard code the help<br/>        to reference that object. It will be faster.""<br/>Lukthil says, "Using help objects via parenting isn't usually a wise<br/>        decision. Better to read the needed attrs off the help database<br/>        object directly without parenting."<br/>Belegril knows nothing of hardcode but the word itself. :)<br/>Paleran whispers to Rina, "Artificial Intellignence."<br/>Nolindil does that with his corkboard parent. Help is larger than the code. :)<br/>Belegril says, "You mean putting code on the object to read from the help?"<br/>Lukthil says, "Whattayamean Artificial?"<br/>Sabrina ohs! AI, not Al - stupid Mac :p<br/>Paleran grins, "Never call a Mac stupid ;)"<br/>Thranduil sits on Rina.<br/>Lukthil nods to Belegril.<br/>Belegril says, "Well, that's right. Thatr would take only two $-commands."<br/>Paleran says, "Call them downsizing, but not stupid :)"<br/>Sabrina oomphs and is squished, but still thinks the Mac is not very smart.<br/>Nolindil says, "Yes, put the DBref of the help object in the code."<br/>Nolindil lags...<br/>Lukthil, for the record, thinks Macs are deceitful.<br/>Sabrina squishedly -still- doesn't understand what you're referring to as a<br/>        level. :)<br/>Thranduil hrmsssss<br/>Paleran grins and puts his hand over Rina's mouth, "Let's not discuss that<br/>        here."<br/>Krutt thinks Lukthil is very wise.<br/>Lukthil says, "Rina: @parent object1=object2; @parent object2=object3."<br/>Sabrina bites Pal's hand hard!<br/>Lukthil says, "Object1 has two levels of parents."<br/>Paleran has metal gloves on :)<br/>Belegril hates putting right-away references to dbrefs in the middle of<br/>        code. I'd better have &amp;helpobject=&lt;dbref&gt; and go with v(helpobject)<br/>Sabrina ahhhs and smiles, 'Thanks ... just wanted to make sure :)'<br/>Belegril says, "You nuke it, you recreate another one from @decompile file,<br/>        the dbref changes."<br/>Nolindil lags some more...<br/>Krutt has a question.<br/>Lukthil says, "Belegril, one little trick I use is to do @va object=#xxxx to<br/>        denote my reference objects. And whattaya know that's Frodo's<br/>        question #3... I'll skip to it."<br/>Belegril says, "Go, look for all the instances you use dbref then."<br/>Halbarad says, "Use va, vb instead, Belegril. Then call them via %va, %vb,<br/>        etc..."<br/>Belegril says, "Oh, right."<br/>Halbarad dohs and types slow.<br/>Lukthil says, "3. Is there any advantage to using @VA rather than &amp;foo<br/>        attribs?"<br/>Belegril says, "I always forget about them. I'd forget what they mean since<br/>        I have lotsa attributes."<br/>Lukthil says, "Answer 3: There is one advantage to using those attributes.<br/>        The substitution %va evaluates noticeably faster than the v(va)<br/>        lookup. That's the only thing. Everything else about them takes the<br/>        same amount of time."<br/>Paleran thinks of a question, but will wait.<br/>Krutt raises his hand.<br/>Lukthil says, "Krutt?"<br/>Belegril says, "But cannot one forget what each attribute means if you<br/>        store them under such names? :)"<br/>Nolindil says, "That's what documentation is for..."<br/>Lukthil says, "If they only have dbrefs in them, it's pretty easy to figure<br/>        out, Bel. Just look at the object. :)"<br/>Belegril grins.<br/>Krutt hrms, "Okay, I am not sure if this is possible, but could you do<br/>        something like @parent object1=object2 and then<br/>        @parent object2=object1? Would that cause any problems?"<br/>Galdor says, "Object cell-division, neat."<br/>Belegril acks.<br/>Sabrina says, "hmm...can't think of why you would wanna..."<br/>Lukthil says, "No, you shouldn't be able to do recursive parenting. The<br/>        @parent command checks up the parent chain to make sure you aren't<br/>        making a loop. Also if it ever did happen somehow, the game would<br/>        catch it. It won't iterate up past 15 levels of parents."<br/>Sabrina laughs<br/>Nolindil eeps!<br/>Nolindil says, "Infinite loop if the MUSH doesn't disallow it.."<br/>Paleran thinks that would fall under the Oedipal complex division.<br/>Lukthil says, "It's got recursion checking, Nol. :) Same as all the other<br/>        user-definable loop constructs in the code. :)"<br/>Galdor says, "Object cancer.."<br/>Krutt hrms, "Well, I was basically thinking of making the two objects<br/>        'friend' if you know what I mean."<br/>Paleran says, "Lag bug is catchy, tonight."<br/>Nolindil says, "Or the Congressional Budget Algorithm..."<br/>Thranduil grins.<br/>Belegril says, "Then why parenting them recursively? :)"<br/>Lukthil says, "What you should do, Krutt, is place the code on one object<br/>        and then parent both of them to that one."<br/>Sabrina glares at the Guard she's carrying around and says, "Alright, buddy.<br/>        You're undergoing some major changes!"<br/>Belegril says, "Oh use one of them as a parent."<br/>Krutt nods, "Well, I guess I will... but it would be nice to do it the other<br/>        way..."<br/>Lukthil says, "Nice if it were possible and it didn't go recurse crazy and<br/>        check 15 levels of parents every time anything was accessed. :)"<br/>Nolindil says, "If the child needs to transmit info back to the parent, you<br/>        need to use some "common data object""<br/>Lukthil says, "Here's a simple one: 2. What about parenting exits and rooms?<br/>        We have a bunch o' exits parented to Master Front Door (#16381),<br/>        which supplies the basic description and messages. Is this to be<br/>        (a) encouraged as space-saving, or (b) discouraged as laggy?"<br/>Lukthil says, "Answer 2: I'll take (a) for 200 points, Alex. Parent away. :)"<br/>Sabrina laughs<br/>Belegril chuckles.<br/>Nolindil laughs<br/>Lukthil says, "4. What are the relative costs, in execution time, for<br/>        setq(), &amp;temp me=, and @set me=temp:...?"<br/>Paleran says, "You didn't phrase your answer in the form of a question."<br/>Lukthil says, "Answer 4: setq beats an attribute set of any type every time.<br/>        &amp;temp me= and @set me=temp: are equivalent, however often you may<br/>        save something by using &amp;temp me= because it will cost you less []<br/>        brackets. Example: &amp;temp me=add(1,1) is faster than<br/>        @set me=temp:[add(1,1)]"<br/>Lukthil says, "The case of set() vs. &amp;attrib is another matter entirely.<br/>        That falls under the function vs command debate which is coming to<br/>        an auditorium near you soon..."<br/>Lukthil says, "5. Just how expensive is it to enqueue and dequeue commands?<br/>        For example... (a)<br/>        @swi foo=bar,do-something-complicated,do-something-else<br/>        versus... (b)<br/>        @swi foo=bar,@tr something-complicated,@tr something-else.<br/>        The latter is often easier to code. There obviously is SOME extra<br/>        cost in (b), but is the queueing time swamped by the other stuff<br/>        that is going on?"<br/>Belegril says, "Ack. I've heard that one can omit [ after ( and after<br/>        commas. But after =???"<br/>Sabrina says, "sometimes after = ... depends Bele"<br/>Lukthil says, "Answer 5: Queuing time is highly dependant upon what else is<br/>        going on on the mush. Using more queue cycles is like driving in<br/>        the slow lane. Anybody who wants to pass you can do so. Our mush is<br/>        active enough so that choosing to use more queue passes usually<br/>        results in a noticeable lag in your code. However, the nicer part<br/>        is that although your code lags, it doesn't lag anyone else.<br/>        Everyone else goes zipping by in a single queue cycle while yours<br/>        waits around and uses several. In your example, the @swi takes one<br/>        queue cycle and the @tr takes another. That's a total of 3 (counting<br/>        the original queue) whereas a purely functional approach would take<br/>        only 1. In general, you should probably stay away from the<br/>        multiple-queue cycle style code for faster code."<br/>Lukthil says, "And that brings us to the function vs command debate."<br/>Paleran loves this debate :)<br/>Lukthil says, "Unlike commands, functions are evaluated _synchronously_.<br/>        They do not use the queue. They all get evaluated all one at a time<br/>        and everyone waits until they are all done. That means they make<br/>        your code run faster although they make other people go slightly<br/>        slower. In the end, however, the net gain of the entire mush is<br/>        that functions end up being faster in total."<br/>Lukthil says, "However, there are a couple other matters to be considered<br/>        here..."<br/>Thraile has arrived.<br/>Lukthil says, "The first of these is probably best illustrated by an example<br/>        of mine: The +mail +clear command..."<br/>Paleran grins to Rina.<br/>Nolindil hmms. "I hadn't considered it that way. But that's what Queue is<br/>        all about... controlling the rate at which stuff executes. So, are<br/>        there situations where you _ought_ to use more queue cycles to slow<br/>        you code &amp; not lag everyone else? Or is that an issue for Wizards<br/>        only?<br/>Mithdae has disconnected.<br/>Elree has arrived.<br/>Sabrina wonders what she did this time.<br/>Mithdae heads back to Middle-earth.<br/>Elree says, "Hello"<br/>Lukthil says, "The +clear command which wipes out all your messages marked<br/>        for deletion uses a big @dolist to clear the messages. That means it<br/>        queues a command for every message instead of doing it all in a big<br/>        iter(). Why did I decide to do it this way? Two reasons:"<br/>Sabrina wishes Luk hadn't said +mail ;_<br/>Sabrina ;)<br/>Paleran knows one :)<br/>Frodo raises his hand, "To be nice to other users and let them do things."<br/>Lukthil says, "First: Getting the job done when clearing mail and not<br/>        getting messed up and aborting in the middle is very important.<br/>        Otherwise we end up with lots of mail messages in the mail database<br/>        that have no owner and the mail database gets bigger and bigger and<br/>        bigger... Why is this a concern? Because if I had used iter(), this<br/>        could potentially happen and here's how:"<br/>Belegril says, "Invocation limit?"<br/>Lukthil says, "As many of you probably know, there is a "function invocation<br/>        limit". You can see what it is set to by typing @config and reading<br/>        the entrees until you find it. On our mush it is set to 3500. That<br/>        means a single command is allowed to make 3500 function calls and no<br/>        more. After that, you just get an error message and the functions<br/>        don't evaluate and your code dies. If someone deleted enough<br/>        messages at once, this could happen and then those messages wouldn't<br/>        get deleted properly."<br/>Elree says, "I was wondering how to get rid of my messages...now i know"<br/>Belegril used to pas that limit. :)<br/>Belegril says, "pass even"<br/>Paleran grins, "Ok, so I know the other reason, then :)"<br/>Thraile raises a hand, "But wouldn't you have to have lots and lots of mail<br/>        to do that?<br/>Belegril says, "Eonwe's straw target dummy in the arena always does. :)"<br/>Galdor grins at Thraile, "Uhm.. yes :)"<br/>Sabrina laughs, "Thraile, some of us -get- lots and lots of mail in a week!"<br/>Lukthil says, "Second: This is what Frodo was saying. +clearing messages<br/>        takes time. If I made it an iter() then everyone on the mush would<br/>        have to just stop and wait while it did all that stuff. This would<br/>        be rather painful. So in this case I actually WANT to take the<br/>        option of wasting more time. We can afford to take time to delete<br/>        mail. Nobody is sitting around examining the mail database object<br/>        pining for all the messages to be gone. So we let other stuff<br/>        execute faster while it works in the background."<br/>Paleran points to Luk, he probably gets around 50 messages a day :)<br/>Nolindil has frequently passed the limit... :)<br/>Sabrina has gone through no less than 20 already today :p<br/>Nolindil wonders if the rumor that Wizards ger priority in the Queue is true?<br/>Lukthil says, "It is not entirely uncommon for admins to have up to 400 mail<br/>        messages in their boxes at times."<br/>Thranduil gulps<br/>Lukthil says, "Wizards do not get priority in the queue unless they use the<br/>        @kick command to force it through. That happens from time to time<br/>        when necessary."<br/>Sabrina says, "so -that's- why y'all warn us before +clearing ;)"<br/>Paleran ohs, "I know a third then, Luk...One you told me before....There<br/>        is a check to see if noone is left to own the message, and if<br/>        something gets parsed before it, or during it, the cycle could<br/>        get messed up, and not get deleted at all, or deleted accidentally."<br/>Lukthil says, "I believe the current record is held by the now retired<br/>        Kerowyn who had 600 messages in her box. It actually broke the mail<br/>        system and I had to delete them by hand."<br/>Sabrina yowsers.<br/>Thranduil ick..<br/>Thraile chuckles, "wow"<br/>Galdor says, "A running joke among the admin. She just never clears her<br/>        mail :P"<br/>Nolindil laughs!<br/>Galdor says, "We try to remind her every time she logs in."<br/>Belegril chuckles.<br/>Lukthil says, "Since then I have made the system a little more robust and I<br/>        don't know the upper limit anymore. It's higher than 600."<br/>Sabrina has never had more than 20 at one time ... I think. I read, /log,<br/>        +reply, and +delete immediately usually :)<br/>Nolindil says, "Maybe automated expiry is needed. :)"<br/>Thranduil blinks at Nol. "Naww!<br/>Sabrina says, "NO! If I -do- save something, it is saved for a reason."<br/>Lukthil says, "I don't want to get into that here, Nolindil. That'd be a<br/>        very difficult problem to code."<br/>Paleran says, "It wouldn't be a matter of porting the BB code?"<br/>Lukthil says, "Not nearly so easy. There's a lot more players than there<br/>        are BBoard. I'd surpass any function invocation or queue limit that<br/>        exists in trying to code it."<br/>Sabrina grins, "Although ... while we're on the subject of BBs Luk ...<br/>Lukthil says, "There was something else you mentioned, Pal.. about breaking<br/>        a cycle or something?"<br/>Paleran nods....Thought it had scrolled by and didn't want to mention it<br/>        again :)<br/>Halbarad heads back to Middle-earth.<br/>Halbarad has left.<br/>Lukthil says, "The check that you refer to is there, but I don't see how it<br/>        relates to the command vs function question."<br/>Elree has left.<br/>Paleran says, "If it was a function call, one queue cycle may take less<br/>        time than another."<br/>Belegril raises a hand.<br/>Paleran is probably confused :P<br/>Lukthil says, "I don't see why that would matter."<br/>Thranduilmirk :laughs and laughs.<br/>Thranduil eeeek..<br/>Paleran doesn't want to bring up specific exapmles, "But when I coded a<br/>        mail system, I had a message get to -1 once. I had assumed it was<br/>        due to that :)"<br/>Sabrina chuckles<br/>Lukthil says, "Sabrina, you had a question? I'll get you next, Bel."<br/>Paleran says, "-1 for the number of people it thought owned the message still"<br/>Lukthil says, "I haven't had any problems with that, Pal. I did have a<br/>        problem with what happens when the mush crashed in the middle of<br/>        deleting a message, but I've fixed it now so that it can detect the<br/>        crash upon the next startup and repair itself."<br/>Sabrina grins at Luk and nods, "Is there any way of upping the number of<br/>        messages displayed when doing a +skim on the BBs? We have a 10 day<br/>        timeout on Bad-bb and very often run over 50 messages (right now<br/>        we're in a slump with only 31) and it is very easy to miss them if<br/>        they're not displayed when doing a +skim. :)"<br/>Thraile says, "Hey, could you fix my e-mailer? when It crashes, it messes<br/>        up too ;)"<br/>Thranduil says, "BB and +mail...50 messages tops on +skim :P"<br/>Lukthil says, "No, there's no way to up that limit because 1. it would<br/>        mean too many function invocations and everyone would lag and 2.<br/>        it could overrun the string limit. You can +skim ranges to see the<br/>        rest of the messages."<br/>Lukthil says, "E.g. +skim public 50-100"<br/>Sabrina says, "how about possibly giving a message at the END of the +skim<br/>        to show how many more are there instead of the beginning? :)"<br/>Sabrina sits back down and shuts up again. :)<br/>Lukthil says, "That would be easy to do. Although this isn't really the<br/>        place to be discussing this. :)"<br/>Lukthil says, "Bel, you had a question?"<br/>Sabrina grins and nods, and is why she sat back down. ;)<br/>Belegril says, "Several."<br/>Lukthil says, "Fire away."<br/>Paleran will BRB&gt;<br/>Belegril says, "First, why we understand about quequeing vs. immediate<br/>        execution, wouldn't a function call be still faster than a @-command?"<br/>Belegril says, "Er, why=while"<br/>Lukthil says, "Yes it would. As I mentioned, the net gain across the entire<br/>        mush is that a function will execute faster than a @-command. If<br/>        that's the only issue to be examined, then your choice should be<br/>        to use a function."<br/>Lukthil says, "More specifically, although the actual work of the @command<br/>        is the same as the actual work of the function, the overhead of<br/>        parsing the function is less."<br/>Belegril says, "Second, how laggy is the dawn/dusk triggering? Does it just<br/>        involve adding the object's dbref to some list or it involves some<br/>        more complicated routine, too?"<br/>Lukthil says, "The dawn/dusk triggering isn't anything hardcode related. It<br/>        is controlled exclusively by softcode. We have a system clock which<br/>        simply @waits in the queue (that's the wait you always see in there)<br/>        and when it hits a certain time, it @dolist-@triggers a list of<br/>        dbrefs. Naturally this is a laggy thing so we try to keep the list<br/>        small. However it is intentionally done this way so that other<br/>        things can execute faster while this one runs more in the background."<br/>Belegril says, "Third question is related to the second one. Is it better<br/>        to have a long iter() on one object triggered at dawn/dusk or a<br/>        number of small things on a larger list of triggered objects?"<br/>Nolindil says, "Is there anything like a CRON built into the MUSH? Or is<br/>        the lack of this the reason for the dawn/dusk trigger?"<br/>Lukthil says, "In general, there is almost always a way to code things<br/>        without having to depend on a cron style trigger like this one.<br/>        The method is called "lazy evaluation" or as I call it "quantum<br/>        programming"."<br/>Sabrina says, "can't it be hardcoded? :)"<br/>Lukthil says, "Belegril first..."<br/>Belegril says, "What's 'cron' style?"<br/>Paleran has reconnected.<br/>Paleran has partially disconnected.<br/>Paleran heads back to Middle-earth.<br/>Paleran has left.<br/>Paleran has arrived.<br/>Lukthil says, "It depends on the size of the iter and how intensive it is<br/>        really. Best thing is to not have anything at all triggered at<br/>        dawn/dusk if possible."<br/>Paleran wishes it woiuldn't do that for partial disconnects :P<br/>Belegril repeats in case you missed it, "The third question is related<br/>        to the second one. Is it better to have a long iter() on one object<br/>        triggered at dawn/dusk or a number of small things on a larger list<br/>        of triggered objects?<br/>Belegril says, "Oops, sorry."<br/>Lukthil says, "Nol: There's no such thing as a cron in PennMUSH. Sab: It<br/>        could be hardcoded, but I haven't because there is actually little<br/>        need. The hardcode would be insignificantly faster than our softcode<br/>        version."<br/>Belegril says, "What are the alternatives, then?"<br/>Sabrina nodnods<br/>Paleran says, "ONe at a time people, heh :) Luk may be an AI, but he's a<br/>        sensitive AI."<br/>Lukthil says, "Bel: A "cron" is a name borrowed from unix systems for a<br/>        system clock that sits and runs in the background and triggers<br/>        processes at specified times."<br/>Belegril says, "Oh, I see."<br/>Lukthil says, "Alright... alternatives... This will take some explanation<br/>        but it is a major programming principle so it's good to know."<br/>Lukthil says, "Lazy Evaluation or Quantum Programming: The basic idea of<br/>        this is as follows: Why do something if there's nobody there to see<br/>        it? (E.g. if a tree falls in a forest and there's nobody there to<br/>        hear it, who cares if it makes a noise.)"<br/>Belegril chuckles.<br/>Paleran says, "Or does it make a noise?"<br/>Lukthil says, "Most timed activities are pointless. Most often they run and<br/>        nobody is around to see it happen. Almost anything that ever gets<br/>        done on the mush is somehow in response to something that a player<br/>        does."<br/>Lukthil says, "Paleran: No the important part of this is that we don't care<br/>        if it makes a noise or not."<br/>Belegril says, "My fourth question then is what about that BYOC (Bring YOur<br/>        Own Code) subtitle for the class? :)"<br/>Paleran cowers, "It was a joke, sorry :)"<br/>Sabrina laughs<br/>Lukthil says, "Just a sec, Bel. We'll get to the code stuff if/when there<br/>        are no more questions. :)"<br/>Lukthil says, "Let me explain this lazy evaluation thing..."<br/>Nolindil says, "It looks like we have reached that stage, Bel. Time for<br/>        examples. :)""<br/>Belegril has got a huge one. :)<br/>Frodo has left.<br/>Lukthil says, "Let's take the example of a shop door that needs to be<br/>        unlocked during business hours and locked during business hours.<br/>        This is one I've seen often."<br/>Sabrina hides her guard and all her other code and goes back to her seat.<br/>Sabrina says, "and locked during night hours, you mean? ;)"<br/>Lukthil says, "Some people insisted that they needed a cron trigger for<br/>        this. But let's ask ourselves... what is the point of<br/>        locking/unlocking the door if nobody's trying to go in there? No<br/>        point whatsoever. Then WHY spend all our time doing this? :)"<br/>Lukthil says, "Right sorry. Locked during night hours."<br/>Belegril says, "switch(u(#4561/day.night) would work"<br/>Belegril says, "In @lock on the exit."<br/>Lukthil says, "Exactly, Bel. First think about what action exactly we are<br/>        responding to. Then code the thing so that it quick fixes itself up<br/>        when this happens."<br/>Lukthil says, "We are being lazy about when we evaluate things. Sure we<br/>        should have been locked this whole time, but who's to know? When we<br/>        get awakened by someone trying to get in, we quick fix it as if it's<br/>        been locked or unlocked the entire time and nobody's the wiser."<br/>Lukthil says, "This idea can be extended to much more complex situations."<br/>Vinyesse has reconnected.<br/>Belegril says, "Umm, I have an example when I might really need cron trigger.<br/>        But it's got a tripple nested iter() and I dunno how to get rid of it."<br/>Paleran ouches, "That's gotta go :)"<br/>Lukthil says, "There's one last question by Frodo and after that we'll go on<br/>        to examples."<br/>Belegril says, "OKie."<br/>Lukthil says, "It's fitting that this should be the last question I got<br/>        because it's also the most insightful..."<br/>Lukthil says, "6. At any given instant, what activity is the MUSH hardcode<br/>        most likely to be doing? Parsing something? checking the queue?<br/>        generating output?"<br/>Galdor says, "Checking if Galdor's idle."<br/>Nolindil laughs!<br/>Belegril grins.<br/>Galdor knows it does..<br/>Thranduil laughs .<br/>Sabrina hmmms at G.<br/>Lukthil says, "Answer 6: That is a very very deep question and one which I<br/>        would very much like to know the answer to. And in fact it changes<br/>        daily as I make more and more improvements to the code. I could very<br/>        well be wrong about this, but right now my theory is that most of<br/>        the time it is either evaluating a function or queuing output to<br/>        someone. Probably evaluating a function. As I find out the answers<br/>        to this and other similar questions, I "attack" those pieces of the<br/>        hardcode in order to make them faster. That's how I improve our<br/>        speed on Elendor."<br/>Nolindil says, "Answer: Lagging!"<br/>Vinyesse has partially disconnected.<br/>Vinyesse heads back to Middle-earth.<br/>Vinyesse beams away.<br/>Vinyesse has left.<br/>Lukthil says, "Alright are there any further questions before we go on to<br/>        examples?"<br/>Paleran nods...<br/>Galdor has one, more of a pet peeve tho..<br/>Nolindil says, "I would bet the parsing code is a major part of the MUSH<br/>        profile, too. And that's what we are here to improve..."<br/>Krutt has one.<br/>Lukthil says, "Paleran, you were first."<br/>Paleran says, "A long way back we were talking about @parenting objects and<br/>        such...Now what about control passing via the @tr to another object?<br/>        Is it more efficient to keep code on one object, or separate the<br/>        code into a few objects to lessen parsing time for a major object?""<br/>Paleran has coded that u() is of course more efficient either way, but 2tr<br/>        is differnt.<br/>Lukthil says, "In terms of speed, the less @triggers the better. @trigger<br/>        won't save you any parsing time because in the end the mush needs to<br/>        do more work in order to parse the @trigger itself."<br/>Belegril says, "@triggers are dammmmmmmmmmn sloooooooooooow............. :)"<br/>Thranduil says, "Amen Bele.."<br/>Paleran says, "Yeah, but sometimes necessary..."<br/>Sabrina screams, "OK! I'll TAKE the @tr out already!" ;)<br/>Lukthil says, "Also the less Rina's in your code, the better."<br/>Belegril says, "Never. Unless you have to trigger the attribute inside<br/>        itself and it is not a long function. :)"<br/>Sabrina pouts<br/>Belegril chuckles.<br/>Thranduil laughs!<br/>Nolindil says, "They are useful for rarely executed commands, though. No<br/>        $ pattern to be searched all the time."<br/>Lukthil nods to Nolindil. "Sometimes I want to execute Rina too."<br/>Paleran says, "Yeah, can be space-saving and make code easier to read..."<br/>Nolindil laughs<br/>Sabrina really pouts!<br/>Belegril chuckles.<br/>Galdor says, "Would it a) be beyond my scope of power, b) would anyone mind,<br/>        if I campaigned for the removal of player @*tport messages and<br/>        @aconnect/@adisconnect spam @emits? These bug the heck outta me<br/>        (and the @*tports mess with my 12v ship code.)"<br/>Paleran patpats Rina, "That's OK, he means well."<br/>Lukthil says, "Pal, the space saved is usually rather inconsequential. In<br/>        general, code db space is inconsequential compared to space taken up<br/>        by texts."<br/>Sabrina bites Pal's hand, "Lemmelone."<br/>Nolindil doesn't like otport and oxtport either... can we _disable_ it on<br/>        certain rooms or something?<br/>Belegril says, "And my ship code, too. :)"<br/>Sabrina awwws at G, "And I just set my *port messages too!"<br/>Galdor has wrestled with this issue before a bit.<br/>Galdor says, "Nuke em, Rina."<br/>Galdor :P<br/>Thranduil nods and does really dislike those..<br/>Paleran doesn't like them either...Or maybe they'd be better if you put a<br/>        limit on how long they can be.<br/>Belegril says, "@adisconnect is useful for +douse and @elock me, though."<br/>Sabrina takes her cookies and stomps off to a corner to sulk.<br/>Galdor says, "Or just switched them for IC/!IC"<br/>Nolindil says, "Or had a setting on rooms to prevent them working..."<br/>Paleran says, "15 or something."<br/>Belegril says, "Yeah, no IC @atpors!!!"<br/>Belegril :)<br/>Nolindil says, "OOC is when they are worse. 100 people in the OOC room for a<br/>        ceremony is a nightmare..."<br/>Lukthil says, "Krutt, I think you were next."<br/>Galdor says, "I dont mean to remove the 'code' of connect/disconnect, its<br/>        the ones like @adisconnect me=:jumps up and down and disappears ina<br/>        cloud of miniature unicorns flittering about his head. Or similar<br/>        crap/spam like that. Especially when people +set ooc real quick and<br/>        disco in an IC crowd."<br/>Paleran says, "Could an otport be considered speaking somehow?"<br/>Krutt nods, "Okay, I was wondering about @wait... back when you were talking<br/>        about locking a door... @wait would be a sloppy way to do it really<br/>        fast... but, would using the @wait cause any problems?"<br/>Sifca has arrived.<br/>Sabrina slips Thraile a chocolate chip cookie cos he's not being mean to her. :)<br/>Nolindil grins.<br/>Sabrina says, "@wait is very slow :)"<br/>Belegril says, "Nolindil gave a good idea -- option for suppressing @atports<br/>        in aome rooms. My ship would be the first candidate. :)"<br/>Nolindil says, "Does @wait cost money now? If so, how much?"<br/>Paleran doesn't know what people have against @wait...When used right, it is<br/>        quite useful.<br/>Lukthil says, "There's no reason to use a @wait at all in the case I spoke<br/>        of. You should lock the door with a function lock that evaluates the<br/>        time of day."<br/>Thraile nods and accepts the cookie and pulls out a glass of milk<br/>Azakhil has arrived.<br/>Paleran says, "1/64, Nolin :)"<br/>Lukthil says, "@wait doesn't cost any money although it requires a queue<br/>        deposit which is refunded after it gets out of the queue."<br/>Lukthil says, "Yeah all commands cost the 1/64th."<br/>Sabrina says, "Just that they do tend to be laggy, Pal."<br/>Paleran shakes his head, "Not if used in moderation..."<br/>Belegril says, "Verrrrrrrry lag, I surmise. :)"<br/>Belegril says, "laggy even"<br/>Belegril has a single @wait in all his 100+ Kbytes code. :)<br/>Thranduil says, "Well...what ya expect, they are after all a _wait_ ..."<br/>Lukthil says, "Sometimes the solution to lazy evaluation problems involves<br/>        queueing a @wait though. For example, an object listens for * has<br/>        arrived and queues a @wait in case something happens. If they leave<br/>        before it happens, the @wait is simply dequeued."<br/>Paleran says, "Granted a @wait/@tr is the most lag you can get."<br/>Nolindil says, "I heard someone complain that "@wait costs a whole bunch of<br/>        mone ynow" and wondered how much that might be..."<br/>Nolindil says, "Have Queue deposits increased?"<br/>Azakhil says, "What about @waiting on semaphores? are they as bad as @wait<br/>        &lt;time&gt;?"<br/>Krutt nods, "So, doing something like @wait 14400=Do_this wouldn't really<br/>        bog down the queue?"<br/>Belegril says, "Worse, I think."<br/>Lukthil says, "@waiting on semaphores is less laggy."<br/>Belegril says, "Oh, sorry."<br/>Nolindil hehs<br/>Paleran says, "Azakhil, no because the Semaphore queue is parsed differently<br/>        than the wait queue."<br/>Sabrina says, "uhhh...yeah, it would Krutt"<br/>Paleran looks to Lukthil for the answer to Krutt's...<br/>Lukthil says, "It wouldn't all by itself, but we wouldn't like it because<br/>        it's a case of "if we let you, then we have to let everyone" and if<br/>        more than a few people did it, we'd have problems."<br/>Belegril acks at Krutt.<br/>Sifca says, "code waiting to be executed by @wait is loaded into the procces<br/>        and thus to disk yes?"<br/>Lukthil says, "To disk, Sifca?"<br/>Paleran thinks he means RAM ;)<br/>Lukthil says, "To ram disk, if you want to look at it that way."<br/>Sabrina says, "she ;)"<br/>Sifca says, "The procces...Pagefile...swapfile...hrm, okay"<br/>Lukthil says, "That's not a big deal though because it's just one buffer<br/>        long. There are buffers allocated all over the place all the time<br/>        in the hardcode."<br/>Paleran gacks, "I should use functions for those type of things :)"<br/>Lukthil says, "It's really inconsequential, Pal. The database is 30 megs<br/>        ram. Allocating 8000 bytes temporarily for a buffer isn't going to<br/>        do anything."<br/>Galdor has left.<br/>Nolindil says, "So, the _compressed_ DB takes 30 megs of RAM now? If it were<br/>        not compressed, how big would it be? :)"<br/>Thraile has disconnected.<br/>Thraile heads back to Middle-earth.<br/>Lukthil says, "Well 30 megs is a guestimate. The entire process is 45 megs<br/>        in ram. Uncompressed on disk it's 42 meg database."<br/>Nolindil wows... "42 million characters of text &amp; code. We are quite an<br/>        elaborate world here."<br/>Azakhil says, "I am curious, aside from the process of @waiting and<br/>        @notifying...would it be bad to @wait on a semaphore and just let<br/>        it sit there for several days? That is, does it lag much while just<br/>        sitting on the Semaphore queue?"<br/>Thraile has arrived.<br/>Lukthil says, "No, you wouldn't notice much lag at any given time but it<br/>        would be an annoying thing because it would slow down access to the<br/>        semaphore queue for the duration it was present."<br/>Nolindil says, "If 50 different people did this, it would be a problem, I<br/>        bet..."<br/>Lukthil says, "If we see stuff like that hanging around, we disable it.<br/>        Can't have it building up."<br/>Azakhil says, "Ok, I see...not that I've ever seen it bigger than 3 for a<br/>        period of time :)"<br/>Lukthil says, "That's because we keep it small on purpose in the long term.<br/>        Otherwise it'd build up as more and more people coded things that<br/>        make heavy long term use of it and then let them all run."<br/>Azakhil says, "Well I have avoided doing it for fear of lagg or loosing it<br/>        in a crash..."<br/>Sifca thanks lukthil for the info and excuses herself as she is being<br/>        summoned.<br/>Sifca has left.<br/>Lukthil says, "Yes, that's another thing. Crashes screw a lot of things up<br/>        which is why I try to get everyone to stop executing things before<br/>        I shutdown."<br/>Paleran says, "@startup :)"<br/>Lukthil says, "That's the coders solution, but how many of you have done<br/>        that for all your objects? :)"<br/>Belegril grins.<br/>Paleran has only needed it for two.<br/>Paleran says, "Otherwise, it would be on all of them :)"<br/>Azakhil doesn't need it<br/>Belegril says, "What would I need @startup for?"<br/>Lukthil says, "I have it on two as well."<br/>Sabrina says, "@st...neverminds and looks at the help :)"<br/>Paleran guesses +mail and +top :)<br/>Lukthil says, "Good guesses. :)"<br/>Paleran grins, "Wonder why ;)"<br/>Azakhil says, "Thanks for the info, I was wondering about the efficiency of<br/>        semaphores....presently I only use it for mutual exclusion...<br/>        @waiting and @notifying once a command list is done..."<br/>Paleran says, "Rina, simply it is a list of commands that are executed when<br/>        the game is brought up."<br/>Paleran says, "When someone hits that 'restart' button :)"<br/>Krutt has a question.<br/>Lukthil says, "Krutt, go ahead."<br/>Krutt hrms, "Well, this is probably a dumb question, but when a player<br/>        disconnects, is he set no_command, and what exactly happens to<br/>        the player?"<br/>Lukthil says, "He is set no_command?"<br/>Paleran says, "Be a neat feature, to say the least :)"<br/>Sabrina says, "Nope, he isn't, Krutt :)"<br/>Azakhil says, "No_command is set if the player/object has no $commands..."<br/>Paleran says, "Everyone should be uselocked to themselves, anyhow."<br/>Belegril says, "So, l"<br/>Lukthil nods to Azakhil. "Yes and that is a recent change..."<br/>Belegril says, "Argh."<br/>Lukthil says, "When a player disconnects, his ADISCONNECT attribute is<br/>        executed if it exists, his connected flag gets unset, and he is<br/>        left as a regular old object in the room. The object doesn't appear<br/>        in the room contents listings. That's about it."<br/>Krutt nods, "Well, I guess that wouldn't really matter, depending on what<br/>        happens to the player object... is it set invisible, or moved to a<br/>        holding room, or just removed completely?"<br/>Lukthil says, "No, it just sits there. The connected flag gets unset and<br/>        the mush programming automatically screens non-connected player<br/>        objects from room contents listings."<br/>Nolindil says, "LAST is also changed..."<br/>Azakhil says, "No it's in it's location...if you control a room...you can<br/>        see the people in it, if any....regardless of the flag.."<br/>Nolindil wonders if some other player_invisible attributes are also changed...<br/>Paleran says, "That's part of the Master Room, Nolindil...+top, too I would<br/>        imagine :)"<br/>Krutt nods, "Ah, Okay... but, does it still scan the player for $-commands?"<br/>Thranduil says, "Is just a dark object..and if aint uselocked, can be<br/>        annoying dark object sometimes :P"<br/>Lukthil says, "Yes, players are still scanned just like any other object."<br/>Lukthil says, "But hopefully you are uselocked to yourself so that nobody<br/>        can execute commands on you at all."<br/>Lukthil says, "Technically it's not dark though, Thran, since the dark flag<br/>        is never set. It's just an unconnected player object."<br/>Krutt grins, "I am now... btw, can attributes be uselocked?"<br/>Paleran says, "@atrlock"<br/>Thranduil nods. "What about new created players. Are they now set up with<br/>        uselocks..?<br/>Sabrina says, "Yeah, they are Mazzie."<br/>Lukthil says, "No, individual attributes cannot be uselocked per se. You<br/>        should put code in the attribute to lock it."<br/>Krutt says, "Thanks Paleran, I have been trying to figure that one out for<br/>        a long time."<br/>Lukthil says, "I.e.<br/>        &amp;attr object=@switch %#=&lt;your dbref&gt;,{do stuff},{@pe/s %#=Nope.}"<br/>Thranduil is old, Sabs. Was not uselocked back then.<br/>Paleran nods, "Lukthil's suggestion is a better route, though."<br/>Sabrina grins because this has turned into a "Ask Luk anything you can<br/>        possibly think of while you know he's around!" session.<br/>Azakhil thinks new players should default to be @elock, @lock'd and and<br/>        @ulocked, are they now?<br/>Sabrina grins at Mazzie.<br/>Nolindil laughs<br/>Lukthil says, "Yes, now players are automatically uselocked to themselves<br/>        upon creation."<br/>Azakhil says, "But @elock?"<br/>Lukthil says, "Yes, elocked too."<br/>Sabrina says, "as a =name and not just name even :)"<br/>Lukthil says, "In the old days ulock wasn't done because ulock was a page<br/>        lock when on players. There was no player version of ulock."<br/>Lukthil says, "More questions?"<br/>Nolindil says, "Example time! :)"<br/>Paleran wants to see code :)<br/>Azakhil says, "OK...I knew of problems from people getting robbed that<br/>        way...with no @elock...of course, some people still turn it off<br/>        and forget too....."<br/>Belegril says, "Examples! :)"<br/>Lukthil says, "Okay, if you're up to it, we'll go on to examples."<br/>Kloi_Whitebeard has arrived.<br/>Kloi_Whitebeard bounces in on a bright red pogo-stick, he's obviously OOC!<br/>Sabrina says, "How many M&amp;Ms in a bag of plain M&amp;Ms?"<br/>The sun flashes brightly on the horizon. Night gives way to morning.<br/>Thranduil jumps up and down! Yay!<br/>Belegril says, "Umm, actually, I got rid of the nested tripled iter().<br/>        Still, got a fair number of them. :)"<br/>Lukthil says, "One... two... three... *crunch*. Three."<br/>Paleran says, "Abbout 40...."<br/>Krutt hrms, "One quick question."<br/>Belegril raises his hand.<br/>Lukthil says, "Let me say something by word of preface before we start the<br/>        examples."<br/>Belegril nods.<br/>Belegril says, "Some people set themselves link_OK, Aza. :)"<br/>Kloi_Whitebeard has left.<br/>Lukthil says, "I want to emphasize the purpose of these examples. These are<br/>        EXAMPLES. The point of this is to use actual code to demonstrate<br/>        how the techniques we've discussed can be applied and to potentially<br/>        bring up new things that we might not have thought to talk about.<br/>        The point is NOT to serve as coding slaves for you. :) I will be<br/>        picking and choosing what we will work on and what we won't based<br/>        on concepts I see that could be illustrated."<br/>Nolindil says, "Log for the questions part of class is 72kbytes before<br/>        editing. We'll see if cutting my private discussions out reduces<br/>        it a lot. :)"<br/>Belegril says, "Of course. I have a quite conceptual piece of code, I<br/>        hope. :)"<br/>Paleran had an example....Doosy, too...But I figured out myself while<br/>        raking :)<br/>Lukthil says, "Note that big ugly things that are hard to understand what<br/>        they are supposed to do in the first place are not so useful.<br/>        Understanding the problem is an important part of learning. :)"<br/>Nolindil grins<br/>Belegril says, "Umm, this might be a drawback of my example. :)"<br/>Lukthil says, "Krutt, you had one final question?"<br/>Nolindil has good code to show off, and code problems to share. Which do<br/>        you want?<br/>Paleran has only good code ;)<br/>Azakhil is more interested in seeing examples<br/>Thranduil gees.<br/>Thraile has lots of bad code<br/>Belegril also has a good code. Just hard to read sometimes. :)<br/>Sabrina admits to being human and having code that isn't perfect. :)<br/>Lukthil says, "Also note that these code examples will be logged along<br/>        with the rest of this and will be made available to anyone via<br/>        ftp so don't offer stuff that's secret or you don't want stolen. :)"<br/>Krutt nods, "Yes, I just wondering the time differences in execution of<br/>        nesting @swi statements and chaining them."<br/>Paleran was kidding...95% of my code is horrible until I work over it<br/>        three or four times.<br/>Thranduil grins and thinks we all have code that can be worked much better :P<br/>Lukthil says, "Nesting @switches means an extra queue pass for each nested<br/>        level. That makes them in general extremely slow."<br/>Lukthil says, "Nesting switch() on the other hand is quite fast in<br/>        comparison."<br/>Sabrina grins, "All of my code is horrible until someone else looks it<br/>        over. ;)"<br/>Krutt nods, "That is what I figured, I try to chain them when I can."<br/>Lukthil says, "I will be very surprised if anyone has anything that can't<br/>        be improved."<br/>Paleran laughs, "Yeah..True Mazzie...I'd love to see Lukthil efficiencize<br/>        this one I've been working on lately :)"<br/>Paleran raises his hand, "I do :)"<br/>Krutt hrms, "Okay, thanks Lukthil."<br/>Lukthil says, "Belegril has been pining away. What do you have for us, Bel?"<br/>Belegril says, "My code deals with having to invert shuffle()'d permutations<br/>        and other stuff."<br/>Belegril says, "A quick introduction to the problem if no one objects?"<br/>Azakhil tries to avoid nested switches and go for @swi a/b/...=result/*/..,<br/>        and so on....<br/>Belegril says, "No one objects? :)"<br/>Lukthil says, "Okay.. shuffle is a good example of a function that gives<br/>        the mush a succinct instruction as to how to do a relatively complex<br/>        operation."<br/>Belegril says, "Well, this problem arises in my ship code. Every ship has a<br/>        number of sails and each of them has some hitpoint. The sails<br/>        hitpoints are stored in an attribute of the sails object in the<br/>        following format."<br/>Belegril says, "&amp;sails-hp &lt;sails&gt;=5|6|7 10|12|11|3 2|5|4 (as an example)."<br/>Azakhil waves bye, "gotta go...I'll peruse the log...Thanks Luk!<br/>Thranduil wavers.<br/>Lukthil waves<br/>Paleran says, "You can't avoid nested iter()s there."<br/>Sabrina says, "Toodles"<br/>Belegril says, "This means that the ship has three masts. The sails on the<br/>        first mast have 5, 6,7 hitpoints respectively, on the second one --<br/>        10,12,11,3, etc."<br/>Lukthil says, "Well let's wait and see, Pal."<br/>Azakhil heads back to Middle-earth.<br/>Azakhil has left.<br/>Belegril says, "I avoided them, Pal. :)"<br/>Belegril grins.<br/>Paleran ooos, "Love to see how ya did it, then :)"<br/>Lukthil says, "Certain functions like vadd() and vsub() will be useful<br/>        here I'm thinking."<br/>Belegril says, "Now, we know that hp tend to get lower in combat. The<br/>        problem is to repair them."<br/>Belegril says, "Yup."<br/>Belegril says, "So, at each dawn/dusk the ZMO would trigger the repair<br/>        process."<br/>Lukthil says, "Don't need dawn/dusk trigger."<br/>Paleran wonders if there isn't a function Lukthil doesn't think of<br/>        immediately :)<br/>Nolindil says, "He wrote the code, he has them all memorized."<br/>Sabrina thinks there isn't.<br/>Belegril says, "There is a function that calculates the number of hp<br/>        (if any) that has to be added to the total. But one has to<br/>        distribute them."<br/>Belegril says, "How come, Luk?"<br/>Lukthil says, "Use lazy evaluation. Who cares what the status of the<br/>        sails are until somebody looks. Instead of using get() to get<br/>        the sail status, use a ufun that figures out if there should<br/>        have been repairing going on this whole time and if so, adds it in."<br/>Belegril says, "I don't understand. Do you mean coding a $repair command?"<br/>Nolindil hehs. "In other words, store date of last damage, the calculate<br/>        repairs from that time when someone tries to board the ship again.<br/>Lukthil says, "Precisely, Nolindil."<br/>Belegril says, "Umm, possible."<br/>Belegril says, "Anyway, this makes the whole outer iter() redundant, but<br/>        still..."<br/>Lukthil says, "The combat resources are all coded this way. Those things<br/>        don't do a thing until somebody checks to see how much ore they<br/>        have. Then they figure out how much they should have been making<br/>        all along."<br/>Belegril says, "Well, so there is function that gets evaluated once it is<br/>        triggered. %0 is the number that expired."<br/>Belegril says, "number of hours."<br/>Lukthil says, "Let me sketch the basic format for you..."<br/>Belegril says, "Sorry?"<br/>Lukthil says, "Right now in your code there are places all over the place<br/>        that use get() or some similar function to read the stats attr, right?"<br/>Belegril says, "Yup."<br/>Lukthil says, "What you do is you make a special ufun. What that ufun does<br/>        is this: There's an attribute somewhere that has the time that the<br/>        sails' hp were last looked at on it. (I'll explain in a moment how<br/>        to set that part up)."<br/>Belegril says, "So, the basic idea in coding it is as follows."<br/>Belegril says, "I get it, Luk. :)"<br/>Belegril waits before continuing.<br/>Lukthil says, "This ufun reads that attribute and based on the difference<br/>        between that time and the current time, it calculates how much<br/>        repair should have been done."<br/>Lukthil says, "But maybe others don't, Bel. This is a class. :)"<br/>Paleran would like to hear, this, actually :)<br/>Thraile thanks luk for continuing<br/>Belegril says, "Precisely. That's what it does in its current version.<br/>        10 hours for &amp;daytime and 14 for &amp;nighttime. But I'll change it,<br/>        of cours.e"<br/>Nolindil says, "More properly, for ship repair, you might prefer to store<br/>        the time that the ship returned to its dock?"<br/>Lukthil says, "Then what it does is it sets the hp attribute with the new<br/>        values AND it sets the attribute that's supposed to store the time<br/>        with the CURRENT TIME. And then it returns the value that it just<br/>        set in the stats attr."<br/>Belegril says, "831609669"<br/>Belegril says, "[secs()]"<br/>Lukthil says, "secs() Yes. :)"<br/>Krutt has left.<br/>Paleran says, "831609692.."<br/>Krutt has arrived.<br/>Paleran hrms.<br/>Krutt says, "Sorry about that..."<br/>Thraile waves and goes to bed<br/>Lukthil says, "Now you have this magic ufun that both updates the sails hp's<br/>        and returns the value of the hp's at the same time."<br/>Belegril says, "831609715"<br/>Paleran says, "secs()?"<br/>Belegril hmms.<br/>Paleran cools :)<br/>Lukthil says, "What you then do is replace all calls to the get() that reads<br/>        the stats with instead a call to this ufun."<br/>Sabrina will brb!<br/>Nolindil censors all these bad words...<br/>Belegril says, "Cool. Thanks, Luk. :)"<br/>Lukthil says, "The only thing that you have to be careful about is that if<br/>        there's anything that doesn't look at the sails but would change<br/>        anything about how the repairs are being done, you must make that<br/>        code look at the sails and then just toss the result. That forces<br/>        an update of their stats."<br/>Belegril says, "Actually, I have to count in more... The rates of repairs<br/>        depends on whether the ship is at sea or in the port and on whether<br/>        it was moving or fihgting recently or not."<br/>Lukthil says, "So everytime the ship moves, you need to set something<br/>        somewhere that indicates that."<br/>Thraile has disconnected.<br/>Thraile heads back to Middle-earth.<br/>Belegril says, "Yeah, I do it with @amove on the ships (@atrlocked, of<br/>        course). When the ship moves it 'uses' it distantly, which updates<br/>        t&amp;resting and &amp;last-location. Two at the same time to thwart those<br/>        who move the ship when halted."<br/>Belegril says, "Double check. :)"<br/>Lukthil says, "Note that a remote use is doable by anyone so if there's a<br/>        security risk involved there, you will need to @switch on %# in the<br/>        amove code."<br/>Belegril says, "It does a switch on the list of the ships' dbrefs."<br/>Lukthil says, "That'd do it then."<br/>Belegril says, "can I move then to the attribute itself? :)"<br/>Lukthil says, "You will likely need to toy with the code a bit to make sure<br/>        it takes everything into account but that's the basic idea."<br/>Lukthil says, "Hmm?"<br/>Belegril says, "Sure. :)"<br/>Nolindil will try to break it for you... :)<br/>Lukthil says, "Does anyone have any questions about how we handled this<br/>        coding problem?"<br/>Belegril says, "Well, we get the amount of new hp to add, but how to<br/>        distribute them randomly? recall that &amp;sails-hp is a space-separated<br/>        list of |-separated lists. :)"<br/>Lukthil says, "Bel: Depending on how you wish the distribution to be done,<br/>        I would split the sum into a space-separated list and then just<br/>        insert the | delimiters into the proper places."<br/>Thranduil grins, had to afk for awhile and compleatly lost the thread..<br/>        read about it later..<br/>Belegril says, "Yeah, up to one point. :) The sails don't have to be<br/>        repaired form the left to the right always. :)"<br/>Belegril says, "from even"<br/>Belegril says, "That is what I use shuffle() for."<br/>Lukthil says, "Perhaps you would want to create a customization option.<br/>        Place the sails on a priority list. Have it repair from top to<br/>        bottom of the list."<br/>Belegril says, "Umm, maybe. Interesting idea."<br/>Lukthil says, "Afterall, the captain could choose to repair one thing<br/>        before another."<br/>Belegril says, "So far it does the things completely at random."<br/>Lukthil says, "I priority list might actually lessen the computations and<br/>        add functionality at the same time."<br/>Lukthil says, "I-&gt;A"<br/>Belegril says, "Right. I should think of how to make the customization<br/>        command friendly, though. :) Typing 23 sail-names one after one,<br/>        with some as long as 'main topgallantstaysail' is rathe rtedious.<br/>        Pure numbers is not too IC-appealing."<br/>Lukthil says, "I think I'm going to have to cut the class short. I wanted<br/>        to end on the hour. Since there seems to have been some response to<br/>        this, I will likely be offering another identical class in the<br/>        future which will allow you to bring your examples back. Also as<br/>        you know, I am always around to help you with things and I read my<br/>        +mail dutifully so feel free to ask for help with things."<br/>Paleran grins and would love to see you create one of his functions better...<br/>Lukthil says, "Bel: A nice command might be +priority sailname=rank. Command<br/>        would remove the sail from it's current position in the list and<br/>        add it to the rankth position."<br/>Thranduil smiles and nods at Luk, "It's been great. - And another one would<br/>        be very appriciated with examples and such.<br/>Belegril says, "Cool. Thanks again. Very helpful class, Luk. :)"<br/>Sabrina grins and will have fixed her booboo by then, but that's okay. :)<br/>Lukthil says, "Let me just end with a parting comment..."<br/>Lukthil says, "One thing to keep in mind as a programmer is to dare to look<br/>        at problems in new ways. Breaking "mental fixations" as they call<br/>        them is a big part of general problem solving and it applies to<br/>        code too. A good piece of code is much like a work of art. You<br/>        look at it once and it's not totally obvious what is going on. And<br/>        after you stare at it a while you eventually say... "oh wow that's<br/>        really clever". That's when you know you've got something that is<br/>        refined, efficient, and does the job well. I hope these techniques<br/>        come in handy. Don't be afraid to use them. :)"<br/>Sabrina wows, something serious as a parting comment, Luk? I'm surprised!<br/>Lukthil says, "Hey code is beautiful. Can't deny it. :)"<br/>Paleran smiles, "I use it all the time, Luk :) THanks for the calss...It was<br/>        most insightful!"<br/>Belegril smiles, "We'll try." :)<br/>Sabrina chuckles<br/>Krutt grins, "You got that straight Lukthil!"<br/>Sabrina gives da teach a cookie, "Thanks for da class!"<br/>Belegril bows to the teacher.<br/>Thranduil smiles and hopes she will one day be able to do such codework<br/>        since art aint anything she can do :P<br/>Belegril has left.<br/>Thranduil gives Luke the apple she's been savin', "Thanks alot.:)<br/>Lukthil grins and waves.<br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>