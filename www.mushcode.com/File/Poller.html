<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Poller</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Poller.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Poller.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Poller.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Poller.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Poller.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Poller.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Other.html">Other</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Poller.html#">Poller</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Poller
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>An object for taking polls. Allows for multiple choice answers.</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <span>
                    <a href="../Author/Territan@OlympusIslandMUSH.html">Territan</a>@<a href="../Source/OlympusIslandMUSH.html">OlympusIslandMUSH</a>
                </span>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Other.html">Other</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="http://www.mushcode.com/Command/@create" class="command">@create</a>,
                    <a href="http://www.mushcode.com/Command/@describe" class="command">@describe</a>,
                    <a href="http://www.mushcode.com/Command/@link" class="command">@link</a>,
                    <a href="http://www.mushcode.com/Command/@pemit" class="command">@pemit</a>,
                    <a href="http://www.mushcode.com/Command/@set" class="command">@set</a>,
                    <a href="http://www.mushcode.com/Command/@switch" class="command">@switch</a>,
                    <a href="http://www.mushcode.com/Command/@wipe" class="command">@wipe</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/ansi.html" class="function">ansi&#40;&#41;</a>,
                        <a href="../Function/center.html" class="function">center&#40;&#41;</a>,
                        <a href="../Function/div.html" class="function">div&#40;&#41;</a>,
                        <a href="../Function/edit.html" class="function">edit&#40;&#41;</a>,
                        <a href="../Function/eq.html" class="function">eq&#40;&#41;</a>,
                        <a href="../Function/first.html" class="function">first&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/grep.html" class="function">grep&#40;&#41;</a>,
                        <a href="../Function/hasattr.html" class="function">hasattr&#40;&#41;</a>,
                        <a href="../Function/if.html" class="function">if&#40;&#41;</a>,
                        <a href="../Function/itemize.html" class="function">itemize&#40;&#41;</a>,
                        <a href="../Function/iter.html" class="function">iter&#40;&#41;</a>,
                        <a href="../Function/last.html" class="function">last&#40;&#41;</a>,
                        <a href="../Function/lattr.html" class="function">lattr&#40;&#41;</a>,
                        <a href="../Function/member.html" class="function">member&#40;&#41;</a>,
                        <a href="../Function/mid.html" class="function">mid&#40;&#41;</a>,
                        <a href="../Function/mul.html" class="function">mul&#40;&#41;</a>,
                        <a href="../Function/repeat.html" class="function">repeat&#40;&#41;</a>,
                        <a href="../Function/rjust.html" class="function">rjust&#40;&#41;</a>,
                        <a href="../Function/setq.html" class="function">setq&#40;&#41;</a>,
                        <a href="../Function/setunion.html" class="function">setunion&#40;&#41;</a>,
                        <a href="../Function/sub.html" class="function">sub&#40;&#41;</a>,
                        <a href="../Function/t.html" class="function">t&#40;&#41;</a>,
                        <a href="../Function/ucstr.html" class="function">ucstr&#40;&#41;</a>,
                        <a href="../Function/words.html" class="function">words&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/CobraMUSH.html" class="server">CobraMUSH</a>,
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>,
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>,
                        <a href="../Server/TinyMUX.html" class="server">TinyMUX</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Poller
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Poller.html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        @create POLLER<br/>@link POLLER==me<br/>@DESCRIBE POLLER=[center(Polling,78,=)]%rThe following are the currently active polling topics. Type [ansi(hy,POLL HELP)] to see how you can participate. Ahhhh, democracy. Topics you haven't voted on yet will be highlighted in [ansi(bhr,red)].%r%r[iter(edit(lattr(me/POLLQ_*),POLLQ_,),[if(hasattr(me,POLLA_##_%#),##:,ansi(bhr,##:))][first(get(me/POLLQ_##),%r)],,%r)]%r[center(Code by Territan@OlympusIslandMUSH,78,=)]%R%RNote: This is a nice poll for when you want to poll staff or players on anything.<br/>@set POLLER/DESCRIBE=no_command visual prefixmatch<br/>&amp;$POLL POLLER=$POLL: @pemit %#=[center(Polling,=)]%rThe following are the currently active polling topics. Type [ansi(hy,POLL HELP)] to see how you can participate. Ahhhh, democracy. Topics you haven't voted on yet will be highlighted in [ansi(bhr,red)].%r%r[iter(edit(lattr(me/POLLQ_*),POLLQ_,),[if(hasattr(me,POLLA_##_%#),##:,ansi(bhr,##:))][first(get(me/POLLQ_##),%r)],,%r)]%r<br/>&amp;POLL_ADD_STAR_STAR POLLER=$POLL ADD *=*: @switch [hasattr(me,POLLQ_[ucstr(%0)])]=1,{@pemit %#=POLL: Sorry, but there's already an active poll with that abbreviation.},0,{&amp;POLLQ_%0 me=[first(%1,|)]|[ucstr(last(%1,|))]; @pemit %#=POLL: New poll "[ucstr(%0)]" has been set.}<br/>&amp;POLL_DELETE_STAR POLLER=$POLL DELETE *: @switch [setq(0,ucstr(%0))][hasattr(me,POLLQ_%q0)]=0,{@pemit %#=POLL: Sorry, but I can't find a poll labeled "%q0".},1,{&amp;POLLQ_%q0 me; @wipe me/POLLA_%q0_*; @pemit %#=POLL: Poll "%q0" has been purged from the system. I hope you didn't need the results from it any more...}<br/>&amp;$POLL_HELP POLLER=$POLL HELP: @pemit %#=[center(Poll Help,78,-)]%rPOLL is a handy little way to ask questions and get answers. Use it frequently and copiously.%r[ansi(hy,POLL)] by itself will show what active polls there are on the machine at any given time. Each topic has a code in front of it, in green, which you should note for the next item:%r[ansi(hy,POLL LOOK &lt;ABBREV&gt;)] will let you see a specific poll topic, all the choices associated with it, and how voting's been running so far. Finally...%r[ansi(hy,POLL VOTE &lt;ABBREV&gt;=&lt;ANSWER&gt;)] will register your answer on the poll to be counted.%rThe admins have their own functions to add and remove polls, but not necessarily to see who voted how on which topic. After all, that might interfere with fair and honest polling.%r<br/>&amp;$POLL_HELP2 POLLER=$POLL HELP2: @pemit %#=[center(Staff Help for Poll,78,-)]%r[ansi(hy,POLL LIST)] will list all active polls. Simple.%r[ansi(hy,POLL VIEW &lt;ABBREV&gt;)] will show the poll in detail, and how voting has gone. Again, simple.%r[ansi(hy,POLL DELETE &lt;ABBREV&gt;)] will completely remove the poll from the list. Simple again.%r[ansi(hy,POLL ADD &lt;ABBREV&gt;=&lt;TEXT&gt;|&lt;CHOICES&gt;)] is where things get hairy. &lt;TEXT&gt; is the text of the poll, with %%r (carriage return) separating the question from the answers for formatting niceness. Use %%r between possible answers as you like. The v-bar is a separator which gets embedded in the question again for formatting reasons, and what follows the v-bar is a space-delimited list of possible answers (i.e. a b c d e f etc.) so the players can't get clever and put in multiword answers. The formatting of the results list allows for possible answers of up to three letters, if you really need them.%r<br/>&amp;$POLL_LOOK_STAR POLLER=$POLL LOOK *:@switch [setq(0,ucstr(%0))][hasattr(me,POLLQ_%q0)]=0,{@pemit %#=POLL: There is no currently active poll labeled "%q0"},1,{@pemit %#=[center(&lt;&lt; Poll Topic "%q0"&gt;&gt;,78)]%r[first(get(me/POLLQ_%q0),|)]%r%r[setq(1,edit(lattr(me/POLLA_%q0_*),POLLA_%q0_,))][setq(2,setunion(iter(%q1,get(me/POLLA_%q0_##)),))][if(eq(%q1,0),Nobody has responded yet.,Out of [words(%q1)] respondant[if(eq(words(%q1),1),,s)]...%r[iter(%q2,[setq(3,words(grep(me,POLLA_%q0_*,##)))][rjust(##:,4)][rjust(%q3,2)][ansi(b[mid(rbgymcrbgymcrbgymcrbgymc,member(%q2,##),1)],repeat(&gt;,div(mul(%q3,60),words(%q1))))][repeat(-,sub(60,div(mul(%q3,60),words(%q1))))],,%r)])]%r}<br/>&amp;$POLL_VOTE_STAR_STAR POLLER=$POLL VOTE *=*:@switch [setq(0,ucstr(%0))][setq(1,ucstr(%1))][hasattr(me,POLLQ_%q0)][t(member(last(get(me/POLLQ_%q0),|),%q1))][hasattr(me,POLLA_%q0_%#)]=0*,{@pemit %#=POLL: Sorry, but there is no active question "%q0".},10*,{@pemit %#=POLL: Sorry, but "%q1" is not one of the valid choices for poll "%q0"-- please use [itemize(last(get(me/POLLQ_%q0),|),%b,or,\,)].},110,{&amp;POLLA_%q0_%# me=%q1; @pemit %#=POLL: Noted, you are answering question %q0 with "%q1".},111,{&amp;POLLA_%q0_%# me=%q1; @pemit %#=POLL: Noted, you are changing your answer on question %q0 to "%q1"},{@pemit %#=POLL: Nothing matched the way you expected it to. The logic you got in here is SO boned...}<br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>