<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Moe&#39;s Mushkode Manual - Building on the mywho command.</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Globals.html">Globals</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#">Moe&#39;s Mushkode Manual - Building on the mywho command.</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Moe&#39;s Mushkode Manual - Building on the mywho command.
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p></p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <a href="../Author/Moe.html">Moe</a>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Globals.html">Globals</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="http://www.mushcode.com/Command/@emit" class="command">@emit</a>,
                    <a href="http://www.mushcode.com/Command/@pemit" class="command">@pemit</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/ansi.html" class="function">ansi&#40;&#41;</a>,
                        <a href="../Function/center.html" class="function">center&#40;&#41;</a>,
                        <a href="../Function/command.html" class="function">command&#40;&#41;</a>,
                        <a href="../Function/default.html" class="function">default&#40;&#41;</a>,
                        <a href="../Function/eval.html" class="function">eval&#40;&#41;</a>,
                        <a href="../Function/iter.html" class="function">iter&#40;&#41;</a>,
                        <a href="../Function/lcstr.html" class="function">lcstr&#40;&#41;</a>,
                        <a href="../Function/left.html" class="function">left&#40;&#41;</a>,
                        <a href="../Function/ljust.html" class="function">ljust&#40;&#41;</a>,
                        <a href="../Function/lwho.html" class="function">lwho&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/repeat.html" class="function">repeat&#40;&#41;</a>,
                        <a href="../Function/rjust.html" class="function">rjust&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/ucstr.html" class="function">ucstr&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>,
                        <a href="../Function/xget.html" class="function">xget&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/TinyMUSH.html" class="server">TinyMUSH</a>.
            </div>

    </div>
</div>


<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Moe&#39;s Mushkode Manual - Building on the mywho command.
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Moes-Mushkode-Manual---Building-on-the-mywho-command-.html#">
                    <i class="icon-resize-full"></i> Select Content
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        ~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*<br/>|\    /|       |\    /|         |\    /|<br/>| \  / |       | \  / |         | \  / |<br/>|  \/  |oe's   |  \/  |ushkode  |  \/  |anual<br/>~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*<br/><br/>Lesson 2: WHAT? YOU WANT MORE?<br/><br/>	Alright, in our last lesson, we handled a number of basics of<br/>mushcoding, and created a 'mywho' command that did a couple of basic<br/>coding procedures. It looked something like:<br/><br/>&amp;cmd_mywho obj=$mywho:@pemit<br/>%#=iter(lwho(),switch(lcstr(xget(##,sex)),f*,ucstr(name(##)),m*,%t<br/>[name(##)],name(##)),,%R)<br/><br/>	Look familiar? Make sense? If the answer to both is no, go back<br/>and read Lesson 1 of this tutorial. If the answer to only the second<br/>question is no, go back and read Lesson 1 of this tutorial. If it at least<br/>makes sense, let's move on.<br/><br/>U-FUNCTIONS<br/><br/>	At this point in the tutorial, we're going to start making our<br/>code look a bit cleaner, and also by learning these methods, we'll start<br/>finding ways to make the tracking down of bugs easier. It is possible,<br/>through the use of something called u-functions, to break your code up<br/>into chunks, creating in essence subroutines.<br/>	This is useful if your code is going to be using the same bits<br/>time and time again, and you don't want to have to type them out each<br/>time. Or, if your command is starting to get lengthy and full of various<br/>parentheses that you're afraid you'll lose track of, it's time to use<br/>u-functions.<br/>	In short, a u-function is a user-defined function routine that can<br/>be stored in an attribute separate from the one in which the command is<br/>stored. Since they are going to be stored in an attribute(all mushcode is<br/>stored in attributes, so this should come as no surprise), it is helpful<br/>to adopt a naming convention, as discussed in Lesson 1.<br/>	There are many possibilities for what you can name your u-function<br/>attributes. fn_dostuff would be the name of an attribute that did stuff,<br/>and by its name, you would know it was a function routine. do_stuff is<br/>also valid. Whatever works for you, great. Stick with it, and be<br/>consistent. In the offchance that someone has to maintain your code, it is<br/>helpful if you name your attributes logically and clearly.<br/>	If you look at our mywho from above, you'll notice that where the<br/>switch() is, it's starting to get a little cumbersome with the<br/>parentheses. So, let's put this into a u-function. Let's name it fn-sex,<br/>as this tells us that it is a function that handles or checks sex in some<br/>way. (Naughty minds, I tell you!)<br/>	Now, our ufun(short for u-function) is going to need to be able to<br/>accept the dbref that is being iterated in each pass of our command. This<br/>is where we learn about passing parameters.<br/><br/>PARAMETERS<br/><br/>	As if on cue, eh? Parameters are values passed from one piece of<br/>code to another. There are certain hard and fast rules for doing this, so<br/>you don't have to worry too much about being confused. First, you can only<br/>pass up to ten parameters. They are always accepted in the order in which<br/>they are passed, and their order will always be referenced the same<br/>way. Mushes store parameters in %0-%9. %0 is always the first parameter<br/>passed, %1 the second, %2 the third, etc.<br/>	Now, our switch() routine from above only has one element of it<br/>that changes, the ##. We will turn that into %0, since that is the first<br/>parameter that can be passed. In our case, it will be the only one. Here<br/>is how our ufun will look.<br/><br/>&amp;fn-sex<br/>obj=[switch(lcstr(xget(%0,sex)),f*,ucstr(name(%0)),m*,%t[name(%0)],name(%0))]<br/><br/>	Why are there brackets around it, you ask? If you remember your<br/>rules, you know that brackets force the evaluation of functions. This<br/>entire routine is functions, and we want to be sure that it evaluates,<br/>regardless of what may come before it where it was called. It is better to<br/>always enclose your ufuns in brackets than to risk having it not be<br/>evaluated. <br/>	Now, how do we call this wonder of coding technology, you<br/>ask? Even if you didn't, here's how. We rewrite our cmd_mywho to include a<br/>u() function. This is how ufuns got their name, because they are invoked<br/>by the u() function.<br/><br/>BRIEF TANGENT TO TEACH YOU SOMETHING<br/><br/>	There is a lot of confusion with beginning coders about the<br/>difference between v() and u(). Let me pause in our mywho development to<br/>explain this, in a modest amount of detail. As I just explained, u() is<br/>used to invoke a subroutine of functions. It follows the syntax:<br/>u([&lt;obj&gt;/]&lt;attribute&gt;,[&lt;param&gt;])This means it is telling the mush:<br/>'Evaluate the contents of this attribute.'<br/>	If you specify an object and an attribute, it means you want to<br/>read and evaluate an attribute stored on an object other than that which<br/>the code you're using is on. Parameters are optional, as not all ufuns<br/>require them. But, they can be included, if necessary.<br/>	v() on the other hand, does none of these things. The v() function<br/>only returns the value of an attribute(V, value, get it?). It does not do<br/>any substitution, evaluation, nor can v() fetch an attribute from another<br/>object. It can only see attributes on the same object as the code, and<br/>will only ever return what is stored in that attribute. It will not do<br/>/any/ evaluation.<br/>	Here's how I learned to remember it. v() gives me the value of an<br/>attribute. u() uses the attribute. V - value. U - use. Simple, no? I hope<br/>so. Back to our regularly scheduled tutorial.<br/><br/>CALLING A U-FUNCTION<br/><br/>	Where our switch() was before in our mywho, we are going to put<br/>the following code:<br/><br/>	u(fn-sex,##)<br/><br/>	What this does is tells the command to 'use' the functions stored<br/>in the attribute named fn-sex, stored on the same object that the command<br/>is on. It tells it also to use the current value of ##, which will be<br/>passed as %0. So, now our new mywho looks like:<br/><br/>&amp;cmd_mywho obj=$mywho:@pemit %#=iter(lwho(),u(fn-sex,##),,%R)<br/><br/>	Looks a lot better than it did when we started, doesn't<br/>it? Cleaner, and more maintainable. Because now, we can change fn-sex if<br/>we want to change something about the display, and we don't have to change<br/>our mywho command at all. Such is one of the benefits of ufuns. They are<br/>your friend.<br/>	We can take it even a step further. We could have a fn-mywho that<br/>does our iter(), and calls fn-sex from within it. And then our mywho<br/>command would simply be:<br/><br/>&amp;cmd_mywho obj=$mywho:@pemit %#=u(fn-mywho)<br/><br/>	We could do that, yes. But, I like to see something in my<br/>command. Makes me feel like I did something. As well, there are some small<br/>efficiency reasons not to do this. If an object is set to be read for<br/>$commands, then the mush is going to check every attribute on that object<br/>for $commands, each time a command is entered. It can get tedious to set<br/>each and every function attribute to no_command, if you want to be the<br/>most efficient about it.<br/>	What? Setting function attributes to no_command?? Yes, you can do<br/>that. They aren't commands in and of themselves, and setting them<br/>no_command doesn't stop their evaluation. It just tells the mush not to<br/>look at them when trying to match a $command used by a player. And now,<br/>for something completely different.<br/><br/>COSMETIC CODING<br/><br/>	Quite often as coders, we are faced with the task of making<br/>something we produce look nice on the screen. This involves a lot of<br/>justifying, centering, truncating...a mess of things that get in the way<br/>of doing actual manipulation of data. But, if you learn a few simple<br/>tricks, you can institute some good habits and ease the path of what I<br/>like to call 'Cosmetic Coding'.<br/>	First tenet of cosmetic coding is this: Always code for a<br/>78-column screen. Even in the beginning of the 21st century, where it's<br/>feasible to have a 1600x1400 resolution screen, your standard terminal<br/>window is designed to be 80 columns wide. By limiting yourself to<br/>78-column coding, you are going to always have a presentation that can be<br/>viewed by anyone logging on to your mush. Only coding for people who see<br/>things in 140 columns is not going to win you any friends that are Linux<br/>users, for instance.<br/>	A side note that I should throw in here while I am at it. Not<br/>everyone uses a fixed-width font anymore. In the old days, it was fixedsys<br/>and courier new. Now, there are more fonts than flavours of Nehi, and only<br/>a select few of them are fixed-width font. All of the careful coding for<br/>alignment in the world will go quickly out the window when viewed in a<br/>variable-width font. To make sure that your code is going to be properly<br/>justified, make sure you're looking at it in Courier New, or a similar<br/>fixed-width font.<br/>	While I could spend a lot of time talking about how to do ascii<br/>borders, and artistic things like that, I am going to focus more on the<br/>justification and alignment of text, taking our mywho in a wholly new<br/>direction in the process. We are going to revamp our fn-sex so that it<br/>displays two columns of data. One is the character's name, and the other<br/>is their sex.<br/>	Now, for starters, let's begin with the following code:<br/><br/>&amp;fn-sex obj=[name(%0)] [xget(%0,sex)]<br/><br/>	Type that in, and then run your mywho command. You'll see the data<br/>you requested, and most likely you'll have one column of names that is<br/>nicely left-justified and a column of gender specifications that is<br/>uneven, as it's spaced based on what the character's name is. <br/>	A lot of beginning coders at this point will think to fix that by<br/>putting a %t between the name() and the xget() functions, thinking that<br/>will provide a uniform distance between the two. It doesn't, for two<br/>reasons. <br/>	One, not everyone has the same tab width set on their client.<br/>While 3 or 4 spaces is the most common, it is by no means universal, and<br/>those two values by themselves are different and therefore can cause<br/>specific alignment problems.<br/>	Two, the %t only moves the text to the next tab stop on the<br/>screen. That may be in one or seven spaces, depending on the length of the<br/>text preceding it. Again, while it's a nice idea, you have no guarantee<br/>that it's going to align your text properly. There is a better way.<br/><br/>LJUST()<br/><br/>	Mushcode provides you with three justification functions. ljust(),<br/>rjust(), and center(). All three of these functions behave similarly, in<br/>that they allow you to specify a total column width that you would like to<br/>put your text in, and providing that your text isn't longer than that<br/>width, it will pad the appropriate end(s) of your text with whitespace in<br/>order to achieve the total length.<br/>	These three functions also allow you to pad the supplied text with<br/>a character other than a blank space, and thanks to this, we are able to<br/>visually see how they work, in order to understand them better. Enter the<br/>following command(think doesn't exist on TinyMUSH2.2, so I suggest using<br/>@pemit me= or @emit instead):<br/><br/>think ljust(Word,10,+)%R[rjust(Word,10,+)]%R[center(Word,10,+)]<br/><br/>	You should get back something that looks like this:<br/><br/>Word++++++<br/>++++++Word<br/>+++Word+++<br/><br/>	You can see how the mush pads the text you supply to make the<br/>output be the assigned length. We can use this to our advantage when we<br/>are doing cosmetic coding, because it allows us to make fixed-width<br/>columns that will always line up. Consider the following modification to<br/>fn-sex:<br/><br/>&amp;fn-sex obj=[ljust(name(%0),25)][xget(%0,sex)]<br/><br/>	Type that in, and then run your mywho command again. Providing<br/>that none of your characters have names greater than 25 characters, it<br/>should look pretty snazzy. Now why didn't we justify the sex column? It<br/>wasn't necessary. You only need to left-justify something in order to<br/>align what comes /after/ it. There is nothing after the sex on each line,<br/>so there is no need to justify that column.<br/><br/>AVOIDING BLANK SPACE<br/><br/>	Something that will help both you as a coder, and your users, is<br/>avoiding blank space to signify that something doesn't exist. It is as<br/>much a part of robust coding as it is cosmetic coding, and so I shall<br/>address it here, while you're still relatively impressionable in your<br/>coding skills and habits.<br/>	Consider our current fn-sex, and the case of two or three<br/>characters that don't have their @sex attribute set. As it is now, the<br/>xget() will simply retrieve a null string, or no value. This means that<br/>they don't have their sex set, and we intellectually know that. But, in<br/>the spirit of learning to code for other people, let's learn how to<br/>provide some basic data for most any situation. We'll use the<br/>default() function.<br/>	Default() looks for an attribute and tries to read its value, a la<br/>v(). If it either a) can't find the attribute, b) can't read the attribute<br/>due to permissions or lack thereof, or c) the attribute has no value, it<br/>will return a 'default' value. Guess how the function got its name? Here<br/>is the syntax for default(): default(obj/attr,default)<br/>	And here is how we are going to implement it in our fn-sex:<br/><br/>&amp;fn-sex obj=[ljust(name(%0),25)][default(%0/sex,Not set.)]<br/><br/>	This will produce two columns that are guaranteed to have data on<br/>each line, in both columns. It will tell us the character's name, and<br/>their sex, if it is set. If it is not, it will tell us 'Not set.'. If<br/>someone comes behind us and uses our mywho command, they will have a much<br/>clearer understanding of what the command is displaying, through the<br/>simple use of this function.<br/><br/>TRUNCATING<br/><br/>	One of the onerous jobs of the mushcoder is truncating text to fit<br/>in a field. In our current case, we're going to expand our mywho command<br/>and learn how to truncate at the same time. And we're going to expand our<br/>usage of the default() function as well. Now you know why I just made you<br/>learn it, don't you?<br/>	While it's not quite universal, it can be considered a standard<br/>convention of most RP mushes to have players set a &amp;fullname attribute on<br/>their character to indicate what the full name of their beloved creation<br/>is, as opposed to simply the screen name by which they login. For the next<br/>level of our mywho, let's adjust our display so that it gives us the<br/>fullname attribute, if set, and if not, just gives us the character's<br/>name. We will need to justify this column, still, and also truncate so<br/>that it doesn't run over our specified width.<br/>	Sadly, ljust(), rjust(), and center() do not truncate for us. If<br/>the text is wider than the width we specify, it will simply display the<br/>text as is. The solution for this is the simple inclusion of the<br/>left() function. This function returns the leftmost number of characters<br/>that we specify. left(This is a test,8) would return 'This is '<br/>	We learned from our previous bit that default() looks for the<br/>value of one attribute, and either returns that, or a default value. So,<br/>let us proceed to figure out first how to apply that to a fullname<br/>attribute. We know the player's dbref is being passed as %0, so it becomes<br/>as simple as: default(%0/fullname,name(%0))<br/>	This then needs to be truncated and justified. Two more functions,<br/>coming right up. You want fries with that?<br/><br/>	ljust(left(default(%0/fullname,name(%0)),24),25)<br/><br/>	I chose to take the 24 leftmost characters and put them in a field<br/>of 25 spaces, that way we are always assured of having at least one column<br/>of whitespace between our name column and our sex column. Whitespace is<br/>necessary for the brain to be able to distinguish between pieces of<br/>information. Make sure to give your users some(both whitespace /and/<br/>pieces of information, that is).<br/>	Now, we just need to redo our fn-sex, so that it looks like:<br/><br/>&amp;fn-sex<br/>obj=[ljust(left(default(%0/fullname,name(%0)),24),25)][default(%0/sex,Not<br/>set.)]<br/><br/>	There. Got all that? Run your mywho again, and marvel in the<br/>elegant layout, the pleasant justification, the tender truncation of<br/>run-on text. <br/><br/>ANSI or HOW TO ANNOY CERTAIN PEOPLE<br/><br/>Disclaimer: Not everyone likes ansi. Not everyone uses ansi. It is<br/>optional. But, it is not accidental. If you are going to use ansi, please<br/>use it tastefully, and not just because you can. Use ansi colour for the<br/>purpose of either tastefully decorating or emphasizing text. Otherwise,<br/>it's like golf pants. Garish, no matter how you look at them.<br/><br/>	For this section, I'm going to simply teach the use of the<br/>ansi() function, which works on both Penn, Tiny, and Mux. There are no<br/>%-substitutions for ansi on Penn, and Tiny and Mux fight over whether to<br/>use %x or %c for ansi colour codes. So, I stick with the basics.<br/>	I am also not going to speak much on this, as it is something to<br/>be experimented with before used. Since it is very(almost strictly)<br/>cosmetic, it rounds out this section of the Manual. The use of the<br/>ansi() function imparts colour to what is otherwise drab ascii text. You<br/>cannot recreate the lushness of your favourite 3D game, so please...don't<br/>try.<br/>	From help ansi(), you can get a sense of the various colour<br/>combinations that are possible. For each colour listed, there are two<br/>varieties, the base colour and the highlight colour. You can see the<br/>difference by typing: think ansi(c,Cyan) and think ansi(hc,Highlight<br/>Cyan). The second is much more striking, bright, and eye-catching.<br/>	The ansi() function should surround the text you are seeking to<br/>change. If we were to apply it to our mywho command, we could list all of<br/>our names in highlight cyan by the following method:<br/><br/>&amp;fn-sex<br/>obj=[ljust(left(ansi(hc,default(%0/fullname,name(%0))),24),25)][default(%0/sex,Not<br/>set.)]<br/><br/>	This would change the colour of our names column only, leaving the<br/>sex column as plain text. Feel free to play with the color combinations,<br/>and various effects that ansi has. It is not supported uniformly on all<br/>platforms. Fortunately, a number of clients no longer support flashing<br/>ansi. Remember that potentially anyone could be using your code, and so<br/>you should code for the capabilities of the maximum number of users, not<br/>just what works on /your/ machine.<br/>	That is as close to another of my original Rules of Coding as you<br/>are going to get. Code for what the most users will be able to do, not<br/>just what you see on your machine.<br/><br/>HEADERS AND FOOTERS<br/><br/>	This is as close to ascii art as I'm going to get, and I shall<br/>only demonstrate one method of making a header/footer combination, and<br/>then leave you to play with characters on your own to come up with a style<br/>that you like.<br/>	It is often visually appealing to display the output of your code<br/>sandwiched between a pleasantly-graphic header and footer that separate<br/>your code's output from the rest of the text on your screen. A sample<br/>header and footer for a mywho would be:<br/><br/>==============================================================================<br/>My Who<br/>==============================================================================<br/>Bob Will           Male<br/>Sara Won't         Female<br/>Guest              Not set.<br/>==============================================================================<br/><br/>	Very simplistic, but you see how it provides a definite 'frame'<br/>for your code's output. Quite often, headers and footers get used over and<br/>over by many different commands, so it's best to put them in an attribute<br/>by themselves, and let them be called by many different things. Here, I<br/>will use the repeat() function to create a line of alternating ~^<br/>patterns. Note that there is a %0 in this function, that will serve as the<br/>title of the command being displayed.<br/><br/>&amp;cmdheader obj=[repeat(~^,39)]%R[center(ucstr(%0),78)]%R[repeat(~^,39)]%R<br/><br/>	The reason I repeat the ~^ 39 times is that it is two characters<br/>long. 39 x 2 = 78. That's how wide I want my display to be. For my footer,<br/>I will just use that same graphical pattern, making one line. I will put a<br/>%R before it so that I am always ensured that it is going on its own<br/>line. I put a %R at the end of my cmdheader so that I am always ensured<br/>that what comes after the header begins on its own line, as well.<br/><br/>&amp;cmdfooter obj=%R[repeat(~^,39)]<br/><br/>	Note that we will have to call these with a u() or an eval() in<br/>order to have the functions and %R evaluate. If you use v() on these, you<br/>will get back precisely what is in the attribute, and nothing more. Now,<br/>we can modify our mywho command just a bit to accomodate these graphical<br/>bits. Et voila:<br/><br/>&amp;cmd_mywho obj=$mywho:@pemit<br/>%#=u(cmdheader,mywho)[iter(lwho(),u(fn-sex,##),,%R)][u(cmdfooter)]<br/><br/>	Run your mywho again, with these graphics around it. Starting to<br/>look more professional all the time, isn't it? So now you've come this<br/>far, and it's up to you to make the choice to go on, or to rest lightly on<br/>your laurels and remain at the level you have achieved thus far. Going<br/>onward involves math, memory registers, and other nastiness. But, it's<br/>fun.<br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>