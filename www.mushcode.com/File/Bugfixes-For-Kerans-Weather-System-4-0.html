<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Bugfixes For Keran&#39;s Weather System 4.0</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Weather-Systems.html">Weather Systems</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Bugfixes-For-Kerans-Weather-System-4-0.html#">Bugfixes For Keran&#39;s Weather System 4.0</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Bugfixes For Keran&#39;s Weather System 4.0
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>Fixes bugs in Keran&#39;s Weather System 4.0. Not sure if this is an official bug fix or not, use at own risk.</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <a href="../Author/Unknown.html">Unknown</a>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="http://www.mushcode.com/Command/@describe" class="command">@describe</a>,
                    <a href="http://www.mushcode.com/Command/@dolist" class="command">@dolist</a>,
                    <a href="../Command/@function.html" class="command">@function</a>,
                    <a href="http://www.mushcode.com/Command/@lock" class="command">@lock</a>,
                    <a href="http://www.mushcode.com/Command/@pemit" class="command">@pemit</a>,
                    <a href="http://www.mushcode.com/Command/@set" class="command">@set</a>,
                    <a href="http://www.mushcode.com/Command/@startup" class="command">@startup</a>,
                    <a href="http://www.mushcode.com/Command/@switch" class="command">@switch</a>,
                    <a href="http://www.mushcode.com/Command/@trigger" class="command">@trigger</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/comp.html" class="function">comp&#40;&#41;</a>,
                        <a href="../Function/edit.html" class="function">edit&#40;&#41;</a>,
                        <a href="../Function/get.html" class="function">get&#40;&#41;</a>,
                        <a href="../Function/hasattr.html" class="function">hasattr&#40;&#41;</a>,
                        <a href="../Function/ifelse.html" class="function">ifelse&#40;&#41;</a>,
                        <a href="../Function/iter.html" class="function">iter&#40;&#41;</a>,
                        <a href="../Function/lattr.html" class="function">lattr&#40;&#41;</a>,
                        <a href="../Function/mid.html" class="function">mid&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/secs.html" class="function">secs&#40;&#41;</a>,
                        <a href="../Function/set.html" class="function">set&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/time.html" class="function">time&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/CobraMUSH.html" class="server">CobraMUSH</a>,
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>,
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Bugfixes For Keran&#39;s Weather System 4.0
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Bugfixes-For-Kerans-Weather-System-4-0.html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        <br/>Dec. 23, 1998<br/><br/>MUX version:<br/><br/>Not a code change, but an alteration to the distribution file. The default<br/>lock on the Storm Maker should be set to:<br/><br/>@lock Storm Maker=ISADMIN/1<br/><br/>An error occurs if the &amp;isadmin attribute hasn't been defined when this<br/>lock is set. Changed the order of attributes in the distribution file so<br/>that the default lock is set after &amp;isadmin.<br/><br/>Dec. 23, 1998<br/><br/>Added a note to the instructions about needing to execute search and<br/>replace in a particular order if one of your dbrefs turns out to be<br/>same as one of mine, but doesn't refer to the same object. <br/><br/>Dec. 24, 1998<br/><br/>There's a typo in the +help; every-half-hour should be every-halfhour.<br/><br/>&amp;CLOCK-COMMANDS Weather and Time Help - Admin Commands=%radd &lt;dbref&gt; &lt;triggerlist&gt;%rdel &lt;dbref&gt; &lt;triggerlist&gt;%r%rThese are the commands on the Clock allowing you to add or delete items from the Clock's triggerlists, so that the Clock can trigger commands on them at appropriate times. You must be where the Clock can hear you in order to use them. &lt;dbref&gt; is the number of the item to be added to the Clock's triggerlists, and &lt;triggerlist&gt; is which triggerlist to use. The triggerlist must be time-of-day, sun, moon, tide, hour, every-hour, every-halfhour, or every-quarterhour. An item to be triggered must have an attribute &amp;trigger-at-&lt;time&gt; = &lt;action to be triggered&gt;, where &lt;time&gt; is dawn, sunrise, morning, noon, afternoon, dusk, sunset, night, midnight, after~midnight, moonrise, moonset, meridian~transit, every~hour, every~halfhour, every~quarterhour, 0 through 23, high~and~rising, high~and~slack, high~and~ebbing, low~and~ebbing, low~and~slack, low~and~rising. Use &amp;trigger-at-0 and &amp;trigger-at-12 for triggering at precisely midnight and noon; the times of day called noon and midnight are time stretches.%r%rThe Clock triggers the Weathermaker at dawn and the Emits Bank at various times of day and hours, by default.%r<br/><br/>As an aside, that's /got/ to be the worst user interface in MUSHdom, and I<br/>don't know what I was thinking of when I used a different separator for the<br/>triggerlists and the trigger-ats. Patching the Clock to get rid of this<br/>abomination is high on the to-do list.<br/><br/>Dec. 29, 1998<br/><br/>The first-item-edit routine in the database editing code in the instructions<br/>for doing upgrades from 3.0 should read:<br/><br/>&amp;FIRST-ITEM-EDIT me=$edit *, *: &amp;counter me=%0; &amp;cutoff me = %1; think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/moon-phase, #555/moon-phase)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/tide, #555/tide)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/randword, #533/randword)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/blank2tilde, #533/blank2tilde)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/tilde2blank, #533/tilde2blank)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/moon-adjective, #555/moon-adjective)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/long-weather, #533/long-weather)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/short-weather, #533/short-weather)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/tree-weather, #533/tree-weather)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/window, #533/lowercase-long-weather)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/slave-short-weather, #533/slave-short-weather)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/slave-long-weather, #533/slave-long-weather)])); think iter(lattr(#%0), set(#%0, ##:[edit(get(#%0/##), #7/slave-tree-weather, #533/slave-tree-weather)])); @switch hasattr(#%0, hear-global-emits) = 1, {&amp;hear-weather-emits #%0 = [get(#%0/hear-global-emits)]; &amp;hear-global-emits #%0}, @@; @trigger me/next-item-edit<br/><br/>There was an extra increment to the counter that would cause it to miss every<br/>second item in a series.<br/><br/>Dec. 30, 1998<br/><br/>Fixed the inconsistency in the Clock triggerlist syntax, and errors in the<br/>instructions. It's add &lt;dbref&gt; time~of~day, add &lt;dbref&gt; every~hour, not<br/>add &lt;dbref&gt; time-of-day but add &lt;dbref&gt; every~hour, etc.<br/><br/>&amp;TRIGGERLIST-TIME~OF~DAY Clock=#111 #173 #624<br/>@@ Replace with dbrefs of Weathermaker, Emits Bank, and Test Room<br/>&amp;TRIGGERLIST-TIME-OF-DAY Clock<br/>&amp;ROUTINE-TIME-OF-DAY Clock=&amp;last-time-of-day me = [u(time-of-day)]; &amp;time-of-day me = [u(#7/time-of-day)]; @switch [comp(u(last-time-of-day), u(time-of-day))] = 0, @@, @dolist [v(triggerlist-time~of~day)] = @trigger ##/trigger-at-[u(#533/blank2tilde, u(#7/time-of-day))]<br/>&amp;CLOCK-COMMANDS Weather and Time Help - Admin Commands=%radd &lt;dbref&gt; &lt;triggerlist&gt;%rdel &lt;dbref&gt; &lt;triggerlist&gt;%r%rThese are the commands on the Clock allowing you to add or delete items from the Clock's triggerlists, so that the Clock can trigger commands on them at appropriate times. You must be where the Clock can hear you in order to use them. &lt;dbref&gt; is the number of the item to be added to the Clock's triggerlists, and &lt;triggerlist&gt; is which triggerlist to use. The triggerlist must be time~of~day, sun, moon, tide, hour, every~hour, every~halfhour, or every~quarterhour. An item to be triggered must have an attribute &amp;trigger-at-&lt;time&gt; = &lt;action to be triggered&gt;, where &lt;time&gt; is dawn, sunrise, morning, noon, afternoon, dusk, sunset, night, midnight, after~midnight, moonrise, moonset, meridian~transit, every~hour, every~halfhour, every~quarterhour, 0 through 23, high~and~rising, high~and~slack, high~and~ebbing, low~and~ebbing, low~and~slack, low~and~rising. Use &amp;trigger-at-0 and &amp;trigger-at-12 for triggering at precisely midnight and noon; the times of day called noon and midnight are time stretches.%r%rThe Clock triggers the Weathermaker at dawn and the Emits Bank at various times of day and hours, by default.%r<br/><br/>Jan. 3, 1999 - Penn Release<br/>The Penn port should incorporate all the changes above already.<br/><br/>Jan. 8, 1999 -- MUX and Penn<br/><br/>Typo in an attribue name.<br/>&amp;TREES_AUTUNM_DAY_HUMID Tree Weather Descriptions<br/><br/>Jan. 8, 1999 -- MUX and Penn<br/><br/>Not really a bug, but +today on the Global Command Object should work<br/>correctly without the global functions loaded. Should appear this:<br/><br/>MUX:<br/>&amp;TODAY Global Command Object=$+today: @pemit %#=It's hour [u(#7/hour)] in the day, in week [u(#7/week)] of [u(#533/tilde2blank, u(#7/month))], in the year [u(#7/year)]. The [u(#555/moon-phase)] moon [switch(u(#555/moon-up), 1, is up., 0, isn't up.)] The tide is [u(#555/tide)].%r[u(#533/long-weather)]<br/><br/>Penn:<br/>&amp;TODAY Keran's Global Command Object=$+today: @pemit %#=It's hour [u(#69/hour)] in the day, in week [u(#69/week)] of [u(#2757/tilde2blank, u(#69/month))], in the year [u(#69/year)]. The [u(#2758/moon-phase)] moon [switch(u(#2758/moon-up), 1, is up., 0, isn't up.)] The tide is [u(#2758/tide)].%r[u(#2757/long-weather)]<br/><br/>Also, the +help on the Configuration object for global setup has incorrect<br/>dbrefs. It incorrectly points to the Time Functions objects instead of the<br/>Miscellaneous Functions object. Should read:<br/><br/>&amp;GLOBAL-SETUP Weather and Time Help - Configuration Considerations=%rYou should put these attributes on #1 to set up the required global +functions:%r%r&amp;SETUP-GLOBAL-FUNCTIONS #1 = @function randword = &lt;dbref of Miscellaneous Functions&gt;/randword; @function tilde2blank = &lt;dbref of Miscellaneous Functions&gt;/tilde2blank; @function blank2tilde = &lt;dbref of Miscellaneous Functions&gt;/blank2tilde%r@startup #1 = @trigger me/setup-global-functions%r%rFor version 4.0 of the Weather and Time Code, you'll need to kick the function_invocation_limit on the server up to handle the recoded in variable descs in children of the parent rooms. Setting function_invocation_limit to 12500 seems to suffice.%r<br/><br/>Jan. 15, 1999<br/><br/>Penn and MUX -- typo in a weather desc. <br/><br/>&amp;AUTUMNDUSKFOG Weather Long Description Bank=Everything is grey, veiled by darkening twilit mist. There is little wind. It's chilly and the air feels damp.<br/><br/>Mar. 10, 1999<br/><br/>Typo in the desc of the Wizard Weather and Time command object. 'has command' should be 'has commands'.<br/>@Desc Wizard Weather and Time Commands=This object has commands for making the most common configuration changes on it. It writes to the Time Functions Object and the Weathermaker. It has no globals and should be kept in the Auxiliary room.<br/><br/>Unused attribute left over from 2.0 removed.<br/><br/>&amp;TREES_AUTUMN_DAY_HUMID Tree Weather Descriptions<br/><br/><br/>April 30, 1999<br/>MUX, Tiny, and Penn<br/>Typo in the general help. The +help for the sunrise function should read:<br/>&amp;HELP_SUNRISE Weather and Time Help - General=%ru(#7/sunrise)%r%rReturns the num<br/>ber of seconds after virtual midnight that sunrise takes place. If you need the<br/>time as secs(), add u(#7/sunrise) to u(#7/last-midnight).%r<br/><br/><br/>May 3, 1999<br/>MUX, Tiny, and Penn<br/>Bug in the Time Functions object. The system-month function should read:<br/>&amp;SYSTEM-MONTH Time Functions=[switch(mid(time(), 4, 3), Jan, January, Feb, February, Mar, March, Apr, April, May, May, Jun, June, Jul, July, Aug, August, Sep, September, Oct, October, Nov, November, Dec, December)]<br/>If this bug showed up, you may also need to manually set:<br/>&amp;weathertype weathermaker=fair<br/>&amp;weathertype-old weathermaker=fair<br/>&amp;weathertype-master slave=fair<br/>&amp;slave-weathertype-old=fair<br/>&amp;slave-weathertype=fair<br/>I left 'May' out of the switch(), which causes it to be impossible to<br/>determine a season in system clock mode during May, which causes it to be<br/>impossible to determine a weathertype, which causes weather descs to <br/>disappear.<br/><br/><br/>September 15, 1999<br/>MUX, Tiny, and Penn<br/>Bug in the Time Functions object. The system-season function should read:<br/>&amp;SYSTEM-SEASON Time Functions=[switch(u(system-month), January, winter, February, winter, March, spring, April, spring, May, spring, June, summer, July, summer, August, summer, September, autumn, October, autumn, November, autumn, December, winter)]<br/><br/><br/><br/>December 1, 1999<br/><br/>MUX<br/>There's a bug in both Indoor Parent Rooms.<br/>&amp;HAS-SOFTFLAG Miscellaneous Functions=[hasattr(%0,%1)]<br/>@Desc Parent of Windowless Indoor Rooms=[ifelse(u(#533/has-softflag,%#,dayblind), u(dayblind-vision), {[ifelse(u(#533/has-softflag,%#,night-vision), u(night-vision), {[ifelse(u(#533/has-softflag,%#,dark-vision), u(dark-vision), u(normal-vision))]})]})][u(instructions)]<br/>@Desc Parent of Windowed Indoor Rooms=[ifelse(u(#533/has-softflag,%#,dayblind), u(dayblind-vision), {[ifelse(u(#533/has-softflag,%#,night-vision), u(night-vision), {[ifelse(u(#533/has-softflag,%#,dark-vision), u(dark-vision), u(normal-vision))]})]})][u(outside-desc)][u(instructions)]<br/><br/>Tiny2.2<br/>&amp;HAS-SOFTFLAG Keran's Miscellaneous Functions=[hasattr(%0,%1)]<br/>@Desc Parent of Windowed Indoor Rooms=[switch(u(#338/has-softflag,%#,dayblind), 1, u(dayblind-vision), {[switch(u(#338/has-softflag,%#,night-vision), 1, u(night-vision), {[switch(u(#338/has-softflag,%#,dark-vision), 1, u(dark-vision), u(normal-vision))]})]})][u(outside-desc)][u(instructions)]<br/>@Desc Parent of Windowless Indoor Rooms=[switch(u(#338/has-softflag,%#,dayblind), 1, u(dayblind-vision), {[switch(u(#338/has-softflag,%#,night-vision), 1, u(night-vision), {[switch(u(#338/has-softflag,%#,dark-vision), 1, u(dark-vision), u(normal-vision))]})]})][u(instructions)]<br/><br/>Penn<br/>This only works if safer_ufun, is set to no.<br/>&amp;HAS-SOFTFLAG Keran's Miscellaneous Functions=[hasattr(%0,%1)]<br/>@DESCRIBE Keran's Parent of Windowed Indoor Rooms=[ifelse(u(#2757/has-softflag,%#,dayblind), u(dayblind-vision), {[ifelse(u(#2757/has-softflag,%#,night-vision), u(night-vision), {[ifelse(u(#2757/has-softflag,%#,dark-vision), u(dark-vision), u(normal-vision))]})]})][u(outside-desc)][u(instructions)]<br/>@DESCRIBE Keran's Parent of Windowless Indoor Rooms=[ifelse(u(#2757/has-softflag,%#,dayblind), u(dayblind-vision), {[ifelse(u(#2757/has-softflag,%#,night-vision), u(night-vision), {[ifelse(u(#2757/has-softflag,%#,dark-vision), u(dark-vision), u(normal-vision))]})]})][u(instructions)]<br/><br/>A note: I finally put the 4.0 Penn code up at the new port site. This means the database numbers of my working copy are different from those in the release file again. I'm changing them to the dbrefs in the 4.0 release file when I post bug-fixes, but it would be very easy to forget. If I forget, the current working copy dbrefs are:<br/><br/>#292 Keran's Time Functions<br/>#293 Keran's Tree Weather Descriptions<br/>#294 Keran's Weather Long Description Bank<br/>#295 Keran's Box of Weather and Time Stuff, with Notes<br/>#296 Keran's Weathermaker<br/>#297 Keran's Wizard Weather and Time Commands<br/>#298 Keran's Slave Weather Station<br/>#299 Keran's Clock<br/>#300 Keran's Emits Bank<br/>#301 Keran's Global Command Object<br/>#302 Keran's Weather and Time Help - Admin Commands<br/>#303 Keran's Weather and Time Help - Configuration Considerations<br/>#304 Keran's Weather and Time Help - General<br/>#305 Keran's Miscellaneous Functions<br/>#306 Keran's Storm Maker<br/>#307 Keran's Moon and Tide Functions<br/><br/>Rooms:<br/><br/>#309 Keran's Parent of Windowless Indoor Rooms<br/>#308 Keran's Parent of Windowed Indoor Rooms<br/>#310 Keran's Parent of Separable Day-Night and Season Desc Outdoor Rooms<br/>#311 Keran's Parent of Season-and-Day-Night Varying Outdoor Rooms<br/>#312 Keran's Parent of Season-and-Day-Night-Dawn-Dusk Outdoor Rooms<br/>#313 Keran's Parent of Separable Day-Night-Dawn-Dusk and Season Outdoor Rooms<br/>#314 Keran's Parent of Weather-and-Day-Night Varying Outdoor Rooms<br/>#315 Keran's Grandparent of Windowed Indoor Rooms<br/>#316 Keran's Grandparent of Windowless Indoor Rooms<br/>#317 Keran's Grandparent of Outdoor Rooms<br/>#318 Keran's Great-grandparent of Rooms<br/>#319 Keran's Test Room<br/><br/>Also, there was a mislocated block of text in the Penn 4.0 release file.<br/>Some of the attributes of the General help object were listed under the<br/>Miscellaneous Function object instead. They've been moved back where they<br/>belong.<br/><br/><br/>December 17, 1999<br/><br/>Tiny2.2, MUX, and Penn <br/>There's a mistake in the instructions of the Indoor Parent Rooms. The<br/>instructions for the portable light descriptions should read<br/>'&amp;portable-light-desc here=...'not '&amp;portable-light here=...'<br/><br/>&amp;INSTRUCTIONS Parent of Windowed Indoor Rooms=%r%rHow to describe variable lighting conditions in an indoor room with windows:%r&amp;artificial-light-desc here=What the room looks like by firelight, electric light, etc., at any time of day. Overrides portable light and daylight.%r&amp;portable-light-desc here=What the room looks like at night if it's lit by candle, flashlight, etc. This desc appears at night if the lights are out and there is something in the room set light, or carrying something set light.%r&amp;day-desc here=What the room looks like by natural daylight. Overrides portable light.%r&amp;night-desc here=What the room looks like at night with no artificial light sources.%r&amp;dayblind-desc here=What the room looks like by natural or artificial light to creatures blinded by bright light.%r&amp;night-vision-desc here=What the room looks like at night without artificial light to creatures that can see at night. %r&amp;dark-vision-desc here=What the room looks like at night to creatures that can see in complete darkness. May be set to \[u(night-vision)\] if you're not trying to describe infravision or some such thing.%rThe vision type of a creature is determined by whether it has a dayblind, night-vision, or dark-vision attribute; no such attribute means normal human vision. Only one such attribute should be set on any creature.%r&amp;window-prefix here=Some phrase that lets the viewer know that they're looking through a window, door, etc., at something outside. For example: 'Through the window, you can see that '. Used by the Storm Generator.%r&amp;outside-desc here=A description of what the viewer sees when they look out, for example: Outside, \[u(#533/lowercase-short-weather)\]. Or Outside, \[u(#533/lowercase-long-weather)\].%r&amp;light-action here=\[name(%%0)\] flips the light switch, lights the oil lamps, kindles a fire, or whatever.%r&amp;lights-out-action here=\[name(%%0)\] turns off the lights, snuffs the oil lamps, douses the fire, and so on.%r@set here=!no_command%r'Light' turns the lights on; 'lights out' turns them off.%r&amp;instructions here=\\ to turn these instructions off.%r&amp;&lt;name&gt;-desc=\\ will turn any of the descriptions off.%rChildren of the Windowed Indoor Parent Room receive both visual and audible effects from the Storm Generator.<br/><br/>&amp;INSTRUCTIONS Parent of Windowless Indoor Rooms=%r%rHow to describe variable lighting conditions in an indoor room without windows:%r&amp;artificial-light-desc here=What the room looks like by firelight, electric light, etc., at any time of day. Overrides portable light.%r&amp;portable-light-desc here=What the room looks like at night if it's lit by candle, flashlight, etc. This desc appears if the lights are out and there is something in the room set light, or carrying something set light.%r&amp;dark-desc here=What the room looks like when unlit to creatures that can't see in complete darkness.%r&amp;dayblind-desc here=What the room looks like by natural or artificial light to creatures blinded by bright light.%r&amp;dark-vision-desc here=What the room looks like at night to creatures that can see in complete darkness.%rThe vision type of a creature is determined by whether it has a dayblind, night-vision, or dark-vision attribute; no such attribute means normal human vision. Only one such attribute should be set on any creature.%r&amp;light-action here=\[name(%%0)\] flips the light switch, lights the oil lamps, kindles a fire, or whatever.%r&amp;lights-out-action here=\[name(%%0)\] turns off the lights, snuffs the oil lamps, douses the fire, and so on.%r@set here=!no_command%r'Light' turns the lights on; 'lights out' turns them off.%r&amp;instructions here=\\ to turn these instructions off.%r&amp;&lt;name&gt;-desc=\\ will turn any of the descriptions off.%rChildren of the Windowless Indoor Parent Room hear audible effects produced by the Storm Generator, but no visuals.%r<br/><br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>