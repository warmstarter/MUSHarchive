<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Raevnos&#39; Demo Combat System</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Raevnos-Demo-Combat-System.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Raevnos-Demo-Combat-System.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Raevnos-Demo-Combat-System.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Raevnos-Demo-Combat-System.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Raevnos-Demo-Combat-System.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Raevnos-Demo-Combat-System.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Combat.html">Combat</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Raevnos-Demo-Combat-System.html#">Raevnos&#39; Demo Combat System</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Raevnos&#39; Demo Combat System
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>This is the start of a combat system that allows different attack and defense styles. It&#39;s geared towards a medieval set of weapons rather than hi-tech, because I work more with fantasy mushes than sci-fi ones.</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <a href="../Author/Raevnos.html">Raevnos</a>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Combat.html">Combat</a>
        </div>

            <div class="commands">
            <strong>Commands:</strong>
                    <a href="../Command/@break.html" class="command">@break</a>,
                    <a href="http://www.mushcode.com/Command/@create" class="command">@create</a>,
                    <a href="http://www.mushcode.com/Command/@describe" class="command">@describe</a>,
                    <a href="http://www.mushcode.com/Command/@force" class="command">@force</a>,
                    <a href="http://www.mushcode.com/Command/@lset" class="command">@lset</a>,
                    <a href="../Command/@notify.html" class="command">@notify</a>,
                    <a href="http://www.mushcode.com/Command/@pemit" class="command">@pemit</a>,
                    <a href="../Command/@remit.html" class="command">@remit</a>,
                    <a href="http://www.mushcode.com/Command/@set" class="command">@set</a>,
                    <a href="http://www.mushcode.com/Command/@wait" class="command">@wait</a>.
            </div>

            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/ansi.html" class="function">ansi&#40;&#41;</a>,
                        <a href="../Function/default.html" class="function">default&#40;&#41;</a>,
                        <a href="../Function/gt.html" class="function">gt&#40;&#41;</a>,
                        <a href="../Function/hasattrval.html" class="function">hasattrval&#40;&#41;</a>,
                        <a href="../Function/if.html" class="function">if&#40;&#41;</a>,
                        <a href="../Function/isdbref.html" class="function">isdbref&#40;&#41;</a>,
                        <a href="../Function/lcstr.html" class="function">lcstr&#40;&#41;</a>,
                        <a href="../Function/member.html" class="function">member&#40;&#41;</a>,
                        <a href="../Function/name.html" class="function">name&#40;&#41;</a>,
                        <a href="../Function/nearby.html" class="function">nearby&#40;&#41;</a>,
                        <a href="../Function/not.html" class="function">not&#40;&#41;</a>,
                        <a href="../Function/num.html" class="function">num&#40;&#41;</a>,
                        <a href="../Function/obj.html" class="function">obj&#40;&#41;</a>,
                        <a href="../Function/pemit.html" class="function">pemit&#40;&#41;</a>,
                        <a href="../Function/pmatch.html" class="function">pmatch&#40;&#41;</a>,
                        <a href="../Function/rand.html" class="function">rand&#40;&#41;</a>,
                        <a href="../Function/regmatchi.html" class="function">regmatchi&#40;&#41;</a>,
                        <a href="../Function/setq.html" class="function">setq&#40;&#41;</a>,
                        <a href="../Function/setr.html" class="function">setr&#40;&#41;</a>,
                        <a href="../Function/strlen.html" class="function">strlen&#40;&#41;</a>,
                        <a href="../Function/subj.html" class="function">subj&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/tagwrap.html" class="function">tagwrap&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Raevnos&#39; Demo Combat System
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Raevnos-Demo-Combat-System.html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        @dig/tel Raevnos' Demo Combat System<br/>@DESCRIBE here=This is the start of a combat system that allows different attack and defense styles. It's geared towards a medieval set of weapons rather than hi-tech, because I work more with fantasy mushes than sci-fi ones.%r%rThere are two commands:%r [ansi(h, attack/&lt;style&gt; &lt;target&gt;)], where style is one of: stab, slice, and chop%r [ansi(h, defend\[/&lt;style&gt;\])], where style is one of: parry, shield, or dodge. Parry is the default style.%r%rIt obviously is just a framework of a real CS -- no weapons, stats, training, or damage. Just the basic mechanics for an attack command. Hopefully, it'll be useful as a starting point or for ideas.<br/><br/>@create CS Synchronizer<br/>@lock/Basic CS Synchronizer==me<br/>@lset CS Synchronizer/Basic=no_inherit<br/>@set CS Synchronizer = VISUAL<br/>@set CS Synchronizer = NO_COMMAND<br/>&amp;DESCRIBE CS Synchronizer=This object is used for the semaphores that control all the different combats.<br/>@set CS Synchronizer/DESCRIBE=no_command visual public nearby<br/>drop CS Synchronizer<br/><br/>@create CS Code<br/>@lock/Basic CS Code==me<br/>@lset CS Code/Basic=no_inherit<br/>@set CS Code=VISUAL<br/>@set CS Code=!NO_COMMAND<br/>&amp;ATTACK_CMD CS Code=$attack/* *:@break switch(0, member(v(attack_styles), lcstr(%0)), pemit(%#, '%0' isn't a valid attack style)1, isdbref(setr(0, pmatch(%1))), pemit(%#, '%1' isn't a player)1, nearby(%#, %q0), pemit(%#, You have to be closer to [name(%q0)] to attack [obj(%q0)])1, not(hasattrval(%vs, %#)), pemit(%#, You're being attacked. You should defend first)1, not(hasattrval(%vs, %q0)), pemit(%#, name(%q0) is already being attacked. One at a time!)1, 0); @pemit %#=You attack [name(%q0)] with a [lcstr(%0)]! Now [subj(%q0)] must choose a defense within 90 seconds.; @pemit %q0=%N is attacking you with what appears to be a [lcstr(%0)]. Use [ansi(h, defend\[/&lt;style&gt;\])] (Where &lt;style&gt; is one of parry, shield, or dodge) in the next 90 seconds or the default defense will be chosen for you.; @@ Now for the semaphore'd attack resolution code @@; @wait %vs/%q0/90={@remit %l=%N attacks [name(%q0)] with a [lcstr(%0)]! [name(%q0)] defends with a [default(%vs/%q0_defense, parry)]! The attack [if(gt(rand(1000), 500), succeeds, fails)]!; &amp;%q0_defense %vs}<br/>&amp;ATTACK_STYLES CS Code=stab slice chop<br/>&amp;DEFEND_CMD CS Code=$defend*:@break switch(0, hasattrval(%vs, %#), pemit(%#, You're not being attacked!)1, strlen(%0), 0[setq(0, parry)], regmatchi(%0, ^/([v(defense_styles)])$, -1 0), pemit(%#, That's not a proper defense style.)1, 0); &amp;%#_defense %vs=lcstr(%q0); @notify %vs/%#<br/>&amp;DEFENSE_STYLES CS Code=parry|shield|dodge<br/>&amp;DESCRIBE CS Code=This object holds the actual CS code.<br/>@set CS Code/DESCRIBE=no_command visual public nearby<br/>&amp;LICENSE CS Code=All code on this object (Raevnos' Demo Combat System) is released under the Gnu Public License. A copy of that license if available at [tagwrap(a, href="http://www.gnu.org/copyleft/gpl.html", http://www.gnu.org/copyleft/gpl.html)]<br/>@fo me=&amp;VS CS Code=[num(CS Synchronizer)]<br/>drop CS Code<br/><br/>@create Explanation<br/>@lock/Basic Explanation==me<br/>@lset Explanation/Basic=no_inherit<br/>@set Explanation = VISUAL<br/>@set Explanation = NO_COMMAND<br/>&amp;ATTACK_CMD Explanation=This contains the code for the attack command. It does error and permission checking using @break, and then @pemits messages and starts the semaphore on the defender's dbref, all in one queue cycle. Note that you can attack yourself. I left that check out so you can play with it when nobody else is around. The second part of the attack command is the timed semaphore that does the actual attack resolution. It is all in one action list instead of on another attribute and @triggered to help simplify timing issues and make it respond faster. The whole thing takes three queue cycles. One for the attack command, one for the defend command, and one for the semaphore.<br/>&amp;ATTACK_STYLES Explanation=The available attack styles, seperated by spaces.<br/>&amp;DEFEND_CMD Explanation=This is the code for the defend command. It does error and permission checking with @break (Instead of @switch, so it's one queue cycle), sets the defense style, and then @notifies the semaphore so that the actual attack gets resolved in the next queue cycle.<br/>&amp;DEFENSE_STYLES Explanation=The available defense styles, seperated by |'s.<br/>&amp;DESCRIBE Explanation=Each attribute on this object corresponds to one on CS Code (#3873) and explains what it does.<br/>@set Explanation/DESCRIBE=no_command visual public nearby<br/>&amp;VS Explanation=This attribute holds the dbref of the CS Synchronizer object. The Synchronizer is used to @wait on for the attacks, using the dbref of the defender as the attribute to @wait on. This requires the named semaphores added in 1.7.3p13.<br/>drop Explanation<br/><br/>look
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>