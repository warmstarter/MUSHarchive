<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Code: Keran&#39;s Time/Weather Snippets Patch</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Bootstrap -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap.min.css">
	<!-- Bootstrap responsive -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/bootstrap-responsive.min.css">
	<!-- jQuery UI -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../Theme/Flat/html/css/plugins/jquery-ui/smoothness/jquery.ui.theme.css">
	<!-- Theme CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/style.css">
	<!-- Color CSS -->
	<link rel="stylesheet" href="../Theme/Flat/html/css/themes.css">


    <link rel="stylesheet" href="../Content/site.css">

    <!-- jQuery -->
    <script src="../Theme/Flat/html/js/jquery.min.js"></script>
    <!-- Nice Scroll -->
    <script src="../Theme/Flat/html/js/plugins/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- jQuery UI -->
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.core.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.widget.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.mouse.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.resizable.min.js"></script>
    <script src="../Theme/Flat/html/js/plugins/jquery-ui/jquery.ui.sortable.min.js"></script>
    <!-- slimScroll -->
    <script src="../Theme/Flat/html/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <!-- Bootstrap -->
    <script src="../Theme/Flat/html/js/bootstrap.min.js"></script>
    <!-- Form -->
    <script src="../Theme/Flat/html/js/plugins/form/jquery.form.min.js"></script>

    <!-- Theme framework -->
    <script src="../Theme/Flat/html/js/eakroko.min.js"></script>
    <!-- Theme scripts -->
    <script src="../Theme/Flat/html/js/application.min.js"></script>

    <!--[if lte IE 9]>
		<script src="js/plugins/placeholder/jquery.placeholder.min.js"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

    <!-- Favicon -->
    <link rel="shortcut icon" href="http://www.mushcode.com/File/img/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="http://www.mushcode.com/File/img/apple-touch-icon-precomposed.png" />

</head>

<body class="theme-green">
    <div id="navigation">
        <div class="container-fluid">
            <a href="../index.html" id="brand">MUSHCode.com</a>
        </div>
    </div>
    <div class="container-fluid" id="content">
        <div id="left">
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Kerans-Time-Weather-Snippets-Patch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>About</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../index.html">Overview</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Kerans-Time-Weather-Snippets-Patch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Files</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li class='dropdown'>
                        <a href="Kerans-Time-Weather-Snippets-Patch.html#" data-toggle="dropdown">Code</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Bulletin-Board.html">Bulletin Board</a>
        </li>
        <li>
            <a href="../Category/Combat.html">Combat</a>
        </li>
        <li>
            <a href="../Category/Dynamic-Space.html">Dynamic Space</a>
        </li>
        <li>
            <a href="../Category/Fonts.html">Fonts</a>
        </li>
        <li>
            <a href="../Category/Functions.html">Functions</a>
        </li>
        <li>
            <a href="../Category/Games.html">Games</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Mail-Systems.html">Mail Systems</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Schedulers.html">Schedulers</a>
        </li>
        <li>
            <a href="../Category/Time.html">Time</a>
        </li>
        <li>
            <a href="../Category/Vehicles.html">Vehicles</a>
        </li>
        <li>
            <a href="../Category/Vendors.html">Vendors</a>
        </li>
        <li>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </li>
</ul>
                    </li>
                    <li class='dropdown'>
                        <a href="Kerans-Time-Weather-Snippets-Patch.html#" data-toggle="dropdown">Classes</a>
                        
<ul class="dropdown-menu">
        <li>
            <a href="../Category/Administration.html">Administration</a>
        </li>
        <li>
            <a href="../Category/Building.html">Building</a>
        </li>
        <li>
            <a href="../Category/Globals.html">Globals</a>
        </li>
        <li>
            <a href="../Category/Hardcode.html">Hardcode</a>
        </li>
        <li>
            <a href="../Category/Other.html">Other</a>
        </li>
        <li>
            <a href="../Category/Softcode.html">Softcode</a>
        </li>
</ul>
                    </li>
                    <li>
                        <a href="../Manuals.html">Manuals</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Kerans-Time-Weather-Snippets-Patch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Misc</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Ascii2Mu.html">ASCII To MUSHCode</a>
                    </li>
                    <li>
                        <a href="../MushList.html">MUSH/MUX List</a>
                    </li>
                    <li>
                        <a href="../MushRoom.html">MUSHRoom</a>
                    </li>
                </ul>
            </div>
            <div class="subnav">
                <div class="subnav-title">
                    <a href="Kerans-Time-Weather-Snippets-Patch.html#" class='toggle-subnav'>
                        <i class="icon-angle-down"></i>
                        <span>Contribute</span>
                    </a>
                </div>
                <ul class="subnav-menu">
                    <li>
                        <a href="../Submit.html">Submit</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="main">
            <div class="container-fluid">
                <div class="breadcrumbs">
                    <ul>
                        
    <li>
        <a href="../index.html">Home</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="../Category/Weather-Systems.html">Weather Systems</a>
        <i class="icon-angle-right"></i>
    </li>
    <li>
        <a href="Kerans-Time-Weather-Snippets-Patch.html#">Keran&#39;s Time/Weather Snippets Patch</a>
    </li>

                    </ul>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        



<div class="box">
    <div class="box-title title">
        <h2>
            Keran&#39;s Time/Weather Snippets Patch
        </h2>
    </div>
    <div class="box-content">

        <div class="description">
            <p>In this file are several bits of code that I patched over the base version of Keran&#39;s Time/Weather code package (4.0). This was NOT an easy patch, but, the system works more the way I would like it to, now. Each bit of code included here is self-inclusive: it works without the whole package. However, none of the &#39;fancy&#39; features of Keran&#39;s package are included.</p>
        </div>

        <div class="author">
            <strong>Author:</strong>
                <a href="../Author/Gwen-Morse.html">Gwen Morse</a>
        </div>

        <div class="author">
            <strong>Category:</strong>
            <a href="../Category/Weather-Systems.html">Weather Systems</a>
        </div>


            <div class="functions">
                <strong>Functions:</strong>
                        <a href="../Function/add.html" class="function">add&#40;&#41;</a>,
                        <a href="../Function/convsecs.html" class="function">convsecs&#40;&#41;</a>,
                        <a href="../Function/div.html" class="function">div&#40;&#41;</a>,
                        <a href="../Function/gte.html" class="function">gte&#40;&#41;</a>,
                        <a href="../Function/mid.html" class="function">mid&#40;&#41;</a>,
                        <a href="../Function/mod.html" class="function">mod&#40;&#41;</a>,
                        <a href="../Function/mul.html" class="function">mul&#40;&#41;</a>,
                        <a href="../Function/secs.html" class="function">secs&#40;&#41;</a>,
                        <a href="../Function/sub.html" class="function">sub&#40;&#41;</a>,
                        <a href="../Function/switch.html" class="function">switch&#40;&#41;</a>,
                        <a href="../Function/u.html" class="function">u&#40;&#41;</a>,
                        <a href="../Function/v.html" class="function">v&#40;&#41;</a>.
            </div>


            <div class="servers">
                <strong>Compatibility:</strong>
                        <a href="../Server/CobraMUSH.html" class="server">CobraMUSH</a>,
                        <a href="../Server/PennMUSH.html" class="server">PennMUSH</a>,
                        <a href="../Server/RhostMUSH.html" class="server">RhostMUSH</a>,
                        <a href="../Server/TinyBit.html" class="server">TinyBit</a>,
                        <a href="../Server/TinyMUSH.html" class="server">TinyMUSH</a>,
                        <a href="../Server/TinyMUX.html" class="server">TinyMUX</a>.
            </div>

    </div>
</div>

    <div class="box box-color green box-condensed box-bordered">
	    <div class="box-title">
            <h3>Instructions</h3>
        </div>
	    <div class="box-content">
		    Copy and paste the below code into a compatible MUSH or MUX.
	    </div>
    </div>

<div class="box box-bordered box-condensed">
    <div class="box-title">
        <h3>
	        <i class="icon-reorder"></i>
	        MUSHCode for Keran&#39;s Time/Weather Snippets Patch
        </h3>
        <div class="actions">
	        <a class="btn btn-mini select-all" href="Kerans-Time-Weather-Snippets-Patch.html#">
                    <i class="icon-resize-full"></i> Select Code
            </a>
        </div>
    </div>
    <div id="code" class="box-content content">
        @@<br/>@@ In this file are several bits of code that I patched over the base version of <br/>@@ Keran's Time/Weather code package (4.0). This was NOT an easy patch, but, the<br/>@@ system works more the way I would like it to, now. Each bit of code included<br/>@@ here is self-inclusive: it works without the whole package. However, none of<br/>@@ the 'fancy' features of Keran's package are included.<br/>@@<br/><br/><br/>@@ Vtime. This one allows you to adjust the resulting vtime ahead or behind<br/>@@ the multiple of the present time. That way, if you want 4:1 time, but, you want the<br/>@@ starting date to be 50 years ahead (or behind) the present time, you can adjust it<br/>@@ by adjusting the value of TIME-BEGINS (which should be a second-based timestamp).<br/>@@ the decimal number on the end of the function is the decimal value of the time<br/>@@ acceleration you want.<br/><br/>&amp;VSECS Keran's Time Functions=[add(secs(),mul(sub(secs(),v(TIME-BEGINS)),2.25))]<br/>&amp;TIME-BEGINS Keran's Time Functions=936182650<br/>&amp;VTIME Keran's Time Functions=[convsecs(u(vsecs))]<br/><br/>@@ The season changes by the correct calendar day for a Gregorian calendar <br/>@@ (unlike most season commands, that depend entirely by month, and do not <br/>@@ take into account that seasons change on the 21st).<br/><br/>&amp;SEASON Timer=[switch(mid(vtime(), 4, 3), Jan, WINTER, Feb, WINTER, Mar, switch(gte(mid(vtime(), 8, 2),21),1,SPRING,WINTER), Apr, SPRING, May, SPRING, Jun, switch(gte(mid(vtime(), 8, 2),21),1,SUMMER,SPRING),Jul, SUMMER, Aug, SUMMER, Sep, switch(gte(mid(vtime(), 8, 2),21),1,AUTUMN,SUMMER), Oct, AUTUMN, Nov, AUTUMN, Dec, switch(gte(mid(vtime(), 8, 2),21),1,WINTER,AUTUMN))]<br/><br/>@@ This is replacement code my husband worked out for Keran's Moon/Tide functions<br/>@@ I didn't quite like the way the original code worked. Tide_begin is a basic starting<br/>@@ timestamp, just like time_begins from vtime(). Tide_cycle is how long each tide is, in <br/>@@ seconds. I chose the length of my cycle by the average tide figures from the daily paper.<br/>@@ This length provides roughtly two high and two low tides each day, just like the Atlantic.<br/>@@ It could be quite useful for doing tide-locked exits and room descs :).<br/><br/>&amp;TIDE_BEGIN Keran's Moon and Tide Functions=936182650<br/>&amp;TIDE_CYCLE Keran's Moon and Tide Functions=44160<br/>&amp;FN_TIDE Keran's Moon and Tide Functions=[switch(u(div(mul(10,mod(sub(vsecs(),v(tide_begin)),v(tide_cycle))),v(tide_cycle))),0,high,1,high,2,medium,3,medium,4,medium,5,low,6,low,7,medium,8,medium,9,medium)] and [switch(u(div(mul(10,mod(sub(vsecs(),v(tide_begin)),v(tide_cycle))),v(tide_cycle))),0,ebbing,1,rising,2,rising,3,rising,4,rising,5,rising,6,ebbing,7,ebbing,8,ebbing,9,ebbing)]<br/><br/>@@ I run a builder character responsible for an atmosphered moon that circles around a gas giant planet.<br/>@@ In an attemt to make things more interesting, I decided to give it an unusual length to one "solar" day.<br/>@@ Referencing Robert Heinlein's "Farmer in the Sky", I was able to model lunar time after Ganymede,<br/>@@ a satellite of Jupiter that has a solar day that last 168 hours (an earth "week").<br/>@@ This makes morning, afternoon, evening, and night each last 42 hours.<br/>@@<br/>@@ The moon I run is named Verron IV, and it circles around the gas giant Verron, so, FN_VERRON is the<br/>@@ visibility of the gas giant in the sky. "Prime", "Secundus" and "Tierce" are the three moons between <br/>@@ Verron IV and Verron (Verron I, II, and III). The FN belonging to each of those names shows the<br/>@@ orbital pattern of each of those moons.<br/>@@ Time_of_day is the function that calls all the other code together. It includes lunar and <br/>@@ reverse elipses, sunrise and sunset descs, and other goodies! <br/><br/>&amp;FN_VERRON Keran's Moon and Tide Functions=[switch(div(mod(secs(),604800),75600),0,new,1,waxing crescent,2, waxing half,3,waxing gibbous,4,full,5,waning gibbous,6,waning half,7,waning crescent)]<br/>&amp;FN_PRIME Keran's Moon and Tide Functions=[switch(div(mod(secs(),86400),10800),0,new,1,waxing crescent,2,waxing half,3,waxing gibbous,4,whole full,5,waning gibbous,6,waning half,7,waning crescent)]<br/>&amp;FN_SECUNDUS Keran's Moon and Tide Functions=[switch(div(mod(secs(),172800),21600),0,new,1,waxing crescent,2,waxing half,3,waxing gibbous,4,full disk,5,waning gibbous,6,waning half,7,waning crescent)]<br/>&amp;FN_TIERCE Keran's Moon and Tide Functions=[switch(div(mod(secs(),345600),43200),0,new,1,waxing crescent,2,waxing half,3,waxing gibbous,4,full and round,5,waning gibbous,6,waning half,7,waning crescent)]<br/>&amp;FN_TIME Keran's Moon and Tide Functions=[switch(div(mod(secs(),604800),151200),0,night,1,morning,2,afternoon,3,evening)]<br/>&amp;TIME_OF_DAY Wrist Unit=[switch(u(fn_isnight),1,{During the night phase, the dark sky is truly spectacular. The gas giant and its satellites provide a miniature solar system for anyone who chooses to watch the show.},{From the angle of the sun, it appears to be [u(fn_time)].})][switch(div(mod(secs(),604800),10800),0,{%bThe moon is transitioning through a reverse eclipse, coming between the gas giant and the sun. The golden face is so huge that the moon's tiny shadow crawl across the surface like a freckle.} ,14,{%bThe morning sunrise welcomes a new day, with the softer colors of red, violet, pink and gold. A hint of an unusual bluish-green, almost turquoise color, highlights the lowest band of clouds. The shimmering colors are soothing and relaxing.},28,{%bThe gas giant is transitioning through a solar eclipse, coming between Verron IV and the sun. A beautiful red ring of light surrounds the dark face.},42,{%bThe red-violet corona of the setting sun paints bright bands of color across the evening sky. Warm reds and yellows blends with cool violet. Glittering faintly behind the brighter colors of the glorious sunset are the first evening stars.})][switch(u(fn_verron),New,,{%bThe great gas giant Verron hangs in the sky, never rising or setting, wondrous in the way it's suspended above in its golden [u(fn_verron)] phase. Dark points on the visible face appear to be the shadows of other near moons.})][switch(u(fn_isnight),1,{%bTiny conspicuous lights, bright as stars but unwinking, are the further and smaller moons.})][switch(u(fn_prime),New,,{%bThe lavender-tinted Prime moon spins through its [u(fn_prime)] profile, visibly changing location in the sky every few minutes.})][switch(u(fn_secundus),New,,{%bThe giant copper-tinted Secundus moon calls attention to its [u(fn_secundus)] outline.})][switch(u(fn_tierce),New,,{%bStately blue-white Tierce, the moon closest to Verron IV, reveals a [u(fn_Tierce)] face.})]<br/>&amp;FN_ISNIGHT Keran's Moon and Tide Functions=[switch(u(fn_time),night,1,0)]<br/>&amp;FN_ISNIGHT Keran=[switch(u(fn_time),night,1,0)]<br/><br/>@@ For a standard "Earth" moon, use the following function.<br/><br/>&amp;FN_MOON Keran's Moon and Tide Functions=[switch(div(mod(secs(),2419200),302400),0,new,1,waxing crescent,2,waxing half,3,waxing gibbous,4,whole full,5,waning gibbous,6,waning half,7,waning crescent)]<br/>
    </div>
</div>
<script type="text/javascript">
    var selectText = function(element) {
        var doc = document;
        var text = doc.getElementById(element);

        if (doc.body.createTextRange) { // ms
            var range = doc.body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) { // moz, opera, webkit
            var selection = window.getSelection();
            var range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }

    $('a.select-all').click(function () {
        selectText('code');
    });
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>
<script src="../Scripts/Google.js" type="text/javascript"></script>