CREDIT INFO: Rage@twlightmoons // Olson@Winter'sEdge 
Email: Rayearth@tampabay.rr.com

@create Staff Commands=10
&STA Staff Commands=[isstaff(%#)]
&DO.BEEP Staff Commands=$+beep *:@pemit *%0=%ch%cmBEEP:%cn %N just beeped you. [beep()];@pemit %#=%ch%cmBEEP:%cn You beeped [name(*%0)].
&DO.SCAN Staff Commands=$@scan *:@cemit Scan=%0
&DO.PFLAG.SET Staff Commands=$+pflag/set *=*:[setq(0,[num(*%0)])];@switch [edit(%1,%B,_)]=NPC,{@pemit %#=%chPFlag:%cn You set [name(%q0)] with the NPC flag.;&isnpc %q0=YES:%N on [Time()]},Staff_alt,{@pemit %#=%chPFlag:%cn You set [name(%q0)] with the Staff Alt flag.;&issa %q0=YES:%N on [Time()]},Leader,{@pemit %#=%chPFlag:%cn You set [name(%q0)] with the Leader flag.;&islead %q0=YES:%N on [Time()]},Feature,{@pemit %#=%chPFlag:%cn You set [name(%q0)] with the Feature flag.;&isftr %q0=YES:%N on [Time()]},{@pemit %#=%chPFlags:%cn That is not a valid flag.}
&DO.PFLAG.UNSET Staff Commands=$+pflag/unset *=*:[setq(0,[num(*%0)])];@switch [edit(%1,%B,_)]=NPC,{@pemit %#=%chPFlag:%cn You unset [name(%q0)] with the NPC flag.;&isnpc %q0=},Staff_alt,{@pemit %#=%chPFlag:%cn You unset [name(%q0)] with the Staff Alt flag.;&issa %q0=},Leader,{@pemit %#=%chPFlag:%cn You unset [name(%q0)] with the Leader flag.;&islead %q0=},Feature,{@pemit %#=%chPFlag:%cn You unset [name(%q0)] with the Feature flag.;&isftr %q0=},{@pemit %#=%chPFlags:%cn That is not a valid flag.}
&DO.STAFF.DEL Staff Commands=$+delstaff *:[setq(0,[num(*%0)])];@switch [isstaff(%q0)]=1,{@pemit %#=You remove [name(%q0)] from staff.;&bit %q0=;@dolist Command Wizard Admin Story Judge=&## #42=[remove(u(#42/##),%q0)]},{@pemit %#=That person is not staff.}
&DO.SUMMON Staff Commands=$+summon *:setq(0,num(*%0)); @switch isdbref(%q0)=0,{@pemit %#=No such player %0},1,{@pemit %#=Warning [name(%q0)]...; @pemit/c [loc(%q0)]=[name(%q0)] is being summoned by staff, and will leave in three seconds.; &UNSUMMON %q0=[loc(%q0)]; @wait 3=@tel %q0=%l}
&DO.UNSUMMON Staff Commands=$+unsummon *:setq(0,pmatch(%0)); @switch isdbref(%q0)=0,{@pemit %#=No such player %0},1,{@pemit/c [loc(%q0)]=[name(%q0)] is being returned, and will leave in three seconds.; @pemit/c [get(%q0/UNSUMMON)]=[name(%q0)] is on the way back, and will return in three seconds.; @wait 3={@tel %q0=[get(%q0/UNSUMMON)]; &UNSUMMON %q0}}
&DO.JOIN Staff Commands=$+join *:setq(0,num(*%0)); @switch isdbref(%q0)=0,{@pemit %#=No such player %0},1,{@pemit %#=Warning [name(%q0)]...; @pemit/c [loc(%q0)]=%N will be joining you in three seconds.; @wait 3=@tel %#=[loc(%q0)]}
&DO.WIZWHO Staff Commands=$wizwho:@pemit %#=[header3()]%R[ljust(Name,15)]%B[ljust(Idle,6)]%B[ljust(PFlags,8)]%B[ljust(Race,15)]-%B[ljust(Subrace,10)]%B[ljust(Location,10)]Approved%R[header2()];@pemit %#=[list(filter(#35/fn.nostaff,lwho()),u(fn.wizwho.fmt,##))];@pemit %#=[header(words(filter(fn.nostaff,lwho())) players online)]
&DO.BACKGROUND.LIST Staff Commands=$+bg/list *:[setq(0,[num(*%0)])];@pemit %#=[header(Backgrounds for [name(%q0)]:%B[ifelse(hasattr(%q0,dat.approved),Approved,NOT Approved)])]%R[columns([iter(sortby(fn.sortby,lattr(%q0/bg.*)),[capitalize([after(##,.)])])],23)]%R%R[center(%ch+bg/check [name(%q0)]/<section>%cn to see a section.,80)]%R[header3()]
&DO.BACKGROUND.CHECK Staff Commands=$+bg/check */*:[setq(0,[num(*%0)])];@switch [hasattr(%q0,bg.section%1)]=1,{@pemit %#=[header(Section %1)]%R[u(%q0/bg.section%1)]%R[ifelse(hasattr(%q0,bg.section[add(%1,1)]),%R%T%TContinued: Section[add(%1,1)]%R,)][header2()]},{@pemit %#=[name(%q0)] doesn't have a background section numbered %1.}
&DO.DARK Staff Commands=$+dark:@pemit %#=You have just gone dark, and page locked yourself against everyone but staff.;&sta %#=\[isstaff(%%#)];@lock/page %#=sta/1;@set %#=Dark
&DO.DARKEN Staff Commands=$+darken:@pemit %#=You have just set yourself dark.;@unlock/page %#;@set %#=Dark
&DO.DARK.BUSY Staff Commands=$+semidark *:@pemit %#=You have just been set busy and Dark. Your Idle Message has been set to: %0;@set %#=Dark;@unlock/page %#;&idle %#=%0
&DO.UNDARK Staff Commands=$+undark:@pemit %#=You have gone visible.;@set %#=!dark;@unlock/page %#;&idle %#=
&DO.LANG_ADD Staff Commands=$+lang/set *=*:[setq(0,pmatch(%0))];&langs %q0=[u(%q0/langs)] [capitalize(%1)];@pemit %#=You add %1 to [name(%q0)]'s language list. It is now:%B[andlist(iter(sortby(#35/fn.sortby,u(%q0/langs)),[capitalize(##)]))].
&DO.LANGS Staff Commands=$+langs *:[setq(0,pmatch(%0))];@pemit %#=[name(%q0)] has the following languages on them:%B[andlist(iter(sortby(#35/fn.sortby,u(%q0/langs)),[capitalize(##)]))].
&DO.RESTART Staff Commands=$+restart:@wall/emit %N shouts, "Hold on restart in 5 seconds.";@fo %#=@dump;@wait 5=@fo %#=@restart
&DO.IDLE.CHECK Staff Commands=$+idle/check:@pemit %#=[header(Idle Check: 30 days)]%R[ljust(Name,15)][ljust(DBREF,8)][ljust(Last On,27)][ljust(Race,12)]-%BSubrace%R[header2()];@pemit %#=[list(filter(fn.idled,search(type=players)),[u(fn.idle.fmt,##)])];@pemit %#=[header3()]
&DO.IDLE.NUKE Staff Commands=$+idle/nuke:@wall/emit/no_prefix %ch%cbWarning:%cn Idle Nuke in progress. 5 seconds to leave channels to avoid spam..;@wait 5=@dolist [search(Type=players)]=@switch [ifelse(and(gte([div(sub(secs(),convtime(get(##/last))), 86400)],30),[not([orflags(##,|Wzwi?)])]),1,0)]=1,{@fo #108=@Nuke ##};@wait 7=@fo %#=@dbck
&DO.CHECK Staff Commands=$+check *:[setq(0,[num(*%0)])];@pemit %#=[header(Check Over Player)]%R[name(%q0)] <%q0>%R[iter(u(check),[ifelse(hasattr(%q0,##),,%RNeeded:%B[capstr(##)])])]
&CHECK Staff Commands=fullname semail Desc wraithdesc
&DO.SPECS Staff Commands=$+specs *:[setq(0,[num(*%0)])];@pemit %#=[header([name(%q0)]'s Specializations)][iter([sortby(fn.sortby,get(%q0/dat.specs),|)],ifelse(mod(#@,2),%r,)[ljust([first([secure(##)],~)]:[space(2)][last([secure(##)],~)],39)],|)]%R[header3()]
&DO.SPECS.SET Staff Commands=$+setspec *=*/*:[setq(0,[num(*%0)])];@pemit %#=You set [name(%q0)]'s [capitalize(%1)] to [capitalize(%2)].[setstat(%q0/dat.specs,[capitalize(%1)],[capitalize(%2)])]
&DO.EXPLAIN Staff Commands=$+explain *:[setq(0,[num(*%0)])];@pemit %#=[header([name(%q0)]'s Explainations)][ifelse(Hasattr(%q0,dat.explain_bgs),[iter(u(%q0/dat.explain_Bgs),%R#@%)%B%B%ch[first([secure(##)],~)]%cn%B-%B%B[last([secure(##)],~)],|)],)]%R[header2()][ifelse(Hasattr(%q0,dat.explain_m&F),[iter(u(%q0/dat.explain_m&f),%R#@%)%B%B%ch[first([secure(##)],~)]%cn%B-%B%B[last([secure(##)],~)],|)],)]%R[header3()]
&DO.FINAL Staff Commands=$+final *:@pemit %#=You @tel [name(*%0)] to the finishing touches room.;@tel *%0=#601
&DO.APPROVAL.QUEUE Staff Commands=$+approvals:@pemit %#=[header(Approval Queue)]%R[ljust(#,4)][ljust(Name,17)][ljust(Race,15)][ljust(Subrace,15)]Entered On%R[header2()][iter(u(#36/approval),%R[ljust(#@%),4)][ljust([name(before(##,:))],17)][ljust(u(before(##,:)/race),15)][ljust(u(before(##,:)/subrace),15)][after(##,:)],|)]%R[header3()]
&DO.DISAPPROVE Staff Commands=$+disapprove *:[setq(0,[num(*%0)])];@pemit %#=You disapprove [name(%q0)] on [time()].;&dat.approved %q0=;&approval #36=[ifelse(Hasattr(#36,approval),[setunion(u(#36/approval),%q0:[time()],|)],%q0:[time()])];@pemit %q0=You were disapproved for Role Play by %N on [time()].;@set %q0=uninspected;@set %q0=fixed;&dat.timestamp %q0=[time()] - Disapproved by %N.;@tel %q0=#0
&DO.APPROVE Staff Commands=$+approve *:[setq(0,[num(*%0)])];[setq(1,[grab(u(#36/approval),%q0:*,|)])];@pemit %#=You approve [name(%q0)] on [time()].[mset(%q0,[switch([stat(%q0,background,Resources)],0,,1,125,2,300,3,850,4,1500,5,15000,6,30000,7,60000,8,120000,9,240000,10,1000000,0)],ADD)];&dat.approved %q0=[name(%q0)] was approved by %N on [time()].;&approval #36=[setdiff(u(#36/approval),%q1,|)];@pemit %q0=You were approved for Role Play by %N on [time()].[ifelse(gt(stat(%q0,pool,Blood),0),,[setstat(%q0/dat.pool,Blood,10/10)])];@set %q0=!uninspected;@set %q0=!fixed;@flag %q0=!queued;&bpool %q0=[after([stat(%q0,pool,Blood)],/)];&wpool %q0=[after([stat(%q0,pool,Willpower)],/)];&gpool %q0=[after([stat(%q0,pool,Gnosis)],/)];&rpool %q0=[after([stat(%q0,pool,Rage)],/)];&qpool %q0=[after([stat(%q0,pool,Quintessence)],/)]
&DO.APPROVE.REM Staff Commands=$+approve/rem *:[setq(0,[num(*%0)])];[setq(1,[grab(u(#36/approval),%q0:*,|)])];@pemit %#=You remove [name(%q0)] from the approval queue.;&approval #36=[setdiff(u(#36/approval),%q1,|)]
&DO.STATUS Staff Commands=$+status *:@switch [gte(match(OFF ON BUSY JUDGE,[capstr(%0)]),1)]=1,{@pemit %#=You set yourself Status:%0;&status %#=[switch(%0,on,ON,off,OFF,busy,BUSY,Judge,JUDGE,ON)]},{@Pemit %#=That is not a valid status.}
@lock/UseLock Staff Commands=STA/1
@Desc Staff Commands=[columns(iter(lattr(me/do.*),[rest(first(xget(me,##),:),$)]|),25,|)]
&DOWNMOTD Staff Commands=At this time, all non-administrative logins are disallowed. Please try back later. Sorry and thanks for playing [mudname()]!
&FULLMOTD Staff Commands=Hallelujah! [mudname()] is full! Believe it or not, all available descriptors have been used. Please try again later, and thanks for playing!
&DO.SETMOTD Staff Commands=$setmotd:@motd %r---%rCurrent Theme: [v(theme)]%r[switch(strlen(v(motd1)),0,,v(motd1))][switch(strlen(v(motd2)),0,,v(motd2))][switch(strlen(v(motd3)),0,,v(motd3))]%r--- ;@motd/wizard [u(WIZMOTD)];@motd/down [u(DOWNMOTD)];@motd/full [u(FULLMOTD)];@pemit %#=GAME: MOTDs set.
&DO.SETMOTD1 Staff Commands=$+setmotd1 *:&motd1 me=%r%0%r; @pemit %#=Motd1 set to:%r[v(motd1)]; @trig me/dat.setmotd2
&DO.SETMOTD2 Staff Commands=$+setmotd2 *:&motd2 me=%r%0%r; @pemit %#=Motd2 set to:%r[v(motd2)]; @trig me/dat.setmotd2
&DO.SETMOTD3 Staff Commands=$+setmotd3 *:&motd3 me=%r%0%r; @pemit %#=Motd3 set to:%r[v(motd3)]; @trig me/dat.setmotd2
&DAT.SETMOTD2 Staff Commands=@motd %r---%rCurrent Theme on Dark Reckoning: [v(theme)]%r[switch(strlen(v(motd1)),0,,v(motd1))][switch(strlen(v(motd2)),0,,v(motd2))][switch(strlen(v(motd3)),0,,v(motd3))]%r--- ;@motd/wizard [u(WIZMOTD)];@motd/down [u(DOWNMOTD)];@motd/full [u(FULLMOTD)];@pemit %#=GAME: MOTDs set.
&DO.CLEARALLMOTD Staff Commands=$+wipe motd:&motd1 me; &motd2 me; &motd3 me;@motd ; @pemit %#=The player motd cleared.
&DO.CLEARMOTD1 Staff Commands=$+wipe motd1:&motd1 me=; @pemit %#=Motd1 has been cleared.
&DO.CLEARMOTD2 Staff Commands=$+wipe motd2:&motd2 me=; @pemit %#=Motd2 has been cleared.
&DO.CLEARMOTD3 Staff Commands=$+wipe motd3:&motd3 me=; @pemit %#=Motd3 has been cleared.
&DO.SETWIZ Staff Commands=$+wizmotd *:&wizmotd me=%r---%rWIZARD MOTD: %0%r---; @fo %#=setmotd; @pemit %#=Wizmotd set to:%r[v(wizmotd)]
&DO.CLEARWIZMOTD Staff Commands=$+wipe wizmotd:&wizmotd me=; @pemit %#=Wiz motd has been cleared.
&DO.SHUTDOWN Staff Commands=$+shutdown *:@switch isnum(%0)=0,{@pemit %#=I need to know how many minutes to wait before shutting down.},1,{@fo %#=@dump;@force %#=@wall/emit Shutting down in %0 minutes!; @dolist lnum(%0)=@wait [mul(add(##,1),60)]=@force %#={@wall/emit Shutting down in [sub(%0,add(##,1))] minutes!}; @wait [mul(%0,60)]=@force %#=@shutdown}
&DO.PURGE.DAYS Staff Commands=$+purge/days *:@switch isnum(%0)=0,{@pemit %#=You must supply a number of days to wait for a purge.},{&HOW_MANY_DAYS [parent(me)]=%0; @pemit %#=Maximum number of days which people can be gone for is now %0.}
&DO.PURGE.MAX Staff Commands=$+purge/max *:@switch isnum(%0)=0,{@pemit %#=You must supply a number of days which people can't go on vacation longer than.},{&MAX_VACATION_DAYS [parent(me)]=%0; @pemit %#=Maximum number of days for a vaction is now %0.}
&DO.SET Staff Commands=$+set *:[setq(0,[switch([extract(%0,1,1,:)],me,%#,[num(*[extract(%0,1,1,:)])])])];[setq(1,[extract(%0,2,1,:)])];[setq(2,[extract(%0,3,1,:)])];[setq(3,[extract(%0,4,1,:)])];@switch [isdbref(%q0)][gt([match(u(#790/switches),%q1)],0)][match(Attr,%q1)]=0??,{@pemit %#=I can't see that here.},10?,{@pemit %#=That is not a valid section.%RValid Sections are [andlist(u(#790/switches))].},110,{@pemit %#=You set [name(%q0)]'s [capitalize(%q2)] to [capitalize(%q3)].[setstat(%q0/dat.%q1,[capitalize(%q2)],[capitalize(%q3)])]},111,{@pemit %#=You set [name(%q0)]'s [capitalize(%q2)] to [capitalize(%q3)].[setstat(%q0/dat.%q1,[capitalize(%q2)],[capitalize(%q3)])][setstat(%q0/dat.attr2,[capitalize(%q2)],[capitalize(%q3)])]}
&SET.GHOUL Staff Commands=&ghouled %q0=1
&DO.WIPE Staff Commands=$+wipe *:[setq(0,[switch(%0,me,%#,[num(*%0)])])];@switch isdbref(%q0)=1,{@dolist [u(#36/cattr)]=&## %q0=;@pemit %#=[name(%q0)]'s stats are wiped.},{@pemit %#=I don't see that.}
&DO.IC.ROOMS Staff Commands=$+rooms/IC:@pemit %#=[header(IC Room List)][iter(inzone(#43),%R[ljust(name(##),50)][ljust(##,6)][ifelse(hasattr(##,owner),[name([u(##/owner)])],Staff Owned)])]%R[header3()]
&DO.IWALL Staff Commands=$@iwall *:@dolist [filter(fn.zoneic,lwho())] [allstaff()]=@pemit ##=IC Announcement: %N[switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mi d(%0,1,strlen(%0))],%bsays\, "{%0}")]
&DO.IWALL2 Staff Commands=$@iwall/header *:@dolist [filter(fn.zoneic,lwho())] [allstaff()]=@pemit ##=[ifelse(isstaff(##),%ch%cc\\[%N emits\\]%cn %0,%0)]
&DO.ALTS Staff Commands=$+alts *:[setq(0,[num(*%0)])];@switch [isdbref(%q0)]=1,{@pemit %#=[header(Alts list for [name(%q0)])]%R[ljust(Name,25)][ljust(Race,15)][ljust(Subrace,15)]Last On%R[header2()];@pemit %#=[list(search(eplayer=match(get(##/sites),*[U(%q0/lastsite)]*)),[u(fmt.alts,##)])];@pemit %#=[header3()]},{@pemit %#=Who is that?}
&DO.MONEY Staff Commands=$+money *:[setq(0,[num(*%0)])];@pemit %#=MONEY: [name(%q0)] has [ifelse(hasattr(%q0,money),[u(%q0/money)],0)].00 on their person.
&STAFFLANGS Staff Commands=Garou Lupine Bastet Feline Kitsune-Go Vulpine Ananasi Arachnid Corax Bird Gurahl Ursine Mokole Dragon Nagah Serpent Nuwisha Ratkin Rodent French Italian Spanish German Dutch Portuguese Danish Latin Creole Greek Bulgarian Romanian Romany Hungarian Turkish Polish Yiddish Swedish Finnish Russian Norwegian Icelandic Arabic Hebrew Thai Cantonese Mandarin Japanese Korean Vietnamese Malay Amerind Sioux Cree Lakota Navajo Miwok Haida Shoshoni Inuit Hawaiian Polynesian Hindi Sign-Language Sabbat-Hand Swahili Pictish Apache Askahic-Sign Hermetic
&DO.SAURA_HELP Staff Commands=$+saura/help:@pemit %#=[header2()]%R[center(Aura Help,78)]%R[header2()]%r+saura/help%t%t%t-%tshow help on +saura%r+saura/list%t%t%t-%tlist all auras in the system%r+saura <thing>%t%t%t-%tlist auras set on <thing>%r+saura/add <thing>=<aura>%t-%tadd <aura> to thing>%r+saura/remove <thing>=<aura>%t-%tremove <aura> from <thing>%r%r+saura/addgrp <thing>=<group>%t-%tadd <thing> to an aura group%r+saura/remgrp <thing>=<group>%t-%tremove <thing> from an aura group%r%r+saura/new <group>=<aura>/<meaning>%t%r%t%t%t%t-%tadd a new aura to the ystem%r+saura/cancel <group>=<aura>%t-%tcancel an aura from the system%r+saura/newgrp <group>%t%t-%tadd a new aura group to the system%r+saura/cancelgrp <group>%t-%tcancel an aura group from the system%r[header2()]
&DO.SAURA.LIST Staff Commands=$+saura/list:@pemit %#=[header2()]%R[center(Available auras,78)]%R[header2()][iter(u(auras_all),%r[first(##,:)][repeat(%b,sub(32,strlen(first(##,:))))]-%t[rest(##,:)],|)]%R[header2()]
&DO.SAURA.TARGET Staff Commands=$+saura *:@pemit %#=[switch([setq(0,ulocal(fn.find.match,%0))]%q0,#-1,{You see the distinctive aura of empty air.},#-2,{You get confused trying to look at two auras at once.},[name(%q0)]'s auras:[iter(get(%q0/auras),%r[first(##,:)][repeat(%b,sub(32,strlen(first(##,:))))]-%t[rest(##,:)],|)])]
&DO.SAURA.ADD Staff Commands=$+saura/add *=*:@switch/first [setq(0,ulocal(fn.find.match,%0))][setq(1,ulocal(auras_all))] %0=[setq(2,match(%q1,%1:*,|))][not(match(#-1 #-2,%q0))],{@pemit %#=I don't see that here.},%q2,{@pemit %#=Sorry, but there is no aura '%1'.},{&auras %q0=[setq(3,setunion(get(%q0/auras),extract(%q1,%q2,1,|),|))][switch(mid(%q3,0,1),|,rest(%q3,|),%q3)];@pemit %#=You add '%1' to [name(%q0)]'s auras.}
&DO.SAURA.REMOVE Staff Commands=$+saura/remove *=*:@switch/first [setq(0,ulocal(fn.find.match,%0))] [setq(1,get(%q0/auras))] %0=[setq(2,match(%q1,%1:*,|))][not(match(#-1 #-2,%q0))],{@pemit %#=I don't see that here.},%q2,{@pemit %#=Sorry, but [name(%q0)] don't have '%1' set in their auras.},{&auras %q0=[ldelete(%q1,%q2,|)];@pemit %#=You remove '%1' from [name(%q0)]'s auras.}
&DO.SAURA.ADDGRP Staff Commands=$+saura/addgrp *=*:@switch/first [setq(0,ulocal(fn.find.match,%0))] %0=[not(match(#-1 #-2,%q0))],{@pemit %#=I don't see that here.},[match(v(aura_groups),%1)],{@pemit %#=Sorry, but there is no '%1' aura group.},{&aura_groups q0=[setunion(get(%q0/aura_groups),%1)];@pemit %#=You add [name(%q0)] to the '%1' aura group.}
&DO.SAURA.REMGRP Staff Commands=$+saura/remgrp *=*:@switch/first [setq(0,ulocal(fn.find.match,%0))] %0=[not(match(#-1 #-2,%q0))],{@pemit %#=I don't see that here.},[match(get(%q0/aura_groups),%1)],{@pemit %#=Sorry, but [name(%q0)] isn't a member of the '%1' aura group.},{&aura_groups %q0=[setdiff(get(%q0/aura_groups),%1)];@pemit %#=You remove [name(%q0)] from the '%1' aura group.}
&DO.SAURA.NEW Staff Commands=$+saura/new *=*/*:@switch/first %0=[match(v(aura_groups),%0)],{@pemit %#=Sorry, but '%0' isn't a valid aura group.},[not(match(v(auras_all),%1:*))],{@pemit %#=Sorry, but '%1' is already being used.},{&auras_%0 [parent(me)]=[setq(0,setunion(v(auras_%0),%1:%2,|))][switch(mid(%q0,0,1),|,rest(%q0,|),%q0)];@pemit %#=You add the aura '%1 - %2' to the '%0' aura group.}
&DO.SAURA.CANCEL Staff Commands=$+saura/cancel *=*:@switch/first %0=[match(v(aura_groups),%0)],{@pemit %#=Sorry, but '%0' isn't a valid aura group.},[setq(0,match(v(auras_%0),%1:*))]%q0,{@pemit %#=There is no aura '%1' for the '%0' aura group.},{&auras_%0 [parent(me)]=[ldelete(v(auras_%0),%q0,|)];@pemit %#=You remove the '%1' aura from the '%0' aura group.}
&DO.SAURA.NEWGRP Staff Commands=$+saura/newgrp *:@switch/first %0=[not(match(v(aura_groups),*%0*))],{@pemit %#=Sorry, but there is already a '%0' group.},{&aura_groups [parent(me)]=[setunion(v(aura_groups),%0)];@pemit %#=You add the '%0' aura group.}
&DO.SAURA.CANCELGRP Staff Commands=$+saura/cancelgrp *:@switch/first %0=[match(v(aura_groups),%0)],{@pemit %#=There is no '%0' aura group to remove.},{&auras_%0 [parent(me)]=;&aura_groups [parent(me)]=[setdiff(v(aura_groups),%0)];@pemit %#=You remove the '%0' aura group.}
&OUTDOOR Staff Commands=Rdesc Rdesc_dusk Rdesc_Dawn Rdesc_Night Udesc Udesc_night
&DO.PARENTS Staff Commands=$+parents:@pemit %#=[header(Master Parent List)][iter(sortby(fn.sortby,u(#3/parents),|),%R%B#@%)%B[ljust([name(##)] %(##%),28)][u(##/sdesc)],|)]%R[header3()]
&DO.STAFFLANGS Staff Commands=$+langs/on:@pemit %#=You set up the languages on you.;&Langs %#=\[u(#34/stafflangs)]
&DO.BOTCH.CHECK Staff Commands=$+hunt/botch *:[setq(0,[num(*%0)])];@switch [hasattr(%q0,hunt.botch)]=0,{@pemit %#=That player hasn't botched.},1,{@pemit %#=[header(Botch Report)]%R%B[ljust(Name:,12)][name(%q0)]%R%B[ljust(Location:,12)][name([extract(u(%q0/hunt.botch),1,1,|)])]%R%B[ljust(Hunt Type:,12)][extract(u(%q0/hunt.botch),2,1,|)]%R%BRL Time: [extract(u(%q0/hunted),1,1,|)]%R%BIC Time: [extract(u(%q0/hunted),2,1,|)]%R%R%B[ljust(Suggested:,12)][extract(u(%q0/hunt.botch),3,1,|)]%R[header3()]}
&DO.CLEAR.BOTCH Staff Commands=$+botch/clear *:[setq(0,[num(*%0)])];@pemit %#=You cleared [name(%q0)]'s botch.;&hunt.botch %q0=
&DO.MAKE.REASON Staff Commands=$+reason/add *:@pemit %#=Reason Added: %0;&botchlist #698=[u(#698/botchlist)] [u(#698/nextreason)];&botch.[u(#698/nextreason)] #698=%0;&nextreason #698=[ifelse([gt([add([u(#698/nextreason)],1)],9)],[add([u(#698/nextreason)],1)],0[add([u(#698/nextreason)],1)])]
&DO.STATUS.VAMP Staff Commands=$+cstatus *=*:[setq(0,[num(*%0)])];@switch [gte([match(0 1 2 3 4 5 6 7,%1)],1)]=1,{@pemit %#=You set [name(%q0)]'s status rating to %1.;&cstatus %q0=%1},0,{@pemit %#=[header(Vampire Status Ranking)]%R[center(Camarilla,40)][center(Sabbat,40)][iter(u(status.info),[ifelse([mod(#@,2)],%R,)][ljust([before(##,:)],8,.)][rjust([after(##,:)],30,.)],|)]%R[header3()]}
&STATUS.INFO Staff Commands=0:Unknown Neonate|0:Unknown Neonate|1:Neonate|1:Neonate|2:Well Known Neonate|2:Well Known Neonate|3:Ancillae|3:Ancillae|4:Elder|4:Elder|5:Primogen|5:Primogen|6:Prince|6:Prince|7:Justicar|7:Justicar|Default:Caitiff|Default:Pander
&DO.NEWPATH Staff Commands=$+newpath */*/*:@pemit %#=You add the path [capitalize(%0)].;&dat.[edit(%0,%B,_)] #121=\[add(\[stat(%%0,Virtue,%1)],\[stat(%%0,Virtue,%2)])]
&DO.DE.OBF Staff Commands=$+deobf *:@pemit %#=You deobf [name(*%0)].;&obf_Level *%0=;@set *%0=!obf;@fo *%0=@oemit *%0=[name(*%0)] suddenly appears.
&DO.ADD.FORM Staff Commands=$+form *=*:@pemit %#=You set a %1 form on [name(*%0)].;&forms *%0=[u(*%0/forms)] [capitalize(%1)]
&DO.FORM.STAT.SET Staff Commands=$+form/stat *=*/? ? ? ? ?:[setq(0,[num(*%0)])];@switch [hasattr(%#,form.%1)]=1,{@pemit %#=That player has that form set already. Use '%ch+form/or [name(%q0)]=%1/%2 %3 %4 %5 %6 %7%cn'},{@pemit %#=Form Set.;&form.%1 %q0=%2 %3 %4 %5 %6 %7;@set %q0/Form.%0=hidden wizard}
&DO.FORM.OR Staff Commands=$+form/or *=*/* * * * * * *:[setq(0,[num(*%0)])];@pemit %#=Form Set.;&form.%1 %q0=%2 %3 %4 %5 %6 %7 %8 %9;@fo %#=@set %q0/Form.%1=hidden;@fo %#=@set %q0/form.%1=wizard
&INDOOR Staff Commands=Rdesc Udesc Udesc_night
&DO.BUILD.CHECK Staff Commands=$+build/check:@pemit %#=[header(Building Check List)]%R%B[ljust(Location:,12)][name(%l)] %(%l%)%R%B[ljust(Parent:,12)][ifelse(match(parent(%l),#553),Parented,Please Parent to #553)]%R%B[ljust(Zone:,12)][ifelse(match(zone(%l),#43),Zoned,Please Zone it to #43)][iter([ifelse(u(%l/outside),u(me/outdoor),u(me/indoor))],%R%B[ljust(%ch%cr[capitalize(##)]%cn:,12)][ifelse(hasattr(%l,##),Set,Not Set &## %l=<text> To set.)])]%R[header2()][iter([lexits(%l)],%R%B[ljust(Name:,12)][name(##)]%R%T[ljust(Desc:,12)][ifelse(hasattr(##,desc),Set,Not Set.)]%R%T[ljust(Osucc:,12)][ifelse(hasattr(##,osucc),Set,Not Set.)]%R%T[ljust(Odrop:,12)][ifelse(hasattr(##,odrop),Set,Not Set.)]%R%T[ljust(Succ:,12)][ifelse(hasattr(##,succ),Set,Not Set.)])]%R[header2()]%R%TThis is for IC rooms only.%R[header2()]
&DO.FLAG Staff Commands=$@flag *=?*:[setq(0,[switch(%0,me,%#,#*,%0,here,%l,[num(*%0)])])];@switch [gte([strlen([grab(u(#36/staff.flags),[ifelse(match(!,%1),%2,%1%2)],|)])],1)]=0,{@pemit %#=I don't understand that flag.},1,{@switch [isdbref(%q0)]=0,{@pemit %#=I don't see that here.},1,{@switch %1=!,{@pemit %#=Cleared.;&sflags %q0=[setdiff(u(%q0/sflags),[ucstr(%2)])]},{@pemit %#=Set.;&sflags %q0=[setunion(u(%q0/sflags),[ucstr(%1%2)])]}}}
&DO.FLAGS Staff Commands=$+flags:@pemit %#=[header(Staff Flag List)]%R[columns([sortby(fn.sortby,u(#36/staff.flags),|)],15,|)]%R%R%T%ch%cw+Flags <flag name>%cn for information.%R[header3()]
&DO.FLAGS.DEF Staff Commands=$+flags *:@switch [gte([strlen([grab(u(#36/staff.flags),%0,|)])],1)]=0,{@pemit %#=That isn't a valid flag.},{@pemit %#=[header(Flag Info: [capitalize(%0)])]%R[u(#36/flag.%0)]%R[header3()]}
&DO.RATIO Staff Commands=$+ratio:@pemit %#=The current ratio is: [u(#699/fn_ftimeratio)] to 1
&DO.HANGOUT.ADD Staff Commands=$+hangout/add *:@switch isdbref(%0)=0,{@pemit %#=Please use the rooms dbref.},{@pemit %#=Hangouts: Updated, [name(%0)] added as a hangout.;&hangouts #26=[setunion(u(#26/hangouts),%0)]}
&DO.HANGOUT.REMOVE Staff Commands=$+hangout/del *:@switch isdbref(%0)=0,{@pemit %#=Please use the rooms dbref.},{@pemit %#=Hangouts: Updated, [name(%0)] removed from hangouts.;&hangouts #26=[setdiff(u(#26/hangouts),%0)]}
&DO.RACE Staff Commands=$+race *=*:@pemit %#=You set [name(*%0)] as a [setr(0,[capitalize(%1)])].;&race *%0=%q0;&dat.timestamp *%0=[time()][setstat(*%0/dat.info,Race,%q0)]
&DO.SUBRACE Staff Commands=$+subrace *=*:@pemit %#=You set [name(*%0)] as a [setr(0,[capitalize(%1)])].;&subrace *%0=%q0[setstat(*%0/dat.info,Subrace,%q0)]
&DO.SETUP Staff Commands=$+rsetup:@pemit %#=Room configured.;@set %l=MONITOR;&canhear %l=^*
&DO.CLASS Staff Commands=$@class *=*:@switch gte(match(0 1 2 3 4 5,%1),1)=1,{@pemit %#=You set [name(*%0)] with a class of %1.;&class *%0=%1},{@pemit %#=The valid levels are: 0, 1, 2, 3, 4, & 5.}
&DO.COMMANDS Staff Commands=$+cmds *:@pemit %#=[header(Commands on [name(*%0)])][columns(iter(lattrcmds(*%0),[rest(first(xget(*%0,##),:),$)]|),25,|)]%R[header3()]
&DO.FEATURE.ADD Staff Commands=$+feature/add */*/*:@pemit %#=You have set a new feature on the system.;&ftr.%vv #36=[capitalize(%1)]|Feature|%0|[time()]|%2;@vv #34=[add(%vv,1)]
&DO.ADD.FEATURE Staff Commands=$+Gfeature/add */*/*:@pemit %#=You have set a new feature on the system.;&ftr.%vv #36=[capitalize(%1)]|Game Feature|%0|[time()]|%2;@vv #34=[add(%vv,1)]
@VV Staff Commands=72
@VZ Staff Commands=2
&DO.FEATURE.DEL Staff Commands=$+feature/del *:[setq(0,[extract([lattr(#36/ftr.*)],%0,1)])];@switch [gte(words(lattr(#36/ftr.*)),%0)]=0,{@pemit %#=That isn't a valid feature posting.},1,{@pemit %#=You remove number %0.;&%q0 #36=}
&DO.LORES Staff Commands=$+lores *:@pemit %#=[name([setr(0,[findpc(%0,%#)])])]'s current Lores: [andlist([u(%q0/loredat)])].
&DO.TALENTS Staff Commands=$+talents:@pemit %#=Current Talents: [andlist([u(#790/talents)],|)]
&DO.KNOWS Staff Commands=$+knowledges:@pemit %#=Current Knowledges: [andlist([u(#790/knowledges)],|)]
&DO.BGS Staff Commands=$+backgrounds:@pemit %#=Current Backgrounds: [andlist([u(#790/backgrounds)],|)]
&DO.SKILLS Staff Commands=$+skills:@pemit %#=Current Skills: [andlist([u(#790/Skills)],|)]
&DO.BUILDERS Staff Commands=$+builders:@pemit %#=[header(Global Builder List)]%R[iter(filter(fn.builder,[search(type=players)]),[mid([ljust([name(##)] %(##%),20)],0,20)])]%R[header2()]
&BUILDER Staff Commands=[mid([ljust([name(%0)] %(%0%),20)],0,20)]
&DO.COMPLEXES Staff Commands=$+Complexes:@pemit %#=[header(Apartment Complex Items)][iter([children(#437)],%R%B[name(##)] %(##%))]%R[header2()]
&DO.PS Staff Commands=$+ps:@dolist [lexits(%L)] %l =@chown ##=#108 ;@wait 1=@dolist [lexits(%L)] %l=@set ##=!Halt;@dolist [lexits(%l)] %L=@set ##=Inherit;@pemit %#=Done.;@parent %l=#553;@dolist [lexits(%l)]=@parent ##=#919;@dolist [lexits(%l)]=&exited ##=[name(%l)]
&DO.SETUP2 Staff Commands=$+setup *:@pemit %#=Setup.;@dolist stats misc=&dat.## *%0=1;@switch [u(*%0/race)]=MORTAL,,&dat.powers *%0=1
&DO.INF.ADD Staff Commands=$+influence/add *=*/*/*:@switch [hasattr(#711,[setr(0,[edit(%0,%B,_)])])]=1,{@pemit %#=That is already listed.},{@pemit %#=You add [Capitalize(%0)] Influence with a Code of [capitalize(%2)] and a type of [capitalize(%1)]. This new influence has %3 total available points in it.;&%q0 #711=TYPE~%1|Code~%2|Total~%3;&list #711=[ifelse(hasattr(#711,list),[u(#711/list)]|[capitalize(%0)],[capitalize(%0)])]}
&DO.INF.DEL Staff Commands=$+Influence/del *:@switch [hasattr(#711,[setr(0,[edit(%0,%B,_)])])]=0,{@pemit %#=There is no listing of that type of influence.},1,{@pemit %#=You remove [capitalize(%0)] Influence.;&%q0 #711;&list #711=[remove([u(#711/list)],[capitalize(%0)],|)]}
&DO.INFLUENCE.ACTIONS Staff Commands=$+influence/actions:@pemit %#=[header(Influence Actions)]%R[ljust(Num,5,.)][ljust(Person,25,.)][ljust(Influence,20,.)]Handled By%R[header2()][iter(lattr(#711/ia.*),%R[ljust(#@,5,.)][ljust([name([extract([u(#711/##)],1,1,|)])] %([extract([u(#711/##)],1,1,|)]%),25,.)][ljust([extract([u(#711/##)],4,1,|)],20,.)][ifelse(hasattr(#711,res.##),[name([u(#711/res.##)])] %([u(#711/res.##)]%),Please Respond)])]%R[header3()]
&DO.INFLUENCE.RESPOND Staff Commands=$+influence/respond *:[setq(0,[extract(lattr(#711/ia.*),%0,1)])];@switch [gte([words(lattr(#711/ia.*))],%0)]=0,{@pemit %#=That isn't a valid number.},{@pemit %#=You respond to #%0.;&res.%q0 #711=%#}
&DO.INFLUENCE.CLEAR Staff Commands=$+influence/clear *:[setq(0,[extract(lattr(#711/ia.*),%0,1)])];@switch [gte([words(lattr(#711/ia.*))],%0)]=0,{@pemit %#=That isn't a valid number.},{@pemit %#=You clear #%0.;&%q0 #711=;&res.%q0 #711=}
&DO.INFLUENCE.VIEW Staff Commands=$+influence/view *:[setq(0,[extract(lattr(#711/ia.*),%0,1)])];@switch [gte([words(lattr(#711/ia.*))],%0)]=0,{@pemit %#=That isn't a valid number.},{@pemit %#=[header2()]%R[ljust(Requester:,10)][name([extract([setr(2,[u(#711/%q0)])],1,1,|)])] %([extract([setr(2,[u(#711/%q0)])],1,1,|)]%)%R[ljust(RL TIme:,10)][extract(%q2,2,1,|)]%R[ljust(VR Time:,10)][extract(%q2,3,1,|)]%R[ljust(Type:,10)][extract(%q2,4,1,|)]%R[ljust(Action:,10)][extract(%q2,5,1,|)]%R%R[ifelse(hasattr(#711,res.%q0),RESPONDED: [name([u(#711/res.%q0)])] %([u(#711/res.%q0)]%),%ch%crNOT RESPONDED TO.%cn)]%R[header2()]}
&DO.ISET Staff Commands=$+iset *=*/*:@Pemit %#=You set [name(*%0)]'s [capitalize(%1)] influence to %2.[setstat(*%0/influence,[capitalize(%1)],%2)]
&DO.SLAP.BITCH Staff Commands=$+slap/bitch *:@pemit %#=You Bitch Slap [name([setr(1,[num(*%0)])])].;@pemit %q1=** WHOOSH **;@wait 1=@pemit %q1=** SLAP!! The warm feeling of a hand across your face. **;@wait 2=@pemit %q1=** Shut Up Bitch!! **;@wait 3=@pemit %q1=** You have just been bitch slapped by %N. You know you liked it. **;@wait 3=@scan %ch%crSLAP:%cn %N just bitch slapped [name(%q1)].
&DO.ADDROOM Staff Commands=$add ambiance:&room_list #35=[setunion([u(#35/room_list)],[loc(%#)])];@pemit %#=This room has been added to the Ambiance list.
&DO.REMOVEROOM Staff Commands=$remove ambiance:&room_list #35=[setdiff([u(#35/room_list)],[loc(%#)])];@pemit %#=This room has been removed from the Ambiance list.
&ROOM_LIST Staff Commands= #14
&DO.HUNT.ADD Staff Commands=$+hunt/add:@pemit %#=Done.;@dolist [search(type=rooms)]={&hdiff ##=[u(##/hdiff)]|7}
&DO.IDLE.NUKE2 Staff Commands=$+idle/nuke2:@wall/emit/no_prefix %ch%cbWarning:%cn Idle Nuke in progress. 5 seconds to leave channels to avoid spam..;@wait 5=@dolist [search(Type=players)]=@switch [ifelse(gte([div(sub(secs(),convtime(get(##/last))), 86400)],7),[ifelse(orflags(##,|Wzwi?),,[ifelse(haspower(##,guest),,[ifelse(hassflag(##,visit),1,0)])])],0)][isapp(##)]=10,{@fo #108=@Nuke ##;@wait 7=@fo #108=@dbck}
&DO.IDLE.CHECK2 Staff Commands=$+idle/check2:@pemit %#=[header(Idle Check: 8 days)]%R[ljust(Name,15)][ljust(DBREF,8)][ljust(Last On,27)][ljust(Race,12)]-%BSubrace%R[header2()];@pemit %#=[list(filter(fn.idled2,search(type=players)),[u(fn.idle.fmt,##)])];@pemit %#=[header3()]
&DO.WELCOME Staff Commands=$+welcome *:[setq(0,[num(*%0)])];@Pemit %#=You just sent a welcome letter to [name(%q0)].;@trig #1392/[ifelse([hasattr(#1392,[u(%q0/race)].[edit([u(%q0/subrace)],%B,_)])],[u(%q0/race)].[edit([u(%q0/subrace)],%B,_)],[u(%q0/race)])]=%q0
&DO.INFO.NEED.OTHER Staff Commands=$+info/need *:[setq(0,[findpc(%0,%#)])];@pemit %#=[header2()]%r[center(What Info [name(%q0)] needs,80)]%R[header2()][ifelse(hasattr(%q0,info-general),,%R%ch%crNEED:%cn General Info %(Required%) - &info-General me=<blah>)][ifelse(hasattr(%q0,info-street),,%R%ch%crNEED:%cn Streetwise Info %(Required%) - &info-street me=<blah>)][iter([u(#36/info.[edit([U(%q0/race)],%B,_)],%q0)],[ifelse(not(match([edit(text(%q0,info,##),%B,_)],0)),[ifelse(hasattr(%q0,info-[edit(text(%q0,info,##),%B,_)]),,%R%chNEED:%cn [capitalize(##)] Info %(Optional%) - &info-[edit(text(%q0,info,##),%B,_)] me=<blah>)],)])]%R[header2()]
&DO.GREET Staff Commands=$greet *:@fo %#=g :smiles and waves, "Hello Guest%0, Welcome to Twilight Moons. Please feel free to ask questions on the channel. To do this type: g <message> or page any staffer or helper (+staff and +helpers) so that you can get your questions answered. To visit our Sphere Info Rooms, type OOC and then CC. Again Welcome to Twilight Moons."
&DO.STRIKE Staff Commands=$+strike*:@switch %0=/set*,{[setq(0,switch(rest(X[before([after(%0,/set)],:)]),me,%#,here,%l,,%#,num(*[rest(X[before(%0,:)])])))];@pemit %#=You set a strike named [extract([after(%0,/set)],2,1,:)] on [name(%q0)] %(%q0%).;&str.titles %q0=[ifelse(Hasattr(%q0,str.titles),[u(%q0/str.titles)]|[capitalize([extract([after(%0,/set)],2,1,:)])],[capitalize([extract([after(%0,/set)],2,1,:)])])];&str.notes %q0=[ifelse(Hasattr(%q0,str.notes),[u(%q0/str.notes)]|[time()]~%#~[extract([after(%0,/set)],3,1,:)],[time()]~%#~[extract([after(%0,/set)],3,1,:)])]},/clear*,{[setq(0,switch(rest(X[before([after(%0,/clear)],:)]),me,%#,here,%l,,%#,num(*[rest(X[before(%0,:)])])))];@pemit %#=You clear strike number [extract([after(%0,/clear)],2,1,:)] off of [name(%q0)] %(%q0%).;&str.titles %q0=[ldelete([u(%q0/str.titles)],[extract([after(%0,/clear)],2,1,:)],|)];&str.notes %q0=[ldelete([u(%q0/str.notes)],[extract([after(%0,/clear)],2,1,:)],|)]},{@switch strmatch(%0,*:*)=0,{@pemit %#=switch(0,or(match(setr(0,switch(rest(X%0),me,%#,here,%l,,%#,num(*[rest(X%0)]))),%#) ,[isstaff(%#)]),Permission denied.,isdbref(%q0),I don't see that here.,hasattr(%q0,str.titles),ifelse(match(%#,%q0),You have,name(%q0)(%q0) has) no Strikes.,%ch%cb-=--=-=%B%cwStrikes%cb%B-=--=--=--=--=--=-=-[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%R%B[ifelse(match(type(%q0),PLAYER),%ch%cwOwner: [name(%q0)] %cw%ch<%q0>%cn,%ch%cwLocation:%cn [name(%q0)] %ch%cw<%q0> owned by [name([owner(%q0)])] <[owner(%q0)]>%cn)]%R%q4%q4[iter(u(%q0/str.titles),%r[ljust(#@%),4)][ljust(##,30)][extract([extract(u(%q0/str.notes),#@,1,|)],1,1,~)],|)]%R%q4%q4)},1,{@pemit %#=switch(0,or(match(setr(0,switch(rest(X[before(%0,:)]),me,%#,here,%l,,%#,num(*[rest(X[before(%0,:)])]))),%#) ,[isstaff(%#)]),Permission denied.,isdbref(%q0),I don't see that here.,hasattr(%q0,str.titles),ifelse(match(%#,%q0),You have,name(%q0)(%q0) has) no Strikes.,%ch%cb-=--=-=%B%cwStrikes%cb%B-=--=--=--=--=--=--=-=-[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%R%B[ifelse(match(type(%q0),PLAYER),%ch%cwOwner: [name(%q0)] %cw%ch<%q0>%cn,%ch%cwLocation:%cn [name(%q0)] %ch%cw<%q0> owned by [name([owner(%q0)])] <[owner(%q0)]>%cn)]%R%q4%q4%R%B%ch%cwTitle:%cn [extract(u(%q0/str.titles),[after(%0,:)],1,|)]%R%B%ch%cwDate Set:%cn [extract([setr(9,[extract(u(%q0/str.notes),[after(%0,:)],1,|)])],1,1,~)]%R%B%ch%cwSet By:%cn [name([extract(%q9,2,1,~)])] <[extract(%q9,2,1,~)]> [switch(1,isgod([extract(%q9,2,1,~)]),Command Staffer,iswiz([extract(%q9,2,1,~)]),Wizard Staffer,isadm([extract(%q9,2,1,~)]),Admin Staffer,isst([extract(%q9,2,1,~)]),Story Teller Staffer,isjdg([extract(%q9,2,1,~)]),Judge Staffer,Staffer)]%R%B%ch%cwNote:%cn [extract(%q9,3,1,~)]%R%q4%q4)}}
&DO.SIGN Staff Commands=$+sign *=*:@pemit %#=You sign [name([setr(0,[num(*%0)])])] for [capitalize(%1)].[setstat(%q0/dat.sigs,[capitalize(%1)],%N)]
&DO.SIGNATURES Staff Commands=$+signs *:[setq(0,[num(*%0)])];@pemit %#=[header2()]%R%TName: [name(%q0)] %(%q0%)%R[header2()][u(#790/line4,%q0,sigs,Signatures)]%R[header2()]
&FN.NOJUDGE Staff Commands=[not([hassflag(%0,NOJUdge)])]
&DO.JUDGE.LIST Staff Commands=$+judge/list:@pemit %#=[header(Master Judge List)]%R[ljust(Num,4)][ljust(By,15)][ljust(Race,15)][ljust(Time,30)]Responded to by%R[header2()];@pemit %#=[list(lattr(#36/jdgr.*),[ljust(#@,4)][u(fmt.judge,##)])];@pemit %#=[header2()]%R%T+judge/respond # to respond%R[header2()]
&FMT.JUDGE Staff Commands=[ljust([name([setr(0,[text2(#36,%0,By)])])],15)][ljust([u(%q0/race)],15)][ljust([convsecs([text2(#36,%0,mux)])],30)][ifelse([gt([strlen([text2(#36,%0,respond)])],1)],[name([text2(#36,%0,Respond)])],Avail)]
&DO.LORES2 Staff Commands=$+lores/set *=*:[setq(0,[findpc(%0,%#)])];@pemit %#=LORE> [name(%q0)] has just gained [capitalize(%1)] info powers.;&loredat %q0=[setunion([u(%q0/loredat)],[edit(%1,%B,_)])]
&DO.LORES4 Staff Commands=$+lores/clear *=*:[setq(0,[findpc(%0,%#)])];@pemit %#=LORE> [name(%q0)] has just lost [capitalize(%1)] info powers.;&loredat %q0=[setdiff([u(%q0/loredat)],[edit(%1,%B,_)])]
&DO.WHO.MAGE Staff Commands=$+mwho:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,filter(ismage,[cnum(list)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([switch(1,[not([isapp(##)])],%ch%cc!%cn,[familiar(##)],%ch%cr*%cn,[match([u(##/subrace)],Tradition)],%ch%cb-%cn,[match([u(##/subrace)],Craft)],%ch%cg$%cn,[match([u(##/subrace)],orphan)],%ch%cm+%cn,%B)][name(##)],15)][rjust([ifelse(Hasflag(##,connected),singletime(idle(##)),Off)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] Mages on Twilight Moons\]%cn%R%ch%cw\[ %ch%cc!%cw = Unapproved | %ch%cr*%cw = Familiar | %ch%cb-%cw = Tradition | %ch%cg$%cw = Craft | %ch%cm+%cw = Orphan \]
&ISMAGE Staff Commands=[switch([mage(%0)][u(#816/isplayer,%0)][familiar(%0)],0?0,0,110,1,011,1,101,0,101,0)]
&DO.WHO.MAGE1 Staff Commands=$+mwho/on:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,filter(ismage,[cnum(clist)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([switch(1,[not([isapp(##)])],%ch%cc!%cn,[familiar(##)],%ch%cr*%cn,[match([u(##/subrace)],Tradition)],%ch%cb-%cn,[match([u(##/subrace)],Craft)],%ch%cg$%cn,[match([u(##/subrace)],orphan)],%ch%cm+%cn,%B)][name(##)],15)][rjust([ifelse(Hasflag(##,connected),singletime(idle(##)),Off)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] Mages on Twilight Moons\]%cn%R%ch%cw\[ %ch%cc!%cw = Unapproved | %ch%cr*%cw = Familiar | %ch%cb-%cw = Tradition | %ch%cg$%cw = Craft | %ch%cm+%cw = Orphan \]
&DO.AWARE Staff Commands=$+aware *=*:@scan %chAWARE:%cn %N just ran an awareness pose.;@dolist [cnum(clist)]=@switch [gte([stat(##,abil,awareness)],%0)]=1,{@pemit ##=<%chAwareness%cn> %1}
&ISMORTAL Staff Commands=[switch([match([u(%0/race)],Mortal)][u(#816/isplayer,%0)],0?,0,11,1,10,0)]
&DO.WHO.MORTAL Staff Commands=$+mowho:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,filter(ismortal,[cnum(list)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([switch(1,[not([isapp(##)])],%ch%cc!%cn,%B)][name(##)],15)][rjust([ifelse(Hasflag(##,connected),singletime(idle(##)),Off)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] Mortals on Twilight Moons\]%cn%R%ch%cw\[ %ch%cc!%cw = Unapproved \]
&DO.WHO.MORTAL2 Staff Commands=$+mowho/on:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,filter(ismortal,[cnum(clist)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([switch(1,[not([isapp(##)])],%ch%cc!%cn,%B)][name(##)],15)][rjust([ifelse(Hasflag(##,connected),singletime(idle(##)),Off)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] Mortals on Twilight Moons\]%cn%R%ch%cw\[ %ch%cc!%cw = Unapproved \]
&DO.RACE.OBJECTS Staff Commands=$+races:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(App,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,[sortby(fn.sortby2,[children(#1973)])])][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([name(##)],15)][rjust([ifelse([hassflag(##,closed)],NOAPP,APP)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]
&DO.FREE Staff Commands=$+free *:@switch [match([loc([setr(1,findpc(%0,%#))])],#2059)]=0,{@pemit %#=[name(%q1)] isn't caught.},{@pemit %#=You just freed [name(%q1)].;@set %q1=!fixed;@set %q1=!UMBRA;@set %q1=!Gagged;@tel %q1=[u(%q1/loc1)];@set %q1=!DARK;@flag %q1=UMBRA}
&DO.PEMIT Staff Commands=$+pemit *=*:@pemit %#=PEMIT TO [name(*%0)]> %1;@pemit [findpc(%0,%#)]=<< %1 >>
&DO.MWALL Staff Commands=$@mwall *:@dolist [cnum(clist)]=@switch [or(isstaff(##),[mage(##)])][familiar(##)]=10,{@pemit ##=%chMage Announcement:%cn %N[switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]},01,{@Pemit ##=%chMage Announcement:%cn %N[switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]},11,{@Pemit ##=%chMage Announcement:%cn %N[switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]}
&DO.JNOTE.SET Staff Commands=$+jnote/set *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])];[setq(1,[extract(%0,2,1,:)])];[setq(2,[extract(%0,3,1,:)])][setq(3,match(get(%q0/JNOTES),%q1|*,^))];@switch [isdbref(%q0)]=0,{@pemit %#=Are you sure '[extract(%0,1,1,:)]' is right?},1,{@switch [hasattr(%q0,JNOTES)][eq(%q3,0)]=01,{@pemit %#=You set a JudgeNote Named "[capitalize(%q1)]" on [name(%q0)].;&jnotes %q0=[capitalize(%q1)]|%#|[secs()]|[strip(%q2)]},00,{@pemit %#=There is already a Judge Note Named that on [name(%q0)].},11,{@pemit %#=You set a JudgeNote Named "[capitalize(%q1)]" on [name(%q0)].;&jnotes %q0=[setunion([u(%q0/jnotes)],[capitalize(%q1)]|%#|[secs()]|[strip(%q2)],^)]},10,{@pemit %#=There is already a Judge Note Named that on [name(%q0)].}}
&DO.JNOTES.VIEW Staff Commands=$+jnote *:[setq(0,[findnum(%#,%0)])];@switch [isdbref(%q0)][hasattr(%q0,Jnotes)]=0?,{@pemit %#=Are you sure that '%0' is correct?},10,{@pemit %#=There are no Judge Notes on [name(%q0)].},11,{@pemit %#=[header2()]%R[ljust(%BJudge Note List,35)][center(%( --- %),10)][rjust(Player: [name(%q0)],35)]%R[header2()]%R[iter([u(%q0/jnotes)],[ljust([extract(##,1,1,|)],26)][ifelse(mod(#@,3),,%r)],^)]%r[header2()]}
&DO.JNOTE.VIEW Staff Commands=$+jnote/view *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])];[setq(1,[extract(%0,2,1,:)])];[setq(3,match(get(%q0/JNOTES),%q1|*,^))];[setq(4,[extract([u(%q0/jnotes)],%q3,1,^)])];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%0,1,1,:)]' is right?},11,{@pemit %#=There is no note named '%q1' on [name(%q0)].},10,{@pemit %#=[header2()]%R[ljust(%BJudge Note: [capitalize(%q1)],35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%r[header2()]%R%B[ljust(Set By:,10)][name([extract(%q4,2,1,|)])]%R%B[ljust(Set On:,10)][convsecs([extract(%q4,3,1,|)])]%R%B[ljust(Note:,10)][extract(%q4,4,1,|)]%R[header3()]}
&DO.JNOTES.LIST Staff Commands=$+jnote *:[setq(0,[findnum(%#,%0)])];@switch [isdbref(%q0)][hasattr(%q0,Jnotes)]=0?,{@pemit %#=Are you sure that '%0' is correct?},10,{@pemit %#=There are no Judge Notes on [name(%q0)].},11,{@pemit %#=[header2()]%R[ljust(%BJudge Note List,35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%R[header2()]%R[iter([u(%q0/jnotes)],[ljust([extract(##,1,1,|)],26)][ifelse(mod(#@,3),,%r)],^)]%r[header2()]}
&DO.JNOTE.CLEAR Staff Commands=$+jnote/clear *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])])];[setq(1,[extract(%0,2,1,:)])];[setq(3,match(get(%q0/JNOTES),%q1|*,^))];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%0,1,1,:)]' is right?},11,{@pemit %#=There is no note to clear by that name.},10,{@pemit %#=Judge Note '%q1' has been cleared by [name(%q0)].;&jnotes %q0=[ldelete([u(%q0/jnotes)],%q3,^)]}
&DO.WIZNOTE.SET Staff Commands=$+wiznote/set *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])];[setq(1,[extract(%0,2,1,:)])];[setq(2,[extract(%0,3,1,:)])][setq(3,match(get(%q0/WIZNOTES),%q1|*,^))];@switch [isdbref(%q0)]=0,{@pemit %#=Are you sure '[extract(%0,1,1,:)]' is right?},1,{@switch [hasattr(%q0,WIZNOTES)][eq(%q3,0)]=01,{@pemit %#=You set a WizardNote Named "[capitalize(%q1)]" on [name(%q0)].;&wiznotes %q0=[capitalize(%q1)]|%#|[secs()]|[strip(%q2)]},00,{@pemit %#=There is already a Wizard Note Named that on [name(%q0)].},11,{@pemit %#=You set a WizardNote Named "[capitalize(%q1)]" on [name(%q0)].;&wiznotes %q0=[setunion([u(%q0/wiznotes)],[capitalize(%q1)]|%#|[secs()]|[strip(%q2)],^)]},10,{@pemit %#=There is already a Wizard Note Named that on [name(%q0)].}}
&DO.WIZNOTE.CLEAR Staff Commands=$+wiznote/clear *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])])];[setq(1,[extract(%0,2,1,:)])];[setq(3,match(get(%q0/WIZNOTES),%q1|*,^))];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%0,1,1,:)]' is right?},11,{@pemit %#=There is no note to clear by that name.},10,{@pemit %#=Wizard Note '%q1' has been cleared by [name(%q0)].;&wiznotes %q0=[ldelete([u(%q0/wiznotes)],%q3,^)]}
&DO.BNOTE.SET Staff Commands=$+bnote/set *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])];[setq(1,[extract(%0,2,1,:)])];[setq(2,[extract(%0,3,1,:)])][setq(3,match(get(%q0/BNOTES),%q1|*,^))];@switch [isdbref(%q0)]=0,{@pemit %#=Are you sure '[extract(%0,1,1,:)]' is right?},1,{@switch [hasattr(%q0,BNOTES)][eq(%q3,0)]=01,{@pemit %#=You set a BuildNote Named "[capitalize(%q1)]" on [name(%q0)].;&bnotes %q0=[capitalize(%q1)]|%#|[secs()]|[strip(%q2)]},00,{@pemit %#=There is already a Build Note Named that on [name(%q0)].},11,{@pemit %#=You set a BuildNote Named "[capitalize(%q1)]" on [name(%q0)].;&bnotes %q0=[setunion([u(%q0/bnotes)],[capitalize(%q1)]|%#|[secs()]|[strip(%q2)],^)]},10,{@pemit %#=There is already a Build Note Named that on [name(%q0)].}}
&DO.BNOTES.LIST Staff Commands=$+bnote *:[setq(0,[findnum(%#,%0)])];@switch [isdbref(%q0)][hasattr(%q0,Bnotes)]=0?,{@pemit %#=Are you sure that '%0' is correct?},10,{@pemit %#=There are no Build Notes on [name(%q0)].},11,{@pemit %#=[header2()]%R[ljust(%BBuild Note List,35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%R[header2()]%R[iter([u(%q0/bnotes)],[ljust([extract(##,1,1,|)],26)][ifelse(mod(#@,3),,%r)],^)]%r[header2()]}
&DO.BNOTE.VIEW Staff Commands=$+bnote/view *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])];[setq(1,[extract(%0,2,1,:)])];[setq(3,match(get(%q0/BNOTES),%q1|*,^))];[setq(4,[extract([u(%q0/bnotes)],%q3,1,^)])];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%0,1,1,:)]' is right?},11,{@pemit %#=There is no note named '%q1' on [name(%q0)].},10,{@pemit %#=[header2()]%R[ljust(%BBuild Note: [capitalize(%q1)],35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%r[header2()]%R%B[ljust(Set By:,10)][name([extract(%q4,2,1,|)])]%R%B[ljust(Set On:,10)][convsecs([extract(%q4,3,1,|)])]%R%B[ljust(Note:,10)][extract(%q4,4,1,|)]%R[header3()]}
&DO.BNOTE.CLEAR Staff Commands=$+bnote/clear *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])])];[setq(1,[extract(%0,2,1,:)])];[setq(3,match(get(%q0/BNOTES),%q1|*,^))];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%0,1,1,:)]' is right?},11,{@pemit %#=There is no note to clear by that name.},10,{@pemit %#=Build Note '%q1' has been cleared by [name(%q0)].;&bnotes %q0=[ldelete([u(%q0/bnotes)],%q3,^)]}
&ISVAMP Staff Commands=[switch([vampire(%0)][u(#816/isplayer,%0)][or([match([u(%0/subrace)],Ghoul)][hassflag(%0,Ghoul)])],0?0,0,110,1,011,1,111,1,101,0,101,0)]
&DO.WHO.VAMPIRE Staff Commands=$+vwho:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,filter(isvamp,[cnum(list)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([switch(1,[not([isapp(##)])],%ch%cc!%cn,[match([u(##/subrace)],Camarilla)],%ch%cr*%cn,[match([u(##/subrace)],Sabbat)],%ch%cb-%cn,[match([u(##/subrace)],Anarch)],%ch%cg$%cn,[match([u(##/subrace)],independent)],%ch%cm+%cn,[or([match([u(##/subrace)],Ghoul)],[hassflag(##,Ghoul)])],%ch%cy@%cn,%B)][name(##)],15)][rjust([ifelse(Hasflag(##,connected),singletime(idle(##)),Off)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] Vampires on Twilight Moons\]%cn%R%ch%cw\[ %ch%cc!%cw = Unapproved | %ch%cr*%cw = Camarilla | %ch%cb-%cw = Sabbat | %ch%cg$%cw = Anarch | %ch%cm+%cw = Independent \]%cn%R%ch%cw\[ %ch%cy@%cw = Ghoul \]%cn
&DO.WHO.VAMPIRE2 Staff Commands=$+vwho/on:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn[setq(0,filter(isvamp,[cnum(clist)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([switch(1,[not([isapp(##)])],%ch%cc!%cn,[match([u(##/subrace)],Camarilla)],%ch%cr*%cn,[match([u(##/subrace)],Sabbat)],%ch%cb-%cn,[match([u(##/subrace)],Anarch)],%ch%cg$%cn,[match([u(##/subrace)],independent)],%ch%cm+%cn,[or([match([u(##/subrace)],Ghoul)],[hassflag(##,Ghoul)])],%ch%cy@%cn,%B)][name(##)],15)][rjust([ifelse(Hasflag(##,connected),singletime(idle(##)),Off)],5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] Vampires on Twilight Moons\]%cn%R%ch%cw\[ %ch%cc!%cw = Unapproved | %ch%cr*%cw = Camarilla | %ch%cb-%cw = Sabbat | %ch%cg$%cw = Anarch | %ch%cm+%cw = Independent \]%cn%R%ch%cw\[ %ch%cy@%cw = Ghoul \]%cn
@set Staff Commands=INHERIT
@set Staff Commands=STAFF
@set Staff Commands=STICKY
@set Staff Commands=WIZARD
@set Staff Commands=SAFE
@parent Staff Commands=#35
@create Places System=10
@Desc Places System=[columns(iter(setunion(lattr(me/cmd_*),lattr(me/do_*)),[rest(first(xget(me,##),:),$)]|),25,|)]
&EVAL_OBJ Places System=#35
&DO_CONFIGURE Places System=$configure * places: @switch/first [controls(%#,%l)]:[isnum(%0)]:%0=0:*:*, {@pemit %#=You do not control [name(%l)].},*:0:*, {@pemit %#=The number of places needs to be a number!},*:*:0, {@dolist rest(lnum(add(get(%l/PLACESMAX),1)))={@unlock %l/PLACE##; &PLACE## %l}; @unlock %l/PLACESCLEANUP1; @unlock %l/PLACESCLEANUP2; @unlock %l/PLACESMAX; &PLACESCLEANUP1 %l; &PLACESCLEANUP2 %l; &PLACESMAX %l; @set %l=!MONITOR; @pemit %#=Places removed from [name(%l)].}, {&PLACESMAX %l=%0; @dolist rest(lnum(add(%0,1)))={@unlock %l/PLACE##; &PLACE## %l=u(SETUP_FN,##,add(rand(9),1));&place##-desc %l=A simple wooden table with a card holder saying 'Table ##' on it.}; @unlock %l/PLACESCLEANUP1; @unlock %l/PLACESCLEANUP2; @unlock %l/PLACESMAX; @set %l=MONITOR; &PLACESCLEANUP1 %l=v(PLACESCLEANUP1); &PLACESCLEANUP2 %l=v(PLACESCLEANUP2); &PLACENUMS %l=[repeat(|,%0)]; @pemit %#=Configuration for %0 places complete.}
&SETUP_FN Places System=Table %0|%1|[add(rand(%1),1)]||I'm sorry, there's no room to add a place there.|I'm sorry, there's no place to move there.|You sit down at|sits down at|You stand and leave|stands and leaves|At your table
&DO_UPDATE Places System=$update */*=*: @switch/first [controls(%#,%l)]:[and(isnum(%0),lte(%0,get(%l/PLACESMAX)))]:[member(NAME MAXPLACES CURPLACES FIXED FULL EMPTY JOIN OJOIN DEPART ODEPART PREFIX,ucstr(%1))]=0:*:*, {@pemit %#=Permission denied.},*:0:*, {@pemit %#=I'm sorry, but '%0' isn't a valid place number.},*:*:0, {@pemit %#=I'm sorry, but '%1' isn't a valid configuration option.}, {@unlock %l/PLACE%0; &PLACE%0 %l=u(UPDATEINFO,%l,%0,%1,%2); @pemit %#=The %1 for [u(GETINFO,%l,%0,NAME)] is now set to:%r[space(5)][u(GETINFO,%l,%0,%1)]}
&DO_MV Places System=$mv from * to *: @switch/first 0=and(gt(%0,0),lte(%0,get(%l/PLACESMAX))), {@pemit %#='%0' is not a valid place number.},and(gt(%1,0),lte(%1,get(%l/PLACESMAX))), {@pemit %#='%1' is not a vaild place number.},not(words(u(GETINFO,%l,%0,FIXED))), {@pemit %#=u(GETINFO,%l,%0,FIXED)},not(words(u(GETINFO,%l,%1,FIXED))), {@pemit %#=u(GETINFO,%l,%1,FIXED)},sub(u(GETINFO,%l,%0,CURPLACES),words(extract(get(%l/PLACENUMS),%0,1,|))), {@pemit %#=u(GETINFO,%l,%0,EMPTY)},neq(u(GETINFO,%l,%1,CURPLACES),u(GETINFO,%l,%1,MAXPLACES)), {@pemit %#=u(GETINFO,%l,%1,FULL)}, {@unlock %l/PLACE%0; @unlock %l/PLACE%1; &PLACE%0 %l=u(UPDATEINFO,%l,%0,CURPLACES,sub(u(GETINFO,%l,%0,CURPLACES),1)); &PLACE%1 %l=u(UPDATEINFO,%l,%1,CURPLACES,add(u(GETINFO,%l,%1,CURPLACES),1)); @pemit %#=You move a place from [u(GETINFO,%l,%0,NAME)] to [u(GETINFO,%l,%1,NAME)].}
&PLACESCLEANUP1 Places System=^* has left.:placescleanup(%#)
&PLACESCLEANUP2 Places System=^* has disconnected.:placescleanup(%#)
&PLACESCLEANUPCMD Places System=$placescleanup(*):@switch [setq(0,U(WHICHPLACE,%#,%0))][r(0)]=>0,{&PLACENUMS %#=[replace(get(%#/PLACENUMS),r(0),remove(extract(get(%#/PLACENUMS),r(0),1,|),%0),|)]};@dolist [edit(get(%#/PLACENUMS),|,)]=@switch [orflags(##,c)]=0,{&PLACENUMS %#=[setq(1,U(WHICHPLACE,%#,##))][replace(get(%#/PLACENUMS),r(1),remove(extract(get(%#/PLACENUMS),r(1),1,|),##),|)]}
&DO_JOIN Places System=$join *: @switch/first [not(u(WHICHPLACE,%l,%#))] [lcstr(%0)]=0 *, {@pemit %#=Don't you think you should 'depart' first?},1 at #*, {@trig me/PLACEFUNCTION=%l,%#,[delete(rest(%0),0,1)]},1 #*, {@trig me/PLACEFUNCTION=%l,%#,[delete(%0,0,1)]},1 with *, {@pemit [setq(1,locate(%#,rest(%0),niPT))][setq(0,u(WHICHPLACE,%l,r(1)))]%#=switch(r(0), 0,There isn't anyone named '[capstr(rest(%0))]' at a special place.,You go over to join [name(r(1))].%r[u(%l/PLACE[r(0)]-DESC)]); @trig me/[switch(r(0),0,-,PLACEFUNCTION)]=%l,%#,[r(0)]}, {@trig me/PLACEFUNCTION=%l,%#,[match(iter(rest(lnum(add(get(%l/PLACESMAX),1))),[u(GETINFO,%l,##,NAME)]|),*%0*,|)]}
&PLACEFUNCTION Places System=@switch/first 0=[lte(%2,get(%0/PLACESMAX))],@pemit %1=Invalid Place Number '%2'.,[setq(1,extract(get(%0/PLACENUMS),%2,1,|))][switch(or(andflags(%1,Pcy2),andflags(%1,Pco)),0,[gt(u(GETINFO,%0,%2,CURPLACES),words(filter(FN_INVIS,r(1))))],1)],@pemit %1=There aren't any free spaces there., {@verb v(eval_obj)={[setq(0,u(GETINFO,%0,%2,NAME))]%1},eval_msg,,oeval_msg,,,{{[edit([U(GETINFO,%0,%2,JOIN)] [r(0)].,%,,%%%,)]},{[switch(andflags(%1,Pc$),0,edit([u(GETINFO,%0,%2,OJOIN)] [r(0)].,%,,%%%,))]}};@pemit %1=[u(%0/PLACE%2-DESC)];@dolist [r(1)]=@pemit ##=[switch(or(andflags(%1,Pcy2),andflags(%1,Pco)),0,[name(%1)] joins you.)];&PLACENUMS %0=[replace(get(%0/PLACENUMS),%2,[r(1)]%1%b,|)]}
&DO_DEPART Places System=$depart:@switch [setq(1,U(WHICHPLACE,%l,%#))][setq(0,U(GETINFO,%l,r(1),NAME))][r(1)]=0,{@pemit %#=You aren't placed anywhere.},{&PLACENUMS %l=[replace(get(%l/PLACENUMS),r(1),remove(extract(get(%l/PLACENUMS),r(1),1,|),%#),|)];@verb v(eval_obj)=%#,eval_msg,,oeval_msg,,,{{[edit([u(GETINFO,%l,r(1),DEPART)] [r(0)].,%,,%%%,)]},{[switch(or(andflags(%#,Pcy2),andflags(%#,Pco)),0,[edit([U(GETINFO,%l,r(1),ODEPART)] [r(0)].,%,,%%%,)])]}};@dolist [extract(get(%l/PLACENUMS),r(1),1,|)]=@pemit ##=[switch(or(andflags(%#,Pcy2),andflags(%#,Pco)),0,%N has departed.)]}
&DO_PLACES Places System=$places: @pemit %#=switch(get(%l/PLACESMAX),,There are no special places here.,0,There are no special places here.,map(PLACES_FN,rest(lnum(add(get(%l/PLACESMAX),1)))))
&DO_PLACE Places System=$place *: @pemit %#=switch(get(%l/PLACESMAX),,There are no special places here.,0,There are no special places here.,map(PLACES_FN,edit(%0,#,)))
&DO_PLOOK Places System=$plook: @pemit %#=[setq(0,edit(get(%l/PLACENUMS),|,))][fold(PLOOK_FOLD_FN,rest(lnum(add(get(%l/PLACESMAX),1))),-----)]%rNo place [space(3)] [setq(3,setdiff(setinter(lcon(%l),lwho()),r(0)))][rjust([words(r(3))] at no places,15)] [space(3)] [setq(4,sort(iter(r(3),name(##))))][ljust(mid(extract(r(4),1,1),0,14),14)] [ljust(mid(extract(r(4),2,1),0,14),14)] [ljust(mid(extract(r(4),3,1),0,14),14)][switch(gt(words(r(4)),3),1,u(NAME_3COL_FN,extract(r(4),4,3999)))]%r-----
&DO_MUTTER Places System=$mutter *=*:@pemit/l [setq(0,locate(%#,%0,nimP))][iter(setdiff([lcon(%l)],{%# [filter(CAN_SNOOP,[lcon(%l)])]}),ifelse(u(fn_same_realm,%#,##),##,))]={[switch(%1,:* "*"*,{%N [first(delete(%1,0,1),")]%S mutters to [setq(1,u(MUTTER_FN,extract(%1,2,1,")))][switch(r(0),%#,%oself,name(r(0)))][switch(r(1),...,.,{, "[r(1)]"})] [rest(rest(%1,"),")]},:*,{%N mutters to [switch(r(0),%#,%oself,name(r(0)))].},;* "*"*,{%N[first(delete(%1,0,1),")]%S mutters to [setq(1,u(MUTTER_FN,extract(%1,2,1,")))][switch(r(0),%#,%oself,name(r(0)))][switch(r(1),...,.,{, "[r(1)]"})] [rest(rest(%1,"),")]},;*,{%N mutters to [switch(r(0),%#,%oself,name(r(0)))].},{[setq(1,u(MUTTER_FN,%1))]%N mutters to [switch(r(0),%#,%oself,name(r(0)))][switch(r(1),...,.,{, "[r(1)]"})]})]}; @pemit %#[setq(2,edit(edit(%1,<,),>,))]=switch(r(0),#-1,I don't see that here.,#-2,I'm not sure which %0 you mean.,u(MUTTER_FROM_FN,%#,r(0),r(2))); @pemit [switch(r(0),%#,XX,r(0))]=[u(MUTTER_TO_FN,%#,r(0),r(2))]; @pemit/l [iter(setdiff([filter(CAN_SNOOP,[lcon(%l)])],{%# [num(r(2))]}),ifelse(u(fn_same_realm,%#,##),##,))]=[u(MUTTER_TO_SPY_FN,%#,r(0),r(2))]
&DO_MUTTER_PLACE Places System=$mutter/place *=*: @switch and(gte(%0,1),lte(%0,get(%l/PLACESMAX)))=0, {@pemit %#=There is no such place here.}, {@remit %l={[switch(%1,:* "*"*,{%N [first(delete(%1,0,1),")]%S mutters to [PlaceInfo(%l,%0,NAME)][setq(1,u(MUTTER_FN,extract(%1,2,1,")))][switch(r(1),...,.,{, "[r(1)]"})] [rest(rest(%1,"),")]},:*,{%N mutters to [PlaceInfo(%l,%0,NAME)],},;* "*"*,{%N[first(delete(%1,0,1),")]%S mutters to [PlaceInfo(%l,%0,NAME)][setq(1,u(MUTTER_FN,extract(%1,2,1,")))][switch(r(1),...,.,{, "[r(1)]"})] [rest(rest(%1,"),")]},;*,{%N mutters to [PlaceInfo(%l,%0,NAME)]},{[setq(1,u(MUTTER_FN,%1))]%N mutters to [PlaceInfo(%l,%0,NAME)][switch(r(1),....,.,{, "[r(1)]"})]})]}; @dolist [setq(2,edit(edit(%1,<,),>,))][setq(4,u(FN-HEARER,%l,lcon(%l)))][setq(3,{[setr(5,PlaceInfo(%l,%0,PREFIX))], [switch(r(2),:*,%N [delete(r(2),0,1)],;*,%N[delete(r(2),0,1)],%N says "[r(2)]")]})][setunion(AtPlace(%l,%0),%q4 %#)]=@pemit ##=[ifelse(match(setdiff(%q4,atplace(%l,%0) %#),##),edit(%q3,%q5,At location #%0),r(3))]};@pemit/l [setdiff([filter(CAN_SNOOP,[lcon(%l)])],%#)]=[u(MUTTER_TO_SPY_FN,%#,r(0),r(2))]
&DO_MUTTER_TT Places System=$mutter/tt *=*: @switch/first [setq(0,locate(%#,%0,nimP))][r(0)] [setq(9,WhichPlace(%l,%#))][switch(r(9),0,setq(9,WhichPlace(%l,r(0))))][r(9)]=#-1 *, {@pemit %#=I don't see that here.},#-2 *, {@pemit %#=I'm not sure which %0 you mean.},* 0, {@pemit %#=Neither you nor [name(r(0))] is at a special place.}, {@dolist [setq(8,{[setr(3,PlaceInfo(%l,r(9),PREFIX))],[switch(%1,:*"*"*,{%N [first(delete(%1,0,1),")]%S mutters to [setq(1,u(MUTTER_FN,extract(%1,2,1,")))][switch(r(0),%#,%oself,name(r(0)))][switch(r(1),...,.,{, "[r(1)]"})] [rest(rest(%1,"),")]},:*,{%N mutters to [switch(r(0),%#,%oself,name(r(0)))].},;*"*"*,{%N[first(delete(%1,0,1),")]%S mutters to [setq(1,u(MUTTER_FN,extract(%1,2,1,")))][switch(r(0),%#,%oself,name(r(0)))][switch(r(1),...,.,{, "[r(1)]"})] [rest(rest(%1,"),")]},;*,{%N mutters to [switch(r(0),%#,%oself,name(r(0)))].},{[setq(1,u(MUTTER_FN,%1))]%N mutters to [switch(r(0),%#,%oself,name(r(0)))][switch(r(1),...,.,{,"[r(1)]"})]})]})][setunion([setr(4,u(FN-HEARER,%l,lcon(%l)))],AtPlace(%l,r(9)) %# [r(0)])]=@pemit ##=[ifelse(match(setdiff(%q4,atplace(%l,%q9) %# %q0),##),edit(%q8,%q3,At location #%q9),r(8))]; @pemit %#=[setq(2,edit(edit(%1,<,),>,))][u(MUTTER_FROM_FN,%#,r(0),r(2))]; @pemit r(0)=u(MUTTER_TO_FN,%#,r(0),r(2))};@pemit/l [setdiff([filter(CAN_SNOOP,[lcon(%l)])],{%# [num(r(2))]})]=[u(MUTTER_TO_SPY_FN,%#,r(0),r(2))]
&DO_TT Places System=$tt ?*:@pemit/list [setq(0,[u(WHICHPLACE,%l,%#)])][setq(1,[extract([get(%l/placenums)],%q0,1,|)])][setq(2,{[switch(%q0,0,%#,%q1)]})][setq(3,[setdiff([filter(CAN_SPY,[lcon(%l)])],%q1)])][setq(4,[u(TT_PARSE,%N,%0,%1)])]%q2=[switch(%q0,0,You must first join a place.,{[u(GETINFO,%l,r(0),PREFIX)], %q4})];@pemit/list %q3=You sense %q4 at location #%q0.
&DO_DESC_PLACES Places System=$desc/place *=*:@switch [and(isnum(%0),lte(%0,u(%l/placesmax)))]=0,@pemit %#=That is not a valid place for this location.,1,{&PLACE%0-DESC %l=%1;@pemit %#=Description for place %0 is set.}
&SAMEREALM Places System=squish(iter(lcon(loc(%0)),ifelse(cansee(%0,##),##,)))
&CMD_LANG_SAY Places System=$+say *=*:setq(1,match(u(%#/langs),%0));switch(%1,:*"*"*,{[setq(9,{[setr(2,%N [first(delete(%1,0,1),")]%S says in%b)][setr(3,extract(u(%#/langs),%q1,1))][setr(4,{%,%b"[extract(%1,2,1,")]"%b})][setr(5,rest(rest(%1,"),"))]})]},;*"*"*,{[setq(9,{[setr(2,%N[first(delete(%1,0,1),")]%S says in%b)][setr(3,extract(u(%#/langs),%q1,1))][setr(4,{%,%b"[extract(%1,2,1,")]"%b})][setr(5,rest(rest(%1,"),"))]})]},|*"*"*,{[setq(9,{[setr(2,[first(delete(%1,0,1),")]%N says in%b)][setr(3,extract(u(%#/langs),%q1,1))][setr(4,{%,%b"[extract(%1,2,1,")]"%b})][setr(5,rest(rest(%1,"),"))]})]},:*,{[setq(9,{[setr(2,%N [delete(%1,0,1)])]})]},;*,{[setq(9,{[setr(2,%N[delete(%1,0,1)])]})]},|*,{[setq(9,{[setr(2,delete(%1,0,1))]})]},"*,{[setq(9,{[setr(2,%N says in%b)][setr(3,extract(u(%#/langs),%q1,1))][setr(4,{%,%b"[extract(%1,2,1,")]"%b})][setr(5,rest(rest(%1,"),"))]})]},{[setq(9,{[setr(2,%N says in%b)][setr(3,extract(u(%#/langs),%q1,1))][setr(4,{%,%b"%1"%b})][setr(5,rest(rest(%1,"),"))]})]});@switch strmatch(u(%#/langs),*%0*)=0,{@pemit %#=Sorry, you don't know that language.},1,{@dolist [setr(8,iter(setr(7,u(#705/Samerealm2,%#) %l),switch(strmatch(u(##/langs),*%0*),1,##)))]=@pemit ##=%q9;@dolist [setdiff(%q7,%q8)]=@pemit ##=switch([strmatch(u(#35/fn-imposs-langs),*%0*)][strmatch(Sign-Language Sabbat-Hand,*%0*)],10,%N communicates in an indecipherable fashion.,01,%N makes some odd gestures.,00,switch(gte(setr(7,mul(div(extract(froll([add([stat(##,attr,intelligence)],[stat(##,abil,linguistics)])]+[stat(##,m&F,Natural Linguist)]=[u(#35/fn-lang-diff,##,%q3)]),2,1),2),2)),6),1,%q9,switch(%q7,4,{%q2%q3[ulocal(#35/mutter_fn,%q4)]%q5},2,{[edit(edit(%q2,says,speaks),%S,%N)]%q3. %q5},0,{[edit(edit(%q2,says,speaks),%S,%N)]a language you don't understand. %q5})))}
&CMD_LANG_LIST Places System=$+langs:@pemit %#=Your current languages are:%B[andlist(iter(sortby(#35/fn.sortby,u(%#/langs)),[capitalize(##)]))].
&CMD_PDESC Places System=$plook *:@switch [hasattr([loc(%#)],place%0)]=1,{@switch hasattr(%l,place%0-desc)=0,{@pemit %#=There is no description set for that place.},{@pemit %#=[name([loc(%#)])]: Place %0%r%r%t[u(%l/place%0-desc)]%r%r[switch([strlen(u(atplace,%l,%0))],0,Contents:%rNone,Contents:%r%b[iter([u(atplace,%l,%0)],[name(##)]%r)])]}},{@pemit %#=There is no place with that number.}
&SAMEREALM2 Places System=squish(iter(lcon(loc(%0)),switch([andflags(%0,Pcy)][andflags(%0,Pc$)][andflags(%0,Pc/)][andflags(%0,Pc1)],1???,{switch(or(andflags(##,Pcy),and(andflags(##,Pc2),strmatch(u(##/PEERING_REALM),*Umbra*))),1,##)},?1??,{switch(or(andflags(##,Pc$),and(andflags(##,Pc2),strmatch(u(##,PEERING_REALM),*Shroud*))),1,##)},??1?,{switch(andflags(##,Pc/),1,##)},???1,{switch(or(andflags(##,Pc0),andflags(##,1)),1,##)},0000,{switch(andflags(##,Pc),1,##)})))
&EVAL_OBJECT Places System=#35
&MUTTER Places System=%t%ch%cwUsage:%cn Mutter <name>=<message>%R%T[space(7)]mutter/tt <name>=<message>%R%T[space(7)]mutter/place <#>=<message>%R%R%TThe first command allows you to mutter to a player. The second command allows you to mutter to a place while in a place, using Table Talk. The third command allows you to mutter to a place without being in it.%R%RThis mutter command can be over heard clearly by some players.
&DO.WHISPER Places System=$whisper *=*:[setq(0,[num(*%0)])];@dolist lcon(%l)={@pemit ##=[switch([u(#35/fn_same_realm,%#,##)][u(#35/can_snoop,##)][match(##,%#)][match(##,%q0)],1100,You sense that\\\, %N[switch(mid(%1,0,1),:,%B[mid(%1,1,[strlen(%1)])],;,[mid(%1,1,[strlen(%1)])],%Bwhispers\\\, "%1")] to [name(%q0)].,1?10,[name(%q0)] senses\\\, %N[switch(mid(%1,0,1),:,%B[mid(%1,1,[strlen(%1)])],;,[mid(%1,1,[strlen(%1)])],%Bwhispers\\\, "%1")],1?01,You sense %N[switch(mid(%1,0,1),:,%B[mid(%1,1,[strlen(%1)])],;,[mid(%1,1,[strlen(%1)])],%Bwhispers\\\, "%1")],1?11,You sense %N[switch(mid(%1,0,1),:,%B[mid(%1,1,[strlen(%1)])],;,[mid(%1,1,[strlen(%1)])],%Bwhispers\\\, "%1")])]}
&PLOOK_FOLD_FN Places System=%0%r[setq(1,extract(get(%l/PLACENUMS),%1,1,|))] Place #[ljust(%1,5)] [rjust([sub(u(GETINFO,%l,%1,CURPLACES),words(r(1)))] empty places,15)] [space(3)] [setq(2,sort(iter(r(1),name(##))))][ljust(mid(extract(r(2),1,1),0,14),14)] [ljust(mid(extract(r(2),2,1),0,14),14)] [ljust(mid(extract(r(2),3,1),0,14),14)][switch(gt(words(r(2)),3),1,u(NAME_3COL_FN,extract(r(2),4,3999)))]
@set Places System=INHERIT
@set Places System=STAFF
@set Places System=STICKY
@set Places System=SAFE
@parent Places System=#35
@create Gypsy Commands=10
@set Gypsy Commands=INHERIT
@set Gypsy Commands=STAFF
@set Gypsy Commands=STICKY
@set Gypsy Commands=SAFE
@parent Gypsy Commands=#35
@create Shifter Commands=10
@Desc Shifter Commands=[columns(iter(lattr(me/do.*),[rest(first(xget(me,##),:),$)]|),25,|)]
&DO.SHIFT Shifter Commands=$+shift *:[setq(0,grab(u(%#/forms),%0*))][setq(1,[ifelse(hasattr(%#,form.%0),[u(%#/form.%0)],[u(#36/f.[edit([u(%#/subrace)],%B,_)].%0,%#)])])];@switch [gt([strlen(%q0)],0)]=0,{@pemit %#=You can't assume that form. Your forms are [andlist([u(%#/forms)])].},1,{@pemit %#=You shift into your [capitalize(%q0)] form.[setstat(%#/dat.info,Form,[capitalize(%0)])][setstat(%#/dat.attr,Strength,[add([stat(%#,attr2,Strength)],[extract(%q1,1,1)])])][setstat(%#/dat.attr,Dexterity,[add([stat(%#,attr2,Dexterity)],[extract(%q1,2,1)])])][setstat(%#/dat.attr,Stamina,[add([stat(%#,attr2,Stamina)],[extract(%q1,3,1)])])][setstat(%#/dat.attr,Manipulation,[add([stat(%#,attr2,Manipulation)],[extract(%q1,4,1)])])][setstat(%#/dat.attr,Appearance,[add([stat(%#,attr2,Appearance)],[extract(%q1,5,1)])])][setstat(%#/dat.attr,Perception,[add([stat(%#,attr2,perception)],[extract(%q1,6,1)])])][setstat(%#/dat.attr,Charisma,[add([stat(%#,attr2,charisma)],[extract(%q1,6,1)])])];@fo %#=+desc %0;@fo %#=@oemit %#=[ifelse(hasattr(%#,%q0-emit),[u(%#/%q0-emit)],%N's form blurs as a new shape takes form.)];@switch [hasattr(#36,del.%0)]=1,{@remit %l=<OOC> Delirium is now in effect.;@flag %#=Delirium},0,{@flag %#=!delirium}}
&DO.SHIFT.SETUP Shifter Commands=$+shift/setup:@pemit %#=You have setup your +shift code.;&forms %#=[u(forms.[edit([u(%#/subrace)],%B,_)])];&dat.attr2 %#=[get(%#/dat.attr)]
&FORMS.GAROU Shifter Commands=Homid Glabro Crinos Hispo Lupus
&FORMS.BASTET Shifter Commands=Homid Sokto Crinos Chatro Feline
&FORMS.ANANASI Shifter Commands=Homid Lilian Pithus Crawlerling
&FORMS.CORAX Shifter Commands=Homid Crinos Corvid
&FORMS.GURAHL Shifter Commands=Homid Arthren Crinos Bjornen Ursus
&FORMS.MOKOLE Shifter Commands=Homid Archid Suchid
&FORMS.NAGAH Shifter Commands=Balaram Silkaram Azhi_Dahaka Kali_Dahaka Vasuki
&FORMS.NUWISHA Shifter Commands=Homid Tsitsu Manabozho Sendeh Latrani
&FORMS.RATKIN Shifter Commands=Homid Crinos Rodens
&FORMS.HAKKEN Shifter Commands=Homid Glabro Crinos Hispo Lupus
&FORMS.KHAN Shifter Commands=Homid Sokto Crinos Chatro Feline
&FORMS.KUMO Shifter Commands=Homid Lilian Aghora THousand_Fang
&FORMS.NEZUMI Shifter Commands=Homid Crinos Rodens
&FORMS.SAME-BITO Shifter Commands=Kabina Tsufu Karvu Warui Watasami
&FORMS.TENGU Shifter Commands=Homid Crinos Corvid
&FORMS.ZHONG_LUNG Shifter Commands=Homid Archid Suchid
&FORMS.KITSUNE Shifter Commands=Hitogata Sambuhenge Koto Juko Kyubi
&FORMS.ROKEA Shifter Commands=Homid Glabrus Gladius Chasmus Squamus
&DO.SCENT Shifter Commands=$+scent *:[setq(0,[num(*%0)])];@switch [gte([stat(%#,gifts,Scent Of the True Form)],1)]=0,{@pemit %#=You do not have the right gift for that.},1,{@pemit %#=[scent(%#,%q0)];@scan %ch%cgSHIFTER:%cn %N just used Scent of the True Form on [name(%q0)].}
&RACELIST Shifter Commands=shifter mage mortal vampire changeling wraith mortal+
&RANDRACE Shifter Commands=[extract(u(racelist),add(rand(words(u(racelist))),1),1)]
&SCENT.SHIFTER Shifter Commands=On the air around [name(%0)]\, you can catch the scent of the wyld.
&SCENT.MAGE Shifter Commands=On the air around [name(%0)]\, you can catch the scent of the arcane world.
&SCENT.MORTAL Shifter Commands=On the air around [name(%0)]\, you can catch the scent of humanity.
&SCENT.MORTAL+ Shifter Commands=On the air around [name(%0)]\, you can catch the scent of humanity.
&SCENT.VAMPIRE Shifter Commands=On the air around [name(%0)]\, you can catch the scent of the death.
&SCENT.CHANGELING Shifter Commands=On the air around [name(%0)]\, you can catch the scent of the arcadia.
&SCENT.WRAITH Shifter Commands=On the air around [name(%0)]\, you can't seem to get a scent of anything, almost an odd void.
&SCENT.GYPSY Shifter Commands=On the air around [name(%0)]\, you can catch the slightest hint of the wyld merged with the scent of humanity.
&SCENT.GHOUL Shifter Commands=On the air around [name(%0)]\, you can catch the scent of death and humanity mingling among each other.
&SCENT.KINFOLK Shifter Commands=On the air around [name(%0)]\, you can catch the strong scent of the wyld mixing with the scent of humanity.
&SCENT.SHIFTER2 Shifter Commands=On the air around [name(%0)]\, you can catch the scent of a fellow [capitalize([edit(%1,_,%B)])].
&SCENT.FAIL Shifter Commands=On the air around [name(%0)]\, you can't detect any scent that is recognizable.
&DO.SCENT.AUTO Shifter Commands=$+scent:@switch [gte([stats(%#,gifts,Scent Of the True Form)],1)]=0,{@pemit %#=You don't have that gift.},1,{@switch hassflag(%#,scent)-0,{@pemit %#=You activate your automatic scent of the true form.;@flag %#=SCENT},1,{@pemit %#=You deactivate your automatic scent of true form.;@flag %#=!SCENT}}
&DO.BLURR Shifter Commands=$+blur:@switch [gte([stat(%#,gifts,Blur of the milky eye)],1)]=0,{@pemit %#=You don't have that gift.},{@switch hassflag(%#,blur)=0,{@switch [setr(1,[extract([froll([stat(%#,attr,Manipulation)]+[stat(%#,abil,stealth)]=8)],2,1)])]=-*,{@pemit %#=You have botched this roll and are unable to activate your blur.},0,{@pemit %#=You have failed this roll and are unable to activate your blur.},{@pemit %#=You have activated your blur. Make sure that you have a &blurdesc set on you.;&blurred %#=%q1;@flag %#=BLUR}},{@pemit %#=You deactivate your blur.;@flag %#=!blur;&blurred %#=}
&DO.BLISS Shifter Commands=$+bliss:[setq(1,[extract([froll([stat(%#,abil,stealth)]+[stat(%#,attr,Dexterity)]=7)],2,1)])];@switch [gte([stat(%#,gifts,Blissful Ignorance)],1)][hasflag(%#,OBF)]=0?,{@pemit %#=You don't have that gift.},10,{@switch %q1=-*,{@pemit %#=You fail to activate your ignorance.},0,{@pemit %#=You fail to activate your ignorance.},{@pemit %#=You activate your ignorance.;&bliss %#=%q1;@flag %#=BLiss;@set %#=OBF;&obf_level %#=1;@set %#=Gagged},11,{@pemit %#=You deactivate your ignorance.;&obf_level %#;@set %#=!obf;@set %#=!gagged;&bliss %#=;@flag %#=!Bliss}}
@lock/UseLock Shifter Commands=CANUSE/1
&CANUSE Shifter Commands=[shifter(%#)]
&DO.STEP.IN Shifter Commands=$+step/in:[setq(0,[u(%l/gdiff)])];[setq(1,[extract([froll([before([stat(%#,pool,Gnosis)],/)]+[stat(%#,m&F,natural channel)]=%q0)],2,1)])];@switch hassflag(%#,UMBRA)=0,{@pemit %#=You can't cross into the umbra.},{@switch %q1=-*,{@pemit %#=You begin to cross into the umbra and find that you are not able to, you have been caught in the gauntlet.;@fo %#=@oemit %#=%N shimmers and then vanishes.;@set %#=Gagged;@set %#=Dark;@set %#=Umbra;@set %#=Fixed;@scan %chUMBRA:%cn %N just got trapped in the gauntlet.;@tel %#=#2059;@flag %#=!UMBRA},0,{@pemit %#=You can't enter the umbra for some reason.},{@pemit %#=You travel into the umbra.;@fo %#=@oemit %#=%N shimmers and vanishes.;@set %#=UMBRA;@wait 2=@fo %#=@oemit %#=%N arrives in the umbra.;@wait 2=@fo %#=look}}
&DO.STEP.OUT Shifter Commands=$+step/out:[setq(0,[u(%l/gdiff)])];[setq(1,[extract([froll([before([stat(%#,pool,Gnosis)],/)]+[stat(%#,m&F,natural channel)]=%q0)],2,1)])];@switch hassflag(%#,UMBRA)=0,{@pemit %#=You can't cross into the umbra.},{@switch %q1=-*,{@pemit %#=You begin to cross into the real world and find that you are not able to, you have been caught in the gauntlet.;@fo %#=@oemit %#=%N shimmers and then vanishes.;@set %#=Gagged;@set %#=Dark;@set %#=Umbra;@set %#=Fixed;@scan %chUMBRA:%cn %N just got trapped in the gauntlet.;@tel %#=#2059;@flag %#=!UMBRA},0,{@pemit %#=You can't enter the real world for some reason.},{@pemit %#=You travel into the real world.;@fo %#=@oemit %#=%N shimmers and vanishes.;@set %#=!UMBRA;@wait 2=@fo %#=@oemit %#=%N arrives in a slight shimmer.;@wait 2=@fo %#=look}}
&DO.PEEK1 Shifter Commands=$+peek:[setq(0,[u(%l/gdiff)])];[setq(1,[extract([froll([before([stat(%#,pool,Gnosis)],/)]+[stat(%#,m&F,natural channel)]=%q0)],2,1)])];@switch hasflag(%#,UMBRA)[hasflag(%#,Peering)]=0?,{@pemit %#=You aren't in the umbra how are you going to peek?},10,{@switch %q1=-*,{@pemit %#=You aren't able to peek.},0,{@pemit %#=You aren't able to peek.},{@pemit %#=You begin Peeking.;@set %#=Peering;&peering_Realm %#=Normal}},11,{@pemit %#=You stop peeking.;@set %#=!peering;&peering_Realm %#=}
@set Shifter Commands=INHERIT
@set Shifter Commands=STAFF
@set Shifter Commands=STICKY
@set Shifter Commands=SAFE
@parent Shifter Commands=#35
@create Vampire Commands=10
&DO.HUNT Vampire Commands=$+hunt:@switch [hasattr(%#,hunt.type)][hasattr(%#,hunt.botch)]=0*,{@pemit %#=You don't have a hunt type chosen. Set one using +hunt/type <type>.},10,{@trig me/hunt.[u(%#/hunt.type)]=%#},11,{@pemit %#=You have botched a hunt recently, this means you must wait for Vampire Staff.}
@Desc Vampire Commands=[columns(iter(lattr(me/do.*),[rest(first(xget(me,##),:),$)]|),25,|)]
@lock/UseLock Vampire Commands=CANSUCK/1
&DO.UNSEEN Vampire Commands=$+unseen:@switch [gte([stat(%#,Disc,Obfuscate)],2)][hasflag(%#,obf)]=0?,{@pemit %#=You can't use unseen presence.},10,{@pemit %#=You activate your unseen presense.;@set %#=OBF;&obf_level %#=[stat(%#,disc,Obfuscate)];@fo %#=@oemit %#=[udefault(%#/obfin,%N vanishes into the shadows.)]},11,{@pemit %#=You deactivate your unseen presence.;@set %#=!obf;&obf_level %#;@fo %#=@oemit %#=[udefault(%#/obfout,%N suddenly appears.)]}
&DO.SHADOW Vampire Commands=$+shadow:@switch [gte([stat(%#,Disc,Obfuscate)],1)][hasflag(%#,obf)]=0?,{@pemit %#=You can't use cloak of shadows.},10,{@pemit %#=You activate your cloak of shadows.;@set %#=OBF;&obf_level %#=1;@set %#=Gagged;@fo %#=@oemit %#=[udefault(%#/shadein,%N suddenly is wrapped in shadows.)]},11,{@pemit %#=You deactivate your cloak of shadows.;@set %#=!obf;&obf_level %#;@set %#=!gagged;@fo %#=@oemit %#=[udefault(%#/shadeout,%N appears from within the shadows.)]}
&DO.SPIRITS.TOUCH Vampire Commands=$+spirit *:[setq(0,[locate(%#,%0,*hXTV)])];@switch gte([stat(%#,disc,Auspex)],3)=0,{@pemit %#=You can't sense things on things.},1,{@switch isdbref(%q0)=0,{@pemit %#=I don't see that here.},1,{@pemit %#=You reach out and take hold of [name(%q0)].%R<OOC> Don't forget to pose it.;@tri me/touch=%#,%q0}}
&TOUCH Vampire Commands=[setq(1,[extract(froll([stat(%0,attr,Perception)]+[stat(%0,abil,Empathy)]=[u(%1/tdiff)]),2,1)])];@switch %q1=-*,{@pemit %0=You glean the following information:%R[u(%0/bg.section1)]},0,{@pemit %0=Try as you might, you can only glean what the object feels like.},{@pemit %0=You glean the following.;@dolist lnum(%q1)=@pemit %0=[u(%q0/touchmsg-[add(##,1)])]}
&DO.SEND.THOUGHTS Vampire Commands=$+path *=*:[setq(0,[num(*%0)])];[setq(1,[extract(froll([stat(%#,attr,Intelligence)]+[getperm(%#,abil,Subterfuge)]=[after([stat(%q0,pool,Willpower)],/)]),2,1)])];@switch gte(stat(%#,disc,Auspex),4)=0,{@pemit %#=You can't send thoughts.},1,{@switch [isdbref(%q0)]=-*,{@pemit %#=Who do you want to send thoughts too?},1,{@switch/first %q1=-*,{@pemit %#=For some reason your thoughts are going to someone other than your target.},0,{@pemit %#=You can't seem to concentrate enough to.},{@pemit %q0=You sense, '%1' in your mind.;@pemit %#=You project '%1' to [name(%q0)]'s mind.}}}
&DO.ASTRAL.PROJECT Vampire Commands=$+project *:[setq(0,[switch(%0,me,%l,here,%l,#*,%0,[loc(num(*%0))])])];@switch gte(stat(%#,disc,Auspex),5)=0,{@pemit %#=You can't astral project.},1,{@switch [isdbref(%q0)]=-*,{@pemit %#=I can't see that.},{@pemit %#=You slip into the astral realm.;&ast-loc %#=%l;@fo %#=@oemit %#=%N's eyes glaze over as %s slumps over.;&bodies %L=[ifelse([hasattr(%l,bodies)],[setunion(u(%l/bodies),%#)],%#)];@set %#=UMBRA;@tel %#=%q0;@wait 3=@fo %#=@oemit %#=%N shimmers into being.}}
&DO.ASTRAL.RETURN Vampire Commands=$+return:@switch gte(stat(%#,disc,Auspex),5)=0,{@pemit %#=You can't astral project.},1,{@switch [hasflag(%#,UMBRA)]=0,{@pemit %#=You aren't projecting.},1,{@pemit %#=You return from your astral venture.;@set %#=!peering;&peering_realm %#;@wait 1=@fo %#=@oemit %#=%N suddenly vanishes.;@tel %#=[u(%#/ast-loc)];&bodies [u(%#/ast-loc)]=[setdiff(u([u(%#/ast-loc)]/bodies),%#)];@wait 2=@set %#=!UMBRA;@wait 3=@fo %#=@oemit %#=%N comes out of %p trance.;@wait 3=@pemit %#=You wake up.;&ast-loc %#}}
&DO.ASTRAL.PEEK Vampire Commands=$+apeek:@switch gte(stat(%#,disc,Auspex),5)=0,{@pemit %#=You can't astral project.},1,{@switch [hasflag(%#,Peering)]=0,{@pemit %#=You shift your vision to the Physical World.;@set %#=Peering;&peering_Realm %#=NORMAL;@set %#=Gagged},1,{@pemit %#=You return your vision to the Astral Plane.;@set %#=!gagged;@set %#=!peering;&peering_Realm %#}}
&DO.CLOAK Vampire Commands=$+cloak *:[setq(0,[num(*%0)])];@switch [gte(stat(%#,disc,Obfuscate),5)][lte(u(%#/obfsucc),[stat(%#,abil,Stealth)])]=0?,{@pemit %#=You don't have Obfuscate that High.},10,{@pemit %#=You can't use cloak on another player.},11,{@pemit %#=You cloak [name(%q0)].;@fo %q0=@oemit %q0=[name(%q0)] fades from sight.;@pemit %q0=You vanish from sight.;@set %q0=OBF;&obf_level %q0=[stat(%#,disc,Obfuscate)];&obfsucc %#=[add([u(%#/obfsucc)],1)]}
&DO.UNCLOAK Vampire Commands=$+uncloak *:[setq(0,[num(*%0)])];@switch [gte(stat(%#,disc,Obfuscate),5)][hasflag(%q0,OBF)]=0?,{@pemit %#=You don't have that high of an Obfuscate.},10,{@pemit %#=[name(%q0)] isn't cloaked.},11,{@pemit %#=You uncloak [name(%q0)].;@fo %q0=@oemit %q0=[name(%q0)] suddenly appears.;@pemit %q0=You suddenly appear.;@set %q0=!OBF;&obf_level %#;&obfsucc %#=[sub([u(%#/obfsucc)],1)]}
&DO.PROTEAN.SHIFT Vampire Commands=$+pshift *:[setq(0,grab(u(%#/forms),%0*))];@switch [gte([stat(%#,disc,Protean)],4)][gte([before([stat(%#,pool,Blood)],/)],1)][gt([strlen(%q0)],0)]=0??,{@pemit %#=You don't have that high of Protean.},10?,{@pemit %#=You don't have enough blood. Hunt.},110,{@pemit %#=You can't assume that form. Contact staff to get that form.},111,{@pemit %#=You shift into your [capitalize(%q0)] form.[setstat(%#/dat.info,Form,[capitalize(%0)])][ifelse(match(Human,%0),,[blood(%#,1,Sub)])];@fo %#=+desc %0}
&DO.EYES Vampire Commands=$+eyes:@switch [gt(stat(%#,disc,Protean),0)]=0,{@pemit %#=You don't have Protean.},1,{@switch [hassflag(%#,eyes)]=1,{@pemit %#=You deactivate Eyes of the beast;@flag %#=!eyes;;&cansee %#;@fo %#=@oemit %#=%N's eyes slowly return to normal.;&eyes %#=},0,{@pemit %#=You activate your Eyes of the beast.;@omove %#=\[ifelse(\[lt(\[sub(\[secs()],\[extract(\[u(cansee)],1,1,|)])],\[extract(\[u(cansee)],2,1,|)])],\[extract(\[u(cansee)],3,1,|)],)];&cansee %#=[secs()]|999999999999|arrives with eyes glowing a beastial red.;&eyes %#=1;@fo %#=@oemit %#=%N's eyes light up with a brilliant red.;@flag %#=Eyes}}
&DO.FINGER.CAM Vampire Commands=$+finger/cam *:[setq(9,[switch(%0,me,%#,[num(*%0)])])];@switch [or([match([text(%#,info,Sect)],Camarilla)],[isstaff(%#)])][isdbref(%q9)][match([text(%q9,info,Sect)],Camarilla)]=0??,{@pemit %#=You are not a member of the Camarilla.},10?,{@pemit %#=I don't see that.},110,{@pemit %#=That player isn't a member of the Camarilla.},111,{@pemit %#=[header2()]%R%ch%cb|%cn[ljust(%B[ljust(Name:,10)][name(%q9)][ifelse(hasattr(%q9,alias),%B%([u(%q9/alias)]%),)]%B%(%q9%),38)]%ch%cb|%cn[ljust(%B[ljust(Sex:,10)][u(%q9/sex)],39)]%ch%cb|%cn%R%ch%cb|%cn[ljust(%B[ljust(Status:,10)][switch([u(%q9/cstatus)],0,Unknown Neonate,1,Neonate,2,Well Known Neonate,3,Ancillae,4,Elder,5,Primogen,6,Prince,7,Justicar,Caitiff)],38)]%ch%cb|%cn[ljust(%B[ljust(Clan:,10)][text(%q9,info,Clan)],39)]%ch%cb|%cn%R[header2()][iter([sortby(fn.sortby,lattr(%q9/cam.*))],%R%B[ljust([capitalize([edit([after(##,.)],_,%B)])]:,15)][u(%q9/##)])]%R[header(Camarilla Finger)];@switch hasflag(%#,dark)=0,{@verb %q9=%#,,,,,AFINGER,}}
&DO.FINGER.SAB Vampire Commands=$+finger/sab *:[setq(9,[switch(%0,me,%#,[num(*%0)])])];@switch [or([match([text(%#,info,Sect)],Sabbat)],[isstaff(%#)])][isdbref(%q9)][match([text(%q9,info,Sect)],Sabbat)]=0??,{@pemit %#=You are not a member of the Sabbat.},10?,{@pemit %#=I don't see that.},110,{@pemit %#=That player isn't a member of the Sabbat.},111,{@pemit %#=[header2()]%R%ch%cb|%cn[ljust(%B[ljust(Name:,10)][name(%q9)][ifelse(hasattr(%q9,alias),%B%([u(%q9/alias)]%),)]%B%(%q9%),38)]%ch%cb|%cn[ljust(%B[ljust(Sex:,10)][u(%q9/sex)],39)]%ch%cb|%cn%R%ch%cb|%cn[ljust(%B[ljust(Status:,10)][switch([u(%q9/cstatus)],0,Unknown Neonate,1,Neonate,2,Well Known Neonate,3,Ancillae,4,Elder,5,Primogen,6,Prince,7,Justicar,Pander)],38)]%ch%cb|%cn[ljust(%B[ljust(Clan:,10)][text(%q9,info,Clan)],39)]%ch%cb|%cn%R[header2()][iter([sortby(fn.sortby,lattr(%q9/sab.*))],%R%B[ljust([capitalize([edit([after(##,.)],_,%B)])]:,15)][u(%q9/##)])]%R[header(Sabbat Finger)];@switch hasflag(%#,dark)=0,{@verb %q9=%#,,,,,AFINGER,}}
&HUNT.PREY Vampire Commands=@switch [setr(9,[extract([froll([add([stat(%0,disc,Potence)],[stat(%0,attr,Dexterity)])]+[stat(%0,abil,Athletics)]=[extract([u([loc(%0)]/hdiff)])],4,1,|)],2,1)])]=-*,{@pemit %0=You have not been able to find any blood.[set(%0,Hunt.botch:[loc(%0)]|Prey|[u(randbotch,%0)])];@trig me/botch.mail=%0},0,{@pemit %0=You have failed to find any suitable kine.},{@pemit %0=You find [switch(%q9,1,just a bit of,2,some,3,enough,more than enough)] suitable kine.[blood(%0,%q9,Add)][set(%0,Hunted:[time()]|[vtime()])]}
&DO.HUNT.TYPE Vampire Commands=$+hunt/type *:@switch [hasattr(me,hunt.%0)]=0,{@pemit %#=That is not a valid hunting type.},{@pemit %#=You have set your Hunt Type to [capitalize(%0)].[set(%#,Hunt.type:[capitalize(%0)])]}
&HUNTED Vampire Commands=Thu Dec 07 19:00:00 2000|Fri Nov 02 03:23:19 2001
&BOTCH.MAIL Vampire Commands=@fo #107=@mail/quick *vamp/Hunt Botch=Name: [name(%0)] %%R%%R%%T[name(%0)] has botched a hunt at:%%R%%T%%TRL: [time()]%%R%%T%%TIC: [vtime()]%%R%%RUse +hunt/botch [name(%0)] for more information.
&RANDBOTCH Vampire Commands=[u(botch.[extract(u(botchlist),add(rand(words(u(botchlist))),1),1)],%0)]
&BOTCHLIST Vampire Commands=00 01
&BOTCH.FOUND Vampire Commands=It seems that [name(%0)] was seen while [switch(u(%0/sex),M*,he,F*,she,it)] was hunting. This means that someone else was there and it probably broke the masquerade.
&BOTCH.00 Vampire Commands=It seems that [name(%0)] was seen while [switch(u(%0/sex),M*,he,F*,she,it)] was hunting. This means that someone else was there and it probably broke the masquerade.
&NEXTREASON Vampire Commands=02
&BOTCH.01 Vampire Commands=[name(%0)] left [switch([U(%0/sex)],M*,his,F*,her,its)] fang marks in the body or victim.. These were discovered.
&DO.HUNT.LIST Vampire Commands=$+hunt/list:@pemit %#=Current Hunting Types: [andlist([iter([sortby(fn.sortby,lattr(me/hunt.*))],[capitalize([after(##,.)])],)])].
&CANSUCK Vampire Commands=[vampire(%#)]
&DO.SHADES Vampire Commands=$+shades:@switch [hassflag(%#,eyes)]=0,{@pemit %#=You remove your shades.;@flag %#=Eyes;@flag %#=!shades;&cansee %#=[secs()]|999999999999|arrives with eyes glowing a beastial red},1,{@pemit %#=You put on shades to cover your Eyes.;@flag %#=!EYES;@flag %#=Shades;&cansee %#=[secs()]|999999999999}
&DO.MASK3K Vampire Commands=$+mask *:@switch [gte([stat(%#,disc,Obfuscate)],3)][hassflag(%#,mask)]=10,{@pemit %#=You activate your Mask1K.;@flag %#=MASK;&truedesc %#=[get(%#/currdesc)];@fo %#=+desc %0},11,{@pemit %#=You activate your Mask1K.;@fo %#=+desc %0},{@pemit %#=You can't use Mask1K.}
&AUTO.HUNT Vampire Commands=@wait 61=@trig me/auto.hunt;@dolist [filter(fn.auto,[filter(fn.vamp,[search(Type=players)])])]=@switch [lt([sub(secs(),u(##/auto))],86400)]=0,{@pemit ##=Your Auto hunt has taken place.[blood(##,1,ADD)];&auto ##=[secs()]}
&FN.AUTO Vampire Commands=[hassflag(%0,autohunt)]
&FN.VAMP Vampire Commands=[and([match([u(%0/race)],Vampire)],[not(isstaff(%0))])]
&DO.AUTOHUNT Vampire Commands=$+auto:@switch [hassflag(%#,autohunt)]=0,{@pemit %#=You have setup for autohunt.;@flag %#=AUTOHUNT},{@pemit %#=You have disabled autohunt.;@flag %#=!AUTOHUNT}
&BLOOD.SPEND Vampire Commands=@wait 60=@trig me/blood.spend;@dolist [filter(fn.vamp,[search(Type=players)])]=@switch [lt([sub(secs(),u(##/blood))],86400)]=0,{@pemit ##=Your blood spend has taken place.[set(##,BPOOL:[after([stat(##,pool,blood)],/)])][blood(##,1,sub)];&blood ##=[secs()]}
&DO.AUSPEX Vampire Commands=$+auspex:@switch [gte(stat(%#,disc,auspex),2)][hassflag(%#,aura)]=0*,{@pemit %#=You do not have a high enough auspex.},10,{@pemit %#=You turn on your auto auspex.;@flag %#=Aura},11,{@pemit %#=You turn off your auto auspex.;@flag %#=!AUra}
&HUNT.STEALTH Vampire Commands=@switch [setr(9,[extract([froll([add([stat(%0,disc,obfuscate)],[stat(%0,attr,Dexterity)])]+[stat(%0,abil,stealth)]=[extract([u([loc(%0)]/hdiff)])],1,1,|)],2,1)])]=-*,{@pemit %0=You have not been able to find any blood.[set(%0,Hunt.botch:[loc(%0)]|Stealth|[u(randbotch,%0)])];@trig me/botch.mail=%0},0,{@pemit %0=You have failed to find any suitable kine.},{@pemit %0=You find [switch(%q9,1,just a bit of,2,some,3,enough,more than enough)] suitable kine.[blood(%0,%q9,Add)][set(%0,Hunted:[time()]|[vtime()])]}
&HUNT.ASSUALT Vampire Commands=@switch [setr(9,[extract([froll([add([stat(%0,disc,Potence)],[stat(%0,attr,Dexterity)])]+[add([stat(%0,abil,brawl)],[stat(%0,attr,Strength)])]=[extract([u([loc(%0)]/hdiff)])],5,1,|)],2,1)])]=-*,{@pemit %0=You have not been able to find any blood.[set(%0,Hunt.botch:[loc(%0)]|Assault|[u(randbotch,%0)])];@trig me/botch.mail=%0},0,{@pemit %0=You have failed to find any suitable kine.},{@pemit %0=You find [switch(%q9,1,just a bit of,2,some,3,enough,more than enough)] suitable kine.[blood(%0,%q9,Add)][set(%0,Hunted:[time()]|[vtime()])]}
&HUNT.SEDUCTION Vampire Commands=@switch [setr(9,[extract([froll([add([stat(%0,disc,Presence)],[stat(%0,attr,Manipulation)])]+[stat(%0,abil,Seduction)]=[extract([u([loc(%0)]/hdiff)])],3,1,|)],2,1)])]=-*,{@pemit %0=You have not been able to find any blood.[set(%0,Hunt.botch:[loc(%0)]|Seduction|[u(randbotch,%0)])];@trig me/botch.mail=%0},0,{@pemit %0=You have failed to find any suitable kine.},{@pemit %0=You find [switch(%q9,1,just a bit of,2,some,3,enough,more than enough)] suitable kine.[blood(%0,%q9,Add)][set(%0,Hunted:[time()]|[vtime()])]}
&HUNT.ANIMAL Vampire Commands=@switch [setr(9,[extract([froll([add([stat(%0,disc,Animalism)],[stat(%0,attr,Manipulation)])]+[stat(%0,abil,Animal Ken)]=[extract([u([loc(%0)]/hdiff)])],2,1,|)],2,1)])]=-*,{@pemit %0=You have not been able to find any blood.[set(%0,Hunt.botch:[loc(%0)]|Animal|[u(randbotch,%0)])];@trig me/botch.mail=%0},0,{@pemit %0=You have failed to find any suitable animals.},{@pemit %0=You find [switch(%q9,1,just a bit of,2,some,3,enough,more than enough)] suitable animals.[blood(%0,%q9,Add)][set(%0,Hunted:[time()]|[vtime()])]}
&DO.MASK3K2 Vampire Commands=$+mask/reset:@switch [gte([stat(%#,disc,Obfuscate)],3)]=1,{@pemit %#=You deactivate your Mask1K.;@flag %#=!MASK;&currdesc %#=[get(%#/truedesc)]},{@pemit %#=You can't use Mask1K.}
&SET.LIST Vampire Commands=Stealth Animal Seduction Prey Assualt
&DO.HSET Vampire Commands=$+hset *=*:[setq(0,match([u(set.list)],%0))];@switch isstaff(%#)=0,{@Pemit %#=Permission Denied.},1,{@pemit %#=You set the hunting diff for this area's %0 hunting.;&hdiff %l=[replace([ifelse(hasattr(%l,hdiff),[u(%l/hdiff)],[u(blank)])],%q0,%1,|)]}
&BLANK Vampire Commands=7|7|7|7|7
&DO.PUMP Vampire Commands=$+pump *:@switch [gte(match(Strength Stamina Dexterity,%0),1)][gte([before([stat(%#,pool,Blood)],/)],1)]=0?,{@pemit %#=You can't pump that.},10,{@pemit %#=You don't have enough blood to do that.},11,{@pemit %#=You pump your %ch%0%cn up.[blood(%#,1,SUB)][setstat(%#/dat.attr,[capitalize(%0)],[add([stat(%#,attr,%0)],1)])];@scan %ch%crVAMPIRE:%cn %N just pumped up [capitalize(%0)].;@fo %#=@oemit %#=%ch%cr<<OOC>>%cn %N just pumped up a stat.}
&DO.RELAX Vampire Commands=$+relax:@pemit %#=You relax all your stats.;@scan %ch%crVAMPIRE:%cn %N just relaxed all %p stats.[setstat(%#/dat.attr,Dexterity,[stat(%#,attr2,Dexterity)])][setstat(%#/dat.attr,Stamina,[stat(%#,attr2,Stamina)])][setstat(%#/dat.attr,Strength,[stat(%#,attr2,Strength)])]
&FN.ISVAMP Vampire Commands=[switch([vampire(%0)][isstaff(%0)],0?,0,10,1,11,0)]
&GHOUL Vampire Commands=[or([hassflag(%0,GHOUL)],[match([u(%0/subrace)],GHOUL)])]
@set Vampire Commands=INHERIT
@set Vampire Commands=STAFF
@set Vampire Commands=STICKY
@set Vampire Commands=SAFE
@parent Vampire Commands=#35
@create Police Commands=10
&DO.BADGE Police Commands=$+badge:@pemit %#=[header2()]%R[ljust(%B[ljust(Name:,15)][u(%#/fullname)],40)][ljust(Organization:,15)][text2(%#,bdata,Organization)]%R[ljust(%B[ljust(Rank:,15)][text2(%#,bdata,Rank)],40)][ljust(Division:,15)][text2(%#,bdata,Division)]%R[header2()]
&DO.BADGE.ROOM Police Commands=$+badge/all:@remit %l=%N shows %p badge:%R[header2()]%R[ljust(%B[ljust(Name:,15)][u(%#/fullname)],40)][ljust(Organization:,15)][text2(%#,bdata,Organization)]%R[ljust(%B[ljust(Rank:,15)][text2(%#,bdata,Rank)],40)][ljust(Division:,15)][text2(%#,bdata,Division)]%R[header2()]
&DO.BADGE.OTHER Police Commands=$+badge *:[setq(0,[num(*%0)])];@pemit %q0=[header2()]%R[ljust(%B[ljust(Name:,15)][u(%#/fullname)],40)][ljust(Organization:,15)][text2(%#,bdata,Organization)]%R[ljust(%B[ljust(Rank:,15)][text2(%#,bdata,Rank)],40)][ljust(Division:,15)][text2(%#,bdata,Division)]%R[header2()];@Pemit %#=You show your badge to [name(%q0)].
&CANUSE Police Commands=[cop(%#)]
@lock/UseLock Police Commands=CANUSE/1
@set Police Commands=INHERIT
@set Police Commands=STAFF
@set Police Commands=STICKY
@set Police Commands=SAFE
@create Familiar Commands=10
@lock/UseLock Familiar Commands=CANPASS/1
&CANPASS Familiar Commands=[familiar(%#)]
&DO.PATH Familiar Commands=$path *=*:@switch [gte(stat(%#,adv,Telepathy),1)]=0,{@pemit %#=You can't do that.},1,{@pemit %#=You path %1 in [name([setr(0,[num(*%0)])])]'s mind.;@pemit %q0=In your mind you sense, ~%1~}
&DO.SHIFT Familiar Commands=$+shift *:[setq(0,grab(u(%#/forms),%0*))][setq(1,[ifelse(hasattr(%#,form.%0),[u(%#/form.%0)],[u(#36/f.[u(%#/subrace)].%0,%#)])])];@switch [gt([strlen(%q0)],0)]=0,{@pemit %#=You can't assume that form. Your forms are [andlist([u(%#/forms)])].},1,{@pemit %#=You shift into your [capitalize(%q0)] form.[setstat(%#/dat.info,Form,[capitalize(%0)])][setstat(%#/dat.attr,Strength,[add([stat(%#,attr2,Strength)],[extract(%q1,1,1)])])][setstat(%#/dat.attr,Stamina,[add([stat(%#,attr2,Dexterity)],[extract(%q1,2,1)])])][setstat(%#/dat.attr,Stamina,[add([stat(%#,attr2,Stamina)],[extract(%q1,3,1)])])][setstat(%#/dat.attr,Manipulation,[add([stat(%#,attr2,Manipulation)],[extract(%q1,4,1)])])][setstat(%#/dat.attr,Appearance,[add([stat(%#,attr2,Appearance)],[extract(%q1,5,1)])])][setstat(%#/dat.attr,Perception,[add([stat(%#,attr2,perception)],[extract(%q1,6,1)])])][setstat(%#/dat.attr,Charisma,[add([stat(%#,attr2,charisma)],[extract(%q1,6,1)])])];@fo %#=+desc %0;@fo %#=@oemit %#=[ifelse(hasattr(%#,%q0-emit),[u(%#/%q0-emit)],%N's form blurs as a new shape takes form.)]}
@set Familiar Commands=INHERIT
@set Familiar Commands=STAFF
@set Familiar Commands=STICKY
@set Familiar Commands=SAFE
@create Numina Commands=10
@lock/UseLock Numina Commands=CANPASS/1
&CANPASS Numina Commands=[numina(%#)]
&DO.PATH Numina Commands=$+path *=*:@switch [gte(stat(%#,numina,Telepathy),1)]=0,{@pemit %#=You can't do that.},1,{@pemit %#=You path %1 in [name([setr(0,[num(*%0)])])]'s mind.;@pemit %q0=In your mind you sense, ~%1~}
@set Numina Commands=INHERIT
@set Numina Commands=STAFF
@set Numina Commands=STICKY
@set Numina Commands=SAFE
@create Mage Commands=10
@lock Mage Commands=CANUSE/1
@Desc Mage Commands=[columns(iter(lattr(me/do.*),[rest(first(xget(me,##),:),$)]|),25,|)]
&CANUSE Mage Commands=[or(mage(%#),familiar(%#))]
&DO.MAGE.SHEET Mage Commands=$+mage*:@pemit %#=switch(0,or(match(setr(0,switch(rest(X%0),me,%#,,%#,num(*[rest(X%0)]))),%#) ,[isstaff(%#)]),Permission denied.,isdbref(%q0),I don't see that here.,mage(%#),ifelse(match(%#,%q0),You aren't,name(%q0)(%q0) isn't) a mage.,not(and(words(setr(1,first(rest(%0,/)))),words(setdiff(setr(6,iter(%q1,##,/)),setr(2,get(#696/SWITCHES)))))),That is not a valid switch.%rValid switches are: [iter(%q2,/##)].%rYou may use more than one switch,%ch%cb-=--=--=--=%B%cr[mudname()]:%BMage%bSheet%cg%b[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%R[ljust([ljust(Name:,10)][name(%q0)] <%q0>,39)][ljust([u(%q0/subrace)],20)][text(%q0,info,essence)] %([stat(%q0,info,arete)]%)%R%q4%q4%R%cn[iter(ifelse(words(%q6),%q6,[ifelse(hasattr(%#,mage),[u(%#/mage)],[u(#696/sheet_list)])]),ifelse(hasattr(%q0,dat.##),ifelse(%q8,%r%q4%q4%cn,setq(8,1))[ulocal(#696/st.##,%q0)],))]%r%q4%q4%R[ljust(Magic Signature:,20)][u(%q0/msig)]%R%q4%q4)
&SWITCHES Mage Commands=avatar paradigm foci res
&DO.SETUP.MAGE Mage Commands=$+setup/mage:@pemit %#=Setup.;&dat.foci %#=1;&dat.res %#=1;&dat.avatar %#=1;&dat.paradigm %#=1
&ST.AVATAR Mage Commands=[center(%ch%cwAvatar%cn,78)]%R[u(%0/avatar)]
&SHEET_LIST Mage Commands=avatar paradigm foci res
&ST.PARADIGM Mage Commands=[center(%ch%cwParadigm%cn,78)]%R[u(%0/paradigm)]
&ST.RES Mage Commands=[center(%ch%cwResonance%cn,78)][ifelse(hasattr(%0,res.dynamic),%R[ljust(Dynamic:,10)][u(%0/res.dynamic)],)][ifelse(hasattr(%0,res.static),%R[ljust(Static:,10)][u(%0/res.Static)],)][ifelse(hasattr(%0,res.entropic),%R[ljust(Entropic:,10)][u(%0/res.entropic)],)]
&ST.FOCI Mage Commands=[center(%ch%cwFoci%cn,78)][iter(lattr(%0/foci.*),%R[ljust([capitalize([after(##,.)])]:,20)][u(%0/##)])]
&PARADOX Mage Commands=[setstat(%0/dat.pool,Paradox,[add([stat(%0,pool,Paradox)],%1)])]
&HASPOOL Mage Commands=[gte([before([stat(%0,pool,%1)],/)],%2)]
&SPHERES Mage Commands=[gte([stat(%0,spheres,%1)],%2)]
&DO.ARETE Mage Commands=$+arete *:[setq(0,[extract([froll([stat(%#,info,arete)]=%0)],2,1)])];@pemit %#=You roll your arete at a difficulty of %0 and score [switch(%q0,-*,a botch,0,a failure,1,1 success,%q0 successes)].;@fo %#=@oemit %#=%ch%cr\[ Roll: %N rolls [stat(%#,info,arete)] dice versus %0 and scores [switch(%q0,-*,a botch,0,a failure,1,1 success,%q0 successes)]. \]%cn;@scan %ch%cwARETE:%cn %N rolls %p arete and scores [switch(%q0,-*,a botch,0,a failure,1,1 success,%q0 successes)].
&DO.ARETE.SPAM Mage Commands=$+arete/spam *:[setq(0,[extract(setr(1,[froll([stat(%#,info,arete)]=%0)]),2,1)])];@pemit %#=You roll your arete at a difficulty of %0 and score [switch(%q0,-*,a botch,0,a failure,1,1 success,%q0 successes)].%RSPAM: [extract(%q1,4,[strlen(%q1)])];@fo %#=@oemit %#=%ch%cr\[ Roll: %N rolls [stat(%#,info,arete)] dice versus %0 and scores [switch(%q0,-*,a botch,0,a failure,1,1 success,%q0 successes)]. \]%cn%R%ch%cr%[ SPAM: [extract(%q1,4,[strlen(%q1)])] %];@scan %ch%cwARETE:%cn %N rolls %p arete and scores [switch(%q0,-*,a botch,0,a failure,1,1 success,%q0 successes)].
&HEAR Mage Commands=You do not have enought %0 to complete this effect.
&DO.MIND.HEARING Mage Commands=$+mhear:@switch [u(spheres,%#,mind,2)]=0,{@pemit %#=[u(hear,Mind)],1,{@switch [extract([froll([stat(%#,info,arete)]=[add([stat(%#,spheres,Mind)],3)],2,1)]=-*,{@pemit %#=You just botched your roll and you have taken paradox. [stat(%#,spheres,Mind)] Paradox Points.;@scan %ch%ccMAGE:%cn %N just took paradox.[u(paradox,%#,[stat(%#,spheres,mind)])]},{@pemit %#=You have activated your magickal hearing.;@trig me/mind.awareness=%#;@flag %#=HEAR}}
&DO.MIND.HEARING2 Mage Commands=$+mhear/off:@switch [u(spheres,%#,mind,2)][hassflag(%#,hear)]=0?,{@pemit %#=[u(hear,Mind)]},10,{@pemit %#=You don't have magickal hearing activated.},11,{@pemit %#=You have deactivated your magickal hearing.;@flag %#=!hear}
&DO.MIND.HEARING3 Mage Commands=$+mhear/willpower:@switch [u(spheres,%#,mind,2)][u(haspool,%#,Willpower,1)]=0?,{@pemit %#=[u(hear,Mind)]},10,{@pemit %#=[u(hear,Willpower)]},11,{@pemit %#=You activate your magickal hearing.[willpower(%#,1,sub)];@flag %#=HEAR}
&DO.MIND.HEARING4 Mage Commands=$+mhear/quint *:@switch [u(spheres,%#,correspondence,2)][u(haspool,%#,quintessence,%0)]=0?,{@pemit %#=[u(hear,Correspondence)]},10,{@pemit %#=[u(hear,Correspondence)]},11,{@switch [extract([froll([stat(%#,info,arete)]=[sub([add([stat(%#,spheres,Mind)],3)],%0)],2,1)]-*,{@pemit %#=You have botched your magickal hearing roll, you will take [stat(%#,spheres,Mind)] points in paradox.[u(paradox,%#,Mind)];@trig me/mind.awareness=%#},0,{@pemit %#=You have failed your arete roll.},{@pemit %#=You activate your magickal hearing.[quint(%#,%0,SUB)];@flag %#=HEAR}}
&DO.CORRESPONDENCE.HEARING Mage Commands=$+chear:@switch [u(spheres,%#,correspondence,2)]=0,{@pemit %#=[u(hear,Correspondence)],1,{@switch [extract([froll([stat(%#,info,arete)]=[add([stat(%#,spheres,Correspondence)],3)],2,1)]=-*,{@pemit %#=You just botched your roll and you have taken paradox. [stat(%#,spheres,Correspondence)] Paradox Points.;@scan %ch%ccMAGE:%cn %N just took paradox.[u(paradox,%#,[stat(%#,spheres,correspondence)])]},{@pemit %#=You have activated your magickal hearing.;@trig me/correspondence.awareness=%#;@flag %#=HEAR}}
&DO.CORRESPONDENCE.HEARING2 Mage Commands=$+chear/off:@switch [u(spheres,%#,correspondence,2)][hassflag(%#,hear)]=0?,{@pemit %#=[u(hear,Correspondence)]},10,{@pemit %#=You don't have magickal hearing activated.},11,{@pemit %#=You have deactivated your magickal hearing.;@flag %#=!hear}
&DO.CORRESPONDENCE.HEARING3 Mage Commands=$+chear/willpower:@switch [u(spheres,%#,correspondence,2)][u(haspool,%#,Willpower,1)]=0?,{@pemit %#=[u(hear,Correspondence)]},10,{@pemit %#=[u(hear,Willpower)]},11,{@pemit %#=You activate your magickal hearing.[willpower(%#,1,sub)];@flag %#=HEAR}
&DO.CORRESPONDENCE.HEARING4 Mage Commands=$+chear/quint *:@switch [u(spheres,%#,correspondence,2)][u(haspool,%#,quintessence,%0)]=0?,{@pemit %#=[u(hear,Correspondence)]},10,{@pemit %#=[u(hear,Correspondence)]},11,{@switch [extract([froll([stat(%#,info,arete)]=[sub([add([stat(%#,spheres,Correspondence)],3)],%0)],2,1)]-*,{@pemit %#=You have botched your magickal hearing roll, you will take [stat(%#,spheres,Correspondence)] points in paradox.[u(paradox,%#,Correspondence)];@trig me/correspondence.awareness=%#},0,{@pemit %#=You have failed your arete roll.},{@pemit %#=You activate your magickal hearing.[quint(%#,%0,SUB)];@flag %#=HEAR}}
&DO.MIND.SHIELD Mage Commands=$+shield*:@pemit %#=switch(0,or(match(setr(0,switch(rest(X%0),me,%#,,%#,num(*[rest(X%0)]))),%#) ,[isstaff(%#)]),Permission denied.,isdbref(%q0),I don't see that here.,[hassflag(%q0,MSHIELD)],ifelse(match(%#,%q0),You don't,name(%q0)(%q0) doesn't) have a mind shield activated.,%ch%cb-=--=--=--%B%cr[mudname()]:%BMind%bShield%cg%b[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%R[ljust([ljust(Name:,10)][name(%q0)] <%q0>,39)]%R%T[ljust(Successes:,15)][stat2(%q0,mshield,Succs)]%R%T[ljust(Rating:,15)][stat(%q0,spheres,Mind)]%R%T[ljust(Set By:,15)][name([text2(%q0,mshield,Set)])]%R%T[ljust(Set On:,15)][text2(%q0,mshield,Date)]%R%q4%q4)
&DO.MIND.SET Mage Commands=$+mind/set *=*:@switch [isstaff(%#)]=0,{@pemit %#=Permission Denied.},1,{@pemit %#=You set a mind shield on [name([setr(0,[num(*%0)])])] with %1 successes on it.[setstat(%q0/mshield,Succs,%1)][setstat(%q0/mshield,Set,%#)][setstat(%q0/mshield,Date,[time()])];@flag %q0=MSHIELD;@set %q0=HSS;&hss_level %q0=[stat(%q0,spheres,Mind)]}
&DO.MIND.CLEAR Mage Commands=$+mind/clear *:[setq(0,[num(*%0)])];@switch [isstaff(%#)][hassflag(%q0,MSHIELD)]=0?,{@pemit %#=Permission Denied.},10,{@pemit %#=[name(%q0)] does not have a mind shield active.},11,{@pemit %#=You unset the Mind Shield.;@flag %q0=!Mshield;@set %q0=!hss;&hss_level %q0=;&mshield %q0=}
&DO.WARD.SET Mage Commands=$+ward/set *:@switch isstaff(%#)[hassflag(%l,CWARD)]=0?,{@pemit %#=Permission Denied.},11,{@pemit %#=This room is already warded, use +ward/add %0 if you are wanting to add to the ward in place.},10,{@pemit %#=You set a ward on this room with %0 successes on it.;@remit %l=<%chOOC%cn> %N has just set up a ward on this room.[setstat(%l/cward,Succ,%0)][setstat(%l/cward,Set,%#)][setstat(%l/cward,Date,[time()])];@flag %l=CWARD}
&DO.WARD.SHEET Mage Commands=$+ward:[setq(0,%l)];@switch [isstaff(%#)]=0,{@pemit %#=Permission Denied.},{@pemit %#=%ch%cb-=--=--=--=%B%cr[mudname()]:%BWard%bSheet%cg%b[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%R[ljust([ljust(Name:,10)][name(%q0)] <%q0>,39)]%R%T[ljust(Successes:,15)][stat2(%q0,cward,Succs)]%R%T[ljust(Set By:,15)][name([text2(%q0,cward,Set)])]%R%T[ljust(Set On:,15)][text2(%q0,cward,Date)]%R%q4%q4}
&DO.WARD.CLEAR Mage Commands=$+ward/clear:@switch isstaff(%#)=0,{@pemit %#=Permission Denied.},1,{@pemit %#=You cleared the ward here.;@remit %l=<%chOOC%cn> %N just cleared the ward here.;@flag %l=!CWARD;&cward %l=}
&SCRY Mage Commands=@pemit %#=You begin scrying on [name(%q0)].;&canhear-%0 %q0=^*:@pemit %0=<Scry> %%0;@scan %chCORR:%cn [name(%0)] began scrying on [name(%q0)]
&BREAKDOWN Mage Commands=@pemit %0=You detect something blocking you.[setstat(%q0/cward,Succs,[sub([stat2(%q0,cward,succs)],%q1)]
&BEATDOWN Mage Commands=@pemit %#=You detect something blocking you.[setstat(%q0/cward,Succs,[sub([stat2(%q0,cward,succs)],%q1)])]
&DO.AURA.AUTO Mage Commands=$+aura/set:@switch [or([gte(stat(%#,spheres,Mind),2)],[gte(stat(%#,spheres,spirit),2)])][hassflag(%#,AURA)]=0?,{@pemit %#=You can't do that.},10,{@pemit %#=You set the automatic aura up.;@flag %#=AURA},11,{@pemit %#=You disengage the automatic aura.;@flag %#=!aura}
&DO.FORCES.HEARING Mage Commands=$+fhear:@switch [u(spheres,%#,forces,2)]=0,{@pemit %#=[u(hear,forces)],1,{@switch [extract([froll([stat(%#,info,arete)]=[add([stat(%#,spheres,forces)],3)],2,1)]=-*,{@pemit %#=You just botched your roll and you have taken paradox. [stat(%#,spheres,forces)] Paradox Points.;@scan %ch%ccMAGE:%cn %N just took paradox.[u(paradox,%#,[stat(%#,spheres,forces)])]},{@pemit %#=You have activated your magickal hearing.;@trig me/forces.awareness=%#;@flag %#=HEAR}}
&DO.FORCES.HEARING2 Mage Commands=$+fhear/off:@switch [u(spheres,%#,forces,2)][hassflag(%#,hear)]=0?,{@pemit %#=[u(hear,forces)]},10,{@pemit %#=You don't have magickal hearing activated.},11,{@pemit %#=You have deactivated your magickal hearing.;@flag %#=!hear}
&DO.FORCES.HEARING3 Mage Commands=$+fhear/willpower:@switch [u(spheres,%#,forces,2)][u(haspool,%#,Willpower,1)]=0?,{@pemit %#=[u(hear,forces)]},10,{@pemit %#=[u(hear,Willpower)]},11,{@pemit %#=You activate your magickal hearing.[willpower(%#,1,sub)];@flag %#=HEAR}
&DO.FORCES.HEARING4 Mage Commands=$+fhear/quint *:@switch [u(spheres,%#,correspondence,2)][u(haspool,%#,quintessence,%0)]=0?,{@pemit %#=[u(hear,Correspondence)]},10,{@pemit %#=[u(hear,Correspondence)]},11,{@switch [extract([froll([stat(%#,info,arete)]=[sub([add([stat(%#,spheres,forces)],3)],%0)],2,1)]-*,{@pemit %#=You have botched your magickal hearing roll, you will take [stat(%#,spheres,forces)] points in paradox.[u(paradox,%#,forces)];@trig me/forces.awareness=%#},0,{@pemit %#=You have failed your arete roll.},{@pemit %#=You activate your magickal hearing.[quint(%#,%0,SUB)];@flag %#=HEAR}}
&DO.GAIN Mage Commands=$+gain:@pemit %#=You gain a Point of Paradox.[u(paradox,%#,1)];@scan %ch%cwPARADOX:%cn %N just gained a point of paradox.
&HELP_MAGE_GAIN Mage Commands=%ch%cwCommand:%cn +gain%R%R%TThis command allows you to gain 1 point of paradox.
&FN.ISMAGE Mage Commands=[switch([mage(%0)][isstaff(%0)][familiar(%0)],0?0,0,100,1,001,1,101,1,111,0)]
@set Mage Commands=INHERIT
@set Mage Commands=STAFF
@set Mage Commands=STICKY
@set Mage Commands=SAFE
@power Mage Commands=long_fingers
@parent Mage Commands=#35

@create Angel Powers=10
@lock/UseLock Angel Powers=CANUSE/1
&CANUSE Angel Powers=[angel(%#)]
&DO.CHAMELEON Angel Powers=$+chamo:@switch [gte(stat(%#,gene,Chameleon),1)][hassflag(%#,Cham)]=?,{@pemit %#=You can't use this power.},10,{@pemit %#=You fade out of sight.;@fo %#=@oemit %#=%N's body slowly becomes clear until %p is gone.;@set %#=OBF;&obf_level %#=3;@flag %#=CHAM},11,{@pemit %#=You come back into sight.;@fo %#=@oemit %#=A shimmer of color and then %N appears from seemingly nowhere.;@set %#=!OBF;&obf_Level %#=;@flag %#=!cham}
&DO.SPEAK Angel Powers=$sp *:@pemit/list [u(#705/Samerealm2,%#)] %l=[ifelse(orflags(%#,$oy/1),[udefault(%#/oocname,Someone)],%N)][switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]
&DO.POSE Angel Powers=$+pose *:@remit %l=%0
@set Angel Powers=INHERIT
@set Angel Powers=STAFF
@set Angel Powers=STICKY
@set Angel Powers=SAFE

@create Hunter Commands=10
@create Player Commands=10
&DO.WHO Player Commands=$+who:@pemit %#=[header3()]%r[u(fn.whoheader,%#)]%R[header2()];@pemit %#=[list(filter(fn.visstaff,[remove(lwho(),#471)]),[u(fn.whobody,##,%#)])];@pemit %#=[header2()]%R%ch%cw[center([words(filter(fn.visstaff,filter(fn.zoneooc,[remove(lwho(),#471)])))] OOC Players + [words(filter(fn.visstaff,filter(fn.zoneic,[remove(lwho(),#471)])))] IC Players = [words(filter(fn.visstaff,[remove(lwho(),#471)]))] Players Online,80)]%cn%R[header(Global +WHO Command)]%R%ch%cw** Mudnet [ifelse(hasflag(#471,connected),is,isn't)] connected. **%cn
&DO.STAFF Player Commands=$+staff:@pemit %#=[header3()]%R[ljust(Name,25)]%BIdle%b[ljust(Rank,10)]%bBit%R[header2()];@pemit %#=[list([filter(fn.visstaff,[allstaff()])],[u(fn.staff.fmt,##)])];@pemit %#=%R%ch%cwStaff Marked with a * or in Blue are busy.%cn%R[header(Current Online Staff)]
&DO.STAFF.SWITCH Player Commands=$+staff/*:@switch [gt(member(All Command Story Wizard Judge Admin Liason Weapon Tinyplot,[capitalize(%0)]),0)]=1,{@switch %0=all,{@pemit %#=[header3()]%R[ljust(Name,25)]%BIdle%b[ljust(Rank,10)]%bBit%R[header2()][iter([allstaff()],%R[u(fn.staff2.fmt,##)])]%R%R%ch%cwStaff Marked with a * or in Blue are busy.%cn%R[header(Current Staff List)]},{@pemit %#=[header3()]%R[ljust(Name,25)]%BIdle%b[ljust(Rank,10)]%bBit%R[header2()][iter(sortby(fn.sortby2,u(#36/%0)),%R[u(fn.staff2.fmt,##)])]%R%R%ch%cwStaff Marked with a * or in Blue are busy.%cn%R[header(Current [capitalize(%0)] Staff List)]}},{@pemit %#=%ch+Staff:%cn That is not a valid switch. Current Switches: All Command Wizard Admin Liason Judge Story Weapon Tinyplot.}
&DO.ALLSCAN Player Commands=$+allscan:@fo %#=+npscan;@fo %#=+bbscan;@fo %#=+hrscan
&DO.FINGER Player Commands=$+finger *:[setq(9,[switch(%0,me,%#,[num(*%0)])])];@switch isdbref(%q9)=1,{@Pemit %#=[header(Finger:%B[name(%q9)][ifelse(hasattr(%q9,alias),%B%([u(%q9/alias)]%),)]%B\[%q9\])]%R[u(dat.finger[isstaff(%q9)][isstaff(%#)],%q9,%#)]%R[header2()][iter([sortby(fn.sortby,lattr(%q9/fin.*))],%R%B[ljust([capitalize([edit([after(##,.)],_,%B)])]:,15)][u(%q9/##)])]%r[header3()];@switch hasflag(%#,dark)=0,{@verb %q9=%#,,,,,AFINGER,}},{@pemit %#=That is not a player.}
&DO.FINGER.QUICK Player Commands=$+finger:@pemit %#=[header(Quick Finger)]%R%B%B%B%B[ljust(Name %(Alias%),25)][ljust(Sex,5)][ljust(Idle,6)]Position%R[header2()];@pemit %#=[list(filter(fn.visstaff,lwho()),u(fn.finger.quick,##))];@pemit %#=[header3()]
@Aconnect Player Commands=@dolist [lwho()]={@switch/first [hasflag(%#,DARK)]:[not(u(##/WATCHON))]:[udefault(##/watchall,0)]:[gt(match(u(##/friends),%#),0)]:[gt(match(u(NOWATCH),%#),0)]:[gt(match(u(%#/watchpermit),# #),0)]=0:1:1:*:0:*, {@pemit ##=[udefault(##/watchfmt,%cr<%chWatcher%cn%cr> [name(%#)] has connected.,connected)]},0:1:0:1:0:*,{@pemit ##=[udefault(##/watchfmt,%cr<%chWatcher%cn%cr> [name(%#)] has connected.,connected)]},0:1:0:1:1:1,{@pemit ##=[udefault(##/watchfmt,%cr<%chWatcher%cn%cr> [name(%#)] has connected.,connected)]},};@fo %#=+allscan;&sites %#=[setunion(u(%#/sites),u(%#/lastsite))];@pemit %#=%ch%cbMAIL:%cn You have [setq(1,[extract(mail(%#),2,1)])][switch(%q1,0,no unread messages,1,1 unread message,%q1 unread messages)]
@Adisconnect Player Commands=@dolist [lwho()]={@switch/first [hasflag(%#,DARK)]:[not(u(##/WATCHON))]:[udefault(##/watchall,0)]:[gt(match(u(##/friends),%#),0)]:[gt(match(u(NOWATCH),%#),0)]:[gt(match(u(%#/watchpermit),##),0)]=0:1:1:*:0:*, {@pemit ##=[udefault(##/watchfmt,Watch> [name(%#)](%#) has disconnected.,disconnected)]},0:1:0:1:0:*,{@pemit ##=[udefault(##/watchfmt,Watch> [name(%#)](%#) has disconnected.,disconnected)]},0:1:0:1:1:1,{@pemit ##=[udefault(##/watchfmt,Watch> [name(%#)](%#) has disconnected.,disconnected)]},};&sites %#=[setunion(u(%#/sites),u(%#/lastsite))]
&DO.FINGER.TERSE Player Commands=$+finger/terse *:[setq(0,[switch(%0,me,%#,[num(*%0)])])];@switch isdbref(%q0)=1,{@Pemit %#=[header(Finger:%B[name(%q0)][ifelse(hasattr(%q0,alias),%B%([u(%q0/alias)]%),)]%B\[%q0\])]%R[u(dat.finger[isstaff(%q0)][isstaff(%#)],%q0,%#)]%R[header3()];@switch hasflag(%#,dark)=0,{@verb %q0=%#,,,,,AFINGER,}},{@pemit %#=That is not a valid player.}
&DO.WHERE Player Commands=$+where:@pemit %#=[header3()]; @pemit %0=setq(0,sort(iter(lwho(),switch([orflags(##,DU/1oy)][hasflag(loc(##),UNFINDABLE) ][isstaff(%#)],??1,loc(##),000,loc(##))))); @pemit #0=iter(%q0,setq(3,match(%q2,*:##))[setq(4,extract(%q2,%q3,1))][setq(2,switch( %q3,0,%q2 1:##,replace(%q2,%q3,[add(first(%q4,:),1)]:##)))]); @pemit #0=setq(2,revwords(sort(filter(FN.WHERE2.ENOUGH,%q2)))); @pemit %#=[list(%q2,%B[ljust(mid([name(last(##,:))][ifelse(hasflag(last(##,:),JUMP),%B%([last(##,:)]%),)],0,44),60)][ljust(first(##,:),4)])]; @pemit %#=[header(Global +Where Command)];
&DO.WHO.THREE Player Commands=$+3who:@pemit %#=%b%B[repeat(Name %b %b %b %b %b%B[center(Idle,7)]%b,3)]%r%ch%cb|[repeat(repeat(-,22)+,2)][repeat(-,22)]|%cn [setq(0,filter(fn.visstaff,[remove(lwho(),#471)]))][iter(%q0,switch(mod(#@,3),1,%r%ch%cb|%cn%b)[ljust([mid(name(##),0,14)][ifelse(isstaff(##),%ch%cr+%cn,)],15)][rjust(singletime(idle(##)),5)] [ansi(hb,|)])][repeat(ansi(hb,rjust(|,23)),edit(sub(mul(3,inc(div(setq(1,words(%q0))%q1,3))),%q1),3,0))]%r[ansi(hb,|[repeat(repeat(-,22)+,2)][repeat(-,22)]|)]%r%ch%cw\[ [words(%q0)] online players. Global +3who Command <%ch%cr+%cw = Staff Member> \]
&DO.OOC.1 Player Commands=$ooc *:@pemit/list [u(#705/Samerealm2,%#)]=[udefault(%#/oocfmt,%ch%cb<<OOC>>%cn)]%B[ifelse(orflags(%#,$oy/1),[udefault(%#/oocname,Someone)],%N)][switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]
&DO.OOC.2 Player Commands=$> *:@pemit/list [u(#705/Samerealm2,%#)]=[udefault(%#/oocfmt,%ch%cb<<OOC>>%cn)]%B[ifelse(orflags(%#,$oy/1),[udefault(%#/oocname,Someone)],%N)][switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]
&DO.OOC.3 Player Commands=$+osay *:@pemit/list [u(#705/Samerealm2,%#)]=[udefault(%#/oocfmt,%ch%cb<<OOC>>%cn)]%B[ifelse(orflags(%#,$oy/1),[udefault(%#/oocname,Someone)],%N)][switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]
&DO.OOC.4 Player Commands=$| *:@pemit/list [u(#705/Samerealm2,%#)]=[udefault(%#/oocfmt,%ch%cb<<OOC>>%cn)]%B[ifelse(orflags(%#,$oy/1),[udefault(%#/oocname,Someone)],%N)][switch(mid(%0,0,1),:,%b[mid(%0,1,strlen(%0))],;,[mid(%0,1,strlen(%0))],%bsays\, "{%0}")]
&DO.SELFBOOT Player Commands=$+selfboot:setq(0,rest(ports(%#))); @switch gt(words(%q0),0)=0,{@pemit %#=There's only one of you here. Stop kicking yourself!},1,{@pemit %#=Your alter egos are now gone.; @dolist %q0={@fo #108=@boot/port ##}}
&DO.INITS Player Commands=$+inits:@pemit %#=You set your basic flags, attributes, and locks.;&afinger %#=think ** %%ch%%cg\[name(%%#)] %(\[strtrunc(get%(%%#/sex%),1)]%)%%cn +fingered you. **;@adesc %#=think ** %%ch%%cg\[name(%%#)] %(\[strtrunc(get%(%%#/sex%),1)]%)%%cn looked at you. **;@lock/use %#=%#;@lock %#=%#;@set %#=Ansi;@set %#=Enter_ok;@set %#=!myopic;@set %#=Opaque;&inited %#=1
@Desc Player Commands=[columns(iter(lattr(me/do.*),[rest(first(xget(me,##),:),$)]|),25,|)]
&DO.BACKGROUNDS Player Commands=$+bg/list:@pemit %#=[header(Backgrounds for %N:%B[ifelse(hasattr(%#,dat.approved),Approved,NOT Approved)])]%R[columns([iter(sortby(fn.sortby,lattr(%#/bg.*)),[capitalize([after(##,.)])])],23)]%R%R[center(%ch+bg/view <section>%cn to see a section.,80)]%R[header3()]
&DO.BACKGROUNDS.SET Player Commands=$+bg/set *=*:@switch [hasattr(%#,bg.section%0)]=1,{@pemit %#=You already have a section named that, if you want to replace it, type +bg/clear %0.},{@pemit %#=Section %0 is set to:%R[header(Section %0)]%R%1%R[header2()];&bg.section%0 %#=%1}
&DO.BACKGROUND.READ Player Commands=$+bg/view *:@switch [hasattr(%#,bg.section%0)]=1,{@pemit %#=[header(Section %0)]%R[u(%#/bg.section%0)]%R[ifelse(hasattr(%#,bg.section[add(%0,1)]),%R%T%TContinued: Section[add(%0,1)]%R,)][header2()]},{@pemit %#=You do not have a BG section numbered %0.}
&DO.BACKGROUND.CLEAR Player Commands=$+bg/clear *:@switch [hasattr(%#,dat.approved)]=1,{@pemit %#=%ch%cbWARNING:%cn You are approved you may not clear Background Sections. Please contact staff if this is required.},{@switch [hasattr(%#,bg.section%0)]=1,{@pemit %#=Section %0 has been cleared.;&bg.section%0 %#=},{@pemit %#=You don't have a background section numbered %0.}}
&DO.BACKGROUND.WIPE Player Commands=$+bg/wipe:@switch [hasattr(%#,dat.approved)]=1,{@pemit %#=%ch%cbWARNING:%cn You are approved you may not wipe your Background Sections, please contact Staff if this required.},{@pemit %#=Your background sections have been cleared.;@dolist [lattr(%#/bg*)]=&## %#=}
&DO.LANG.INIT Player Commands=$+lang/init:&langs %#=[u(Languages,%#)];&langpoints %#=[ifelse(gt(words(getperm(%#/dat.abil,Linguistics)),0),[mul(2,[getperm(%#/dat.abil,Linguistics)])],)];@Pemit %#=You have reset your languages to your racials. And you now may learn up to [u(%#/langpoints)] more languages.
&DO.LANG.LEARN Player Commands=$+lang/learn *:[setq(0,u(%#/langpoints))];@switch [gte(%q0,1)]=0,{@pemit %#=You may not learn any more languages until you raise your linguistics.},1,{@switch [strmatch([u(#121/fn.list,%#,Languages)]|,*|%0|*)]=1,{@pemit %#=You learn [capitalize(%0)].;&langs %#=[u(%#/langs)] [capitalize(%0)];&langpoints %#=[sub([u(%#/langpoints)],1)]},{@pemit %#=You can't learn that language.}}
&DO.LANG.LIST Player Commands=$+lang/list:@pemit %#=[setq(0,[ifelse(isstaff(%#),[u(#121/stafflangs)],[u(#121/fn.list,%#,languages)])])][header3()]%R[columns(sortby(fn.sortby,%q0,|),15,|)]%R[header(Master Language List)]
&DO.RETAINER.OTHER Player Commands=$+rsheet *:[setq(0,[switch([before(%0,/)],me,%#,[num(*[before(%0,/)])])])];@Pemit %#=switch(0,or(match(%#,%q0),[isstaff(%#)]),Permission Denied.,isdbref(%q0),I don't see that here.,hasattr(%q0,ret.[after(%0,/)]),ifelse(match(%#,%q0),You don't have,[name(%q0)] %(%q0%) doesn't have) a retainer named [capitalize([after(%0,/)])].,%ch%cb-=--=-=%B%cr[mudname()]:%BRetainer%bSheet%cb%B-=[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%ROwner:%B[name(%q0)] <%q0>%R[iter([get(%q0/ret.[after(%0,/)])],[ifelse(mod(#@,2),%r,)][ljust([ljust([First(##,~)]:,20)][rjust([last(##,~)],18)]%B,39)],|)]%R%q4%q4)
&DO.WEAPON.SHEET2 Player Commands=$+wsheet */*:@pemit %#=switch(0,[or(match(setr(0,switch(%0,me,%#,[num(*%0)])),%#),isstaff(%#))],Permission Denied.,isdbref(%q0),I don't see that.,hasattr(%q0,weap.%1),ifelse(match(%#,%q0),You don't have,[name(%q0)] %(%q0%) doesn't have) a weapon numbered [capitalize(%1)],%ch%cb-=--=-=%B%cw[mudname()]:%BWeapon%bSheet%cb%B-=-=[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%ROwner: [name(%q0)] <%q0>%R%R[ljust(Type:%B[getperm(%q0/weap.%1,type)],39)][ljust(Legal:%B[getperm(%q0/weap.%1,Legal)],39)]%R[ljust(Class:%B[getperm(%q0/weap.%1,Class)],39)][ljust(Name:%B[getperm(%q0/weap.%1,Name)],39)]%R[ljust(Status:%B[getperm(%q0/weap.%1,Status)],39)][ljust(Loaded:%B[getperm(%q0/weap.%1,Loaded)],39)]%R[ljust(Conceal:%B[switch([getperm(%q0/weap.%1,Conceal)],J,Jacket (J),T,Trench Coat (T),N,No Hide (N),P,Pocket (P))],39)][ljust(Rate:%B[getperm(%q0/weap.%1,rate)],39)]%R[ljust(Clip:%B[getperm(%q0/weap.%1,Current)]/[getperm(%q0/weap.%1,Clip)]%B%([getperm(%q0/weap.%1,Current Ammo)]%),39)][ljust(Damage:%B[getperm(%q0/weap.%1,damage)],39)]%R[ljust(Extra Clips:%B[getperm(%q0/weap.%1,extra clips)] %([getperm(%q0/weap.%1,Ammo)]%),39)]%R%q4%q4)
&DO.WEAPON.SHEET Player Commands=$+wsheet*:@switch [match(%0,*/*)]=0,{@pemit %#=switch(0,[or(match(setr(0,switch(%0,me,%#,,%#,[num(*%0)])),%#),isstaff(%#))],Permission Denied.,isdbref(%q0),I don't see that.,[gte(words(lattr(%q0/weap.*)),1)],ifelse(match(%#,%q0),You have,[name(%q0)] (%q0) has) no weapons.,%ch%cb-=--=-=%B%cw[mudname()]:%BWeapon%bSheet%cb%B-=-=[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%ROwner: [name(%q0)] <%q0>%R%R%ch#%B%B%B[ljust(Name,30)][ljust(Type,12)][ljust(Status,10)]Loaded%cn%R%q4%q4[iter(lattr(%q0/weap.*),%R[ljust(#@%),4)][ljust([getperm(%q0/##,Name)],30)][ljust([getperm(%q0/##,Type)],12)][ljust([getperm(%q0/##,Status)],10)][getperm(%q0/##,Loaded)])]%R%q4%q4)}
&DO.WEAPON Player Commands=$+weapons:@pemit %#=[header(Master Weapon List)]%r%ch%cw#%B%B[ljust(Name,25)][ljust(Type,10)][ljust(Class,10)][ljust(Con,3)]%B[ljust(Clip,6)]Damage%cn%R[header2()][iter(lattr(#1741/weap.*),%r[ljust([after(##,.)],3)][ljust([getperm(#1741/##,Name)],25)][ljust([getperm(#1741/##,Type)],10)][ljust([getperm(#1741/##,Class)],10)][ljust([getperm(#1741/##,Conceal)],3)]%B[ljust([getperm(#1741/##,clip)],6)][getperm(#1741/##,damage)])]%R[header3()]
&DO.WEAPONS.MELEE Player Commands=$+weapons/melee:@pemit %#=[header(Master Melee Weapon List)]%R%ch%cw#%B%B[ljust(Name,25)][ljust(Type,10)][ljust(Class,10)][ljust(Con,3)]%B[ljust(Clip,6)]Damage%cn%R[header2()][iter(filter(fn.melee,lattr(#1741/weap.*)),%r[ljust([after(##,.)],3)][ljust([getperm(#1741/##,Name)],25)][ljust([getperm(#1741/##,Type)],10)][ljust([getperm(#1741/##,Class)],10)][ljust([getperm(#1741/##,Conceal)],3)]%B[ljust([getperm(#1741/##,clip)],6)][getperm(#1741/##,damage)])]%R[header3()]
&DO.WEAPONS.FIREARM Player Commands=$+weapons/firearm:@pemit %#=[header(Master Firearm Weapon List)]%R%ch%cw#%B%B[ljust(Name,25)][ljust(Type,10)][ljust(Class,10)][ljust(Con,3)]%B[ljust(Clip,6)]Damage%cn%R[header2()][iter(filter(fn.firearm,lattr(#1741/weap.*)),%r[ljust([after(##,.)],3)][ljust([getperm(#1741/##,Name)],25)][ljust([getperm(#1741/##,Type)],10)][ljust([getperm(#1741/##,Class)],10)][ljust([getperm(#1741/##,Conceal)],3)]%B[ljust([getperm(#1741/##,clip)],6)][getperm(#1741/##,damage)])]%R[header3()]
&DO.SPECS Player Commands=$+specs:@pemit %#=[header(%N's Specializations)][iter([sortby(fn.sortby,get(%#/dat.specs),|)],ifelse(mod(#@,2),%r,)[ljust([first([secure(##)],~)]:[space(2)][last([secure(##)],~)],39)],|)]%R[header3()]
&DO.SET.SPEC Player Commands=$+specs/set *=*:@switch [gt([strlen([getperm(%#/dat.specs,%0)])],0)][gte([getperm(%#/dat.attr,%0)],4)][gte([getperm(%#/dat.abil,%0)],4)]=1??,{@pemit %#=You have already set that Spec. Contact staff if you want it changed.},010,{@pemit %#=You set your spec for [capitalize(%0)] to [capitalize(%1)].[setstat(%#/dat.specs,[capitalize(%0)],[capitalize(%1)])]},001,{@pemit %#=You set your spec for [capitalize(%0)] to [capitalize(%1)].[setstat(%#/dat.specs,[capitalize(%0)],[capitalize(%1)])]},000,{@pemit %#=You can't set a spec for that.}
&DO.EXPLAIN Player Commands=$+explain:@pemit %#=[header(%N's Explainations)][ifelse(Hasattr(%#,dat.explain_bgs),[iter(u(%#/dat.explain_Bgs),%R#@%)%B%B%ch[first([secure(##)],~)]%cn%B-%B%B[last([secure(##)],~)],|)],)]%R[header2()][ifelse(Hasattr(%#,dat.explain_m&F),[iter(u(%#/dat.explain_m&f),%R#@%)%B%B%ch[first([secure(##)],~)]%cn%B-%B%B[last([secure(##)],~)],|)],)]%R[header3()]
&DO.EXPLAINBG.SET Player Commands=$+explain/bg *=*:@switch [gt([strlen([getperm(%#/dat.explain_bgs,%0)])],0)]=1,{@pemit %#=You have already set your explaination for that.},{@pemit %#=You set your explaination for [capitalize(%0)] to %1.[setstat(%#/dat.explain_Bgs,[capitalize(%0)],%1)]}
&DO.EXPLAINMF.SET Player Commands=$+explain/mf *=*:@switch [gt([strlen([getperm(%#/dat.explain_m&f,%0)])],0)]=1,{@pemit %#=You have already set your explaination for that.},{@pemit %#=You set your explaination for [capitalize(%0)] to %1.[setstat(%#/dat.explain_m&f,[capitalize(%0)],%1)]}
&DO.ADDWATCHER Player Commands=$+watch/add *:@swi [type(*%0)]=PLAYER,{&friends %#=[setunion(get(%#/friends),num(*%0))];@pemit %#=Watch> You have added [name(*%0)] to your watch list.},{@pemit %#=Watch> Sorry, %0 isn't a player.}
&DO.DELWATCHER Player Commands=$+watch/del *:&friends %#=[remove(get(%#/friends),num(*%0))];@pemit %#=Watch> You have removed [Name(*%0)] from your watch list.
&DO.HIDEWATCHER Player Commands=$+watch/hide:&NOWATCH me=[setunion(v(NOWATCH),num(%#))];@pemit %#=Watch> You are now hiding from the Watcher code.
&DO.UNHIDEWATCHER Player Commands=$+watch/unhide:&NOWATCH me=[remove(get(me/NOWATCH),%#)];@pemit %#=Watch> Your login and logouts may now be monitored.
&DO.WATCH Player Commands=$+watch:@pemit %#=Watch> Watched players currently connected: [iter(setinter(u(%#/friends),objeval(%#,lwho())),[switch(conn(##),-1,,name(##) |)])]
&DO.WHOWATCHER Player Commands=$+watch/who:@pemit %#=Watch> You are currently watching for [iter(u(%#/friends),switch(type(##),PLAYER,{%r%t- [name(##)](##)[repeat(.,sub(28,add(strlen(name(##)),strlen(##))))][ifelse(u(fn.visstaff,##),Online,Offline)]},))]
&DO.HELPWATCHER Player Commands=$+watch/help:@pemit %#=Watch> The following are commands available for +watch:%r%r+watch [space(11)]-- shows you who is connected that you are watching.%r+watch/on <default>- turns on the watch code after it has been turned off.%r+watch/off [space(7)]-- turns off the Watch without removing your list.%r+watch/who [space(7)]-- displays everyone on your watch list and connect status.%r+watch/hide [space(6)]-- hides you from the +watch.%r+watch/unhide [space(4)]-- allows others to watch your logins and disconnects.%r+watch/per <name> -- permits <name> to see you while hiding.%r+watch/rem <name> -- removes <name> from seeing you while hiding.%r+watch/add <name>[space(1)]-- adds <name> to your watch list.%r+watch/del <name>[space(1)]-- removes <name> from your watch list.%r+watch/page <message> -- sends <message> as a page to those on your watch list.%r+watch/all on [space(4)]-- allows you to watch all logins and disconnects.%r+watch/all off [space(3)]-- prevents you from watching all logins and disconnects.%r%rYou may also set the format by which you see logins and disconnects. To do this, set &WATCHFMT me=%%n has %%0. Other useful commands you might add could be %[time()], %%# or whatever.%r%rAlso, you may set an AWATCH attribute on yourself that will be triggered when someone logs in.%r%rWatch> +watch was coded by Alton/Cedric@Tir Rauhd and Watchman@Haven. It may be copied freely.
&DO.ALLWATCHER Player Commands=$+watch/all *:@swi %0=ON,{&watchall %#=1;@pemit %#=Watch> You are now watching all logins and disconnects.},{&watchall %#;@pemit %#=Watch> You are no longer watching all logins and disconnects.}
&DO.PERMITWATCH Player Commands=$+watch/per *:@swi [type(*%0)]=PLAYER,{&watchpermit %#=[setunion(get(%#/watchpermit),num(*%0))];@pemit %#=Watch> You have added [name(*{%0})] to your permission list, %rfor when you are hidden from the watch command.},{@pemit %#=Watch> Sorry, %0 isn't a player.}
&DO.UNPERMWATCH Player Commands=$+watch/rem *:&watchpermit %#=[remove(get(%#/watchpermit),num(*%0))];@pemit %#=Watch> You have removed [name(*%0)] from your hidden permission list.
&DO.WATCHALERT Player Commands=@pemit %1=[udefault(%1/friends,Watch> [name(%0)](%0) has connected.,connected)];@trig/quiet %0/awatch=[name(%1)], %1
&DO.WATCHON Player Commands=$+watch/on:@pemit %#=Watch> Watcher code is now turned on.;&WATCHON %#=0
&DO.WATCHOFF Player Commands=$+watch/off:@pemit %#=Watch> Watcher code is now turned off.;&watchon %#=1
&DO.SWITCHDESC Player Commands=$+desc *:@switch/first [isdbref(u(%#/DESCS))][words(lattr(u(%#/DESCS)/DESC-[setr(0,edit(ucstr(%0),%b, _))]))]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?0,{@pemit %#=I don't have any such description {'%0'}},11,{@cpattr [u(%#/DESCS)]/DESC-%q0=%#/currdesc; @remit %l=[u(u(%#/DESCS)/EMIT-%q0)]; @switch [u(u(%#/DESCS)/NAME-%q0)]=?*,{@name %#=[u(u(%#/DESCS)/NAME-%q0)]},{@name %#=[u(u(%#/DESCS)/ROOTNAME)]}; @dolist setdiff(lattr(u(%#/DESCS)/*-%q0),EMIT-%q0 NAME-%q0 DESC-%q0)={@cpattr u(%#/DESCS)/##=%#/[extract(##,1,sub(words(##,-),words(%0,-)),-)]}; @pemit %#=The current description is now '{[capstr(lcstr(edit(%q0,_,%b)))]}'.},1?{@pemit %#=How on earth did you get TWO descriptions with the same name on you?}
&DO.DESCADD Player Commands=$+desc/add *:setq(0,edit(first(%0,=),%b,_)); setq(1,rest(escape(%0),=)); @switch/first [isdbref(u(%#/DESCS))][gt(strlen(%q0),0)][gt(strlen(%q1),0)][hasattr(u(%#/DESCS),DESC-%q0)]=0*,{@pemit %#=You are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?0??,{@pemit %#=I'm sorry, but you simply MUST give the description a name. See +help multidesc.},??0?,{@pemit %#=I'm sorry, but you simply MUST type in a description of some sort. See +help multidesc.},???0,{&DESC-%q0 [u(%#/DESCS)]=%q1; @pemit %#=You have stored a new description named '{[capstr(lcstr(edit(%q0,_,%b)))]}'.},{@pemit %#=I'm sorry, but there is already a description with that name.}
&DO.DESCDELETE Player Commands=$+desc/delete *:setq(0,edit(%0,%b,_)); @switch/first [isdbref(u(%#/DESCS))][hasattr(u(%#/DESCS),DESC-%q0)]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' to continue.},?0,{@pemit %#=I'm sorry, but I can't find that description.},?1,{@wipe [u(%#/DESCS)]/*-%q0; @pemit %#=You have removed the description '{[capstr(lcstr(edit(%q0,_,%b)))]}'.}
&DO.DESCSAVE Player Commands=$+desc/save *:setq(0,edit(%0,%b,_)); @switch/first [isdbref(u(%#/DESCS))][hasattr(u(%#/DESCS),DESC-%q0)][strlen(%q0)]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?1?,{@pemit %#=I'm sorry, but there is already a description with that name.},??0,{@pemit %#=I'm sorry, but you simply MUST provide a name for the description},{&DESC-%q0 [u(%#/DESCS)]=[get(%#/currdesc)]; @pemit %#=You have saved the current description as '{[capstr(lcstr(edit(%q0,_,%b)))]}'}
&DO.DESCVIEW Player Commands=$+desc/view *:@switch/first [isdbref(u(%#/DESCS))][hasattr(u(%#/DESCS),DESC-[edit(%0,%b,_)])]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?1,{setq(7,edit(ucstr(%0),%b,_)); setq(0,Description: [capstr(lcstr(%0))]); @pemit %#=[setq(9,switch(isnum(extract(%q0,2,1,|)),1,extract(%q0,2,1,|),0,75))][setq( 8,switch(isnum(extract(%q0,2,1,|)),1,extract(%q0,1,1,|),0,%q0))][setq(5,sub(di v(sub(%q9,add(strlen(%q8),2)),4),1))][setq(1,mod(sub(%q9,add(strlen(%q8),2)),4 ))][repeat(-=,%q5)]-> %q8 <-[repeat(=-,%q5)][switch(%q1,3,=-=,2,=-,1,=)]; @pemit %#=[center(Name: [switch(u(u(%#/DESCS)/NAME-%q7),?*,u(u(%#/DESCS)/NAME-%q7),u(u(%#/DESCS)/ROOTN AME))],75)]; @pemit %#=%b[iter(setdiff(lattr(u(%#/DESCS)/*-%q7),NAME-%q7 DESC-%q7),[capstr(lcstr(extract(##,1,sub(words(##,-),1),-)))]: [u(u(%#/DESCS)/##)]%r)]; @pemit %#=[repeat(-,75)]; @pemit %#=[u([u(%#/DESCS)]/DESC-[edit(%0,%b,_)])]; setq(0,End Description: [capstr(lcstr(%0))]); @pemit %#=[setq(9,switch(isnum(extract(%q0,2,1,|)),1,extract(%q0,2,1,|),0,75))][setq( 8,switch(isnum(extract(%q0,2,1,|)),1,extract(%q0,1,1,|),0,%q0))][setq(5,sub(di v(sub(%q9,add(strlen(%q8),2)),4),1))][setq(1,mod(sub(%q9,add(strlen(%q8),2)),4 ))][repeat(-=,%q5)]-> %q8 <-[repeat(=-,%q5)][switch(%q1,3,=-=,2,=-,1,=)]},?0,{@pemit %#=I can't find that description to view.}
&DO.DESCEDIT Player Commands=$+desc/edit *:setq(0,edit(first(%0,=),%b,_)); setq(1,rest(escape(%0),=)); setq(2,rest(%q1,/)); setq(1,first(%q1,/)); @switch/first [isdbref(u(%#/DESCS))][hasattr(u(%#/DESCS),DESC-%q0)]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?0,{@pemit %#=I can't find that description.},?1,{@edit [u(%#/DESCS)]/DESC-%q0={%q1},{%q2}; @pemit %#=You have edited the description named '{[capstr(lcstr(edit(%q0,_,%b)))]}'.}
&DO.DESCSETUP Player Commands=$+desc/setup:@switch isdbref(u(%#/DESCS))=0,{&DESCS %#=%#;&ROOTNAME %#=%N;@cpattr %#/currdesc=%#/DESC-MAIN; @pemit %#=switch(isdbref(%#),1,You are now set up to use the global multi-descer.,0,An error occurred setting you up. You are probably out of quota.)},1,{@pemit %#=I'm sorry, but you already are setup to use the multidescer.}
&DO.DESCEMIT Player Commands=$+desc/emit *:setq(0,first(%0,=)); setq(1,rest(escape(%0),=)); setq(2,edit(%q0,%b,_)); @switch [isdbref(u(%#/DESCS))][hasattr(u(%#/DESCS),DESC-%q2)]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?0,{@pemit %#=I'm sorry, but you don't a description named {'%q0'}.},?1,{&EMIT-%q2 [u(%#/DESCS)]=%q1; @pemit %#=You have set the emit for {'%q0'}.}
&DO.DESCNAME Player Commands=$+desc/name *:setq(0,first(%0,=)); setq(1,rest(escape(%0),=)); setq(2,edit(%q0,%b,_)); @switch [isdbref(u(%#/DESCS))][hasattr(u(%#/DESCS),DESC-%q2)]=0*,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.},?0,{@pemit %#=I'm sorry, but you don't have a description named {'%q0'}.},?1,{&NAME-%q2 [u(%#/DESCS)]=[switch(%q1,clear,,%q1)]; @pemit %#=You have set the name for {'%q0'}.}
&DO.DESCROOTNAME Player Commands=$+desc/rootname *:@switch isdbref(u(%#/DESCS))=1,{&ROOTNAME [u(%#/DESCS)]={%0}; @pemit %#=You have set your default name to '{%0}'.},0,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.}
&DO.DESCATTRIB Player Commands=$+desc/attrib *:setq(0,edit(first(%0,=),%b,_)); setq(1,rest(%q0,:)); setq(0,first(%q0,:)); setq(2,rest(escape(%0),=)); setq(3,u(%#/DESCS)); @switch/first [isdbref(%q3)][hasattr(%q3,DESC-%q0)][strmatch(%q2,clear)]=0*,{@pemit %#=You are not yet set to use the multidescer. Please use '+desc/setup'},10?,{@pemit %#=No such description '{%0}'.},??0,{&%q1-%q0 %q3=%q2; @pemit %#=You have set the [capstr(lcstr(%q1))] for your [capstr(lcstr(%q0))] description.},??1,{&%q1-%q0 %q3; @pemit %#=You have cleared the [capstr(lcstr(%q1))] from your [capstr(lcstr(%q0))] description.}
&DO.LISTDESC Player Commands=$+desc/list:@switch isdbref(u(%#/DESCS))=1,{@pemit %#=-=-=-=-=-=-=-=-=-=-=-=-=-=-> Your Descriptions <-=-=-=-=-=-=-=-=-=-=-=-=-=-; @pemit %#=[edit(columns(iter(lattr(u(%#/DESCS)/DESC-*),capstr(lcstr(edit(##,DESC-,))) ),25),_,%b)]; @pemit %#=-=-=-=-=-=-=-=-=-=-=-=-=-> End Your Descriptions <-=-=-=-=-=-=-=-=-=-=-=-=-},0,{@pemit %#=I'm sorry, but you are not yet set to use the multidescer. Please type '+desc/setup' before continuing.}
&DO.WHO.IC Player Commands=$+who/ic:@pemit %#=[header3()]%r[u(fn.whoheader,%#)]%R[header2()];@pemit %#=[list(filter(fn.visstaff,filter(fn.zoneic,[remove(lwho(),#471)])),[u(fn.whobody,##,%#)])];@pemit %#=[header(Global +WHO\, [words(filter(fn.visstaff,filter(fn.zoneic,[remove(lwho(),#471)])))] Online IC Players.)]%R%ch%cw** Mudnet [ifelse(hasflag(#471,connected),is,isn't)] connected. **%cn
&DO.WHO.OOC Player Commands=$+who/ooc:@pemit %#=[header3()]%r[u(fn.whoheader,%#)]%R[header2()];@pemit %#=[list(filter(fn.visstaff,filter(fn.zoneooc,[remove(lwho(),#471)])),[u(fn.whobody,##,%#)])];@pemit %#=[header(Global +WHO\, [words(filter(fn.visstaff,filter(fn.zoneooc,[remove(lwho(),#471)])))] Online OOC Players.)]%R%ch%cw** Mudnet [ifelse(hasflag(#471,connected),is,isn't)] connected. **%cn
&DO.ROLL Player Commands=$+roll *=*:[setq(0,[extract([froll(%0=%1)],2,1)])];@remit %l=%cn%cg\[%BROLL: %N rolls %0 dice at %1 difficulty and achieves [switch(%q0,-*,a %crBOTCH!!!,0,a failure.,1,1 success.,%q0 successes.)]%B%cn%ch%cg\]%cn
&DO.ROLL.STAFF Player Commands=$+roll/staff *=*:[setq(0,[extract([froll(%0=%1)],2,1)])];@dolist [lcon(%l)]=@switch [or(Isstaff(##),match(##,%#))]=1,{@pemit ##=%cn%cc\[%BSTAFF ROLL: %N rolls %0 dice at %1 difficulty and achieves [switch(%q0,-*,a %crBOTCH!!!,0,a failure.,1,1 success.,%q0 successes.)]%B%cn%ch%cc\]%cn}
&DO.ROLL.PRIV Player Commands=$+roll/priv *=*=*:[setq(0,[extract([froll(%0=[before(%1,=)])],2,1)])];@pemit/list %# [iter(%2,*##)]=%ch%cw\[%BPRIV ROLL: %N rolls %0 dice at [before(%1,=)] difficulty and achieves [switch(%q0,-*,a %crBOTCH!!!,0,a failure.,1,1 success.,%q0 successes.)]%B%cn%ch%cw\]%cn
&DO.ROLL.SPAM1 Player Commands=$+roll/spam *=*:[setq(0,[froll(%0=%1)])];[setq(1,[extract(%q0,2,1)])];[setq(2,[extract(%q0 ,4,%0)])];@remit %l=%cn%cg\[%BROLL: %N rolls %0 dice at %1 difficulty and achieves [switch(%q1,-*,a %crBOTCH!!!,0,a failure.,1,1 success.,%q1 successes.)]%B%cn%ch%cg\]%cn%R%ch%cg\[%BSPAM: %q2%B\]%cn
&DO.ROLL.SPAM2 Player Commands=$+roll/priv/spam *=*=*:[setq(0,[froll(%0=%1)])];[setq(1,[extract(%q0,2,1)])];[setq(2,[extract(%q0,4,%0)])];@pemit/list %# [iter(%2,*##)]=%ch%cw\[%BPRIV ROLL: %N rolls %0 dice at %1 difficulty and achieves [switch(%q1,-*,a %crBOTCH!!!,0,a failure.,1,1 success.,%q1 successes.)]%B%cn%ch%cw\]%cn%R%ch%cw\[%BSPAM: %q2%B\]%cn
&DO.ROLL.SPAM3 Player Commands=$+roll/staff/spam *=*:[setq(0,[froll(%0=%1)])];[setq(1,[extract(%q0,2,1)])];[setq(2,[extract(%q0 ,4,%0)])];@dolist [lcon(%l)]=@switch [or(Isstaff(##),match(##,%#))]=1,{@pemit ##=%cn%cc\[%BSTAFF ROLL: %N rolls %0 dice at %1 difficulty and achieves [switch(%q1,-*,a %crBOTCH!!!,0,a failure.,1,1 success.,%q1 successes.)]%B%cn%ch%cc\]%cn%R%cc%ch\[%BSPAM: %q2%B\]%cn}
&DO.ROLL.VERIFY Player Commands=$+roll*:@wait 1=@scan %ch%crROLL%cn: Real Roll by %N.
&DO.MAP Player Commands=$+map:@Pemit %#=[header2()]%R[isat(%#,15)]------[isat(%#,06)]----------[isat(%#,07)]------[isat(%#,04)]--[isat(%#,05)]%b%b%b[isat(%#,01)]%b-%bAngel%bIsland%b%b%b%b%b[isat(%#,02)]%b-%bAlcatraz%bIsland%r%b|%b\\%b%b%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b%b%b|%b%b%b[isat(%#,03)]%b-%bTreasure%bIsland%b%b[isat(%#,04)]%b-%bThe%bWharf%r%b|%b%b\\%b%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b[isat(%#,08)]--[isat(%#,09)]%b%b%b[isat(%#,05)]%b-%bTelegraph%bHill%b%b%b[isat(%#,06)]%b-%bThe%bPresidio%r%b|%b%b%b\\%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b%b%b|%b%b%b[isat(%#,07)]%b-%bMarina%b%b%b%b%b%b%b%b%b%b%b[isat(%#,08)]%b-%bRussian%bHill%r%b|%b%b%b%b\\%b%b|%b%b%b%b%b%b%b%b%b%b[isat(%#,10)]------[isat(%#,11)]--[isat(%#,12)]%b%b%b[isat(%#,09)]%b-%bNorth%bBeach%b%b%b%b%b%b[isat(%#,10)]%b-%bPacific%bHeights%r%b|%b%b%b%b%b\\%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b%b%b|%b%b%b[isat(%#,11)]%b-%bNob%bHill%b%b%b%b%b%b%b%b%b[isat(%#,12)]%b-%bChinatown%r%b|%b%b%b/--[isat(%#,16)]----------[isat(%#,13)]%b%b%b%b%b%b%b|%b%b14%b%b%b[isat(%#,13)]%b-%bJapantown%b%b%b%b%b%b%b%b[isat(%#,14)]%b-%bFinancial%bDist.%r%b|%b%b/%b%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b/%b%b%b%b%b[isat(%#,15)]%b-%bLincoln%bPark%b%b%b%b%b[isat(%#,16)]%b-%bRichmond%r%b|%b/%b%b%b%b%b|%b%b%b%b%b%b%b%b%b%b[isat(%#,17)]%b%b%b%b%b%b[isat(%#,18)]====%b%b%b[isat(%#,17)]%b-%bWestern%bAddition%b[isat(%#,18)]%b-%bSOMA%b(Upper)%r%b|/%b%b%b%b%b%b|%b%b%b%b%b%b%b%b/%b%b%b%b\\%b%b%b%b%b|%b%b%B%B%B%b%b[isat(%#,19)]%b-%bOcean%bBeach%b%b%b%b%b%b[isat(%#,20)]%b-%bGG%bPark%b(West)%r[isat(%#,19)]--[isat(%#,20)]--[isat(%#,21)]--[isat(%#,22)]--[isat(%#,23)]------[isat(%#,33)]--[isat(%#,24)]%b%b%b%b%b%b%b[isat(%#,21)]%b-%bGG%bPark%b(Cent)%b%b%b[isat(%#,22)]%b-%bGG%bPark%b(East)%r%b%b\\%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b\\%b%b%b%b%b|%b/%b|%b%b%b%b%b%b%b[isat(%#,23)]%b-%bHaight-Ashbury%b%b%b[isat(%#,24)]%b-%bSOMA%b(Lower)%r%b%b%b-----[isat(%#,25)]------[isat(%#,26)]--[isat(%#,27)]--[isat(%#,28)]--[isat(%#,32)]%b%b%b%b%b%b%b[isat(%#,25)]%b-%bSunset%b%b%b%b%b%b%b%b%b%b%b[isat(%#,26)]%b-%bTwin%bPeaks%r%b%b[ifelse(match(ndir(%l),NORTH),%ch%ccN%cn,N)]%b%b%b%b%b%b%b%b%b%b%b%b%b%b|%b/%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b[isat(%#,27)]%b-%bCastro%b%b%b%b%b%b%b%b%b%b%b[isat(%#,28)]%b-%bMission%r%b%b|%b%b%b%b%b%b%b%b%b%b%b%b%b[isat(%#,29)]%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b[isat(%#,29)]%b-%bMt.%bDavidson%b%b%b%b%b[isat(%#,30)]%b-%bHarding%bPark%r[ifelse(match(wdir(%l),WEST),%ch%ccW%cn,W)]-[ifelse(match(dir(%l),NONE),%ch%cc*%cn,*)]-[ifelse(match(edir(%l),EAST),%ch%ccE%cn,E)]%b%b%b%b%b%b%b%b%b%b/%b%b\\%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b[isat(%#,31)]%b-%bGlen%bPark%b%b%b%b%b%b%b%b[isat(%#,32)]%b-%bPortero%r%b%b|%b%b%b%b%b%b%b%b%b%b[isat(%#,30)]%b%b%b%b[isat(%#,31)]%b%b%b%b%b[space(8)]%b%b%b[isat(%#,33)]%b-%bFillmore%r%b%b[ifelse(match(sdir(%l),SOUTH),%ch%ccS%cn,S)]%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%R%R[rjust(%ch%crCurrent%BLocation:%cn%B[whereis(%l)]%B--%B[name(%l)][space(10)],80)]%R[header2()]
&DO.MAP2 Player Commands=$+map *:@pemit %#=switch(0,hasattr(#146,map%0),That is not a valid map area.,[header(Map: Section %0)]%R%ch%cwLocations Linked:%cn[iter(filter(fn.nosee,Lexits([setr(1,[u(#146/map%0)])])),%R%B%B[name(loc(##))][ifelse(hasattr(loc(##),number),%([u(loc(##)/number)]%),)])]%R%R[ifelse(match(%q1,loc(%#)),You are,You are not)] in that location.%R[header3()])
&DO.TIME Player Commands=$+time:@pemit %#=%ch%cb%B[repeat(_,38)]%cn%r%ch%cb|%cn[center([switch([extract(vtime(),1,1)],Fri,Friday,Sat,Saturday,Sun,Sunday,Mon,Monday,Tue,Tuesday,Wed,Wednesday,Thu,Thursday)],38,)]%ch%cb|%cn%R%ch%cb|%cn[center([switch([extract(vtime(),2,1)],Aug,August,Jan,January,Feb,February,Mar,March,May,May,Jun,June,Jul,July,Sep,September,Nov,November,Dec,December,Oct,October,Apr,April)] [extract(vtime(),3,1)]\, [season()],38)]%ch%cb|%cn%R%ch%cb|%cn[center(In the year [extract(vtime(),5,1)].,38)]%ch%cb|%cn%R%ch%cb|%cn[center(At [ptime()] -- [timeofday()],38)]%ch%cb|%cn%R%ch%cb|%cn[center(Moon Phase: [u(#699/fn_moon)],38)]%ch%cb|%cn%R%ch%cb+[repeat(-,38)]+%cn
&DO.WEATHER Player Commands=$+weather:@pemit %#=[header(Current Weather)]%R%B[ljust(IC Time & Date:,20)] [vtime()]%R%R%T[u(#700/[u(#700/current_weather)])] [u(#700/[u(#700/current_wind)])]%R[header3()]
&DO.VIEW Player Commands=$+view:@switch [words(lattr(%l/view_*))]=0,{@pemit %#=No views present on [name(%l)] %(%l%).},{@pemit %#=[header(Views Present on %(%l%))][iter(lattr(%l/view_*),%R[capitalize(after(##,_))])]%R[header2()]}
&DO.VIEW2 Player Commands=$+view *:@switch hasattr(%l,View_%0)=1,{@pemit %#=[header(View: %0)]%R[u(%l/view_%0)]%R[header2()]},{@pemit %#=No view with that name in this room.}
&DO.UVIEW Player Commands=$+uview:@switch hasflag(%#,Umbra)=1,{@switch [words(lattr(%l/view_*))]=0,{@pemit %#=No views present on [name(%l)] %(%l%).},{@pemit %#=[header(Views Present on %(%l%))][iter(lattr(%l/view_*),%R[capitalize(after(##,_))])]%R[header2()]}}},{@pemit %#=Use +view.}
&DO.UVIEW2 Player Commands=$+uview *:@switch hasflag(%#,umbra)=1,{@switch hasattr(%l,View_%0)=1,{@pemit %#=[header(View: %0)]%R[u(%l/view_%0)]%R[header2()]},{@pemit %#=No view with that name in this room.}}},{@pemit %#=Use +view %0.}
&DO.TIME.SHORT Player Commands=$+stime:@Pemit %#=It is now [ptime()]\, [switch([extract(vtime(),1,1)],Fri,Friday,Sat,Saturday,Sun,Sunday,Mon,Monday,Tue,Tuesday,Wed,Wednesday,Thu,Thursday)]\, [switch([extract(vtime(),2,1)],Aug,August,Jan,January,Feb,February,Mar,March,May,May,Jun,June,Jul,July,Sep,September,Nov,November,Dec,December,Oct,October)] [extract(vtime(),3,1)]\, [extract(vtime(),5,1)].
&DO.FEATURES Player Commands=$+features:@pemit %#=[header(Global List Of Features)]%R[ljust(Num,4)][ljust(Contact,15)][ljust(Status,15)]Concept%R[header2()][iter(lattr(#36/ftr.*),%R[ljust(#@,4)][ljust([extract([setr(0,[u(#36/##)])],1,1,|)],15)][ljust([extract(%q0,2,1,|)],15)][ljust([extract(%q0,3,1,|)],30)])]%R[header2()]%T+features <number> for more information.%R[header3()]
&DO.MONEY Player Commands=$+money:@pemit %#=You have [money2(%#)].00 on your person.
&DO.AURA.TARGET Player Commands=$+aura *:@pemit %#=[switch([setq(0,locate(%#,%0,n))][u(fn.seeaura,%#)]:%q0,0:*,{You cross your eyes, but can't see anything unusual.},?:#-1,{You see the distinctive aura of empty air.},?:#-2,{You get confused trying to look at two auras at once.},[name(%q0)]'s auras:[setq(1,ulocal(fn.check.list,%q0,%#))][switch(%q1,None,%rNone,[iter(%q1,%r[first(##,:)][repeat(%b,sub(32,strlen(first(##,:))))]-%t[rest(##,:)],|)])])];@scan %cc%chAURA:%cn %N scans [name(%q0)]'s aura.
&DO.AURA Player Commands=$+aura:@pemit %#=[header2()]%R[center(Current auras,80)]%R[header2()][iter(get(%#/auras),%r[first(##,:)][repeat(%b,sub(32,strlen(first(##,:))))]-%t[rest(##,:)],|)]%R[header2()]
&DO.AURA.HELP Player Commands=$+aura/help:@pemit %#=[header2()]%R[center(Aura Help,80)]%R[header2()]%r+aura%t%t%t%t-%tshow current personal auras%r+aura <thing>%t%t%t-%tcheck auras of <thing>%r%r+aura/help%t%t%t-%tshow help on +aura%r+aura/list%t%t%t-%tlist all available auras%r+aura/add <aura>%t%t-%tadd <aura> to your aura%r+aura/remove <aura>%t%t-%tremove <aura> from your aura%r[header2()]
&DO.AURA.LIST Player Commands=$+aura/list:@pemit %#=[header2()]%R[center(Available auras,78)]%R[header2()][iter(ulocal(fn.available,%#),%r[first(##,:)][repeat(%b,sub(32,strlen(first(##,:))))]-%t[rest(##,:)],|)]%R[header2()]
&DO.AURA.ADD Player Commands=$+aura/add *:@switch/first [setq(0,ulocal(fn.available,%#))] %0=[setq(1,match(%q0,%0:*,|))]%q1,{@pemit %#=Sorry, but there is no aura '%0' available to you.},{&auras %#=[setq(2,setunion(get(%#/auras),extract(%q0,%q1,1,|),|))][switch(mid(%q2,0,1),|,rest(%q2,|),%q2)];@pemit %#=You add '%0' to your auras.}
&ATTRIBUTES Player Commands=Appearance Charisma Wits Manipulation Perception Dexterity Stamina Strength Intelligence
&TRIG.HS.VAMPIRE Player Commands=@switch [gte([stat(%0,disc,Auspex)],1)][hasflag(%0,hss)]=0*,{@pemit %0=You don't have any Auspex.},10,{@pemit %0=You activate your Auspex.;@flag %0=hear;@set %0=HSS;&hss_level %0=[stat(%0,disc,Auspex)]},11,{@pemit %0=You deactivate your Auspex.;@set %0=!HSS;&hss_level %0=;@flag %0=!hear}
&DO.HSS Player Commands=$+hs:@trig me/trig.hs.[u(%#/race)]=%#
&TRIG.HEAR.VAMPIRE Player Commands=@switch [or([gte([stat(%0,m&f,Acute Hearing)],1)],[gte([stat(%0,m&f,Acute Senses)],1)],[not([gte(match(Human Mist,[text(%0,info,Form)]),1)])])][hassflag(%0,hear)]=0?,{@pemit %0=You have no way of activating your heightened hearing.},10,{@pemit %0=You have activated your heightened hearing.;@flag %0=hear},11,{@pemit %0=You have deactivated your heightened hearing.;@flag %0=!Hear}
&DO.HEARING Player Commands=$+hear:@trig me/trig.hear.[u(%#/race)]=%#
&DO.MEET-OFFER Player Commands=$+meetme *:&meetme *%0=%#;@pemit %#=You offer to meet %0.;@pemit *%0=[u(msg-meetme,%N)];@wait 300=&meetme *%0=
&DO.MJOIN Player Commands=$+mjoin *:@switch [u(%#/meetme)]=[num(*%0)],@tel %#=[loc(*%0)],@pemit %#={You have no meetme attribute, perhaps the invitation ran out of time or you misspelled the name.}
&DO.MSUMMON Player Commands=$+msummon *:@switch [u(%#/meetme)]=[num(*%0)],@tel *%0=%l,@pemit %#={You have no meetme attribute, perhaps the invitation ran out of time or you misspelled the name.}
&DO.MDECLINE Player Commands=$+mdecline *:@switch [u(%#/meetme)]=[num(*%0)],@pemit *%0=%N declines your invitation to meet.[set(%#,MEETME:)],@pemit %#={You have no meetme attribute, perhaps the invitation ran out of time or you misspelled the name.}
&DO.HANGOUTS Player Commands=$+hangouts:@pemit %#=[header(Public Hangouts)]%R#%B%B%B[ljust(Name,40)][center(DBREF,10)][Center(Populous,10)]%B%BStatus%R[header2()];@pemit %#=[list(u(hangouts),[u(hangout.fmt,##,#@)])];@pemit %#=[header3()]
&DO.HTEL Player Commands=$+htel *:@switch [gte([words(u(hangouts))],%0)]=0,{@pemit %#=That isn't a valid Hangout.},1,{@pemit %#=You take off to [name([extract(u(hangouts),%0,1)])].;@oemit %#=<Hangout> %N takes off to a Hangout.;@wait 1=@tel %#=[extract(u(hangouts),%0,1)]}
&DO.TAXI Player Commands=$+taxi:[setq(0,[extract(lcon(#793),add(rand(words(lcon(#793))),1),1)])];@switch [gte(match(u(taxi-rooms),%l),1)]=0,{@pemit %#=You can't call a cab from here.},{@pemit %#=You call a cab.;@oemit %#=%N sticks %p hand out to flag down a cab.;@wait 3=@tel %q0=%l;@wait 3=@trig %q0/arrive=%N}
&DO.SHEET Player Commands=$+sheet*:@pemit %#=switch(0,or(match(setr(0,switch(rest(X%0),me,%#,,%#,num(*[rest(X%0)]))),%#) ,[isstaff(%#)]),Permission denied.,isdbref(%q0),I don't see that here.,hasattr(%q0,dat.TIMESTAMP),ifelse(match(%#,%q0),You have,name(%q0)(%q0) has) no stats.,not(and(words(setr(1,first(rest(%0,/)))),words(setdiff(setr(6,iter(%q1,##,/)),setr(2,get(#790/SWITCHES)))))),That is not a valid switch.%rValid switches are: [iter(%q2,/##)].%rYou may use more than one switch,%ch%cb-=--=-%B%cr[mudname()]:%BCharacter%bSheet%cg%b[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%cn[iter(ifelse(words(%q6),%q6,[ifelse(hasattr(%#,sheet),[u(%#/sheet)],[u(#790/sheet_list)])]),ifelse(hasattr(%q0,dat.##),ifelse(%q8,%r%q4%q4%cn,setq(8,1))[ulocal(#790/st.##,%q0)],))]%r%q4%q4%R%B%B%B[ifelse(Hasattr(%q0,dat.approved),%chApproved:%cn%B[u(%q0/Dat.approved)],%chChargen Started:%cn%B[u(%q0/dat.timestamp)])]%R%q4%q4)
&DO.FEATURE.INFO Player Commands=$+features *:[setq(0,[extract([lattr(#36/ftr.*)],%0,1)])];@switch [gte(words(lattr(#36/ftr.*)),%0)]=0,{@pemit %#=That isn't a valid feature posting.},1,{@pemit %#=[header2()]%R[ljust(Concept:,18)][extract([setr(1,[u(#36/%q0)])],3,1,|)]%R[ljust(Date Posted:,18)][extract(%q1,4,1,|)]%R[ljust(Contact:,18)][extract(%q1,1,1,|)]%R[ljust(Level:,18)][extract(%q1,2,1,|)]%R[ljust(Description:,18)][extract(%q1,5,1,|)]%R[header2()]}
&DO.XP.SHEET Player Commands=$+xp*:[setq(0,switch(rest(X%0),me,%#,,%#,num(*[rest(X%0)])))];@switch [or(match(%q0,%#) ,[isstaff(%#)])]=0,{@pemit %#=Permission Denied.},1,{@pemit %#=[header2()]%R[ljust(Name:,10)][name(%q0)] %(%q0%)%R[ljust(Current XP: [stat2(%q0,xpdata,Current)],25)][ljust(Total XP: [stat2(%q0,xpdata,Total)],25)][ljust(Vote Value: [ifelse([gte([stat2(%q0,xpdata,plusvote)],1)],[stat2(%q0,xpdata,Plusvote)],1)],25)]%R[ljust(Reccs:,10)][add([words([u(%q0/reccs)],|)],[words([u(%q0/areccs)],|)])]%R[ljust(Voted For:,12)]%R%B[iter([u(%q0/voted4)],[ljust([name(##)] %(##%),25)][ifelse([mod(#@,3)],,%R)],|)]%R[header(XP & Recc Report)]}
&DO.VOTE Player Commands=$+vote *:[setq(0,[num(*%0)])];@switch [isdbref(%q0)][isstaff(%#)][match(%q0,%#)][gt(match(get(%q0/sites),*[U(%#/lastsite)]*),0)][hasattr(%#,dat.approved)][hasattr(%q0,dat.approved)][gte([match(u(%#/voted4),%q0,|)],1)]=0*,{@pemit %#=I don't see that here.},11?????,{@pemit %#=%chVOTE:%cn You vote for [name(%q0)].[xp(%q0,[ifelse([gte([stat2(%q0,XPdata,Plusvote)],1)],[stat2(%q0,xpdata,plusvote)],1)],ADD)]},101????,{@pemit %#=%chVOTE:%cn You can't vote for yourself.},1001???,{@pemit %#=%chVOTE:%cn You can't vote for someone from the same site as you.},10000??,{@pemit %#=%chVOTE:%cn You aren't approved, so you may not vote.},100010?,{@pemit %#=%chVOTE:%cn [name(%q0)] is not approved yet.},1000111,{@pemit %#=%chVOTE:%cn You have already voted for [name(%q0)] try a recc. %(+help/vote Recc%).},1000110,{@pemit %#=%chVOTE:%cn You vote for [name(%q0)].[xp(%q0,[ifelse([gte([stat2(%q0,XPdata,Plusvote)],1)],[stat2(%q0,xpdata,plusvote)],1)],ADD)];&voted4 %#=[ifelse(hasattr(%#,voted4),[setunion([u(%#/voted4)],%q0,|)],%q0)];@switch [hassflag(%q0,VOTED)]=1,{@pemit %q0=%chVOTE:%cn You just recieved a vote.}}
&DO.RECC Player Commands=$+recc *=*:[setq(0,[num(*%0)])];@switch [isstaff(%#)][match(%q0,%#)][gt(match(get(%q0/sites),*[U(%#/lastsite)]*),0)][hasattr(%q0,dat.approved)][hasattr(%#,dat.approved)]=1????,{@pemit %#=%chRECC:%cn You do not need to use +recc.},01???,{@pemit %#=%chRECC:%cn You can't +recc yourself.},001??,{@pemit %#=%chRECC:%cn You can't +recc someone from your site.},0000?,{@pemit %#=%chRECC:%cn [name(%q0)] is not approved.},00000,{@pemit %#=%chRECC:%cn You aren't approved.},00011,{@pemit %#=%chRECC:%cn Your +recc for [name(%q0)] has been registered.;&reccs %q0=[ifelse(hasattr(%q0,reccs),[u(%q0/reccs)]|%#^[secs()]^%1,%#^[secs()]^%1)]}
&DO.RECC.ANON Player Commands=$+recc/anon *=*:[setq(0,[num(*%0)])];@switch [isstaff(%#)][match(%q0,%#)][gt(match(get(%q0/sites),*[U(%#/lastsite)]*),0)][hasattr(%q0,dat.approved)][hasattr(%#,dat.approved)]=1????,{@pemit %#=%chRECC:%cn You do not need to use +recc.},01???,{@pemit %#=%chRECC:%cn You can't +recc yourself.},001??,{@pemit %#=%chRECC:%cn You can't +recc someone from your site.},0000?,{@pemit %#=%chRECC:%cn [name(%q0)] is not approved.},00000,{@pemit %#=%chRECC:%cn You aren't approved.},00011,{@pemit %#=%chRECC:%cn Your anonymous +recc for [name(%q0)] has been registered.;&areccs %q0=[ifelse(hasattr(%q0,areccs),[u(%q0/areccs)]|%#^[secs()]^%1,%#^[secs()]^%1)]}
&VOTED4.CLEAR Player Commands=wait 604800=@trig me/voted4.clear;@scan %ch%[VOTE%]%cn Voted for attributes are being cleared.;@dolist [search(type=players)]={&voted4 ##=}
@Startup Player Commands=@trig me/voted4.clear;@trig me/looper
&HANGOUTS Player Commands=#1405 #1459 #1725 #1735 #176 #1920 #1931 #205 #2211 #2227 #448 #596 #662 #67 #70 #730 #777 #807 #832 #842
&DO.ANSI.COMS Player Commands=$ansicomtitle *=*:@force %#=comtitle %0=%1
&DO.HELPERS Player Commands=$+helpers:@pemit %#=[header(Connected Helpers)]%R[ljust(Name,25)][ljust(Alias,10)][ljust(Idle,10)]Helps With%R[header2()];@pemit %#=[list(filter(fn.helper,lwho()),[u(fmt.helper,##)])];@pemit %#=[header3()]
&DO.HELPERS.ALL Player Commands=$+helpers/all:@pemit %#=[header(Connected Helpers)]%R[ljust(Name,25)][ljust(Alias,10)][ljust(Idle,10)]Helps With%R[header2()];@pemit %#=[list(filter(fn.helper,[search(Type=players)]),[u(fmt.helper,##)])];@pemit %#=[header3()]
&TRIG.HEAR.MAGE Player Commands=@switch [or([gte([stat(%0,m&f,Acute Hearing)],1)],[gte([stat(%0,m&f,Acute Senses)],1)])][hassflag(%0,hear)]=0?,{@pemit %0=You can't activate non-magickal hearing.},10,{@pemit %0=You activate your acute hearing.;@flag %0=HEAR},10,{@pemit %0=You deactivate your acute hearing.;@flag %0=!hear}
&DO.HANGUPQ Player Commands=$hangupq:@switch u(%#/tstatus)=inactive,{@pemit %#=OOC: Your cellular is already hung up.},{@Fo %#=@oemit %#=%N clicks %p cellular to disconnect the call and hangs up.;@pemit %#=You hang up your phone.;&called %#;&tstatus %#=inactive}
&DO.GRUFF Player Commands=$gruff ?*:@switch u(%#/tstatus)=active,{@Pemit %#=(Gruffly into the phone) [switch(%0,:,%N %1,\;,%N%1,|,%1,You say "%0%1")];@pemit [u(%#/called)]=<Phone> [switch(%0,:,Someone %1,\;,Someone%1,|,%1,A gruff voice says "%0%1")]},{@pemit %#=OOC: You haven't called anyone yet.}
&DO.TALKQ Player Commands=$talkq ?*:@switch u(%#/tstatus)=active,{@pemit %#=(Quietly into the phone) [switch(%0,:,%N %1,\;,%N%1,|,%1,You say "%0%1")];@pemit [u(%#/called)]=<Phone> [switch(%0,:,%N %1,\;,%N%1,|,%1,%N says quietly "%0%1")]},{@pemit %#=OOC: You haven't called anyone yet.}
&DO.TALK Player Commands=$talk ?*:@switch [setq(0,switch(%0,:,%N %1,\;,%N%1,|,%1,%N says "%0%1"))]u(%#/tstatus)=active,{@fo %#=@oemit %#=(Directed into the phone) %q0;@pemit %#=(Directed into the phone) %q0;@pemit [u(%#/called)]=<Phone> %q0},{@pemit %#=OOC: You haven't called anyone yet.}
&DO.UNLISTED Player Commands=$unlisted *:[setq(0,num(*%0))];@switch/first %q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named '%0'.},%#:*,{@pemit %#=OOC: You can't do that.},*:PLAYER,{@pemit %#=OOC: [name(%q0)] is unable to get through as you're unlisted.;@pemit %q0=<Phone> An operator picks up: "I'm very sorry, but if the person you're trying to reach is one of our customers, they've asked to be unlisted for privacy reasons."},{@pemit %#=OOC: I can't find a player named '%0'.}
&DO.DIAL Player Commands=$dial *:[setq(0,[num(*%0)])];@switch %q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named '%0'.},%#:*,{@pemit %#=OOC: You cannot call yourself.},*:PLAYER,{@fo %#=@emit %N picks up %p cellular phone and begins to dial.;@wait 4=@pemit %#=<Phone> You hear the phone ringing at the other end.;@wait 6=@switch [hasflag(%q0,CONNECTED)]=0,{@pemit %#=<Phone> The phone rings and rings at the other end, but there's no answer.%ROOC: [name(%q0)] is currently disconnected.},{@pemit %q0=[repeat(-,78)]%RYour phone (or possibly another nearby) rings if you are ICly anywhere near it.%ROOC: Type 'answer %N' - or 'options' - if you have a coded cellular, or page %N to reply. Note that those about you cannot hear this message and you may wish to rp the phone ringing.%R[repeat(-,78)];&tstatus %#=active;&called %#=%q0}},{@pemit %#=OOC: I can't find a player named '%0'.}
&DO.PHONEHELP3 Player Commands=$phonehelp3:@pemit %#=[repeat(=,78)]%R[center(- - - Cellular Phone Configuration - - -,78)]%R[repeat(-,78)]%RThis code is designed with the intent to simulate personal cellular phones that would normally be carried by an individual. Phones can be desc-ed to look like any style you want. All phones should be uselocked (see below) to keep other characters from using them inadvertantly. The MESSAGE attribute below is optional, if you'd like to have a message emitted to people calling you on the 'rings' command.%R%R@desc phone=<what you want it to look like>%R@lock/uselock phone=me%R&MESSAGE phone=<message on your answering machine, if you have one>%R%RCellular phone code was written by William@Dublin (aka William Fitzhegh) - also known as Malrihn@Dublin. Suggestions, comments, ideas, and complaints should be forwarded appropriately. Thanks, and enjoy!!!%R[repeat(=,78)]
&DO.PHONEHELP2 Player Commands=$phonehelp2:@pemit %#=[repeat(=,78)]%R[center(- - - Cellular Phone Notes - - -,78)]%R[repeat(-,78)]%R* Talking on the Phone *%RAll of the talking commands: talk, talkq, and gruff make use of the standard pose/emit characters - namely (:,;,|) in the same manner as tabletalk . This allows you to pose and emit across the phone line.%R%R* Bugging & Being Overheard *%RCurrently no one can overhear you (unless you want them to) on the phone. Phones are not code-bugged in any way and are solely designed as an rp aid. It is always assumed, however, that the Garda can ICly bug phones as they see fit and should be cooperated with.%R%R* Leaving Messages *%RThis code assumes the use of the +mail system for leaving messages on people's machines. To leave a message type: +mail <person>=Phone Message%R%R* Anonymous Calls *%RAlthough fairly secure, there are ways to OOCly ascertain identity through this phone system. At minimum if you want to make an anonymous call you should probably change your name (and +finger info) prior to making it. Gruff is also a good command for this sort of thing.%R%RType 'phonehelp3' for configuration information.%R[repeat(=,78)]
&DO.OPTIONS Player Commands=$options:@pemit %#=[repeat(=,78)]%ROptions: On Receiving a Call%R%RAnswer <person>%t%tanswer the phone when <person> calls you%RRing%t%t%temit _your_ phone ringing if someone calls you%R%RBusy <person>%t%tif your phone is busy/off the hook icly%RRings <person>%t%tif there's no answer and they should leave a message%RUnlisted <person>%tif your number is unlisted%R%RNote: <person> for all of these cases should be the person who called you.%R[repeat(=,78)]
&DO.HANGUP Player Commands=$hangup:@switch u(%#/tstatus)=inactive,{@pemit %#=OOC: You're cellular is already hung up.},{@fo %#=@emit %N clicks %p cellular to disconnect the call and hangs up.;@pemit [u(%#/called)]=<Phone> There is a click as the phone at the far end is hung up.;&called %#;&tstatus %#=inactive}
&DO.RINGS Player Commands=$rings *:[setq(0,num(*%0))];@switch/first %q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named '%0'.},%#:*,{OOC: You can't do that.},*:PLAYER,{@pemit %#=[switch(u(%#/message),,OOC: Your phone rings and rings - but no one's there to pick up.,OOC: Your phone rings and rings before the answering machine picks up.)];@pemit %q0=<Phone> The phone at the far end rings and rings, but there's no answer.[switch(u(%#/message),,,{%bAfter a moment an answering machine picks up: (OOC: @mail %N to leave a message.)%R%R[space(5)]"[u(%#/message)]"})]},{@pemit %#=OOC: I can't find a player named '%0'.}
&DO.BUSY Player Commands=$busy *:[setq(0,num(*%0))];@switch/first %q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named '%0'.},%#:*,{@pemit %#=OOC: You can't do that.},*:PLAYER,{@pemit %#=OOC: Your line is busy.;@pemit %q0=<Phone> After a moment, you receive a busy signal from the far end.%RPossibly %N's phone is in use or is off the hook.},{@pemit %#=OOC: I can't find a player named '%0'.}
&DO.ANSWER Player Commands=$answer *:[setq(0,num(*%0))];@switch/first %q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named '%0'.},%#:*,{@pemit %#=OOC: You cannot call yourself.},*:PLAYER,{@switch hasflag(%q0,CONNECTED)=0,{@pemit %#=OOC: That person is currently disconnected.},{@fo %#=@emit %N removes %p cellular, flipping it open to answer the call.;@pemit %#=<Phone> You hear a click as the line is established.;@pemit %q0=<Phone> The phone is picked up at the far end.;&tstatus %#=active;&called %#=%q0}},{@pemit %#=OOC: I can't find a player named '%0'.}
&DO.RING Player Commands=$ring:@fo %#=@emit [switch(rand(4),0,{%N's cellular suddenly begins to ring!!},1,{A nearby phone begins to ring - it seems to be coming from %N.},2,{A phone somewhere nearby begins to ring - it appears to be %N's.},{%N's cellular phone begins to ring.})]
&DO.PHONEHELP Player Commands=$phonehelp:@pemit %#=[repeat(=,78)]%R[center(- - - Cellular Phone Commands - - -,78)]%R[repeat(-,78)]%RDial <person>%t%tcall someone on your cellular%R%RAnswer <person>%t%tanswer the phone when <person> calls you%RRing%t%t%temit _your_ phone ringing for anyone nearby%RBusy <person>%t%tif your phone is busy/off the hook when called%RRings <person>%t%tif there's no answer at your phone when called%RUnlisted <person>%tif your number is unlisted when called%R%RTalk <pose/speak>%ttalk into your cellular (you can be overheard)%RTalkq <pose/speak>%ttalk quietly into your cellular (cannot be overheard)%RGruff <pose/speak>%ttalk in an unrecognizeable voice%R%RHangup%t%thangup your phone (emits to both ends of the line)%RHangupq%t%thangup the phone (emits to your end only)%R%RType 'phonehelp2' for further information.%R[repeat(=,78)]
&DO.IC Player Commands=$+ic:@switch [or([isapp(%#)],[isstaff(%#)])][hassflag(%#,IC)]=0?,{@pemit %#=You aren't approved yet, so you may not go +IC yet.},10,{@pemit %#=You go to the world of ICness.;@flag %#=IC;@flag %#=!OOC;@tel %#=[ifelse(hasattr(%#,lastic),[u(%#/lastic)],#224)]},11,{@pemit %#=You are already IC!}
&DO.OOC.TEL Player Commands=$+ooc:@switch [or([isapp(%#)],[isstaff(%#)])][hassflag(%#,OOC)]=0?,{@pemit %#=You aren't approved yet, so you may not go +OOC yet.},10,{@pemit %#=You go Out Of Character.;@fo %#=@oemit %#=%ch<OOC>%cn %N goes out of character.;@flag %#=!IC;@flag %#=OOC;&lastic %#=%l;@tel %#=#6},11,{@pemit %#=You are already Out Of Character!}
&DO.INFLUENCE.SHEET Player Commands=$+influence*:@switch %0=/*,,{@pemit %#=switch(0,or(match(setr(0,switch(rest(X%0),me,%#,,%#,num(*[rest(X%0)]))),%#) ,[isstaff(%#)]),Permission denied.,isdbref(%q0),I don't see that here.,hasattr(%q0,Influence),ifelse(match(%#,%q0),You don't,name(%q0)(%q0) doesn't) have any influence.,%ch%cb-=--=-%B%cr[mudname()]:%BInfluence%bSheet%cg%b[setq(4,[repeat(%ch%cb-%ch%cb=%ch%cb-,13)])]%q4%R[ljust([ljust(Name:,10)][name(%q0)] %(%q0%),35)]Influence Background: [stat(%q0,background,Influence)]%R%q4%q4[u(line3,%q0,Influence,Influence)]%R%q4%q4)}
&LINE3 Player Commands=[setq(5,[words(get(%0/%1),|)])]%r[center(%ch%cb|%cn[center(%ch%cw%2%B,25)]%ch%cb|%cn,76)][iter([sortby(fn.sortby,get(%0/%1),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),19)][ljust([last(##,~)],5)][ifelse(mod(#@,3),%ch%cb|%cn,)],|)][ifelse(dec(mod(%q5,3)),,[space(25)]%ch%cb|%cn)]
&INF Player Commands=#711
&DO.INFLUENCE.LIST Player Commands=$+influence/list:@pemit %#=[header(Global Influence List)]%R[ljust(Type,8)][ljust(Code,8)][ljust(FullName,25)][ljust(Total Taken,15)]Total Available%R[header2()];@pemit %#=[list([sortby(fn.sortby,[u(u(inf)/list)],|)],[u([u(inf)]/fmt.inf,##)],|)];@pemit %#=[header3()]
&DO.INFLUENCE.ACTION Player Commands=$+influence/action *=*:[setq(1,[u(#711/actions)])];@pemit %#=You register your request for an influence action.;&ia.%q1 #711=%#|[time()]|[vtime()]|[capitalize(%0)]|%1;&actions #711=[add(%q1,1)];@scan %chINFLUENCE:%cn A new influence action has be recorded.
&DO.SPEND.WILLPOWER Player Commands=$+spend willpower:@switch [gte([before([stat(%#,pool,willpower)],/)],1)]=0,{@pemit %#=You don't have enough Willpower to spend.},{@pemit %#=You spend a point of willpower.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent 1 willpower point.[willpower(%#,1,SUB)];@scan %ch%ccSPEND:%cn %N just spent 1 willpower point.}
&DO.SPEND.WILLPOWER2 Player Commands=$+spend willpower=*:@switch [gte([before([stat(%#,pool,willpower)],/)],%0)]=0,{@pemit %#=You don't have enough Willpower to spend.},{@pemit %#=You spend %0 points of willpower.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent %0 willpower points.[willpower(%#,%0,SUB)];@scan %ch%ccSPEND:%cn %N just spent %0 willpower points.}
&DO.SPEND.BLOOD Player Commands=$+spend blood:@switch [u(canspend.blood,%#)]=1,{@switch [gte([before([stat(%#,pool,blood)],/)],1)]=0,{@pemit %#=You don't have enough Blood to spend.},{@pemit %#=You spend a point of blood.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent 1 blood point.[blood(%#,1,SUB)];@scan %ch%ccSPEND:%cn %N just spent 1 blood point.}},{@pemit %#=Permission Denied.}
&DO.SPEND.BLOOD2 Player Commands=$+spend blood=*:@switch [u(canspend.blood,%#)]=1,{@switch [gte([before([stat(%#,pool,blood)],/)],%0)]=0,{@pemit %#=You don't have enough Blood to spend.},{@pemit %#=You spend %0 points of blood.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent %0 blood points.[blood(%#,%0,SUB)];@scan %ch%ccSPEND:%cn %N just spent %0 blood points.}},{@pemit %#=Permission Denied.}
&CANSPEND.BLOOD Player Commands=[or([isstaff(%0)],[vampire(%0)])]
&DO.SPEND.RAGE Player Commands=$+spend rage:@switch [u(canspend.rage,%#)]=1,{@switch [gte([before([stat(%#,pool,rage)],/)],1)]=0,{@pemit %#=You don't have enough Rage to spend.},{@pemit %#=You spend a point of rage.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent 1 rage point.[rage(%#,1,SUB)];@scan %ch%ccSPEND:%cn %N just spent 1 rage point.}},{@pemit %#=Permission Denied.}
&DO.SPEND.RAGE2 Player Commands=$+spend rage=*:@switch [u(canspend.rage,%#)]=1,{@switch [gte([before([stat(%#,pool,rage)],/)],%0)]=0,{@pemit %#=You don't have enough rage to spend.},{@pemit %#=You spend %0 points of rage.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent %0 rage points.[rage(%#,%0,SUB)];@scan %ch%ccSPEND:%cn %N just spent %0 rage points.}},{@pemit %#=Permission Denied.}
&CANSPEND.RAGE Player Commands=[or([isstaff(%0)],[shifter(%0)])]
&DO.SPEND.GNOSIS Player Commands=$+spend gnosis:@switch [u(canspend.rage,%#)]=1,{@switch [gte([before([stat(%#,pool,gnosis)],/)],1)]=0,{@pemit %#=You don't have enough gnosis to spend.},{@pemit %#=You spend a point of gnosis.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent 1 gnosis point.[gnosis(%#,1,SUB)];@scan %ch%ccSPEND:%cn %N just spent 1 gnosis point.}},{@pemit %#=Permission Denied.}
&DO.SPEND.GNOSIS2 Player Commands=$+spend gnosis=*:@switch [u(canspend.rage,%#)]=1,{@switch [gte([before([stat(%#,pool,gnosis)],/)],%0)]=0,{@pemit %#=You don't have enough gnosis to spend.},{@pemit %#=You spend %0 points of gnosis.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent %0 gnosis points.[gnosis(%#,%0,SUB)];@scan %ch%ccSPEND:%cn %N just spent %0 gnosis points.}},{@pemit %#=Permission Denied.}
&DO.SPEND.QUINT Player Commands=$+spend quintessence:@switch [u(canspend.quint,%#)]=1,{@switch [gte([before([stat(%#,pool,quintessence)],/)],1)]=0,{@pemit %#=You don't have enough quintessence to spend.},{@pemit %#=You spend a point of quintessence.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent 1 quintessence point.[quint(%#,1,SUB)];@scan %ch%ccSPEND:%cn %N just spent 1 quintessence point.}},{@pemit %#=Permission Denied.}
&DO.SPEND.QUINT2 Player Commands=$+spend quintessence=*:@switch [u(canspend.quint,%#)]=1,{@switch [gte([before([stat(%#,pool,quintessence)],/)],%0)]=0,{@pemit %#=You don't have enough quintessence to spend.},{@pemit %#=You spend %0 points of quintessence.;@fo %#=@oemit %#=%ch%cb<<OOC>>%cn %N has just spent %0 quintessence points.[quint(%#,%0,SUB)];@scan %ch%ccSPEND:%cn %N just spent %0 quintessence points.}},{@pemit %#=Permission Denied.}
&CANSPEND.QUINT Player Commands=[or([isstaff(%0)],[mage(%0)],[familiar(%0)])]
&DO.MAP.STATIONS Player Commands=$+map/stations:@pemit %#=[header(Subway Station LIst)]%R%b01-----------------02----------03%b%b%b01%b-%bLincoln%bPark%bStation%b%r%b|%b\\%b%b%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b%b%b|%b%b%b02%b-%bMarina%bStation%r%b|%b%b\\%b%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|---|%b%b%b03%b-%bTelegraph%bHill%bStation%r%b|%b%b%b\\%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b%b%b|%b%b%b04%b-%bNob%BHill%BStation%r%b|%b%b%b%b\\%b%b|%b%b%b%b%b%b%b%b%b%b%b|------04---|%b%b%b05%b-%bRichmond%BStation%r%b|%b%b%b%b%b\\%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b%b%b|%b%b%b06%b-%bJapantown%bStation%r%b|%b%b%b/--05----------06%b%b%b%b%b%b%b|%b%b/%b%b%b%b07%b-%bOcean%bBeach%bStation%r%b|%b%b/%b%b%b%b|%b%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b/%b%b%b%b%b08%b-%bHaight-Ashbury%bStation%r%b|%b/%b%b%b%b%b|%b%b%b%b%b%b%b%b%b__|_%b%b%b%b%b%b|====%b%b%b09%b-%bLower%bSOMA%bStation%r%b|/%b%b%b%b%b%b|%b%b%b%b%b%b%b%b/%b%b%b%b\\%b%b%b%b%b|%b%b%b%b%b%b%b10%b-%bCastro%bStation%r07-------|-------08---------09%b%b%b%b%b%b%b11%b-%bMt.%bDavidson%bStation%r%b%b\\%b%b%b%b%b%b|%b%b%b%b%b%b%b|%b\\%b%b%b%b%b|%b/%b|%b%b%b%b%b%b%b%r%b%b%b-----------------10--------%b%b%b%b%b%b%b%r%b%bN%b%b%b%b%b%b%b%b%b%b%b%b%b%b|%b/%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b%r%b%b|%b%b%b%b%b%b%b%b%b%b%b%b%b11/%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b%rW-*-E%b%b%b%b%b%b%b%b%b%b/%b%b\\%b%b%b%b%b%b%b%b%b%b|%b%b%b%b%b%b%b%r%b%b|%b%b%b%b%b%b%b%b%b%b%b/%b%b%b%b\\%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%r%b%bS%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%b%R[header3()]
&DO.AMBOFF Player Commands=$ambiance off:@pemit %#=You will no longer hear any ambiance messages. Type 'ambiance on' to start hearing it again.;@flag %#=Nosound
&DO.AMBON Player Commands=$ambiance on:@pemit %#=You can now hear ambiance messages. Type 'ambiance off' to turn it off.;@flag %#=!nosound
&EMITTER Player Commands=@dolist [v(room_list)]=@pemit/list [filter(fn.nosound,[filter(fn.realmed,lcon(##))])]=[u(##/ambiance[add([rand([words([lattr(##/ambiance*)])])],1)])]
&LOOPER Player Commands=@wait [add(300,[rand(601)])]={@trigger me/emitter;@trigger me/looper}
&DO.APPLE Player Commands=$+apple *=*:@switch [isstaff([setr(0,[num(*%0)])])]=1,{@pemit %#=You give an apple to [name(%q0)].;@scan %ch%crAPPLE:%cn %N gave [name(%q0)] an apple for %1.;&apples.%q0 #36=[add([u(#36/apples.%q0)],1)];@fo #108=@mail/quick *staff/APPLE=Apple Giving%%R%%R%N gave [name(%q0)] an apple for %1.},{@pemit %#=That player isn't a staff member.}
&DO.INFO.SELF Player Commands=$+info:@pemit %#=[header(%N's Info.)]%R[iter(lattr(%#/info*),%R%B##:%R%t[u(%#/##)])]%R[header3()]
&DO.INFO.OTHER Player Commands=$+info *:[setq(0,[findpc(%0,%#)])];@switch [isstaff(%#)][isapp(%#)]=1?,{@pemit %#=[header([name(%q0)]'s Info)][iter(lattr(%q0/info*),%R%B##:%R%t[u(%q0/##)])]%R[header2()]},00,{@pemit %#=Only approved characters can use this command.},01,{@pemit %#=[header([name(%q0)]'s Information)][ifelse(hasattr(%q0,info-general),%R%chGeneral Information:%cn [u(%q0/info-general)],)][ifelse(hasattr(%q0,info-fame),%R%chFame Information:%cn [u(%q0/info-fame)],)][iter([u(#36/info.[edit([U(%#/race)],%B,_)],%#)],[ifelse(hasattr(%q0,info-[edit(text(%#,info,##),%B,_)]),%R%ch[text(%#,info,##)] Information:%cn%B[u(%q0/info-[edit(text(%#,info,##),%B,_)])],)])][ifelse([gte([stat(%#,abil,streetwise)],2)],[ifelse(hasattr(%q0,info-street),%R%chStreetwise Information:%cn [u(%q0/info-street)],)],)][iter([u(%#/loredat)],[ifelse(hasattr(%q0,info-##),%R%cg%ch[capitalize(##)] Information:%cn [u(%q0/info-##)],)])]%R[header2()]}
&DO.OOCNOTES Player Commands=$+oocnotes:@pemit %#=[header2()]%R[center(Players with OOC notes Set.,80)]%R[header2()];@pemit %#=[list([filter(hasnotes,[u(#705/Samerealm2,%#)])],[ljust(#@,4)][u(oocnote,##)])];@pemit %#=[header3()]
&HASNOTES Player Commands=[hasattr(%0,oocnotes)]
&OOCNOTE Player Commands=[name(%0)] has ooc notes set.
&DO.OOCNOTES.PLAYER Player Commands=$+oocnotes *:[setq(0,[num(*%0)])];@switch [hasattr(%q0,oocnotes)]=0,{@pemit %#=No OOC NOTES found.},{@pemit %#=[header([name(%q0)]'s OOC NOTES)]%R[u(%q0/oocnotes)]%R[header3()]}
&DO.DETAIL.OTHERL Player Commands=$+detail *'s *: @verb [setq(0,lattr(locate(%#,%0,in)/DETAIL_*))][setq(1,match(r(0), DETAIL_[setq(4,edit(trim(%1),%b,_))][r(4)]*))][switch(r(1), 0, setq(1,match(r(0),DETAIL_*_[r(4)]*)))][setq(2,extract(r(0), r(1),1))][setq(3,switch(r(2),,DETAIL_%1,r(2)))][locate(%#,%0,in)]=%#,[r(3)],I don't see that here.,O[r(3)],,A[r(3)],{%1,%#}
&DO.DETAIL Player Commands=$+detail *:@pemit %#=[setq(0,locate(%#,%0,in))][switch(r(0),#-1,There's no %0 here.,[switch(words(lattr(r(0)/DETAIL_*)),0,There's nothing of interest on %0.,Interesting items: [lcstr(iter(lattr(r(0)/DETAIL_*),%b[after(##,DETAIL_)]))])])]
&DO.INFO.NEED Player Commands=$+info/need:@pemit %#=[header2()]%r[center(What Info You need,80)]%R[header2()][ifelse(hasattr(%#,info-general),,%R%ch%crNEED:%cn General Info %(Required%) - &info-General me=<blah>)][ifelse(hasattr(%#,info-street),,%R%ch%crNEED:%cn Streetwise Info %(Required%) - &info-street me=<blah>)][iter([u(#36/info.[edit([U(%#/race)],%B,_)],%#)],[ifelse(not(match([edit(text(%#,info,##),%B,_)],0)),[ifelse(hasattr(%#,info-[edit(text(%#,info,##),%B,_)]),,%R%chNEED:%cn [capitalize(##)] Info %(Optional%) - &info-[edit(text(%#,info,##),%B,_)] me=<blah>)],)])]%R[header2()]
&DO.WARN Player Commands=$+warn *:[setq(0,[num(*%0)])];@pemit %q0=[header(WARNING!!!)]%R%TWarning!! Your behaivor IC may be leading to a potential conflicting situation. You have been +warned. Stop your actions ICly immediately unless you are consenting to a potentially lethal situation where you or another may be at risk of losing your PC in a combat. If you are concerned about this, you may contact a staff member or page the player who is warning you.%R%RThis warn was issued by: %N.%R[header(WARNING!!!)];@scan %ch%cmWARN:%cn %N just warned [name(%q0)].;@pemit %#=You warned [name(%q0)].
&NOWATCH Player Commands=#3
&DO.JUDGE Player Commands=$+judge *:@pemit %#=You call for a judge.;@scan %ch%cgJUDGE:%cn %N fills out a judge request.;&jdgr.[u(jdg)] #36=By~%#|Loc~%l|MUX~[secs()]|VR~[vsecs()]|Reason~%0;&jdg #26=[add([u(jdg)],1)];@dolist [filter(fn.nojudge,[sortby(fn.sortby2,[u(#36/command)])] [sortby(fn.sortby2,[u(#36/liason)])] [sortby(fn.sortby2,[u(#36/wizard)])] [sortby(fn.sortby2,[u(#36/admin)])] [sortby(fn.sortby2,[u(#36/judge)])] [sortby(fn.sortby2,[u(#36/story)])])]=@pemit ##=[header(Judge Request)]%R[ljust(Made By:,14)][name(%#)] <%#>%R[ljust(Race:,14)][u(%0/race)]%R[ljust(Location:,14)][name(%l)] <%l>%R[ljust(MUX Time:,14)][time()]%R[ljust(VR Time:,14)][vtime()]%R[ljust(Reason:,14)]%0%R[header2()]%R%T+judge/list for the respond number.%R[header2()]
@VZ Player Commands=1
&FN.NOJUDGE Player Commands=[not([hassflag(%0,NOJUdge)])]
&JDG Player Commands=1
&DO.KNOCK Player Commands=$+knock *:setq(3,first(%0,:)); setq(1,locate(%#,%q3,e)); setq(0,name(%q1)); setq(2,rest(%0,:)); @switch isdbref(%q1)=0,{@pemit %#=No such exit {%q3}},1,{@pemit/c %l=%N knocks at %q0[switch(words(%q2),0,.,%band shouts "%q2")]; @pemit/c loc(%q1)=A [switch(u(%#/sex),male,male%b,female,female%b)]voice knocks from [name(%l)][switch(words(%q2),0,.,%band shouts "%q2")]}
&DO_SHOUT Player Commands=$+shout *:@dolist lexits(%L)=@pemit/contents loc(##)=From [name(%L)] [switch(u(%#/SEX),M*,a male voice,F*,a female voice,someone)] shouts, "%0";@pemit/contents %L=%N shouts, "%0"
&BDY_AW Player Commands=$+resume:@dolist lcon(loc(%#))=@switch/first and(strmatch(first(name(##)),TIMESTOP:*),controls(%#,##))=1,{@nuke ##;@tel ##=#20}
&Z_CANTONESE Player Commands=$+timestop:@remit [loc(%#)]=%ch%cb<<< JUDGE >>>%cn %N calls a Timestop![setq(0,TIMESTOP: Created by %N on [time()])];@create %q0;@lock [setq(1,locate(me,%q0,iT))]%q1=#0;@set %q1=enter_ok;@set %q1=!opaque;@parent %q1=%vt;@set %q1=unfindable;@tel %q1=[loc(%#)];@scan %ch%cr>>> %q0 <<<%cn
@VT Player Commands=#1488
&DO.DIE Player Commands=$+die:@remit %L=%ch%cw\[ %N rolls a die and gets [add([rand(10)],1)]. \]%cn
&DO.WIZNOTES.LIST Player Commands=$+wiznote *:[setq(0,[findnum(%#,%0)])];@switch [isdbref(%q0)][hasattr(%q0,Wiznotes)]=0?,{@pemit %#=Are you sure that '%0' is correct?},10,{@pemit %#=There are no Wizard Notes on [name(%q0)].},11,{@pemit %#=[header2()]%R[ljust(%BWizard Note List,35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%R[header2()]%R[iter([u(%q0/wiznotes)],[ljust([extract(##,1,1,|)],26)][ifelse(mod(#@,3),,%r)],^)]%r[header2()]}
&DO.WIZNOTE.VIEW Player Commands=$+wiznote/view *:[setq(0,[findnum(%#,[extract(%0,1,1,:)])])];[setq(1,[extract(%0,2,1,:)])];[setq(3,match(get(%q0/WIZNOTES),%q1|*,^))];[setq(4,[extract([u(%q0/wiznotes)],%q3,1,^)])];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%0,1,1,:)]' is right?},11,{@pemit %#=There is no note named '%q1' on [name(%q0)].},10,{@pemit %#=[header2()]%R[ljust(%BWizard Note: [capitalize(%q1)],35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%r[header2()]%R%B[ljust(Set By:,10)][name([extract(%q4,2,1,|)])]%R%B[ljust(Set On:,10)][convsecs([extract(%q4,3,1,|)])]%R%B[ljust(Note:,10)][extract(%q4,4,1,|)]%R[header3()]}
&DO.WIZNOTE.SHOW Player Commands=$+wiznote/show *=*:[setq(0,[findnum(%#,[extract(%1,1,1,:)])])];[setq(1,[extract(%1,2,1,:)])];[setq(3,match(get(%q0/WIZNOTES),%q1|*,^))];[setq(4,[extract([u(%q0/wiznotes)],%q3,1,^)])];[setq(5,[findpc(%0,%#)])];@switch [isdbref(%q0)][eq(%q3,0)]=0?,{@pemit %#=Are you sure that '[extract(%1,1,1,:)]' is right?},11,{@pemit %#=There is no note named '%q1' on [name(%q0)].},10,{@pemit %q5=[header2()]%R[ljust(%BWizard Note: [capitalize(%q1)],35)][center(%( --- %),10)][rjust(Player: [name(%q0)]%B,35)]%r[header2()]%R%B[ljust(Set By:,10)][name([extract(%q4,2,1,|)])]%R%B[ljust(Set On:,10)][convsecs([extract(%q4,3,1,|)])]%R%B[ljust(Note:,10)][extract(%q4,4,1,|)]%R[header3()];@pemit %#=You show [name(%q0)]'s %q1 Wiznote to [name(%q5)].}
@set Player Commands=INHERIT
@set Player Commands=STAFF
@set Player Commands=STICKY
@set Player Commands=SAFE
@parent Player Commands=#35
@create Census Commands=10
&SUB Census Commands=%ch%cb[ljust(==========< [capitalize(%0)] >,40,=)][repeat(=,40)]%cn
&DO.CENSUS Census Commands=$+census:[setq(0,cnum(list))];[setq(1,cnum(Clist))];@pemit %#=[header(Global Census Code)]%R%TThis is out global census code. Right now its pretty basic, but it will get more advanced by the month.. Look for updates.%R[u(sub,Sexes)]%R%B[ljust(Males: [words([filter(ismale,%q0)])],26)][ljust(Females: [words([filter(isfemale,%q0)])],26)][ljust(Others: [words([filter(isnue,%q0)])],26)]%R[u(sub,Types)]%R%B[ljust(Players: [words([filter(isplayer,%q0)])],26)][ljust(Staff: [words([filter(isstaff,%q0)])],26)]%R[u(sub,Statuses)]%R%B[ljust(Approved: [words(filter(isapp,%q0))],26)][ljust(Un-Approved: [words(filter(isunapp,%q0))],26)]%R[u(sub,Races)]%R%B[ljust(Hunter: [words(filter(ishunt,%q0))],26)][ljust(Mage: [words(filter(ismage,%q0))],26)][ljust(Mortal: [words(filter(ismortal,%q0))],26)]%R%B[ljust(Mortal Plus: [words(filter(isplus,%q0))],26)][ljust(Shifter: [words(filter(isshift,%q0))],26)][ljust(Vampire: [words(filter(isvamp,%q0))],26)]%R[U(sub,Classes)]%R%B[ljust(Chargen: [words(filter(isclass0,%q0))],26)][ljust(Above Chargen: [words(filter(isclass1,%q0))],26)][ljust(Feature: [words(filter(isclass2,%q0))],26)]%R%B[ljust(Game Feature: [words(filter(isclass3,%q0))],26)][ljust(NPC: [words(filter(isclass4,%q0))],26)][ljust(Chargen Tester: [words(filter(isclass5,%q0))],26)]%R%R%ch%cwLast Taken:%cn [time()]%R[header3()]
&ISMALE Census Commands=[switch([u(%0/sex)],M*,1,F*,0,0)]
&ISFEMALE Census Commands=[switch([u(%0/sex)],M*,0,F*,1,0)]
&ISNUE Census Commands=[switch([u(%0/sex)],M*,0,F*,0,1)]
&ISPLAYER Census Commands=[switch([isstaff(%0)][hasflag(%0,Immortal)][haspower(%0,guest)],000,1,0)]
&ISSTAFF Census Commands=[switch([isstaff(%0)],1,1,0)]
&ISSTAFF2 Census Commands=[switch([isstaff(%0)][u(#35/fn.visstaff,%0)],11,1,10,0,0)]
&ISAPP Census Commands=[switch([u(isplayer,%0)][isapp(%0)],11,1,0)]
&ISUNAPP Census Commands=[switch([u(isplayer,%0)][isapp(%0)],10,1,0)]
&ISVAMP Census Commands=[switch([vampire(%0)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISSHIFT Census Commands=[switch([shifter(%0)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISMAGE Census Commands=[switch([mage(%0)][u(isplayer,%0)][familiar(%0)],0?0,0,110,1,011,1,101,0,101,0)]
&ISHUNT Census Commands=[switch([hunter(%0)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISMORTAL Census Commands=[switch([match([u(%0/race)],Mortal)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISPLUS Census Commands=[switch([match([u(%0/race)],Mortal+)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISCLASS0 Census Commands=[switch([eq([class(%0,Num)],0)][u(isplayer,%0)],11,1,0)]
&ISCLASS1 Census Commands=[switch([eq([class(%0,Num)],1)][u(isplayer,%0)],11,1,0)]
&ISCLASS2 Census Commands=[switch([eq([class(%0,Num)],2)][u(isplayer,%0)],11,1,0)]
&ISCLASS3 Census Commands=[switch([eq([class(%0,Num)],3)][u(isplayer,%0)],11,1,0)]
&ISCLASS4 Census Commands=[switch([eq([class(%0,Num)],4)][u(isplayer,%0)],11,1,0)]
&ISCLASS5 Census Commands=[switch([eq([class(%0,Num)],5)][u(isplayer,%0)],11,1,0)]
&ISMAGE2 Census Commands=[switch([mage(%0)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISFAM Census Commands=[switch([familiar(%0)][u(isplayer,%0)],0?,0,11,1,10,0)]
&DO.CENSUS.MAGE Census Commands=$+census/mage:[setq(0,filter(ismage,cnum(list)))];[setq(1,filter(ismage,cnum(clist)))];@pemit %#=[header(Global Mage Census)]%R%TThis command lists all the mages and their familiars.%R[u(sub,Totals)]%R%B[ljust(Mages: [words(filter(ismage2,%q0))],26)][ljust(Familiars: [words(filter(isfam,%q0))],26)]%R[u(sub,Mage Types)]%R%B[ljust(Tradition: [words(filter(istrad,%q0))],26)][ljust(Craft: [words(filter(iscraft,%q0))],26)][ljust(Union: [words(filter(isunion,%q0))],26)]%R%B[ljust(Orphan: [words(filter(isorph,%q0))],26)][ljust(Marauder: [words(filter(ismar,%q0))],26)]%R[u(sub,Traditions)]%R%B[ljust(Akashic Brotherhood: [words(filter(isab,%q0))],38)][ljust(Celestial Chorus: [words(filter(iscc,%q0))],38)]%R%B[ljust(Cult Of Ecstasy: [words(filter(iscox,%q0))],38)][ljust(DreamSpeakers: [words(filter(isds,%q0))],38)]%R%B[ljust(Euthanatos: [words(filter(iseu,%q0))],38)][ljust(Order Of Hermes: [words(filter(isooh,%q0))],38)]%R%B[ljust(Sons Of Ether: [words(filter(issoe,%q0))],38)][ljust(Verbena: [words(filter(isver,%q0))],38)]%R%B[ljust(Virtual Adepts: [words(filter(isva,%q0))],38)][ljust(Hollow Ones: [words(filter(isho,%q0))],38)]%R[u(sub,Crafts)]%R%B[ljust(Bata'a: [words(filter(isba,%q0))],38)][ljust(Children Of Knowledge: [words(filter(iscok,%q0))],38)]%R%B[ljust(Gokamisori Gama: [words(filter(isgg,%q0))],38)][ljust(Hem-Ka Subk: [words(filter(ishs,%q0))],38)]%r%b[ljust(Kopa Loei: [words(filter(iskl,%q0))],38)][ljust(Shaman: [words(filter(issh,%q0))],38)]%R%b[ljust(Sisters Of Hippolyta: [words(filter(issoh,%q0))],38)][ljust(Sons Of Tengri: [words(filter(issot,%q0))],38)]%r%b[ljust(Tai Ho Li: [words(filter(isthl,%q0))],38)][ljust(Templar Knights: [words(filter(istk,%q0))],38)]%R%B[ljust(Toc Faan: [words(filter(istf,%q0))],38)][ljust(Wu-Keng: [words(filter(iswk,%q0))],38)]%R%B[ljust(Wu-Long: [words(filter(iswl,%q0))],38)]%R[u(sub,Arete)]%R%B[ljust(1: [words(filter(isarete1,%q0))],26)][ljust(2: [words(filter(isarete2,%q0))],26)][ljust(3: [words(filter(isarete3,%q0))],26)]%R%B[ljust(4: [words(filter(isarete4,%q0))],26)][ljust(5: [words(filter(isarete5,%q0))],26)][ljust(6: [words(filter(isarete6,%q0))],26)]%R%B[ljust(7: [words(filter(isarete7,%q0))],26)][ljust(8: [words(filter(isarete8,%q0))],26)][ljust(9: [words(filter(isarete9,%q0))],26)]%R%B[ljust(10: [words(filter(isarete10,%q0))],26)]%R[header3()]
&ISAB Census Commands=[switch([u(isplayer,%0)][match(Akashic_Brotherhood,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISCC Census Commands=[switch([u(isplayer,%0)][match(Celestial_Chorus,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISDS Census Commands=[switch([u(isplayer,%0)][match(Dreamspeakers,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISCOX Census Commands=[switch([u(isplayer,%0)][match(Cult_of_ecstasy,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISEU Census Commands=[switch([u(isplayer,%0)][match(euthanatos,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISOOH Census Commands=[switch([u(isplayer,%0)][match(Order_of_hermes,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISSOE Census Commands=[switch([u(isplayer,%0)][match(sons_of_ether,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISVER Census Commands=[switch([u(isplayer,%0)][match(verbena,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISVA Census Commands=[switch([u(isplayer,%0)][match(virtual_adepts,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISHO Census Commands=[switch([u(isplayer,%0)][match(hollow_ones,[edit(text(%0,info,tradition),%b,_)])],0?,0,10,0,11,1)]
&ISBA Census Commands=[switch([u(isplayer,%0)][match(bata'a,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISCOK Census Commands=[switch([u(isplayer,%0)][match(Children_of_knowledge,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISGG Census Commands=[switch([u(isplayer,%0)][match(Gokamisori_Gama,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISHS Census Commands=[switch([u(isplayer,%0)][match(hem-ka_subk,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISKL Census Commands=[switch([u(isplayer,%0)][match(kopa_loei,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISSH Census Commands=[switch([u(isplayer,%0)][match(Shaman,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISSOH Census Commands=[switch([u(isplayer,%0)][match(sisters_of_hippolyta,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISSOT Census Commands=[switch([u(isplayer,%0)][match(sons_of_tengri,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISTHL Census Commands=[switch([u(isplayer,%0)][match(tai_ho_li,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISWK Census Commands=[switch([u(isplayer,%0)][match(wu-keng,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISWL Census Commands=[switch([u(isplayer,%0)][match(wu_long,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISTK Census Commands=[switch([u(isplayer,%0)][match(templar_knights,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISTF Census Commands=[switch([u(isplayer,%0)][match(toc_faan,[edit(text(%0,info,craft),%b,_)])],0?,0,10,0,11,1)]
&ISARETE1 Census Commands=[switch([eq([stat(%0,info,arete)],1)][u(isplayer,%0)],11,1,0)]
&ISARETE2 Census Commands=[switch([eq([stat(%0,info,arete)],2)][u(isplayer,%0)],11,1,0)]
&ISARETE3 Census Commands=[switch([eq([stat(%0,info,arete)],3)][u(isplayer,%0)],11,1,0)]
&ISARETE4 Census Commands=[switch([eq([stat(%0,info,arete)],4)][u(isplayer,%0)],11,1,0)]
&ISARETE5 Census Commands=[switch([eq([stat(%0,info,arete)],5)][u(isplayer,%0)],11,1,0)]
&ISARETE6 Census Commands=[switch([eq([stat(%0,info,arete)],6)][u(isplayer,%0)],11,1,0)]
&ISARETE7 Census Commands=[switch([eq([stat(%0,info,arete)],7)][u(isplayer,%0)],11,1,0)]
&ISARETE8 Census Commands=[switch([eq([stat(%0,info,arete)],8)][u(isplayer,%0)],11,1,0)]
&ISARETE9 Census Commands=[switch([eq([stat(%0,info,arete)],9)][u(isplayer,%0)],11,1,0)]
&ISARETE10 Census Commands=[switch([eq([stat(%0,info,arete)],10)][u(isplayer,%0)],11,1,0)]
&ISTRAD Census Commands=[switch([match([u(%0/subrace)],Tradition)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISUNION Census Commands=[switch([match([u(%0/subrace)],union)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISORPH Census Commands=[switch([match([u(%0/subrace)],orphan)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISCRAFT Census Commands=[switch([match([u(%0/subrace)],craft)][u(isplayer,%0)],0?,0,11,1,10,0)]
&ISMAR Census Commands=[switch([match([u(%0/subrace)],marauder)][u(isplayer,%0)],0?,0,11,1,10,0)]
&DO.CENSUS.VAMPIRE Census Commands=$+census/vampire:[setq(0,filter(isvamp,cnum(list)))];@pemit %#=[header(Global Vampire Census)]%R%TThis is a global census of the various clans, sects and generations of our vampire and ghoul population.%R[u(sub,Totals)]%R%B[ljust(Vampires: [words(filter(isvampire,%q0))],26)][ljust(Ghouls: [words(filter(isghoul,%q0))],26)]%R[u(sub,Sects)]%R%B[ljust(Camarilla: [words(filter(iscam,%q0))],39)][ljust(Sabbat: [words(filter(issab,%q0))],39)]%R%B[ljust(Independent: [words(filter(isind,%q0))],39)][ljust(Anarch: [words(filter(isarch,%q0))],39)]%R[u(sub,Clans)]%R%B[ljust(Assamite: [words(filter(isass,%q0))],39)][ljust(Assamite Antitribu: [words(filter(isass1,%q0))],39)]%R%B[ljust(Baali: [words(filter(isbal,%q0))],39)][ljust(Blood Brothers: [words(filter(isbb,%q0))],39)]%R%B[ljust(Brujah: [words(filter(isbru,%q0))],39)][ljust(Brujah Antitribu: [words(filter(isbru1,%q0))],39)]%R%B[ljust(Caitiff: [words(filter(iscait,%q0))],39)][ljust(Cappadocian: [words(filter(iscap,%q0))],39)]%R%B[ljust(Children Of Osiris: [words(filter(ischild,%q0))],39)][ljust(City Gangrel: [words(filter(isgan1,%q0))],39)]%R%B[ljust(Country Gangrel: [words(filter(isgan2,%q0))],39)][ljust(Daughters Of Cacophany: [words(filter(isdau,%q0))],39)]%R%B[ljust(Followers Of Set: [words(filter(isset,%q0))],39)][ljust(Gangrel: [words(filter(isgan,%q0))],39)]%R%B[ljust(Gargoyle: [words(filter(isgar,%q0))],39)][ljust(Giovanni: [words(filter(isgio,%q0))],39)]%R%B[ljust(Harbingers Of Skulls: [words(filter(ishar,%q0))],39)][ljust(Kiasyd: [words(filter(iskia,%q0))],39)]%R%B[ljust(Lasombra: [words(filter(islas,%q0))],39)][ljust(Lasombra Antitribu: [words(filter(islas1,%q0))],39)]%R%B[ljust(Malkavian: [words(filter(ismal,%q0))],39)][ljust(Malkavian Antitribu: [words(filter(ismal1,%q0))],39)]%R%B[ljust(Nagaraja: [words(filter(isnag,%q0))],39)][ljust(Nosferatu: [words(filter(isnos,%q0))],39)]%R%B[ljust(Nosferatu Antitribu: [words(filter(isnos1,%q0))],39)][ljust(Pander: [words(filter(ispan,%q0))],39)]%R%B[ljust(Ravnos: [words(filter(israv,%q0))],39)][ljust(Ravnos Antitribu: [words(filter(israv1,%q0))],39)]%R%B[ljust(Salubri: [words(filter(issal,%q0))],39)][ljust(Salubri Antitribu: [words(filter(issal1,%q0))],39)]%R%B[ljust(Samedi: [words(filter(issame,%q0))],39)][ljust(Serpents Of Light: [words(filter(isser,%q0))],39)]%R%B[ljust(Toreador: [words(filter(istor,%q0))],39)][ljust(Toreador Antitribu: [words(filter(istor1,%q0))],39)]%R%B[ljust(Tremere: [words(filter(istre,%q0))],39)][ljust(Tremere Antitribu: [words(filter(istre1,%q0))],39)]%R%B[ljust(True Brujah: [words(filter(isbru2,%q0))],39)][ljust(Tzimisce: [words(filter(istzi,%q0))],39)]%R%B[ljust(Ventrue: [words(filter(isven,%q0))],39)][ljust(Ventrue Antitribu: [words(filter(isven1,%q0))],39)]%R[u(sub,Generations)]%R%B[ljust(1: [words(filter(isgen1,%q0))],26)][ljust(2: [words(filter(isgen2,%q0))],26)][ljust(3: [words(filter(isgen3,%q0))],26)]%R%B[ljust(4: [words(filter(isgen4,%q0))],26)][ljust(5: [words(filter(isgen5,%q0))],26)][ljust(6: [words(filter(isgen6,%q0))],26)]%R%B[ljust(7: [words(filter(isgen7,%q0))],26)][ljust(8: [words(filter(isgen8,%q0))],26)][ljust(9: [words(filter(isgen9,%q0))],26)]%R%B[ljust(10: [words(filter(isgen10,%q0))],26)][ljust(11: [words(filter(isgen11,%q0))],26)][ljust(12: [words(filter(isgen12,%q0))],26)]%R%B[ljust(13: [words(filter(isgen13,%q0))],26)][ljust(14: [words(filter(isgen1,%q0))],26)][ljust(15: [words(filter(isgen15,%q0))],26)]%R%B[ljust(16: [words(filter(isgen16,%q0))],26)]%R[header3()]
&ISVAMPIRE Census Commands=[switch([vampire(%0)][u(isplayer,%0)][hassflag(%0,Ghoul)][match(u(%0/subrace),Ghoul)],0?00,0,1100,1,1000,0)]
&ISGHOUL Census Commands=[switch([vampire(%0)][u(isplayer,%0)][hassflag(%0,Ghoul)][match(u(%0/subrace),Ghoul)],0?00,0,1110,1,1101,1,10??,0)]
&ISCAM Census Commands=[switch([match([u(%0/subrace)],Camarilla)][match([text(%0,info,sect)],Camarilla)],11,1,10,1,01,1,00,0)]
&ISAAB Census Commands=[switch([match([u(%0/subrace)],Sabbat)][match([text(%0,info,sect)],Sabbat)],11,1,10,1,01,1,00,0)]
&ISIND Census Commands=[switch([match([u(%0/subrace)],Independent)][match([text(%0,info,sect)],Independent)],11,1,10,1,01,1,00,0)]
&ISARCH Census Commands=[switch([match([u(%0/subrace)],Anarch)][match([text(%0,info,sect)],Anarch)],11,1,10,1,01,1,00,0)]
&ISSAB Census Commands=[switch([match([u(%0/subrace)],Sabbat)][match([text(%0,info,sect)],Sabbat)],11,1,10,1,01,1,00,0)]
&ISASS Census Commands=[match(Assamite,[edit([text(%0,info,clan)],%B,_)])]
&ISASS1 Census Commands=[match(Assamite_Antitribu,[edit([text(%0,info,clan)],%B,_)])]
&ISBRU Census Commands=[u(matchclan,%0,Brujah)]
&ISBRU1 Census Commands=[match(Brujah_Antitribu,[edit([text(%0,info,clan)],%B,_)])]
&ISBB Census Commands=[match(Blood_brothers,[edit([text(%0,info,clan)],%B,_)])]
&ISCAIT Census Commands=[match(Caitiff,[edit([text(%0,info,clan)],%B,_)])]
&ISCAP Census Commands=[match(Cappadocian,[edit([text(%0,info,clan)],%B,_)])]
&ISCHILD Census Commands=[match(Children_of_osiris,[edit([text(%0,info,clan)],%B,_)])]
&MATCHCLAN Census Commands=[match(%1,[edit([text(%0,info,clan)],%B,_)])]
&ISGAN1 Census Commands=[u(matchclan,%0,City_Gangrel)]
&ISGAN2 Census Commands=[u(matchclan,%0,Country_Gangrel)]
&ISSET Census Commands=[u(matchclan,%0,Followers_of_set)]
&ISGAN Census Commands=[u(matchclan,%0,Gangrel)]
&ISDAU Census Commands=[u(matchclan,%0,Daughters_of_Cacophany)]
&ISGAR Census Commands=[u(matchclan,%0,Gargoyle)]
&ISHAR Census Commands=[u(matchclan,%0,Harbinger_of_skulls)]
&ISKIA Census Commands=[u(matchclan,%0,Kiasyd)]
&ISLAS Census Commands=[u(matchclan,%0,Lasombra)]
&ISLAS1 Census Commands=[u(matchclan,%0,Lasombra_antitribu)]
&ISMAL Census Commands=[u(matchclan,%0,Malkavian)]
&ISMAL1 Census Commands=[u(matchclan,%0,Malkavian_Antitribu)]
&ISNAG Census Commands=[u(matchclan,%0,Nagajara)]
&ISNOS Census Commands=[u(matchclan,%0,Nosferatu)]
&ISNOS1 Census Commands=[u(matchclan,%0,Nosferatu_antitribu)]
&ISPAN Census Commands=[u(matchclan,%0,Pander)]
&ISRAV Census Commands=[u(matchclan,%0,ravnos)]
&ISRAV1 Census Commands=[u(matchclan,%0,ravnos_antitribu)]
&ISSAME Census Commands=[u(matchclan,%0,samedi)]
&ISSAL Census Commands=[u(matchclan,%0,salubri)]
&ISSAL1 Census Commands=[u(matchclan,%0,salubri_antitribu)]
&ISSER Census Commands=[u(matchclan,%0,serpents_of_light)]
&ISTOR Census Commands=[u(matchclan,%0,toreador)]
&ISTOR1 Census Commands=[u(matchclan,%0,toreador_antitribu)]
&ISTRE Census Commands=[u(matchclan,%0,tremere)]
&ISTRE1 Census Commands=[u(matchclan,%0,tremere_antitribu)]
&ISTZI Census Commands=[u(matchclan,%0,tzimisce)]
&ISVEN Census Commands=[u(matchclan,%0,ventrue)]
&ISBAL Census Commands=[u(matchclan,%0,baali)]
&ISVEN1 Census Commands=[u(matchclan,%0,ventrue_antitribu)]
&ISGEN1 Census Commands=[match(12,[stat(%0,background,generation)])]
&ISGEN2 Census Commands=[match(11,[stat(%0,background,generation)])]
&ISGEN3 Census Commands=[match(10,[stat(%0,background,generation)])]
&ISGEN4 Census Commands=[match(9,[stat(%0,background,generation)])]
&ISGEN5 Census Commands=[match(8,[stat(%0,background,generation)])]
&ISGEN6 Census Commands=[match(7,[stat(%0,background,generation)])]
&ISGEN7 Census Commands=[match(6,[stat(%0,background,generation)])]
&ISGEN8 Census Commands=[match(5,[stat(%0,background,generation)])]
&ISGEN9 Census Commands=[match(4,[stat(%0,background,generation)])]
&ISGEN10 Census Commands=[match(3,[stat(%0,background,generation)])]
&ISGEN11 Census Commands=[match(2,[stat(%0,background,generation)])]
&ISGEN12 Census Commands=[match(1,[stat(%0,background,generation)])]
&ISGEN13 Census Commands=[match(0,[stat(%0,background,generation)])]
&ISGEN14 Census Commands=[match(-1,[stat(%0,background,generation)])]
&ISGEN15 Census Commands=[match(-2,[stat(%0,background,generation)])]
&ISGEN16 Census Commands=[match(-3,[stat(%0,background,generation)])]
&DO.CENSUS.HELP Census Commands=$+census/help:@pemit %#=[header(Global Census Help)]%R%B[ljust(+census,40,.)]A basic Census.%R%B[ljust(+census/mage,40,.)]A Census Of Mages.%R%B[ljust(+census/vampire,40,.)]A Census of Vampires.%R%B[ljust(+census/shifter,40,.)]A census of the shifters.%R[header3()]
&DO.CENSUS.SHIFTER Census Commands=$+census/shifter:[setq(0,[filter(isshift,[cnum(list)])])];@pemit %#=[header(Global Shifter Census)]%R%TThis is a global listing of all our shifter data. Please refer to the racial ones for more information.%R[u(sub,Totals)]%R%B[ljust(Shifters: [words([filter(isshift2,%q0)])],26)][ljust(Kinfolk: [words([filter(iskin,%q0)])],26)][ljust(Formori: [words([filter(isfor,%q0)])],26)]%R%B[ljust(Weaver Drone: [words([filter(isdro,%q0)])],26)]%R[u(sub,Types)]%R%B[ljust(Ananasi: [words([filter(isana,%q0)])],26)][ljust(Bastet: [words([filter(isbas,%q0)])],26)][ljust(Corax: [words([filter(iscor,%q0)])],26)]%R%B[ljust(Garou: [words([filter(isroo,%q0)])],26)][ljust(Gurahl: [words([filter(isgur,%q0)])],26)][ljust(Hakken: [words([filter(ishak,%q0)])],26)]%R%B[ljust(Khan: [words([filter(iskhan,%q0)])],26)][ljust(Kitsune: [words([filter(iskit,%q0)])],26)][ljust(Kumo: [words([filter(iskumo,%q0)])],26)]%R%B[ljust(Mokole: [words([filter(ismok,%q0)])],26)][ljust(Nagah: [words([filter(isnagah,%q0)])],26)][ljust(Nezumi: [words([filter(isnez,%q0)])],26)]%R%B[ljust(Nuwisha: [words([filter(isnuw,%q0)])],26)][ljust(Ratkin: [words([filter(israt,%q0)])],26)][ljust(Rokea: [words([filter(isrok,%q0)])],26)]%R%B[ljust(Same-Bito: [words([filter(isbito,%q0)])],26)][ljust(Tengu: [words([filter(isteng,%q0)])],26)][ljust(Zhong Lung: [words([filter(iszho,%q0)])],26)]%R[u(sub,Ranks)]%R%B[ljust(1: [words([filter(isrank1,%q0)])],26)][ljust(2: [words([filter(isrank2,%q0)])],26)][ljust(3: [words([filter(isrank3,%q0)])],26)]%R%B[ljust(4: [words([filter(isrank4,%q0)])],26)][ljust(5: [words([filter(isrank5,%q0)])],26)]%R[header3()]
&ISRANK1 Census Commands=[match([stat(%0,info,rank)],1)]
&ISRANK2 Census Commands=[match([stat(%0,info,rank)],2)]
&ISRANK3 Census Commands=[match([stat(%0,info,rank)],3)]
&ISRANK4 Census Commands=[match([stat(%0,info,rank)],4)]
&ISRANK5 Census Commands=[match([stat(%0,info,rank)],5)]
&ISROO Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],Garou)],[match([edit([text(%0,info,Kin)],%B,_)],Garou)])]
&ISZHO Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],Zhong_lung)],[match([edit([text(%0,info,Kin)],%B,_)],Zhong_lung)])]
&ISANA Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],ananasi)],[match([edit([text(%0,info,Kin)],%B,_)],ananasi)])]
&ISBAS Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],bastet)],[match([edit([text(%0,info,Kin)],%B,_)],bastet)])]
&ISCOR Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],corax)],[match([edit([text(%0,info,Kin)],%B,_)],corax)])]
&ISGUR Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],gurahl)],[match([edit([text(%0,info,Kin)],%B,_)],gurahl)])]
&ISHAK Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],hakken)],[match([edit([text(%0,info,Kin)],%B,_)],hakken)])]
&ISKHAN Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],khan)],[match([edit([text(%0,info,Kin)],%B,_)],khan)])]
&ISKIT Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],kitsune)],[match([edit([text(%0,info,Kin)],%B,_)],kitsune)])]
&ISKUMO Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],kumo)],[match([edit([text(%0,info,Kin)],%B,_)],kumo)])]
&ISMOK Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],mokole)],[match([edit([text(%0,info,Kin)],%B,_)],mokole)])]
&ISNAGAH Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],nagah)],[match([edit([text(%0,info,Kin)],%B,_)],nagah)])]
&ISNEZ Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],nezumi)],[match([edit([text(%0,info,Kin)],%B,_)],nezumi)])]
&ISNUW Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],nuwisha)],[match([edit([text(%0,info,Kin)],%B,_)],nuwisha)])]
&ISRAT Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],ratkin)],[match([edit([text(%0,info,Kin)],%B,_)],ratkin)])]
&ISBITO Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],same-bito)],[match([edit([text(%0,info,Kin)],%B,_)],same-bito)])]
&ISROK Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],rokea)],[match([edit([text(%0,info,Kin)],%B,_)],rokea)])]
&ISTENG Census Commands=[or([match([edit([text(%0,info,subrace)],%B,_)],tengu)],[match([edit([text(%0,info,Kin)],%B,_)],tengu)])]
&ISSHIFT2 Census Commands=[switch([hassflag(%0,Kinfolk)][match(u(%0/subrace),Kinfolk)],00,1,01,0,10,0,11,0)]
&ISKIN Census Commands=[switch([hassflag(%0,Kinfolk)][match(u(%0/subrace),Kinfolk)],00,0,01,1,10,1,11,1)]
&ISFOR Census Commands=[match(u(%0/subrace),Formori)]
&ISDRO Census Commands=[match(edit(u(%0/subrace),%B,_),Weaver_Drone)]
@set Census Commands=INHERIT
@set Census Commands=STAFF
@set Census Commands=STICKY
@set Census Commands=SAFE
@create Pool Master=10
@VD Pool Master=[Data]
&MESSAGE Pool Master=%VD Doing Upkeep.
&FINE Pool Master=%VD Update Unneeded.
&UPDATED Pool Master=%VD [capitalize(%0)] Pool Updated.
&TIME Pool Master=[gt([sub([vsecs()],[stat(%0,upkeep,%1)])],86400)]
&TEMP Pool Master=[before([text(%0,pool,%1)],/)]
&PERM Pool Master=[after([text(%0,pool,%1)],/)]
&TSET Pool Master=[setstat(%0/dat.upkeep,[capitalize(%1)],[vsecs()])]
&TIME2 Pool Master=[gt([sub([vsecs()],[stat(%0,upkeep,%1)])],592200)]
&HUNTED Pool Master=%VD You have just ran your auto-hunt.
&FUND Pool Master=%VD You just recieved your weekly resources.
&VOTE Pool Master=[gt([sub([secs()],[stat(%0,upkeep,%1)])],592200)]
@Aconnect Pool Master=@switch isapp(%#)=1,{@switch [u(time,%#,blood)]=1,{@trig me/[ifelse(match([u(%#/race)],Vampire),spend,blood)]=%#};@switch [u(time,%#,willpower)]=1,{@trig me/willpower=%#};@switch [u(time,%#,rage)]=1,{@trig me/rage=%#};@switch [u(time,%#,gnosis)]=1,{@trig me/qnosis=%#};@switch [u(time2,%#,paradox)]=1,{@trig me/paradox=%#};@switch [u(time,%#,quintessence)]=1,{@trig me/quint=%#};@switch [u(time,%#,autohunt)]=1,{@trig me/autohuno=%#};@switch [u(time2,%#,money)]=1,{@trig me/fund=%#};@switch [u(time2,%#,voted)]=1,{@trig me/clear.vote=%#}},{@pemit %#=[u(fine)]}
&SPEND Pool Master=@switch [eq([u(temp,%0,Blood)],0)][eq([setr(1,[sub([u(temp,%0,blood)],1)])],0)]=00,{@pemit %0=[u(updated,Blood)][setstat(%0/dat.pool,Blood,%q1/[u(perm,%0,Blood)])][u(tset,%0,Blood)]},01,{@pemit %0=[u(failed)];@scan %VD [name(%0)] has just spent [switch(u(%0/sex),M*,his,F*,her,its)] last point of blood.[u(tset,%0,blood)]},1?,{@pemit %#=[u(noblood)];@scan %VD [name(%0)] has no blood to spend.[u(tset,%0,blood)]}
&FAILED Pool Master=%VD You have spent your last blood point, and entered torpor.
&NOBLOOD Pool Master=%VD You have no blood left to spend.
&BLOOD Pool Master=@switch [lt([u(temp,%0,Blood)],[u(perm,%0,Blood)])]=1,{@pemit %0=[u(updated,Blood)][setstat(%0/dat.pool,Blood,[add([u(temp,%0,blood)],1)]/[u(perm,%0,blood)])][u(tset,%0,blood)]}}
&WILLPOWER Pool Master=@switch [lt([u(temp,%0,willpower)],[u(perm,%0,willpower)])]=1,{@pemit %0=[u(updated,Willpower)][setstat(%0/dat.pool,Willpower,[add([u(temp,%0,willpower)],1)]/[u(perm,%0,willpower)])][u(tset,%0,Willpower)]}
&RAGE Pool Master=@switch [lt([u(temp,%0,rage)],[u(perm,%0,rage)])]=1,{@pemit %0=[u(updated,rage)][setstat(%0/dat.pool,Rage,[add([u(temp,%0,rage)],1)]/[u(perm,%0,rage)])][u(tset,%0,rage)]}}
&GNOSIS Pool Master=@switch [lt([u(temp,%0,gnosis)],[u(perm,%0,gnosis)])]=1,{@pemit %0=[u(updated,gnosis)][setstat(%0/dat.pool,Gnosis,[add([u(temp,%0,gnosis)],1)]/[u(perm,%0,gnosis)])][u(tset,%0,gnosis)]}}
&PARADOX Pool Master=@switch [gte([stat(%0,pool,paradox)],1)]=1,{@pemit %0=[u(updated,paradox)][setstat(%0/dat.pool,Paraodx,[sub([stat(%0,pool,paradox)],1)])][u(tset,%0,Paradox)]}}
&QUINT Pool Master=@switch [lt([u(temp,%0,quintessence)],[u(perm,%0,quintessence)])]=1,{@pemit %0=[u(updated,quintessence)][setstat(%0/dat.pool,Quintessence,[add([u(temp,%0,Quintessence)],1)]/[u(perm,%0,Quintessence)])][u(tset,%0,quintessence)]}}
&CLEAR.VOTE Pool Master=[u(updated,VOted For List)][set(%0,VOTED4:)]
@set Pool Master=INHERIT
@set Pool Master=STAFF
@set Pool Master=STICKY
@set Pool Master=SAFE
@parent Pool Master=#35
@create Master Functions=10
&FN.HEADER3 Master Functions=%ch%cb[center(%(%B[mudname()]%B%),80,=)]%cn
&FN.HEADER Master Functions=%ch%cb[center(%(%B%0%B%),80,=)]%cn
&FN.HEADER2 Master Functions=%ch%cb[center(%(%B=====%B%),80,=)]%cn
&FN.GRABPERM Master Functions=[last(grab(%0,%1~*,|),~)]
&FN.GETTEMP Master Functions=[elements(grab(get(%0),%1~*,|),2,~)]
&FN.GETPERM Master Functions=[last(grab(get(%0),%1~*,|),~)]
&FN.GRABELEM Master Functions=[sign(add(match(%0,%1,|),match(%0,%1~*,|)))]
&FN.GETELEM Master Functions=[sign(add(match(g(%0),%1,|),match(g(%0),%1~*,|)))]
&FN.GRABSTAT Master Functions=[switch(rest(grab(%0,%1~*,|),~),first(rest(grab(%0,%1~*,|),~))~[first(rest(grab(%0,%1~*,|),~))],first(rest(grab(%0,%1~*,|),~)),first(rest(grab(%0,%1~*,|),~)),rest(grab(%0,%1~*,|),~),edit(rest(grab(%0,%1~*,|),~),~,%b%/%b))]
&FN.GETSTAT Master Functions=[switch(rest(grab(get(%0),%1~*,|),~),first(rest(grab(get(%0),%1~*,|),~))~[first(rest(grab(get(%0),%1~*,|),~))],first(rest(grab(get(%0),%1~*,|),~)),first(rest(grab(get(%0),%1~*,|),~)),rest(grab(get(%0),%1~*,|),~),edit(rest(grab(get(%0),%1~*,|),~),~,%b%/%b))]
&FN.SETSTAT Master Functions=[set(first(%0,/),rest(%0,/):[switch(rest(grab(get(%0),%1~*,|),~),,ifelse(%2,insert(get(%0),inc(words(get(%0),|)),%1~%2,|),get(%0)),ifelse(%2,replace(get(%0),match(get(%0),%1~[rest(grab(get(%0),%1~*,|),~)],|),%1~%2,|),ldelete(get(%0),match(get(%0),%1~[rest(grab(get(%0),%1~*,|),~)],|),|)))])]
&FN.ISSTAFF Master Functions=[orflags(%0,WwZ)]
&FN.CAPITALIZE Master Functions=trim(edit(iter(%0,capstr(lcstr(##))%1,%1),%1%b,switch(%1,?,%1,%b)),r ,%1)
&FN.VIS Master Functions=[orflags(%0,$oy1/_)]
&FN.UNFIND Master Functions=[or(hassflag(%0,Unfindable),hasflag(%1,Unfindable))]
&FN.VISSTAFF Master Functions=switch(isstaff(%#)[hasflag(%0,dark)][hasflag(%0,connected)],1?0,0,1?1,1,000,0,001,1,01?,0)
&FN.ALLSTAFF Master Functions=[sortby(fn.sortby2,[u(#36/command)])] [sortby(fn.sortby2,[u(#36/cmd-adm)])] [sortby(fn.sortby2,[u(#36/liason)])] [sortby(fn.sortby2,[u(#36/wizard)])] [sortby(fn.sortby2,[u(#36/admin)])] [sortby(fn.sortby2,[u(#36/judge)])] [sortby(fn.sortby2,[u(#36/story)])]
&FN.ISNPL Master Functions=[gt(match(u(#36/liason),%0),0)]
&FN.ISGOD Master Functions=[gt(match(u(#36/command),%0),0)]
&FN.ISWIZ Master Functions=[gt(match(u(#36/wizard),%0),0)]
&FN.ISST Master Functions=[gt(match(u(#36/story),%0),0)]
&FN.ISJUD Master Functions=[gt(match(u(#36/judge),%0),0)]
&FN.ISADM Master Functions=[gt(match(u(#36/admin),%0),0)]
&FN.STAFF.FMT Master Functions=[mid([ljust([ifelse(match(Busy,[capitalize([u(%0/status)])]),%ch%cb*%B[name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)]%cn,[name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)])][ifelse(hasflag(%0,dark),%B%ch%cw%(D%)%cn,)],25)],0,25)][center(singletime(idle(%0)),6)][ljust([switch(1,[isgod(%0)],%ch%cwCOMMAND:%cn,[iscmd(%0)],%ch%cwCMD-ADM:%cn,[isnpl(%0)],%ch%cbLIASON:%cn,[iswiz(%0)],%ch%crWIZARD:%cn,[isadm(%0)],%ch%cgADMIN:%cn,[isjud(%0)],%ch%cyJUDGE:%cn,[isst(%0)],%ch%ccSTORY:%cn,N/A)],10)]%B[u(%0/bit)]
&FN.SORTBY2 Master Functions=[comp(name(%0),name(%1))]
&FN.STAFF2.FMT Master Functions=[mid([ljust([ifelse(and(u(fn.visstaff,%0),match(Busy,[capitalize([u(%0/status)])])),%ch%cb*%B[name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)]%cn,[name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)])][ifelse([u(fn.visstaff,%0)],[ifelse(hasflag(%0,dark),%B%ch%cw%(D%)%cn,)],)],25)],0,25)][ifelse([u(fn.visstaff,%0)],[center(singletime(idle(%0)),6)],[center(Off,6)])][ljust([switch(1,[isgod(%0)],%ch%cwCOMMAND:%cn,[iscmd(%0)],%ch%cwCMD-ADM:%cn,[isnpl(%0)],%ch%cbLIASON:%cn,[iswiz(%0)],%ch%crWIZARD:%cn,[isadm(%0)],%ch%cgADMIN:%cn,[isjud(%0)],%ch%cyJUDGE:%cn,[isst(%0)],%ch%ccSTORY:%cn,N/A)] ,10)]%B[u(%0/bit)]
&WHO_DEFAULT Master Functions=naxilsf
&HEADER_N Master Functions=[ljust(Name,16)]
&HEADER_C Master Functions=On For
&HEADER_I Master Functions=Idle
&HEADER_X Master Functions=Sex
&HEADER_S Master Functions=Status%b
&HEADER_L Master Functions=[ljust(Location,17)]
&HEADER_R Master Functions=[ljust(Race,11)]
&HEADER_A Master Functions=Alias%b
&HEADER_P Master Functions=[ljust(Position,20)]
&HEADER_F Master Functions=[ljust(#/Flags,10)]
&HEADER_K Master Functions=PFlags
&WHO_N Master Functions=[ljust(mid(name(%0)[switch([isstaff(%1)]:1,1:[hasflag(%0,umbra)],%B%ch%ccU%cn,1:[hasflag(%0,OBF)],%B%ch%cwO%cn,1:[hasflag(%0,CHIMERA)],%ch%cmC%cn)],0,15),16)]
&WHO_C Master Functions=%b[digittime(conn(%0))]
&WHO_I Master Functions=[rjust(singletime(idle(%0)),4)]
&WHO_X Master Functions=[switch(lcstr(mid(u(%0/sex),0,1)),w,(F),f,(F),m,(M),(?))]
&WHO_S Master Functions=[switch(1,hasflag(%0,dark),%ch%cc<DARK>%cn,match(OFF,u(%0/status)),%b<OFF>,match(JUDGE,u(%0/status)),%b<JDG>,match(BUSY,u(%0/status)),<BUSY>,match(u(%0/status),ON),%b%b<ON>,hasflag(%0,uninspected),%b<NEW>,[hassflag(%0,OOC)],%b<OOC>,[hassflag(%0,IC)],%b%b<IC>,%B<GST>)]%b
&WHO_L Master Functions=[switch([isstaff(%#)][gt([match(%0,%1)],0)][vis(%0)][unfind(%0,loc(%0))],1???,[ljust(mid(name(loc(%0)),0,17),17)],0000,[ljust(mid(name(loc(%0)),0,17),17)],?1??,[ljust(mid(name(loc(%0)),0,17),17)],??1?,[center(<<<Unfindable>>>,17)],???1,[center(<<<Unfindable>>>,17)])]
&WHO_R Master Functions=[capstr(ljust(ifelse(isstaff(%1),mid(u(%0/RACE),0,11),Unknown),11))]
&WHO_A Master Functions=[ljust(mid(u(%0/ALIAS),0,6),6)]
&WHO_P Master Functions=[ljust(mid(u(%0/POSITION),0,19),20)]
&WHO_F Master Functions=[switch([isstaff(%#)][gt([match(%0,%1)],0)][vis(%0)][unfind(%0,loc(%0))],1???,[ljust(mid([loc(%0)]/[flags([loc(%0)])],0,10),10)],0000,[ljust(mid([loc(%0)]/[flags([loc(%0)])],0,10),10)],?1??,[ljust(mid([loc(%0)]/[flags([loc(%0)])],0,10),10)],??1?,[center(Unfindable,10)],???1,[center(Unfindable,10)])]
&WHO_K Master Functions=[ifelse(isstaff(%1),[ljust([ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)],6)],%BNONE%B)]
&FN.WHOHEADER Master Functions=%ch%cw[setq(1,[switch(hasattr(%0,WHO),1,lcstr(mid(u(%0/WHO),0,20)),u(who_default))])][iter(lnum(strlen(%q1)),u(HEADER_[mid(%q1,##,1)]))]
&FN.WHOBODY Master Functions=[setq(1,switch(hasattr(%1,WHO),1,lcstr(mid(u(%1/WHO),0,20)),u(who_default)))][iter(lnum(strlen(%q1)),[u(WHO_[mid(%q1,##,1)],%0,%1)])]
&HEADER_T Master Functions=[ljust(Subrace,11)]
&WHO_T Master Functions=[capstr(ljust(ifelse(isstaff(%1),mid(u(%0/subRACE),0,11),Unknown),11))]
&FN.FINGER.QUICK Master Functions=[switch(1,isgod(%0),GOD,isnpl(%0),NPL,iswiz(%0),WIZ,isadm(%0),ADM,isjud(%0),JDG,isst(%0),ST%B,%B%B%B)]%B[mid([ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)][ifelse(hasflag(%0,dark),%B%ch%cw%(D%)%cn,)],25)],0,25)][ljust([switch(u(%0/sex),M*,%(M%),F*,%(F%),[ifelse(hasattr(%0,sex),%([mid(u(%0/sex),0,1)]%),%(-%))])],5)][ljust(%B[singletime(idle(%0))],6)][mid([ifelse(isstaff(%0),[u(%0/bit)],[u(%0/position)])],0,40)]
&DAT.FINGER00 Master Functions=%B[ljust(Sex:,15)][capitalize([u(%0/sex)])]%R%B[ljust(Mail:,15)][setq(1,[extract(mail(%0),2,1)])][switch(%q1,0,No Unread Messages,1,1 Unread Message,%q1 Unread Messages)]%R%B[ljust(Location:,15)][switch([isstaff(%1)][gt([match(%0,%1)],0)][vis(%0)][unfind(%0,loc(%0))],1???,[ljust(mid(name(loc(%0)),0,17),17)],0000,[ljust(mid(name(loc(%0)),0,17),17)],?1??,[ljust(mid(name(loc(%0)),0,17),17)],??1?,[center(<<<Unfindable>>>,17)],???1,[center(<<<Unfindable>>>,17)])]%R%B[ljust(Status:,15)][ifelse([u(fn.visstaff,%0)],%ch%ccConnected:%cn%B[singletime(idle(%0))]%R[space(16)]%ch%ccTime On:%cn [writetime(conn(%0))],%ch%crLast Connected:%cn%B[u(%0/last)])]%R[header2()]%R%B[ljust(Fullname:,15)][u(%0/fullname)]%R%b[ljust(Position:,15)][u(%0/position)]%R%B[ljust(Short Desc:,15)][u(%0/shortdesc)]
&DAT.FINGER10 Master Functions=%B[ljust(Sex:,15)][capitalize([u(%0/sex)])]%R%B[ljust(Mail:,15)][setq(1,[extract(mail(%0),2,1)])][switch(%q1,0,No Unread Messages,1,1 Unread Message,%q1 Unread Messages)]%R%B[ljust(Location:,15)][switch([isstaff(%1)][gt([match(%0,%1)],0)][vis(%0)][unfind(%0,loc(%0))],1???,[ljust(mid(name(loc(%0)),0,17),17)],0000,[ljust(mid(name(loc(%0)),0,17),17)],?1??,[ljust(mid(name(loc(%0)),0,17),17)],??1?,[center(<<<Unfindable>>>,17)],???1,[center(<<<Unfindable>>>,17)])]%R%B[ljust(Status:,15)][ifelse([u(fn.visstaff,%0)],%ch%ccConnected:%cn%B[singletime(idle(%0))]%R[space(16)]%ch%ccTime On:%cn [writetime(conn(%0))],%ch%crLast Connected:%cn%B[u(%0/last)])]%R[header2()]%R%B[ljust(Rank:,15)][switch(1,isgod(%0),GOD,iscmd(%0),COMMAND%BADMIN,isnpl(%0),LIASON,iswiz(%0),WIZARD,isadm(%0),ADMIN,isjud(%0),JUDGE,isst(%0),STORYTELLER,N/A)]%R%B[ljust(Bit:,15)][u(%0/bit)]%R%B[ljust(Apples:,15)][u(#36/apples.%0)]
&DAT.FINGER11 Master Functions=%B[ljust(Sex:,15)][capitalize([u(%0/sex)])]%R%B[ljust(Mail:,15)][setq(1,[extract(mail(%0),2,1)])][switch(%q1,0,No Unread Messages,1,1 Unread Message,%q1 Unread Messages)]%R%B[ljust(Location:,15)][switch([isstaff(%1)][gt([match(%0,%1)],0)][vis(%0)][unfind(%0,loc(%0))],1???,[ljust(mid(name(loc(%0)),0,17),17)],0000,[ljust(mid(name(loc(%0)),0,17),17)],?1??,[ljust(mid(name(loc(%0)),0,17),17)],??1?,[center(<<<Unfindable>>>,17)],???1,[center(<<<Unfindable>>>,17)])]%R%B[ljust(Status:,15)][ifelse([u(fn.visstaff,%0)],%ch%ccConnected:%cn%B[singletime(idle(%0))]%R[space(16)]%ch%ccTime On:%cn [writetime(conn(%0))],%ch%crLast Connected:%cn%B[u(%0/last)])]%R[header2()]%R%B[ljust(Rank:,15)][switch(1,isgod(%0),GOD,iscmd(%0),COMMAND%BADMIN,isnpl(%0),LIASON,iswiz(%0),WIZARD,isadm(%0),ADMIN,isjud(%0),JUDGE,isst(%0),STORYTELLER,N/A)]%R%B[ljust(Bit:,15)][u(%0/bit)]%R%B[ljust(Apples:,15)][u(#36/apples.%0)]%R%B[ljust(Staff Email:,15)][u(%0/semail)]
&DAT.FINGER01 Master Functions=%B[ljust(Sex:,15)][capitalize([u(%0/sex)])]%R%B[ljust(Mail:,15)][setq(1,[extract(mail(%0),2,1)])][switch(%q1,0,No Unread Messages,1,1 Unread Message,%q1 Unread Messages)]%R%B[ljust(Location:,15)][switch([isstaff(%1)][gt([match(%0,%1)],0)][vis(%0)][unfind(%0,loc(%0))],1???,[ljust(mid(name(loc(%0)),0,17),17)],0000,[ljust(mid(name(loc(%0)),0,17),17)],?1??,[ljust(mid(name(loc(%0)),0,17),17)],??1?,[center(<<<Unfindable>>>,17)],???1,[center(<<<Unfindable>>>,17)])]%R%B[ljust(Status:,15)][ifelse([u(fn.visstaff,%0)],%ch%ccConnected:%cn%B[singletime(idle(%0))]%R[space(16)]%ch%ccTime On:%cn [writetime(conn(%0))],%ch%crLast Connected:%cn%B[u(%0/last)])]%R[header2()]%R%B[ljust(Race:,15)][capitalize([u(%0/race)])][ifelse(hasattr(%0,subrace),%R%B[ljust(Subrace:,15)][capitalize([u(%0/subrace)])],)]%R%B[ljust(Concept:,15)][getperm(%0/dat.info,concept)]%R%B[ljust(JudgeNotes:,15)][ifelse(hasattr(%0,jdg.titles),[andlist([u(%0/jdg.titles)],|)],None.)]%R%B[ljust(WizNotes:,15)][ifelse(hasattr(%0,dat.titles),[andlist([u(%0/dat.titles)],|)],None.)]%R%B[ljust(Soft Flags:,15)][ifelse(hasattr(%0,sflags),[andlist([sflags(%0)])],None)].%R%B[ljust(PCs Home:,15)][name(home(%0))]%B\[[home(%0)]\]%R%B[ljust(Staff Email:,15)][u(%0/semail)]
&FN.SORTBY Master Functions=[comp(%0,%1)]
&FN.GRABTEMP Master Functions=[elements(grab(%0,%1~*,|),2,~)]
&FN.NOSTAFF Master Functions=[ifelse([or([match(%0,#471)],[isstaff(%0)])],0,1)]
&FN.STAFF Master Functions=[ifelse(isstaff(%0),1,0)]
&FN.APPROVED Master Functions=[hasattr(%0,dat.approved)]
&FN.UNAPPROVED Master Functions=[ifelse(hasattr(%0,dat.approved),0,1)]
&FN.NOSTAFF2 Master Functions=[ifelse(or(isstaff(%0),hasflag(%0,immortal)),0,1)]
&FN.MAGE Master Functions=[or([isstaff(%0)],[match([u(%0/race)],Mage)])]
&FN.CHANGELING Master Functions=[ifelse(strmatch([u(%0/race)],changeling),1,0)]
&FN.MORTAL Master Functions=[strmatch([u(%0/race)],mortal),1,0)]
&FN.SHIFTER Master Functions=[or([isstaff(%0)],[match([u(%0/race)],Shifter)],[hassflag(%0,KINFOLK)],[match([u(%0/subrace)],KINFOLK)])]
&FN.WRAITH Master Functions=[ifelse(strmatch([u(%0/race)],wraith),1,0)]
&FN.MORTAL+ Master Functions=[ifelse(strmatch([u(%0/race)],mortal+),1,0)]
&FN.VISRACE2 Master Functions=[switch(strmatch(%q1,[ifelse(hasattr(%0,race),[u(%0/race)],N/A)]),1,1,0,0)]
&FMT.CENSUS.MORTAL Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([getperm(%0/dat.info,concept)])],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FMT.CENSUS.MORTAL+ Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([ifelse(hasattr(%0,subrace),[u(%0/subrace)],[mid([capitalize([getperm(%0/dat.info,concept)])],0,25)])],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FMT.CENSUS.SHIFTER Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([u(%0/subrace)])]%B-%B[getperm(%0/dat.info,rank)],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FMT.CENSUS.WRAITH Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([u(%0/subrace)])],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FMT.CENSUS.VAMPIRE Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([u(%0/subrace)])]%B-%B[getperm(%0/dat.info,clan)],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FMT.CENSUS.MAGE Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([u(%0/subrace)])],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FMT.CENSUS.CHANGELING Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([u(%0/subrace)])]%B-%b[getperm(%0/dat.info,kith)],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FN.TIMEOFDAY Master Functions=[switch([extract(rtime(),1,1,:)],00,Night,01,Night,02,Night,03,Night,04,Night,05,Night,06,Dawn,07,Dawn,08,Day,09,Day,10,Day,11,Day,12,Day,13,Day,14,Day,15,Day,16,Day,17,Day,18,Dusk,19,Dusk,20,Night,21,Night,22,Night,23,Night)]
&FN.IMMORTAL Master Functions=[strmatch([u(%0/race)],immortal),1,0)]
&FMT.CENSUS.IMMORTAL Master Functions=%B[ljust([name(%0)][ifelse(hasattr(%0,alias),%B%([u(%0/alias)]%),)],25)]%B[ljust([ifelse(gt(conn(%0),1),%ch%crON%cn,[div(sub(secs(),convtime(get(%0/last))),86400)]d)],6)]%B[ljust([mid([capitalize([getperm(%0/dat.info,concept)])],0,25)],25)]%B[ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)]
&FUN_WHEREAMI Master Functions=[switch(%0,%1,[ansi(hy,H)],O)]
&FN.WHERE.ENOUGH Master Functions=gte(first(%0,:),1)
&FN.WHERE2.ENOUGH Master Functions=[gt(first(%0,:),1)]
&FN.LNUM2 Master Functions=[switch(isnum(%1),0,lnum(%0),1,iter(lnum(add(sub(%1,%0),1)),add(%0,##)))]
&FN.XLIST2 Master Functions=setq(1,switch(mod(words(%0,%2),%1),0,div(words(%0,%2),%1),add(div(words(%0,%2),%1),1)))[iter(lnum2(1,%q1),u(FN.XLIST3,%0,%1,##,%q1,%2))]
&FN.XLIST3 Master Functions=iter(lnum(%1),setq(2,extract(%0,add(%2,mul(##,%3)),1,%4))[switch(%q2,?*,%q2,_) ])
&FN.XLIST Master Functions=ulocal(FN.XLIST2,%0,%1,%2,%3,%4,%5,%6,%7,%8,%9)
&FN.WIZWHO.FMT Master Functions=[ljust(name(%0),15)]%B[ljust(singletime(idle(%0)),6)]%B[ljust([ifelse(hasattr(%0,isnpc),N,)][ifelse(hasattr(%0,issa),S,)][ifelse(hasattr(%0,isftr),F,)][ifelse(hasattr(%0,islead),L,)],8)]%B[ljust([ifelse(hasattr(%0,race),[u(%0/race)],None)],15)]-%B[ljust([ifelse(hasattr(%0,subrace),[u(%0/subrace)],None)],10)]%B[ljust([loc(%0)],10)][center([ifelse(hasattr(%0,dat.approved),%ch%cgYES%cn,%ch%crNO%cn)],8)]
&FN.FROLL Master Functions=trim(ulocal(FN.FROLL2,%0,%1,%2,%3,%4,%5,%6,%7,%8,%9))
&FN.FROLL2 Master Functions=u(FN.FROLL3,%0,%1,%2,%3,%4,%5,%6,%7,%8,%9)[words(%q5)] %q6 %q4 %q5
&FN.FROLL3 Master Functions=[setq(0,first(%0,=))][setq(1,switch(words(%0,=),1,,last(%0,=)))][setq(8,1)][setq(2,%#)][iter(%q0,setq(2,switch(words(##,:)[isdbref(locate(%#,first(##,:),*))],1?,%q2,21,locate(%#,first(##,:),*),locate(%#,*[first(##,:)],*)))[setq(8,switch(and(%q8,controls(%#,%q2)),1,1,0))][setq(3,add(%q3,switch(isnum(last(##,:)),1,last(##,:),getabil(%q2,last(##,:)))))],+)][iter(%q1,setq(2,switch(words(##,:)[isdbref(locate(%#,first(##,:),*))],1?,%q2,21,locate(%#,first(##,:),*),locate(%#,*[first(##,:)],*)))[setq(8,switch(and(%q8,controls(%#,%q2)),1,1,0))][setq(4,add(%q4,switch(isnum(last(##,:)),1,last(##,:),getabil(%q2,last(##,:)))))],+)][setq(5,iter(lnum(%q3),add(rand(10),1)))][iter(%q5,setq(6,add(%q6,switch(1,##,-1,lt(##,%q4),0,1)))[setq(7,%q7 [switch(1,##,-1-,lt(##,%q4),##,<##>)])])][ifelse(strmatch(iter(%q5,gte(##,%q4)),*1*),setq(6,switch(%q6,-*,0,%q6)),setq(6,switch(%q6,-*,-1,%q6)))][setq(7,trim(%q7))][setq(4,switch(isnum(%q4),1,%q4,0))]
&FN_HEARER Master Functions=ifelse(get(%0/no_spex),,iter(%1,ifelse(get(##/canhear),##,)))
&MUTTER_TO_SPY_FN Master Functions=[switch(%2,:*,{You sense [name(%0)] [delete(%2,0,1)] to [name(%1)].},;*,{You sense [name(%0)][delete(%2,0,1)] to [name(%1)].},{You sense [name(%0)] whispers "%2" to [name(%1)].})]
&PLACES_FN Master Functions=%r[setq(0,u(GETINFO,%l,%0,CURPLACES))][setq(1,filter(FN_INVIS,extract(get(%l/PLACENUMS),%0,1,|)))][capstr(u(GETINFO,%l,%0,NAME))] (#%0) has [setq(2,sub(r(0),words(r(1))))][switch(r(2),0,no empty places,1,1 empty place,[r(2)] empty places)].[switch(words(r(1)),0,,1,{%r%tPresent is: %b%ch%cy[name(r(1))]%cn.},{%r%tPresent are: %b[u(PLACE_LOOK,r(1))]})]
&PLACE_LOOK Master Functions=[setq(9,words(%0))][switch(r(9),0,,1,%ch[name(%0)]%cn,2,%ch%cy[name(first(%0))]%cn and %ch%cy[name(rest(%0))]%cn.,[iter(extract(%0,1,sub(r(9),1)),{%ch%cy[name(##)]%cn,})] and %ch%cy[name(extract(%0,r(9),1))]%cn.)]
&PLOOK_FOLD_FN Master Functions=%0%r[setq(1,extract(get(%l/PLACENUMS),%1,1,|))]Place #[ljust(%1,5)] [rjust([sub(u(GETINFO,%l,%1,CURPLACES),words(r(1)))] empty places,15)] [space(3)] [setq(2,sort(iter(r(1),name(##))))][ljust(mid(extract(r(2),1,1),0,14),14)] [ljust(mid(extract(r(2),2,1),0,14),14)] [ljust(mid(extract(r(2),3,1),0,14),14)][switch(gt(words(r(2)),3),1,u(NAME_3COL_FN,extract(r(2),4,3999)))]
&NAME_3COL_FN Master Functions=[fold(NAME_3AUX_FN,rest(%0),%r[space(42)][ljust(mid(first(%0),0,11),12)])]
&NAME_3AUX_FN Master Functions=%0[switch(mod(words(%0),4),0,%r[space(42)][ljust(mid(%1,0,11),12)],[ljust(mid(%1,0,11),12)])]
&WHICHPLACE Master Functions=[match(get(%0/PLACENUMS), *%1%b*, |)]
&GETINFO Master Functions=[extract(get(%0/PLACE%1),match(NAME MAXPLACES CURPLACES FIXED FULL EMPTY JOIN OJOIN DEPART ODEPART PREFIX,%2),1,|)]
&UPDATEINFO Master Functions=[replace(get(%0/PLACE%1),match(NAME MAXPLACES CURPLACES FIXED FULL EMPTY JOIN OJOIN DEPART ODEPART PREFIX,%2),%3,|)]
&ATPLACE Master Functions=[extract(get(%0/PLACENUMS), %1, 1, |)]
&FUNC_ATPLACE Master Functions=[switch(or(controls(%#,%0),match(rloc(%l,100),rloc(%0,100))),1,extract(get(%0/PLACENUMS), %1, 1, |),PERMISSION DENIED)]
&FUNC_PLACEINFO Master Functions=[switch(or(controls(%#,%0),match(rloc(%l,100),rloc(%0,100))),1,extract(get(%0/PLACE%1),match(NAME MAXPLACES CURPLACES FIXED FULL EMPTY JOIN OJOIN DEPART ODEPART PREFIX,%2),1,|),PERMISSION DENIED)]
&FUNC_WHICHPLACE Master Functions=[switch(or(controls(%#,%0),match(rloc(%l,100),rloc(%0,100))),1,match(get(%0/PLACENUMS), *%1%b*, |),PERMISSION DENIED)]
&MUTTER_FN Master Functions=[edit(u(DOTS_FN,u(SELECT_WORDS_FN,%0)),%b...,...)]
&MUTTER_TO_FN Master Functions=[switch(%2,:*,{You sense [name(%0)] [delete(%2,0,1)]},;*,{You sense [name(%0)][delete(%2,0,1)]},{[name(%0)] whispers "%2"})]
&MUTTER_FROM_FN Master Functions=[switch(%0,%1,switch(%2,:*,{You sense "[name(%0)] [delete(%2,0,1)]"},;*,{You sense "[name(%0)][delete(%2,0,1)]"},{You mutter to yourself, "%2"}),switch(%2,:*,{[name(%1)] senses "[name(%0)] [delete(%2,0,1)]"},;*,{[name(%1)] senses "[name(%0)][delete(%2,0,1)]"},{You whisper "%2" to [name(%1)].}))]
&DOTS_FN Master Functions=[switch(%0,*... ...*,u(DOTS_FN,edit(%0,... ...,...)),%0)]
&SELECT_WORDS_FN Master Functions=[switch(%0,*<*>*,[map(KILL_WORDS_FN,before(%0,<))] [before(after(%0,<),>)] [u(SELECT_WORDS_FN,after(%0,>))],map(KILL_WORDS_FN,%0))]
&KILL_WORDS_FN Master Functions=[switch([rand(3)]%0,0,,1,,2,,0*,%0,...)]
&TT_PARSE Master Functions=[switch(%1,{;},{%0%2},{:},{%0 %2},{"},{%0 says, "%2"},{|},{%2},{%0 says, "%1%2"})]
&CAN_SNOOP Master Functions=[and([hasattr(%0,canhear)],[not([hasattr([loc(%0)],no_spex)])])]
&CAN_SPY Master Functions=[and([hassflag(%0,hear)],[not([hasattr([loc(%0)],no_spex)])])]
&FN_SAME_REALM2 Master Functions=[or(and(andflags(%0,y!2),andflags(%1,y!2)),and(andflags(%0,/),andflags(%1,/)),and(andflags(%0,!y!/),andflags(%1,!y!/)),and(and(andflags(%0,y2),match(get(%0/PEERING_REALM),Normal)),andflags(%1,!y!2)),and(andflags(%0,y),and(andflags(%1,!y2),match(get(%1/PEERING_REALM),Umbra))),and(andflags(%0,!y!/),andflags(%1,!y!/!2)),and(and(andflags(%1,y2),match(get(%1/PEERING_REALM),Normal)),andflags(%0,!y!2)),and(andflags(%0,$),andflags(%1,$)),and(andflags(%0,1),or(andflags(%1,0),andflags(%1,1))))]
&FN-LANG-DIFF Master Functions=switch(1[setq(1,u(fn-lang-match,%0,%1))], eq(%q1,1), 6, eq(%q1,2), 5, switch(1[setq(9,match(v(langsgroups),*%1*,|))],lte(%q9,4),7,lte(%q9,8),9,gte(%q9,11),10,8))
&LANGSGROUPS Master Functions=Group1:French Italian Spanish German Dutch Portuguese Danish Latin Creole|Group2:Greek Bulgarian Romanian Romany Hungarian Turkish Polish Yiddish|Group3:Swedish Finnish Russian Norwegian Icelandic|Group4:Arabic Hebrew|Group5:Thai Cantonese Mandarin Japanese Korean Vietnamese Malay|Group6:Amerind Sioux Cree Lakota Navajo Miwok Haida Shoshoni Inuit|Group7:Hawaiian Polynesian|Group8:Hindi|Group9:Sign-Language Sabbat-Hand|Group10:Swahili|Group11:Pictish Gaelic|Group12:Egyptian|Group13:Sanskrit
&FN-LANG-MATCH Master Functions=words(setinter(get(%0/langs), rest(extract(v(langsgroups),match(v(langsgroups),*%1*,|),1,|),:)))
&FN-IMPOSS-LANGS Master Functions=Garou Lupine Bastet Feline Kitsune-Go Vulpine Ananasi Arachnid Corax Bird Gurahl Ursine Mokole Dragon Nagah Serpent Nuwisha Ratkin Rodent
&FN_SAME_REALM Master Functions=[or(and(andflags(%#,y!2),andflags(%0,y!2)),and(andflags(%#,/),andflags(%0,/)),and(andflags(%#,!y!/),andflags(%0,!y!/)),and(and(andflags(%#,y2),match(get(%#/PEERING_REALM),Normal)),andflags(%0,!y!2)),and(andflags(%#,y),and(andflags(%0,!y2),match(get(%0/PEERING_REALM),Umbra))),and(andflags(%#,!y!/),andflags(%0,!y!/!2)),and(and(andflags(%0,y2),match(get(%0/PEERING_REALM),Normal)),andflags(%#,!y!2)),and(andflags(%#,$),andflags(%0,$)),and(andflags(%#,1),or(andflags(%0,0),andflags(%0,1))))]
&FN_WRAITH Master Functions=[not(andflags(%0,Pc$))]
&FN_INVIS Master Functions=and(not(andflags(%0,Pcy)),not(andflags(%0,Pco)))
&EVAL_MSG Master Functions=[s(%0)]
&OEVAL_MSG Master Functions=[s(%1)]
&LANGUAGES Master Functions=[u(#42/[u(%0/race)])] [u(#42/[edit([u(%0/subrace)],%B,_)])]
&FN.PLACEINFO Master Functions=[switch(or(controls(%#,%0),match(rloc(%l,100),rloc(%0,100))),1,extract(get(%0/PLACE%1),match(NAME MAXPLACES CURPLACES FIXED FULL EMPTY JOIN OJOIN DEPART ODEPART PREFIX,%2),1,|),PERMISSION DENIED)]
&FN.PVOTE.FMT Master Functions=[ljust(name(%0),25)][ljust([u(%0/plusvote)],12)][capitalize([u(%0/race)])]
&FMT.READOUT Master Functions=%ch%cr<[center(%B%0%B,45,-)]>%cn%R%BYou [switch(%0,botch,botched,succ,were successful,fail,failed)] your hunt roll.%R%BHunt Style: %1%R%BBlood Roll: [switch(%0,botch,%ch%crBOTCH!%cn,Fail,FAIL,[switch(%3,-*,%ch%crBOTCH!%cn,0,0 successes.,1,1 Success.,%3 successes.)])]%R%BBlood Gained: [switch(%0,botch,%ch%crBOTCH!%cn,Fail,FAIL,[u(blood.readout,%4)])]%R%ch%cr<[repeat(-,45)]>%cr
&BLOOD.READOUT Master Functions=[switch(%0,-*,1 Blood Point. %(Poor%),0,1 Blood Point. %(Poor%),1,1 Blood Point. %(Poor%),%0 Blood Points. %([switch(%0,2,Acceptable,3,Good,4,Excellent,5,Above Excellent,6,Outstanding,7,God Like Even)]%))]
&ROLL.BLOOD Master Functions=[extract(froll(%0=6),2,1)]
&CALC.BLOOD Master Functions=[switch(%0,-*,1,0,1,%0)]
&FN.ANDLIST Master Functions=switch(words(%0,%1),0,,1,%0,2,first(%0,%1) and [last(%0,%1)],iter(ldelete(%0,words(%0,%1),%1),##\\,,%1) and [last(%0,%1)])
&FN.SUCKER Master Functions=[or(isstaff(%0),match(u(%0/race),vampire),[hasattr(%0,ghouled)])]
&FN.REALDESC Master Functions=[switch(1,[and([or([hassflag(%1,mask)],[hasflag(%1,obf)])],[not(hassflag(%1,cham)])],[ifelse([obf(%0,%1)],[u(%1/truedesc)],[u(%1/currdesc)])],[hassflag(%1,blur)],[ifelse([blur(%0,%1)],[u(%1/currdesc)],[u(%1/blurdesc)])],[hassflag(%1,cham)],[ifelse(gte([U(%0/hss_Level)],3),[u(%1/chamdesc)],[u(%1/chamdesc)])],[u(%1/currdesc,%0)])]%R%T[ifelse(hasattr(%1,bstatus),[name(%1)] is currently showing [switch(u(%1/btype),FBI,an FBI,police,a police,a)] badge.%B,)][ifelse(hassflag(%1,eyes),[name(%1)] has eyes that glow a beastial red.%B,)][ifelse(hassflag(%1,claws),[name(%1)] has animal like claws from [switch(u(%1/sex),M*,his,F*,her,its)] hands.%B,)][ifelse(and(match(u(%1/subrace),gypsy),match([text(%0,info,Family)],Tsurara),gt(stat(%0,powers,Blood Sense),0)),[bsense(%0,%1)]%B,)][ifelse(hassflag(%0,scent),[scent(%0,%1)]%B,)][ifelse(gte(stat(%1,M&F,Slayer),1),[switch([hunter(%0)][angel(%0)][vampire(%0)][match(U(%0/subrace),Ghoul)][hassflag(%0,GHOUL)][shifter(%0)],100000,You Feel uncomfortable around [name(%1)].,110000,,001000,You Feel uncomfortable around [name(%1)].,001100,You Feel uncomfortable around [name(%1)].,001010,You Feel uncomfortable around [name(%1)].,000001,You Feel uncomfortable around [name(%1)].)],)][ifelse(hassflag(%1,bliss),%R%R<%chOOC%cn If you are not actively looking for this PC you do not see [switch(u(%1/sex),M*,him,F*,her,it)]. If you are page a staffer.>,)][ifelse(hassflag(%1,delirium),%R%ch%crDelirium is in effect.%cn,)][canrage(%0,%1)]
&FN.OBF Master Functions=[switch([gte(u(%0/hss_level),u(%1/obf_level)],1,1,0)]
&FN.ZONEIC Master Functions=switch([isstaff(%0)][hassflag(%0,IC)],01,1,0)
&FN.ZONEOOC Master Functions=switch([isstaff(%0)][hassflag(%0,OOC)],01,1,11,1,10,1,0)
&FMT.ALTS Master Functions=[ljust([name(%0)],25)][ifelse(isstaff(%0),[center(STAFF ALT,30)],[ljust(u(%0/race),15)][ljust(u(%0/subrace),15)])][ifelse(hasflag(%0,connected),CONNECTED,[u(%0/last)])]
&FN.AURA Master Functions=[ifelse(gte(u(fn.aroll,%0),1),surrounded by a [switch([u(%1/race)],Vampire,[ifelse([gte([stat(%0,M&F,Deceptive Aura)],1)],normally,palely)] shaded,Shifter,brightly shaded,Mage,[ifelse(hasattr(%1,magic),myriad of sparkles surrounding a normally shaded,normally shaded)],normally shaded)],is not surrounded by an)]
&FN.BSENSE Master Functions=Coming soon.
&FN.RMATCH Master Functions=[ifelse([match(%0,loc(%1))],%ch%cr[u(%0/number)]%cn,[u(%0/number)])]
&FN.NOSEE Master Functions=[ifelse(orflags(%0,o/$D1y),0,1)]
&AURA_GROUPS Master Functions=General [switch(u(%0/race),Vampire,Vampires Restricted,Mage,Mages Restricted,Shifter,Shifters Restricted,Changeling,Changelings Restricted,Wraith,Wraiths Restricted)]
@Desc Master Functions=[columns([lattr(me)],25)]
&FN.VTIME Master Functions=u(#699/fn_convsecs2,u(#699/fn_vsecs))
&FN.WEATHERREPORT Master Functions=The current time is [ptime()]. [u(#700/[u(#700/current_weather)])]
&FN.VSECS Master Functions=[u(#699/fn_secs2vsecs,secs())]
&FN.RTIME Master Functions=[extract(vtime(),4,1)]
&FN.PTIME Master Functions=[ifelse([eq([ifelse(gte([extract(rtime(),1,1,:)],12),sub([extract(rtime(),1,1,:)],12),[ifelse(match([extract(rtime(),1,1,:)],00),12,[extract(rtime(),1,1,:)])])],0)],12,[ifelse(gte([extract(rtime(),1,1,:)],12),sub([extract(rtime(),1,1,:)],12),[ifelse(match([extract(rtime(),1,1,:)],00),12,[extract(rtime(),1,1,:)])])])]:[extract(rtime(),2,1,:)][ifelse(gte([extract(rtime(),1,1,:)],12),pm,am)]
&FN.SEASON Master Functions=[switch([extract(vtime(),2,1)],Jan,Winter,Feb,Winter,Mar,Spring,Apr,Spring,May,Spring,Jun,Summer,Jul,Summer,Aug,Summer,Sep,Autumn,Oct,Autumn,Nov,Autumn,Dec,Winter)]
&FN.STAT Master Functions=[ifelse(gt([words(getperm(%0/dat.%1,%2))],0),[getperm(%0/dat.%1,%2)],0)]
&FN.BLOOD Master Functions=[switch(%2,Add,[setstat(%0/dat.pool,Blood,[ifelse([gt([add([before([stat(%0,Pool,Blood)],/)],%1)],[u(%0/bpool)])],[u(%0/bpool)],[add([before([stat(%0,Pool,Blood)],/)],%1)])]/[u(%0/bpool)])],sub,[setstat(%0/dat.pool,Blood,[ifelse(lt([sub([before([stat(%0,pool,Blood)],/)],%1)],0),0,[sub([before([stat(%0,pool,Blood)],/)],%1)])]/[ifelse(gte([after([stat(%0,pool,blood)],/)],1),[after([stat(%0,pool,blood)],/)],[u(%0/bpool)])])],#-1 [ucstr(%2)] NOT FOUND)]
&FN.TEXT Master Functions=[ifelse(gt([words(getperm(%0/dat.%1,%2))],0),[capitalize([getperm(%0/dat.%1,%2)])],0)]
&FN.ROLL.CHECK Master Functions=[setq(0,0)][setq(1,iter(lnum(%0),setq(0,add(%q0,switch([setq(1,add(rand(10),1))]1,[eq(%q1,1)],-1,[gte(%q1,%1)],1,1,0)))))]%q0
&FN.SELECT.AURAS Master Functions=[setq(0,)][setq(1,%0)][rest([iter(lnum(%1),[setq(2,extract(%q1,add(rand(words(%q1,|)),1),1,|))][setq(0,setunion(%q0,%q2,|))][setq(1,setdiff(%q1,%q2,|))])]%q0,|)]
&FN.CHECK.LIST Master Functions=[setq(0,ulocal(fn.roll.check,[u(fn.rolltype1,%1)],[u(fn.rolltype2,%1)]))][switch(%q0,0,None,[setq(1,switch(sign(%q0),1,get(%0/auras),ulocal(auras_all)))][ulocal(fn.select.auras,%q1,abs(%q0))])]
&FN.AVAILABLE Master Functions=[setq(0,)][setq(1,iter(u(aura_groups,%0),setq(0,setunion(%q0,v(auras_##),|))))][rest(%q0,|)]
&FN.FIND.MATCH Master Functions=[switch(num(*%0),#-1,locate(%#,%0,ain),num(*%0))]
&FN.SEEAURA Master Functions=[or([gte(stat(%0,Disc,Auspex),2)],[match(u(%0/race),Wraith)],[gte(stat(%0,spheres,spirit),2)],[gte(stat(%0,spheres,mind),2)])]
&FN.ROLLTYPE1 Master Functions=[switch(1,[match(u(%0/race),Wraith)],10,[gte(stat(%0,abil,Awareness),3)],[add([stat(%0,abil,Awareness)],[stat(%0,attr,Perception)])],[gte(stat(%0,disc,Auspex),2)],[add([stat(%0,abil,empathy)],[stat(%0,attr,Perception)])],[gte(stat(%0,sphere,Spirit),1)],[ifelse([gt(stat(%0,info,Arete),0)],[stat(%0,info,Arete)],[stat(%0,info,Enlightenment)])])]
&FN.ROLLTYPE2 Master Functions=[switch(1,[match(u(%0/race),Wraith)],2,[gte(stat(%0,abil,Awareness),3)],6,[gte(stat(%0,disc,Auspex),2)],6,[gte(stat(%0,sphere,Spirit),1)],[add([stat(%0,sphere,Spirit)],3)])]
&AURAS_ALL Master Functions=[setq(0,)][setq(1,iter(v(aura_groups),setq(0,setunion(%q0,u(auras_##),|))))][rest(%q0,|)]
&AURAS_GENERAL Master Functions=Orange:Afraid|Purple:Aggressive|Red:Angry|Brown:Bitter|Light Blue:Calm|Pink:Compassionate|Lavender:Conservative|Gray:Depressed|Deep Red:Lustful|Light Green:Distrustful|Crimson:Enraged|Dark Green:Envious|Violet:Excited|Rose:Generous|Vermilion:Happy|Black:Hateful|Yellow:Idealistic|White:Innocent|Blue:Love|Green:Obsessed|Silver:Sad|Gold:Spiritual|Dark Blue:Suspicious|Mottled shifting:Confused|Sharp Flickering:Daydreaming|Hypnotic Swirling:Psychotic
&AURAS_RESTRICTED Master Functions=Black Veined:Diabolist|Pale:Pale|Bright:Bright
&AURAS_VAMPIRES Master Functions=Rapidly Rippling:Frenzy|
&AURAS_SHIFTERS Master Functions=Rapidly Rippling:Frenzy
&AURAS_MAGES Master Functions=Myriad Sparkles:Magic Use
&AURAS_CHANGELINGS Master Functions=Rainbow:Dreaming
&AURAS_WRAITHS Master Functions=Void:Absense Of Life
&FN.AROLL Master Functions=[u(fn.roll.check,[u(fn.rolltype1,%0)],[u(fn.rolltype2,%0)])]
&FN.SCENT Master Functions=[setq(1,[extract([froll([stat(%0,attr,Perception)]+[stat(%0,abil,Primal-Urge)]=[ifelse([match(u(%1/race),Mage)],9,8)])],2,1)])][switch([u(%1/race)],shifter,[ifelse(match([u(%0/subrace)],[u(%1/subrace)]),[u(#697/scent.shifter2,%1,[u(%1/subrace)])],[u(#697/scent.shifter,%1)])],mortal+,[switch(%q1,-*,[u(#697/scent.[u(#697/randrace)],%1)],0,[u(#697/scent.fail,%1)],[ifelse(hasattr(#697,scent.[u(%1/subrace)],[u(#697/scent.[u(%1/subrace)],[u(#697/scent.[u(%1/race)],%1)])])])],[switch(%q1,-*,[u(#697/scent.[u(#697/randrace)],%1)],0,[u(#697/scent.fail,%1)],[u(#697/scent.[u(%1/race)],%1)])])]
&FN.BLUR Master Functions=[setq(1,[extract([froll([ifelse(match(u(%0/race),Mage),[stat(%0,abil,awareness)],[stat(%0,abil,alertness)])]+[stat(%0,attr,Perception)]=[add(6,[u(%1/blurred)])])],2,1)])][switch(%q1,-*,0,0,0,1)]
&FN.HASSFLAG Master Functions=[gte([match([u(%0/sflags)],[ucstr(%1)])],1)]
&FN.SFLAGS Master Functions=[capitalize([u(%0/sflags)])]
&FN.CLASS Master Functions=[ifelse([gte([match(Num Word,%1)],1)],[ifelse(match(Num,%1),[ifelse(u(%0/class),[u(%0/class)],0)],[switch(u(%0/class),0,Chargen,1,Above Chargen,2,Feature,3,Game Feature,4,NPC,5,Chargen Tester,Chargen)])],#-1 NOT A VALID SWITCH)]
&FN.FTR Master Functions=[gte([words(lattr(%0/ftr.*))],1)]
&FMT.FTR Master Functions=[iter(lattr(%0/ftr.*),%r[ljust([capitalize([edit([after(##,.)],_,%B)])],15)][ljust([extract([setr(0,[u(%0/##)])],1,1,|)],15)][mid([ljust([extract(%q0,2,1,|)],35)],0,35)]%B-%B[name(%0)])]
&FN.ISAPP Master Functions=[hasattr(%0,dat.approved)]
&FN.WILLPOWER Master Functions=[switch(%2,Add,[setstat(%0/dat.pool,Willpower,[ifelse([gt([add([before([stat(%0,Pool,Willpower)],/)],%1)],[u(%0/wpool)])],[u(%0/wpool)],[add([before([stat(%0,Pool,Willpower)],/)],%1)])]/[u(%0/wpool)])],sub,[setstat(%0/dat.pool,Willpower,[ifelse(lt([sub([before([stat(%0,pool,Willpower)],/)],%1)],0),0,[sub([before([stat(%0,pool,Willpower)],/)],%1)])]/[ifelse(gte([after([stat(%0,pool,Willpower)],/)],1),[after([stat(%0,pool,willpower)],/)],[u(%0/wpool)])])],#-1 [ucstr(%2)] NOT FOUND)]
&FN.GNOSIS Master Functions=[switch(%2,Add,[setstat(%0/dat.pool,Gnosis,[ifelse([gt([add([before([stat(%0,Pool,gnosis)],/)],%1)],[u(%0/gpool)])],[u(%0/gpool)],[add([before([stat(%0,Pool,Gnosis)],/)],%1)])]/[u(%0/gpool)])],sub,[setstat(%0/dat.pool,Gnosis,[ifelse(lt([sub([before([stat(%0,pool,Gnosis)],/)],%1)],0),0,[sub([before([stat(%0,pool,Gnosis)],/)],%1)])]/[ifelse(gte([after([stat(%0,pool,gnosis)],/)],1),[after([stat(%0,pool,gnosis)],/)],[u(%0/gpool)])])],#-1 [ucstr(%2)] NOT FOUND)]
&FN.QUINT Master Functions=[switch(%2,Add,[setstat(%0/dat.pool,Quintessence,[ifelse([gt([add([before([stat(%0,Pool,Quintessence)],/)],%1)],[u(%0/qpool)])],[u(%0/qpool)],[add([before([stat(%0,Pool,Quintessence)],/)],%1)])]/[u(%0/qpool)])],sub,[setstat(%0/dat.pool,Quintessence,[ifelse(lt([sub([before([stat(%0,pool,Quintessence)],/)],%1)],0),0,[sub([before([stat(%0,pool,Quintessence)],/)],%1)])]/[ifelse(gte([after([stat(%0,pool,Quintessence)],/)],1),[after([stat(%0,pool,Quintessence)],/)],[u(%0/qpool)])])],#-1 [ucstr(%2)] NOT FOUND)]
&FN.RAGE Master Functions=[switch(%2,Add,[setstat(%0/dat.pool,Rage,[ifelse([gt([add([before([stat(%0,Pool,Rage)],/)],%1)],[u(%0/rpool)])],[u(%0/rpool)],[add([before([stat(%0,Pool,Rage)],/)],%1)])]/[u(%0/rpool)])],sub,[setstat(%0/dat.pool,Rage,[ifelse(lt([sub([before([stat(%0,pool,Rage)],/)],%1)],0),0,[sub([before([stat(%0,pool,Rage)],/)],%1)])]/[ifelse(gte([after([stat(%0,pool,Rage)],/)],1),[after([stat(%0,pool,Rage)],/)],[u(%0/rpool)])])],#-1 [ucstr(%2)] NOT FOUND)]
&MSG-MEETME Master Functions=[header2()]%r%0 has offered to 'meet' you.%r[ljust(To go where they are:,22)]Type +Mjoin %0%r[ljust(To bring them here:,22)]Type +Msummon %0%r[ljust(To decline:,22)]Type +Mdecline %0%rThis offer will expire in Five Minutes.%rThis code is provided to you by staff, don't abuse it.%R[header2()]
&HANGOUT.FMT Master Functions=[ljust(%1,4,.)][ljust([mid([name(%0)],0,40)],40,.)][center(%0,10,.)][center([words([filter(fn.isthere,lcon(%0))])],10,.)][ifelse(u(%0/nightzone),..NIGHTZONE,)]
&FN.ISTHERE Master Functions=[hasflag(%0,connected)]
&TAXI-ROOMS Master Functions=#145 #182 #189 #192 #195 #199 #202 #205 #210 #215 #218 #221 #224 #227 #230 #233 #236 #241 #246 #249 #252 #255 #258 #261 #264 #267 #270 #273 #276 #281
&FN.XP Master Functions=[switch(%2,Add,[setstat(%0/xpdata,Total,[add([stat2(%0,xpdata,Total)],%1)])][setstat(%0/xpdata,Current,[add([stat2(%0,xpdata,Current)],%1)])],SUB,[setstat(%0/xpdata,Current,[sub([stat2(%0,xpdata,Current)],%1)])],DEL,[setstat(%0/xpdata,Total,[sub([stat2(%0,xpdata,Total)],%1)])][setstat(%0/xpdata,Current,[sub([stat2(%0,xpdata,Current)],%1)])],#-1 [ucstr(%2)] NOT FOUND)]
&FN.STAT2 Master Functions=[ifelse(gt(getperm(%0/%1,%2),0),[getperm(%0/%1,%2)],0)]
&FN.BUILDER Master Functions=[haspower(%0,builder)]
&FN.WHEREAMI Master Functions=[match(loc(%0),[extract([u(#36/ROOMS)],%1,1,|)])]
&FN.ISAT Master Functions=[ifelse([whereami(%0,%1)],%ch%cg%1%cn,%1)]
&FN.WHEREIS Master Functions=[ifelse([gte([setr(9,[match([u(#36/rooms)],%0,|)])],1)],%ch%cg[ifelse([lt(%q9,10)],0%q9,%q9)]%cn,%ch%cg00%cn)]
&FN.DIR Master Functions=[switch(1,[gte(match([u(#36/west.rooms)],[stripansi([whereis(%0)])],|),1)],WEST,[gte(match([u(#36/east.rooms)],[stripansi([whereis(%0)])],|),1)],EAST,[gte(match([u(#36/north.rooms)],[stripansi([whereis(%0)])],|),1)],NORTH,[gte(match([u(#36/south.rooms)],[stripansi([whereis(%0)])],|),1)],SOUTH,NONE)]
&FN.WDIR Master Functions=[ifelse([gte(match([u(#36/west.rooms)],[stripansi([whereis(%0)])],|),1)],WEST,NONE)]
&FN.EDIR Master Functions=[ifelse([gte(match([u(#36/east.rooms)],[stripansi([whereis(%0)])],|),1)],EAST,NONE)]
&FN.NDIR Master Functions=[ifelse([gte(match([u(#36/north.rooms)],[stripansi([whereis(%0)])],|),1)],NORTH,NONE)]
&FN.SDIR Master Functions=[ifelse([gte(match([u(#36/south.rooms)],[stripansi([whereis(%0)])],|),1)],SOUTH,NONE)]
&FN.VAMPIRE Master Functions=[or([isstaff(%0)],[match([u(%0/race)],Vampire)],[hassflag(%0,GHOUL)],[match([u(%0/subrace)],GHOUL)])]
&FN.GYPSY Master Functions=[or([isstaff(%0)],[match([u(%0/subrace)],GYPSY)],[hassflag(%0,GYPSY)])]
&FN.HUNTER Master Functions=[or([isstaff(%0)],[match([u(%0/race)],Hunter)])]
&FN.NUMINA Master Functions=[or([isstaff(%0)],[match([u(%0/subrace)],Numina)],[hassflag(%0,NUMINA)])]
&FN.ANGEL Master Functions=[or([isstaff(%0)],[match([u(%0/subrace)],Angel)])]
&FN.SENSITIVE Master Functions=[or([isstaff(%0)],[match([u(%0/subrace)],Sensitive)],[hassflag(%0,STRANGE)])]
&FN.FAMILIAR Master Functions=[or([isstaff(%0)],[match([u(%0/race)],Familiar)])]
&FN.COP Master Functions=[or(isstaff(%0),hassflag(%0,cop))]
&FMT.HELPER Master Functions=[ljust(name(%0),25)][ljust([u(%0/alias)],10)][ljust([ifelse([hasflag(%0,connected)],[singletime(idle(%0))],Off Line)],10)][U(%0/helper)]
&FN.HELPER Master Functions=[hassflag(%0,helper)]
&FN.IDLED Master Functions=[ifelse(gte([div(sub(secs(),convtime(get(%0/last))), 86400)],30),[ifelse(orflags(%0,|Wzwi?),,[ifelse(haspower(%0,guest),,[ifelse(hassflag(%0,visit),1,0)])])],0)]
&FN.IDLE.FMT Master Functions=[ljust([Name(%0)]%B[ifelse([isapp(%0)],<A>,)],15)][ljust(%0,8)][ljust([u(%0/last)],27)][ljust([u(%0/race)],12)]-%B[u(%0/subrace)]
&FN.TEXT2 Master Functions=[ifelse(gt([words(getperm(%0/%1,%2))],0),[capitalize([getperm(%0/%1,%2)])],0)]
&FN.MONEY Master Functions=[ifelse([isstaff(%0)],9999999,[u(%0/money)])]
&FN.MSET Master Functions=[switch([isstaff(%0)]:%2,1*,,0:ADD,[set(%0,MONEY:[add([u(%0/money)],%1)])],0:SUB,[set(%0,MONEY:[sub([u(%0/money)],%1)])],#-1 [ucstr(%2)] NOT FOUND)]
&FN.MONEY2 Master Functions=[ifelse([isstaff(%0)],9999999,[ifelse(hasattr(%0,money),[u(%0/money)],0)])]
&FN.NOSOUND Master Functions=[ifelse(hassflag(%0,nosound),0,1)]
&FN.REALMED Master Functions=[switch([hasflag(%0,umbra)][hasflag(%0,Matrix)][hasflag(%0,peering)],101,1,100,0,010,0,011,0,000,1)]
&DO.HUNT.ADD Master Functions=$+hunt/add:@pemit %#=Done.;@dolist [search(type=rooms)]={&hdiff ##=[u(##/hdiff)]|7}
&FN.IDLED2 Master Functions=[ifelse(gte([div(sub(secs(),convtime(get(%0/last))), 86400)],7),[ifelse(orflags(%0,|Wzwi?),,[ifelse(haspower(%0,guest),,[ifelse(hassflag(%0,visit),1,0)])])],0)]
&ROOM_LIST Master Functions=#1354 #1466 #1577 #1581 #1584 #1587 #1590 #1593 #1618 #1619 #1623 #1624 #1625 #1628 #1631 #1635 #1637 #1640 #1643 #1646 #1649 #1652 #1656 #1659 #1662 #1674 #1900 #2004 #2052 #54 #55 #702 #774 #777 #778 #781 #817 #820 #823 #829
&SFLAGS Master Functions=TEST
&FN.CEMIT Master Functions=@cemit [capitalize(%0)]=%1
&FN.SETSOFT Master Functions=[setq(9,[switch(%0,me,%#,#*,%0,here,%l,[num(*%0)])])][setq(8,[mid(%1,0,1)])][setq(7,[mid(%1,1,[strlen(%1)])])][switch([gte([strlen([grab(u(#36/staff.flags),[ifelse(match(!,%q8),%q7,%1)],|)])],1)],0,#-1 NO SUCH FLAG,[ifelse(isdbref(%q9),[switch(%q8,!,[set(%q9,SFLAGS:[setdiff([u(%q9/sflags)],[ucstr(%q7)])])],[set(%q9,SFLAGS:[setunion([u(%q9/sflags)],[ucstr(%1)])])])],#-1 NO PLAYER FOUND)])]
&FN.CHECK.LIST2 Master Functions=[setq(0,ulocal(fn.roll.check,[stat(%#,info,arete)],[add(stat(%#,spheres,mind),3)]))][switch(%q0,0,None,[setq(1,switch(sign(%q0),1,get(%0/auras),ulocal(auras_all)))][ulocal(fn.select.auras,%q1,abs(%q0))])]
&HDR_AW Master Functions=[setq(6,locate(%0,%1,aimnpP))][switch(r(6),#-*,locate(%0,*%1,p),r(6))]
&FN.FINDPC Master Functions=[switch(%0,me,%1,here,[loc(%1)],#*,%0,[num(*%0)])]
&FN.CNUM Master Functions=[switch(%0,num,[words([search(type=players)])],list,[search(type=players)],con,[words([remove(lwho(),#471)])],clist,[remove(lwho(),#471)])]
&FN.BAN Master Functions=[gte(match([u(%0/banned)],%1)],1)]
&FN.GAG Master Functions=[gte(match([u(%0/gagged)],%1)],1)]
&FN.CANRAGE Master Functions=[switch([lt([before([stat(%1,pool,willpower)],/)],[before([stat(%1,pool,rage)],/)])],0,,1,%R<OOC: You feel slightly uneasy around [name(%1)].>)]
&FN.ISCMD Master Functions=[gt(match(u(#36/cmd-adm),%0),0)]
&FN.BUTTERFLY Master Functions=[ifelse([or([match([text(%0,info,race)],Mage)],[match([text(%0,info,race)],Familiar)])],[u(#2106/mage-desc)],[u(#2106/norm-desc)])]
&FN.STRIP Master Functions=edit(edit(edit(edit(edit(edit(edit(edit(edit(edit(%0,\(,%b),\),%b),\\^,%b),*,%b),/,%b),+,%b),-,%b),:,%b),|,%b),\,,%b)
&FN.FINDNUM Master Functions=[switch(%1,here,[loc(%0)],#*,%1,[findpc(%1,%0)])]
&FN.SUBRACE Master Functions=[match([edit([u(%0/subrace)],%B,_)],%1)]
&FN.SRACE Master Functions=[match([edit([u(%0/race)],%B,_)],%1)]
@set Master Functions=INHERIT
@create Global Data=10
&FUNCS Global Data=capitalize isstaff setstat getstat header2 header header3 grabperm grabtemp gettemp grabelem getelem grabstat vis unfind allstaff isgod isnpl isst isjud isadm iswiz andlist sucker getperm capitalize obf aura bsense rmatch isapp iscmd
&WIZARD Global Data=#151 #704 #144 #641 #889 #1634 #1761
&COMMAND Global Data=#3
&ADMIN Global Data=#294 #839 #614
&ATTR Global Data=peering_realm hss_Level dat.notes dat.titles jdg.notes jdg.titles obf_level bdata bstatus dat.attr2 np_read np_omit np_silent bg.section01 bg.section02 bg.section03 bg.section04 bg.section05 bg.section06 bg.section07 bg.section08 bg.section09 bg.section10 bg.section11 bg.section12 bg.section13 bg.section14 bg.section15 bg.section16 bg.section19 bg.section17 bg.section18 bg.section20 hr_silent hr_omit hr_read langs langpoints no_spex equip.01 equip.02 equip.03 equip.04 equip.05 equip.06 equip.07 equip.08 equip.09 equip.10 dat.powers dat.explain_m&F dat.explain_bgs dat.specs dat.retainers inited huntstyle hdiff cansee ast-loc aura_groups auras forms dat.background dat.pool dat.disc cd dat.virtue dat.necro dat.thaum dat.paths weap.01 weap.02 weap.03 weap.04 weap.05 weap.06 weap.07 weap.08 weap.09 weap.10 dat.temp dat.info dat.attr race subrace dat.approved dat.abil dat.m&f dat.timestamp btype bstatus jdg.notes jdg.titles dat.influence dat.action Money Owner Created cstatus hunted Hunt.type hunt.info hunt.botch auto bpool truedesc dat.gifts dat.spheres staff.class staff.race class sflags blurred bliss dat.lores wpool qpool gpool rpool pooldat meetme dat.stats dat.misc dat.powers abil bg vir mf dat.virtues dat.aff dat.rituals Reccs areccs dat.adv dat.res dat.avatar dat.foci dat.paradigm lastic Influence gdiff money.time status dat.upkeep hr_omit np_omit bb_omit Str.notes Str.titles dat.sigs mshield dat.gene mshield cward loredat dat.rites dat.powers cleared cleared2 dat.man jnotes bnotes wiznotes
&CATTR Global Data=peering_realm hss_Level dat.notes dat.titles obf_level bdata bstatus dat.attr2 canhear iscop iscrim bg.section01 bg.section02 bg.section03 bg.section04 bg.section05 bg.section06 bg.section07 bg.section08 bg.section09 bg.section10 bg.section11 bg.section12 bg.section13 bg.section14 bg.section15 bg.section16 bg.section19 bg.section17 bg.section18 bg.section20 langs langpoints equip.01 equip.02 equip.03 equip.04 equip.05 equip.06 equip.07 equip.08 equip.09 equip.10 dat.powers dat.explain_m&F dat.explain_bgs dat.specs dat.retainers plusvote xpdata voted4 huntstyle hdiff cansee ast-loc aura_groups auras forms dat.background dat.pool dat.disc dat.virtue dat.necro dat.thaum dat.paths weap.01 weap.02 weap.03 weap.04 weap.05 dat.lores weap.06 weap.07 weap.08 weap.09 weap.10 dat.temp dat.info dat.attr race subrace dat.approved dat.abil dat.m&f dat.timestamp btype bstatus dat.influence dat.action Money Owner cstatus hunted Hunt.type hunt.info hunt.botch auto autohunt bpool truedesc dat.gifts dat.spheres class blurred bliss wpool qpool gpool rpool pooldat meetme dat.stats dat.misc dat.powers abil bg vir mf dat.virtues dat.aff dat.rituals Reccs areccs dat.adv dat.res dat.avatar dat.foci dat.paradigm lastic Influence gdiff money.time status dat.upkeep dat.sigs mshield dat.gene mshield cward loredat dat.rites dat.powers dat.man jnotes bnotes wiznotes
&PEERING_REALM Global Data=1
&HSS_LEVEL Global Data=1
&DAT.NOTES Global Data=1
&DAT.TITLES Global Data=1
&JDG.NOTES Global Data=1
&JDG.TITLES Global Data=1
&OBF_LEVEL Global Data=1
&BDATA Global Data=1
&BSTATUS Global Data=1
&DAT.ATTR2 Global Data=1
&NP_READ Global Data=1
&NP_OMIT Global Data=1
&NP_SILENT Global Data=1
&BG.SECTION01 Global Data=1
&BG.SECTION02 Global Data=1
&BG.SECTION03 Global Data=1
&BG.SECTION04 Global Data=1
&BG.SECTION05 Global Data=1
&BG.SECTION06 Global Data=1
&BG.SECTION07 Global Data=1
&BG.SECTION08 Global Data=1
&BG.SECTION09 Global Data=1
&BG.SECTION10 Global Data=1
&BG.SECTION11 Global Data=1
&BG.SECTION12 Global Data=1
&BG.SECTION13 Global Data=1
&BG.SECTION14 Global Data=1
&BG.SECTION15 Global Data=1
&BG.SECTION16 Global Data=1
&BG.SECTION19 Global Data=1
&BG.SECTION17 Global Data=1
&BG.SECTION18 Global Data=1
&BG.SECTION20 Global Data=1
&HR_SILENT Global Data=1
&HR_OMIT Global Data=1
&HR_READ Global Data=1
&LANGS Global Data=1
&LANGPOINTS Global Data=1
&NO_SPEX Global Data=1
&EQUIP.01 Global Data=1
&EQUIP.02 Global Data=1
&EQUIP.03 Global Data=1
&EQUIP.04 Global Data=1
&EQUIP.05 Global Data=1
&EQUIP.06 Global Data=1
&EQUIP.07 Global Data=1
&EQUIP.08 Global Data=1
&EQUIP.09 Global Data=1
&EQUIP.10 Global Data=1
&DAT.POWERS Global Data=1
&DAT.EXPLAIN_M&F Global Data=1
&DAT.EXPLAIN_BGS Global Data=1
&DAT.SPECS Global Data=1
&DAT.RETAINERS Global Data=1
&INITED Global Data=1
&PLUSVOTE Global Data=1
&XPDATA Global Data=1
&VOTED4 Global Data=1
&HUNTSTYLE Global Data=1
&HDIFF Global Data=1
&CANSEE Global Data=1
&AST-LOC Global Data=1
&AURA_GROUPS Global Data=1
&AURAS Global Data=1
&FORMS Global Data=1
&DAT.BACKGROUND Global Data=1
&DAT.POOL Global Data=1
&DAT.DISC Global Data=1
&CD Global Data=1
&DAT.VIRTUE Global Data=1
&DAT.NECRO Global Data=1
&DAT.THAUM Global Data=1
&DAT.PATHS Global Data=1
&WEAP.01 Global Data=1
&WEAP.02 Global Data=1
&WEAP.03 Global Data=1
&WEAP.04 Global Data=1
&WEAP.05 Global Data=1
&WEAP.06 Global Data=1
&WEAP.07 Global Data=1
&WEAP.08 Global Data=1
&WEAP.09 Global Data=1
&WEAP.10 Global Data=1
&DAT.TEMP Global Data=1
&DAT.INFO Global Data=1
&DAT.ATTR Global Data=1
&RACE Global Data=1
&SUBRACE Global Data=1
&DAT.APPROVED Global Data=1
&DAT.ABIL Global Data=1
&DAT.M&F Global Data=1
&DAT.TIMESTAMP Global Data=1
&FUNC2 Global Data=realdesc allstaff ptime vtime vsecs weatherreport rtime season timeofday blood stat text scent blur hassflag sflags class willpower rage quint gnosis isapp froll xp stat2 whereamI isat whereis dir edir wdir sdir ndir vampire shifter gypsy angel numina hunter mage familiar sensitive cop text2 money2 mset cemit setsoft findpc findpc cnum ban gag canrage butterfly strip findnum subrace srace
&BTYPE Global Data=1
&DAT.INFLUENCE Global Data=1
&DAT.ACTION Global Data=1
&MONEY Global Data=1
&OWNER Global Data=1
&CREATED Global Data=1
&CSTATUS Global Data=1
&HUNTED Global Data=1
&HUNT.TYPE Global Data=1
&HUNT.INFO Global Data=1
&HUNT.BOTCH Global Data=1
&AUTO Global Data=1
&BPOOL Global Data=1
&TRUEDESC Global Data=1
&F.GAROU.HOMID Global Data=0 0 0 0 0 0 0
&F.BASTET.HOMID Global Data=0 0 0 0 0 0 0
&F.CORAX.HOMID Global Data=0 0 0 0 0 0 0
&F.ANANASI.HOMID Global Data=0 0 0 0 0 0 0
&F.GURAHL.HOMID Global Data=0 0 0 0 0 0 0
&F.MOKOLE.HOMID Global Data=0 0 0 0 0 0 0
&F.NAGAH.BALARAM Global Data=0 0 0 0 0 0 0
&F.NUWISHA.HOMID Global Data=0 0 0 0 0 0 0
&F.RATKIN.HOMID Global Data=0 0 0 0 0 0 0
&F.ROKEA.HOMID Global Data=0 0 0 0 0 0 0
&F.HAKKEN.HOMID Global Data=0 0 0 0 0 0 0
&F.KHAN.HOMID Global Data=0 0 0 0 0 0 0
&F.KUMO.HOMID Global Data=0 0 0 0 0 0 0
&F.NEZUMI.HOMID Global Data=0 0 0 0 0 0 0
&F.SAME-BITO.KABINA Global Data=0 0 0 0 0 0 0
&F.TENGU.HOMID Global Data=0 0 0 0 0 0 0
&F.ZHONG_LUNG.HOMID Global Data=0 0 0 0 0 0 0
&F.KITSUNE.HITOGATA Global Data=0 0 0 0 0 0 0
&F.GAROU.GLABRO Global Data=2 0 2 -1 -1 0 0
&F.GAROU.CRINOS Global Data=4 1 3 -1 0 0 0
&F.GAROU.HISPO Global Data=3 2 3 -3 0 0 0
&F.GAROU.LUPUS Global Data=1 2 2 -3 0 0 0
&F.BASTET.SOKTO Global Data=[u(sokto.[stat(%0,info,Tribe)])]
&F.BASTET.CHATRO Global Data=[u(chatro.[stat(%0,info,Tribe)])]
&F.BASTET.CRINOS Global Data=[u(crinos.[stat(%0,info,Tribe)])]
&F.BASTET.FELINE Global Data=[u(feline.[stat(%0,info,Tribe)])]
&SOKTO.BAGHEERA Global Data=1 1 2 -1 -1 0 0
&CHATRO.BAGHEERA Global Data=2 3 3 -3 -2 0 0
&CRINOS.BAGHEERA Global Data=3 3 3 -3 0 0 0
&FELINE.BAGHEERA Global Data=1 3 2 -1 0 0 0
&SOKTO.BALAM Global Data=2 1 2 -1 -1 0 0
&CRINOS.BALAM Global Data=3 3 3 -4 0 0 0
&CHATRO.BALAM Global Data=3 2 2 -4 0 0 0
&FELINE.BALAM Global Data=2 3 2 -3 0 0 0
&SOKTO.BUBASTI Global Data=0 1 0 0 1 0 0
&CRINOS.BUBASTI Global Data=1 3 1 -2 -3 0 0
&CHATRO.BUBASTI Global Data=2 4 1 -2 0 0 0
&FELINE.BUBASTI Global Data=-1 4 1 0 0 0 0
&SOKTO.KHAN Global Data=2 1 2 -1 -1 0 0
&CRINOS.KHAN Global Data=3 2 3 -3 0 0 0
&CHATRO.KHAN Global Data=4 2 3 -3 0 0 0
&FELINE.KHAN Global Data=2 2 3 -3 0 0 0
&SOKTO.PUMONCA Global Data=1 2 2 -1 1 0 0
&CRINOS.PUMONCA Global Data=3 3 4 -3 0 0 0
&CHATRO.PUMONCA Global Data=3 3 3 -3 0 0 0
&FELINE.PUMONCA Global Data=2 3 3 0 0 0 0
&SOKTO.QUALMI Global Data=0 2 0 0 1 0 0 0
&CRINOS.QUALMI Global Data=1 3 1 -2 0 0 0
&CHATRO.QUALMI Global Data=1 4 1 -2 0 0 0
&FELINE.QUALMI Global Data=0 4 0 -2 0 0 0
&SOKTO.SIMBA Global Data=2 1 2 -1 1 0 0
&CRINOS.SIMBA Global Data=3 2 3 -2 0 0 0
&CHATRO.SIMBA Global Data=3 2 3 -2 0 0 0
&FELINE.SIMBA Global Data=3 3 2 -1 0 0 0
&SOKTO.SWARA Global Data=1 2 1 -1 0 0 0
&CRINOS.SWARA Global Data=2 4 3 -3 0 0 0
&CHATRO.SWARA Global Data=2 4 3 -3 0 0 0
&FELINE.SWARA Global Data=1 4 2 -3 0 0 0
&F.CORAX.CRINOS Global Data=1 1 1 -2 -1 3 0
&F.CORAX.CORVID Global Data=-1 1 0 -3 0 4 0
&F.GURAHL.ARTHREN Global Data=3 0 3 -2 -2 1 0
&F.GURAHL.CRINOS Global Data=5 -1 5 -3 0 -1 0
&F.GURAHL.BJORNEN Global Data=4 2 4 -3 0 2 0
&F.GURAHL.URSUS Global Data=3 0 3 -3 0 2 0
&F.MOKOLE.ARCHID Global Data=4 -1 4 -3 0 0 0
&F.NAGAH.SILKARAM Global Data=2 0 2 -2 -2 0 0
&F.NAGAH.AZHI_DAHAKA Global Data=3 2 3 -3 -2 0 0
&F.NAGAH.KALI_DAHAKA Global Data=2 2 2 0 0 0 0
&F.NAGAH.VASUKI Global Data=-1 2 1 0 0 0 0
&F.NUWISHA.TSITSU Global Data=1 1 2 -1 0 0 0
&F.NUWISHA.MANABOZHO Global Data=2 3 3 -2 0 0 0
&F.NUWISHA.SENDEH Global Data=2 3 3 -3 0 0 0
&F.NUWISHA.LATRANI Global Data=0 3 3 -3 0 0 0
&F.RATKIN.CRINOS Global Data=1 4 1 0 0 -2
&F.RATKIN.RODENS Global Data=-1 2 2 -2 0 -3
&F.ROKEA.GLABRUS Global Data=2 -2 2 -2 -2 0 0
&F.ROKEA.GLADIUS Global Data=4 -2 3 0 -4 0 0
&F.ROKEA.CHASMUS Global Data=3 -1 2 0 -4 0 0
&F.ROKEA.SQUAMUS Global Data=2 2 3 0 -4 0 0
&F.ANANASI.LILIAN Global Data=3 3 2 -1 -1 0 0
&F.ANANASI.PITHUS Global Data=4 2 3 -3 -2 0 0
&F.ANANASI.CRAWLERLING Global Data=0 6 0 0 0 0 0
&F.HAKKEN.GLABRO Global Data=2 0 2 -1 -1 0 0
&F.HAKKEN.CRINOS Global Data=4 1 3 -1 0 0 0
&F.HAKKEN.HISPO Global Data=3 2 3 -3 0 0 0
&F.HAKKEN.LUPUS Global Data=1 2 2 -3 0 0 0
&F.KHAN.SOKTO Global Data=2 1 2 -1 -1 0 0
&F.KHAN.CRINOS Global Data=3 2 3 -3 0 0 0
&F.KHAN.CHATRO Global Data=4 2 3 -3 0 0 0
&F.KHAN.FELINE Global Data=2 2 3 -3 0 0 0
&F.KUMO.LILIAN Global Data=3 3 3 -1 -1 0 0
&F.KUMO.AGHORA Global Data=3 2 3 -3 -2 0 0
&F.KUMO.THOUSAND_FANG Global Data=0 6 0 0 0 0 0
&F.NEZUMI.CRINOS Global Data=1 4 1 0 0 -2
&F.NEZUMI.RODENS Global Data=-1 2 2 -2 0 -3
&F.SAME-BITO.TSUFU Global Data=2 -2 2 -2 -2 0 0
&F.SAME-BITO.KARVU Global Data=4 -2 3 0 -4 0 0
&F.SAME-BITO.WARUI Global Data=3 -1 2 0 -4 0 0
&F.SAME-BITO.WATASAMI Global Data=2 2 3 0 -4 0 0
&F.TENGU.CRINOS Global Data=1 1 1 -2 -1 3 0
&F.TENGU.CORVID Global Data=-1 1 0 -3 0 4 0
&F.ZHONG_LUNG.ARCHID Global Data=4 0 4 0 -4 0 0
&F.KITSUNE.SAMBUHENGE Global Data=0 1 1 0 -1 0
&F.KITSUNE.KOTO Global Data=0 2 2 0 -1 1 0
&F.KITSUNE.JUKO Global Data=1 3 3 0 -2 1 0
&F.KITSUNE.KYUBI Global Data=0 4 2 0 -1 2 0
&DAT.GIFTS Global Data=1
&DAT.SPHERES Global Data=1
&DEL.CRINOS Global Data=1
&DEL.CHATRO Global Data=1
&DEL.KARVO Global Data=1
&DEL.LILIAN Global Data=1
&DEL.PITHUS Global Data=1
&DEL.AGHORA Global Data=1
&DEL.GLADIUS Global Data=1
&DEL.ARCHID Global Data=1
&DEL.AZHI_DAHAKA Global Data=1
&STAFF.CLASS Global Data=1
&STAFF.RACE Global Data=1
&CLASS Global Data=1
&SFLAGS Global Data=1
&STAFF.FLAGS Global Data=Blur|Bliss|Mask|Aura|Scent|Hear|Staff|Ghoul|Kinfolk|Art|Cop|Crime|Eyes|Claws|Delirium|Elder|Primogen|AutoHunt|China|Shades|Helper|Unfindable|Gnosis|Queued|Eastern|Western|Numina|Mediainf|Editor|Rom|Manager|IC|OOC|Chantry|Nosound|Cward|TP|Weapons|VISIT|Mshield|Staffward|Scry|Nojudge|Cham|Nosweep|Sorcerer|Closed|Umbra
&FLAG.BLUR Global Data=%TA flag to signify that a shifter PC is using his/her blur of the milky eye gift.
&FLAG.BLISS Global Data=%TA flag to signify that a shifter PC is using his/her blissful ignorance gift.
&FLAG.MASK Global Data=%TA flag to signify a vampire PC is using Mask of 1000 faces power.
&FLAG.AURA Global Data=%TA flag to signify that a PC is using an automated aura seeing code.
&FLAG.SCENT Global Data=%TA flag to signify that a PC is using an automated scent of the true form gift code.
&FLAG.HEAR Global Data=%TA flag to signify that a PC can over hear whisper, mutter, and table talk code.
&FLAG.STAFF Global Data=%TA flag to signify a PC is a staff alt.
&FLAG.GHOUL Global Data=%TA flag for non-mortal ghouls to signify they are in fact ghouls.
&FLAG.KINFOLK Global Data=%TA flag for non-mortal kinfolk to signify they are in fact kinfolk.
&FLAG.ART Global Data=%TA flag to include the ASCII in the sheet.
&FLAGS.CRIME Global Data=%TA flag to denote a criminal PC.
&FLAGS.COP Global Data=%TA flag to denote a cop or legal PC.
&FLAG.COP Global Data=%TA flag to denote a cop or legal PC.
&FLAG.CRIME Global Data=%TA flag to denote a criminal PC.
&FLAG.EYES Global Data=%TA flag for Protean One.
&FLAG.CLAWS Global Data=%TA flag for Protean Two.
&FLAG.DELIRIUM Global Data=%TA flag to denote delirium is in effect.
&FLAG.ELDER Global Data=%TThis flag marks a PC as an Elder Vampire.
&FLAG.PRIMOGEN Global Data=%TThis flag marks a PC as an Primogen Vampire.
&FLAG.AUTOHUNT Global Data=%TA flag that sets a Vampire Automatically Hunting.
&FLAG.CHINA Global Data=%TA flag that marks a PC as a member of the chinese community.
&FLAG.SHADES Global Data=%TA flag to show a pc is using shades to cover his Protean one.
&BLURRED Global Data=1
&BLISS Global Data=1
&FLAG.HELPER Global Data=%TThis flag signifies a player as a player helper.. No real power, just a flag to denote this.
&FLAG.APP Global Data=%TA flag for marking a person safe from nuke.
&FLAG.VISIT Global Data=%TA flag a player a visitor.
&FLAG.UNFINDABLE Global Data=%TA flag to make PCs unfindable.
&WPOOL Global Data=1
&QPOOL Global Data=1
&GPOOL Global Data=1
&RPOOL Global Data=1
&POOLDAT Global Data=1
&MEETME Global Data=1
&DAT.STATS Global Data=1
&DAT.MISC Global Data=1
&ABIL Global Data=1
&BG Global Data=1
&VIR Global Data=1
&MF Global Data=1
&DAT.VIRTUES Global Data=1
&FTR.4 Global Data=*mage|Feature|Old Witch (Mage - Orphan)|Fri Jan 12 18:03:17 2001|This character is an orphan mage, while her arete is 3, she has become quite adept at all the spheres (Level 2) save for Entropy, Matter, Mind and Forces, Spirit which she will have a 3 for. This character will have strong roots in Wiccan belief and as such her paradigm should reflect that.%R%R%TA good Character to think of while imaging this Feature PC is the shop owner from the movie 'The Craft'. Well versed and very in tune with her magic. This PC will have a Personal Node and Sanctuary. The more wowing the background the more flexible I'll be with the points.
&DAT.AFF Global Data=1
&DAT.RITUALS Global Data=1
&FTR.5 Global Data=*vampire|Feature|Seneschal %(Vampire%)|Sun Jan 14 11:32:32 2001| A 7th generation elder who serves as the gatekeeper to the Prince's audience. I am not dedicated to the seneschal being from a specific clan though a Ventrue will not be accepted due to the current Prince being from the Ventrue.
&FTR.6 Global Data=*vampire|Feature|Tremere Regent %(Vampire%)|Sun Jan 14 11:43:46 2001| An 8th generation elder who serves as the director of the local chantry. You will be held responsible for all that goes on in the chantry so you must be willing to accept not only the perks but the problems which accompany that position. The responsibilities include defense of the chantry, oversight of apprentices, and perhaps politics with the other clans if you do not delegate authority to he Regent Secundus.
&FTR.7 Global Data=*vampire|Feature|Tremere Regent Secundus %(Vampire%)|Sun Jan 14 11:52:19 2001| A 9th generation ancillae who serves as the second in command of the local chantry. You will be held responsible for all which the Regents delegates to you. This is a position which is used to groom future Regents so you must balance ambition with caution. The responsibilities include defense of the chantry, oversight of select apprentices, and perhaps politics with the other clans if the Regent trusts you enough...or perhaps wishes to see you fail.
&FTR.8 Global Data=*vampire|Feature|Toreador Primogen %(Vampire%)|Sun Jan 14 12:07:07 2001| An 8th generation elder. I prefer someone with dominant social skills, contacts in some artistic endeavors, etc. to a martial concept for this feature.
&FTR.16 Global Data=*vampire|Feature|Anarch Leader (Vampire)|Sun Jan 14 13:18:36 2001| A 10th generation ancillae. You are the current leader of the anarchs if there can be said to be one. You do not care for the restrictions of the Camarilla, but the "freedom" of the Sabbat is certainly not something you want either. You attempt to police the anarchs so that the local Sheriff does not feel the need to turn attention to you and yours overly often.
&FTR.17 Global Data=*mage|Feature|Keeper of Delsinae (Mage)|Mon Jan 15 22:12:19 2001|This character will live in and function around the Portal to Delsinae, the Craft/Orphan horizon realm. Its rumored that he/she created Delsinae. I am not going to list the arete here, but it will be quite high. This /IS/ the only mage feature with an arete higher than 4. This application will require multiple interviews and an RP session with Mage Staff before approval for this mage. This Mage's specialty sphere is Matter and Forces. Keep in mind, this means this mage is very powerful compared to many. This means the background /MUST/ be impressive.
&RECCS Global Data=1
&ARECCS Global Data=1
&FTR.21 Global Data=*hunter|Feature|Sanbenito Leader (Hunter)|Wed Jan 17 12:28:13 2001|This Feature PC will be the head of the Sanbenito Cenaculum in San Francisco. He or she should be a caregiver type character more prone toward the healing arts then Combative. Interested parties should page, @mail or email (+finger Faith for addy) Faith with a proposed character sheet, concept and background. This PC will require an audition, if only because of the sensitive information they will possess.
&FTR.22 Global Data=*hunter|Feature|Censor(Hunter)|Wed Jan 17 12:29:37 2001|This feature PC will be the one responsible for keeping thier 'eye' on the members of the Society of Leopold. He or she will need to be able to interact in both the capacity of a Hunter and one who monitors the organization for in appropriate behavior. Interested parties should page, @mail or email (+finger Faith for addy) Faith with a proposed character sheet, concept and background. This PC will require an audition, if only because of the sensitive information they will possess.
&FTR.23 Global Data=*hunter|Feature|Youngblood Gangleader(Hunter)|Wed Jan 17 12:30:19 2001|This feature PC will bear a dual responsibility. Not only will he or she be responsible for the approved Youngbloods... They will also shoulder the burden of recruiting mortals into the group through RP. Interested parties should page, @mail or email (+finger Faith for addy) Faith with a proposed character sheet, concept and background. This PC will require an audition, if only because of the sensitive information they will possess.
&ROOMS Global Data=#875|#878|#881|#270|#273|#258|#236|#267|#276|#233|#145|#615|#230|#281|#261|#255|#227|#182|#246|#241|#252|#221|#224|#192|#249|#218|#215|#199|#210|#205|#202|#195|#189
&NORTH.ROOMS Global Data=15|06|07|05|04|08|09|10|11|12
&EAST.ROOMS Global Data=04|05|08|09|11|12|14|18|24|33|32|28
&SOUTH.ROOMS Global Data=24|32|28|33|27|29|30|31|26|23|22|21|25|20|19
&WEST.ROOMS Global Data=15|06|19|20
&DAT.ADV Global Data=1
&FTR.30 Global Data=*media|Feature|Editor-In-Cheif(Media - Newspaper)|Sun Jan 21 12:02:07 2001|
        You're a hard-bitten, heavy thinking person who's slogged their ways through the trenches of small bylines, social columns and farm reports, up from the city page to where you are today, Editor of one of the leading metropolitan newspapers in the world. When you were young, you used to tag along after delivering papers with the old man who used to run the local paper: he taught you that the news is more than tabloid trauma and what catches the public eye: its truth, honesty, cold hard facts tempered with the glimpses into humanity that always happen. You left for school and got your degree, starting to work as a stringer for one paper then the next.. You moved from paper to paper over the years, gaining experience and moving up to finally getting you're own byline. It was during the **** War when you came fully into your own, writing a stunning, stellar, insightful series of articles that gained you a prestigious Pulitzer. But while it achieved critical acclaim, there were those who thought you were being too truthful, too real and a bit of disillusionment set in. Still, you received an offer not long after to come here and lead the paper into the next century.
***Supers can apply for this position, but I would prefer a mortal***

&FTR.31 Global Data=*media|Feature|Evening Anchor(Media - Television)|Sun Jan 21 12:02:45 2001|
        You always new you were meant for something more than the backwoods, country town you grew up in; but until college were dithering between drama classes and creative writing, you started working for the university paper. You just happened to be around with a couple fellow students with cameras during a college crisis. You caught the eye of a major network when the tapes were found and later shown campus and city-wide, with your clear recitation of the facts yet that subtle human approach that drew the listener in making them care, want to learn more. Slowly, you were groomed for bigger and better things: bit reporting here, sports reporting, political conventions, etc. You had you're own style and flair and while not classically attractive, there was just something about you that caught the public eye and they would watch and listen to what you had to say. While you're not as deft at writing the things you have to report, you have the intrinsic ability to make people listen without all the sensationalism of tabloids and news magazines.
***Supers can apply for this position, but I would prefer a mortal***

&FTR.33 Global Data=*media|Feature|Diamond-in-the-Rough(Media - Television)|Sun Jan 21 12:25:27 2001|
        You were nosey in school, so nosey that your teachers had to inform your parents that you were simply perhaps too curious for your own good. This continued with you through high school, where you you marked as a 'tattletale' and given the nickname, 'The Reporter'. No one trusted you until you learned to keep your mouth shut and milk people for the most crucial information. This became your calling in life and you began to imitate those seemingly glamorous reporters on the 6:00 news as you ate dinner. When the time came for college you knew exactly what you wanted to do. You wanted people to see you and to know that you were the one getting them what they didn't even know they wanted to hear. Through the years the followed you did well in some course but not so well in others, finding that your nose for news got you more into trouble then perhaps you would have liked, but still the thrill of discovery overwhelmed you and you'd do it over and over again. Like an addiction. Senior year came and more then one professor saw your eagerness and gave you a break. Before you knew it you were fresh out of college and doing reports that your elders would kill to get. Your seen as a whipper-snapper, who's wet behind the ears by your colleagues, yet your boss keeps you around because of your drive and determination. You have a natural gift that needs to be matured. Your a thrill-seeker and an explorer, waiting to see what will pop up at every turn. If you get nosey enough, you'll put yourself in harms way to get to the truth that you know is there.
***Vampires need not apply for this one. Daylight hours required***

&FTR.34 Global Data=*media|Feature|Undercover-Bottom-Dweller(Media - Newspaper)|Sun Jan 21 13:03:17 2001|
        You did your time doing copy-edits and swimming through piles of other's paperwork till your boss decided to give you the break you were hoping for. Well maybe not exactly. Sent to infiltrate some of the most influential crime families in California your what's called a bottom-dweller. A nothing. Your sent on shit jobs while the mob-bosses feed their fat faces. Drug pick ups and the like, and you try to feed back info little by little to your editor without letting nobody know that there's a leak. Someone has to do it, but if you get scooped...it's back to the desk for you. Or worse, sleeping with the fishes.

&DAT.RES Global Data=1
&DAT.AVATAR Global Data=1
&DAT.FOCI Global Data=1
&DAT.PARADIGM Global Data=1
&FTR.35 Global Data=*mage|Feature|Marshal (Mage -- Craft)|Wed Jan 24 10:38:53 2001|The local leader of the Templar Knights, this character will have an arete 4 but will have a forces sphere to match. As the Templars are quite combat oriented, I expect a background to show this lifestyle. This character will require a few OOC duties as part of the package. Contact us if you are interested in more details.
&LASTIC Global Data=1
&INFLUENCE Global Data=1
&GDIFF Global Data=1
&APPLES.#33 Global Data=1
&APPLES.#3 Global Data=9
&APPLES.#647 Global Data=6
&APPLES.#71 Global Data=3
&APPLES.#641 Global Data=7
&APPLES.#144 Global Data=9
&APPLES.#151 Global Data=16
&APPLES.#710 Global Data=5
&APPLES.#1096 Global Data=1
&APPLES.#704 Global Data=11
&APPLES.#611 Global Data=2
&APPLES.#889 Global Data=1
&APPLES.#667 Global Data=1
&APPLES.#294 Global Data=3
&MONEY.TIME Global Data=1
&STATUS Global Data=1
&WEAPON Global Data=[filter(fn.weapon,[allstaff()])]
&FN.WEAPON Global Data=[hassflag(%0,weapons)]
&FN.TINYPLOT Global Data=[hassflag(%0,TP)]
&TINYPLOT Global Data=[filter(fn.tinyplot,[allstaff()])]
&DAT.UPKEEP Global Data=1
&FTR.58 Global Data=*crime|Feature|Mafia Godfather|Sat Feb 03 19:53:52 2001|
        Head of the traditional Italian Mafia in the San Francisco Bay area. Your organization is not as strong as most traditional Mafia in American cities due primarily to the long-term ethnic diversity of the city. It has been an uphill battle to hold power. Time to change that scenario. Character can be male or female but female applications are going to have to explain how the character has gained and held power in one of the strongholds of male chauvinism.

         Please Note: This is a Feature Character. It will be up to you to help recruit and build your organization. This is a position of IC power, IC status and IC authority. You will in large part control the direction of growth and development of criminal activities for your family. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your choices for the organization's business and your IC actions will contribute to the rise or fall of your family.

&FTR.59 Global Data=*crime|Feature|Yakuza Boss|Sat Feb 03 19:55:39 2001|
        Boss of the Yakuza who rival the power of any faction in the city. This character should be steeped in tradition. Do you have what it takes to hold the position? Better, Do you have what it takes to grab more? Character can be male or female but female applications are going to have to explain how the character has gained and held power in one of the remaining strongholds of male chauvinism. A Female applicant for this position's application is going to have to be spectacular.

         Please Note: This is a Feature Character. It will be up to you to help recruit and build your organization. This is a position of IC power, IC status and IC authority. You will in large part control the direction of growth and development of criminal activities for your family. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your choices for the organization's business and your IC actions will contribute to the rise or fall of your family.

&FTR.60 Global Data=*crime|Feature|Tong Leader|Sat Feb 03 19:55:58 2001|
        Leader of a faction of the ChineseTong Triad. A significant power in Chinatown. The Tong has been here for a century or more. The Chinese faction has one of the smallest power-bases of the organized families. Have you got what it takes to change that? Character can be male or female but female applications are going to have to explain how the character has gained and held power in one of the remaining strongholds of male chauvinism. 

         Please Note: This is a Feature Character. It will be up to you to help recruit and build your organization. This is a position of IC power, IC status and IC authority. You will in large part control the direction of growth and development of criminal activities for your family. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your choices for the organization's business and your IC actions will contribute to the rise or fall of your family.

&FTR.61 Global Data=*crime|Feature|Russian Mafia Godfather|Sat Feb 03 19:56:09 2001|
        The up and comers in the city. Violent, dangerous, on the rise. Are you smart enough and ruthless enough to seize more turf and survive? Character can be male or female but female applications are going to have to explain how the character has gained and held power in one of the remaining strongholds of male chauvinism. 

         Please Note: This is a Feature Character. It will be up to you to help recruit and build your organization. This is a position of IC power, IC status and IC authority. You will in large part control the direction of growth and development of criminal activities for your family. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your choices for the organization's business and your IC actions will contribute to the rise or fall of your family.

&FTR.62 Global Data=*crime|Feature|Mexican Mafia Godfather|Sat Feb 03 19:56:28 2001|A small but dangerous faction in the city. Street gang oriented. Prone to violence. Do you have what it takes to push the others aside, grab more turf and build an empire? Character can be male or female but female applications are going to have to explain how the character has gained and held power in one of the remaining strongholds of male chauvinism. 

         Please Note: This is a Feature Character. It will be up to you to help recruit and build your organization. This is a position of IC power, IC status and IC authority. You will in large part control the direction of growth and development of criminal activities for your family. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your choices for the organization's business and your IC actions will contribute to the rise or fall of your family.

&FTR.63 Global Data=*crime|Feature|Black Mafia Godfather|Sat Feb 03 19:58:09 2001|A small but dangerous faction in the city. Street gang oriented. Prone to violence. Do you have what it takes to push the others aside, grab more turf and build an empire? Character can be male or female but female applications are going to have to explain how the character has gained and held power in one of the remaining strongholds of male chauvinism. 

         Please Note: This is a Feature Character. It will be up to you to help recruit and build your organization. This is a position of IC power, IC status and IC authority. You will in large part control the direction of growth and development of criminal activities for your family. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your choices for the organization's business and your IC actions will contribute to the rise or fall of your family.

&FTR.64 Global Data=*crime|Feature|Madam|Sat Feb 03 19:58:37 2001|
        Madam of a high class Call-Girl operation or a high class Brothel. Sophisticated, wealthy, with serious connections. Character will be a central information exchange. Cross Sphere characters will be happily considered.

        Please Note: This is a Feature Character. This is a position of subtle IC power, this character will know secrets about the rich and powerful. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your business and your IC actions.

&FTR.65 Global Data=*crime|Feature|Hitter|Sat Feb 03 19:58:51 2001|Male or Female. A true professional. An independent mercenary that works for any faction that has the coin. Very good at his or her profession. This character will undergo a very strict application review. 

         This is a position of IC power, this character will be know and feared. Character will also have to be willing to accept some Staff guidance and interference. The Crime Sphere Staff would like to see this individual on a minimum of ten hours a week. There will be TP's developed and run around your business and your IC actions.

&BB_OMIT Global Data=1
&STR.NOTES Global Data=1
&STR.TITLES Global Data=1
&DAT.SIGS Global Data=1
&MSHIELD Global Data=1
&DO.ALLVOTE Global Data=$+allvote *:@pemit %#=You just did an all vote of %0 exp.;@scan %chALLVOTE:%cn %N just ran an all vote.;@dolist [search(type=players)]={@switch [isstaff(##)][isapp(##)]=01,{@pemit ##=You got a staff vote. [xp(##,%0,ADD)]}}
&FTR.67 Global Data=*plus|Feature|Psychic (Mortal+ - Government)|Fri Feb 16 22:43:56 2001|This Psychic is exactly that. He or she will have the ability to see things in the future, and/or past. Their history is tied into a governmental agency, and hence the player will spend their character generation days in close contact with staff, working out details. Player must be active at least 10 hours of the week, and willing to participate in plots. This character is going to be a large part in an ongoing plot. Player note: You will be required to take the flaw - Uncontrolled Sight - and must therefore be willing to let staff take control during those times. (See Mortal+ Sensitives Sphere Information Room *Casting Couch* for more information on this flaw.) This character may be either a Sensitive, or just a Numina character, and may, with a shining app, have other powers as well. Contact staff for specifics.
&DAT.GENE Global Data=1
@VZ Global Data=2
&JDG.1 Global Data=By~#3|Loc~#14|MUX~982444248|VR~1019932609|Reason~Test
&JDGR.0 Global Data=By~#3|Loc~#14|MUX~982444295|VR~1019932750|Reason~Test
&CWARD Global Data=1
&INFO.VAMPIRE Global Data=Race Sect Clan
&INFO.SHIFTER Global Data=Race Subrace Tribe
&INFO.MAGE Global Data=Race Subrace Craft Tradition Convention
&INFO.HUNTER Global Data=Race Subrace
&INFO.MORTAL+ Global Data=Race Subrace [u(info.[edit([u(%0/subrace)],%B,_)])]
&INFO.FAMILIAR Global Data=Race Subrace Craft Tradition Convention
&LOREDAT Global Data=1
&DAT.RITES Global Data=1
&CMD-ADM Global Data=#33 #647
&CLEARED Global Data=1
&CLEARED2 Global Data=1
&DAT.MAN Global Data=1
&FTR.68 Global Data=*shifter|Feature|Coggie Alpha|Thu Mar 01 19:48:58 2001|Rank 3 Child of Gaia Alpha
&FTR.69 Global Data=*shifter|Feature|Caern Beta|Thu Mar 01 19:49:27 2001|Rank 2 CoG or Fury Beta, No Ahrouns
&FTR.70 Global Data=*shifter|Feature|GW Beta|Thu Mar 01 19:50:28 2001|Rank 2 Glass Walker Beta for the Caern/Sept, No Ahrouns
&LIST-TEST Global Data=Test|Sorrow|Approved 3-5-01
&LIST-ED'S_BUILD Global Data=Ed's Build|Edward|030501
&LIST-TY'S_BUILD Global Data=Ty's Build|Tycho|030501
&LIST-AUTOSHOP Global Data=Autoshop|Weylin|030201
&LIST-PAC Global Data=PAC|Cassandra|030501
&JNOTES Global Data=1
&LIST-DAMIAN'SBUILD Global Data=Damian'sBuild|Mad|030601
&BNOTES Global Data=1
&WIZNOTES Global Data=1
&INFO.GHOUL Global Data=Clan Sect
&LIST-PINCUSHIO Global Data=Pincushio|Khrysta|030508 started
&LIST-ESTATE Global Data=Estate|Kassidy|030801 started
&FTR.71 Global Data=*shifter|Feature|Gurahl|Fri Mar 09 21:20:06 2001|This would be for a Rank 2 or 3 Gurahl depending upon how good the background is. This would be someone in the forest who would be calm, wise, and Non-combat oriented.
@set Global Data=INHERIT
@create Chargen Object %(CO%)=10
&ST.INFO Chargen Object (CO)=%RName: [u(%0/fullname)] - [ifelse(hasattr(%0,sex),%([u(%0/sex)]%),)]%r%R[ljust(Race:%B[getperm(%0/dat.info,race)],39)]Concept:%B[getperm(%0/dat.info,concept)][u(st.info.[u(%0/race)],%0)]
&ST.INFO.GHOUL Chargen Object (CO)=%R[ljust(Clan:%B[getperm(%0/dat.info,clan)],39)]Sect:%B[getperm(%0/dat.info,sect)]%R[ljust(Dominator:%B[getperm(%0/dat.info,dominator)],39)]
&SWITCHES Chargen Object (CO)=info attr abil pool background virtue powers gifts spheres disc thaum necro paths lores m&f retainers
&ST.INFO.VAMPIRE Chargen Object (CO)=%R[ljust(Nature:%B[getperm(%0/dat.info,nature)],39)]Demeanor:%B[getperm(%0/dat.info,demeanor)]%r[ljust([ifelse(gte(getperm(%0/dat.background,generation),1),[sub(13,getperm(%0/dat.background,generation))],13)]th generation [getperm(%0/dat.info,clan)],39)]Sire:%B[getperm(%0/dat.info,sire)]%R[ljust(Path of [getperm(%0/dat.info,path)]:%B[u(fn.getpath,%0)],39)]Date Of Embrace:%B[getperm(%0/dat.info,date of embrace)]%R[ljust(Date Of Birth:%B[getperm(%0/dat.info,date of birth)],39)]Sect:%b[getperm(%0/dat.info,sect)]%R[ljust(Humanity Rating:%B[getperm(%0/dat.info,Humanity Rating)],39)]
&ST.INFO.MORTAL Chargen Object (CO)=%R[ljust(Nature:%B[getperm(%0/dat.info,nature)],39)]Demeanor:%B[getperm(%0/dat.info,demeanor)][u(st.info.[u(%0/subrace)])]
&ST.INFO.HUNTER Chargen Object (CO)=%R[ljust(Primary Virtue:%B[getperm(%0/dat.info,Primary Virtue)],39)]Starting Conviction:%B[ifelse(gt(words(getperm(%0/dat.info,starting conviction)),0),[getperm(%0/dat.info,starting conviction)],[switch(getperm(%0/dat.info,creed),Vengence,4,Martyrdom,4,3)])]%R[ljust(Creed:%b[getperm(%0/dat.info,creed)],39)]
&ST.ATTR Chargen Object (CO)=%r%ch[ljust(setq(0,get(%0/dat.ATTR))[space(5)]Physical,26)][ljust(space(5)Social,26)][space(5)]Mental%cn[iter(v(ATTRIBUTES),ifelse(dec(mod(#@,3)),,%r)[ljust(##[ifelse(words(getperm(%0/dat.specs,##)),*,)],20)][ljust(grabstat(%q0,##),5)])]
&ATTRIBUTES Chargen Object (CO)=Dexterity Appearance Intelligence Stamina Charisma Perception Strength Manipulation Wits
&ST.ABIL Chargen Object (CO)=%r%ch[setq(5,)][ljust(space(5)Talents,26)][ljust(space(5)Skills,26)][space(5)]Knowledges%cn[setq(1,u(fn.LIST,%0,TALENTS))][setq(2,u(FN.LIST,%0,SKILLS))][setq(3,u(FN.LIST,%0,KNOWLEDGES))][iter(setr(4,sortby(FN.SORTBY,get(%0/dat.ABIL),|)),setq(setr(8,ifelse(match(%q1,setr(9,first(##,~)),|),5,ifelse(match(%q2,%q9,|),6,7))),r(%q8)|##),|)][iter(lnum(max(words(%q5,|),words(%q6,|),words(%q7,|))),ifelse(gt(#@,1),%r[ljust(first(setr(1,elements(%q5,#@,|)),~)[ifelse(words(getperm(%0/dat.specs,first(elements(%q5,#@,|),~))),*,)],20)][ljust(rest(%q1,~),6)][ljust(first(setr(1,elements(%q6,#@,|)),~)[ifelse(words(getperm(%0/dat.specs,first(elements(%q6,#@,|),~))),*,)],20)][ljust(rest(%q1,~),6)][ljust([first(setr(1,elements(%q7,#@,|)),~)][ifelse(words(getperm(%0/dat.specs,first(elements(%q7,#@,|),~))),*,)],20)][rest(%q1,~)],),%b)]
&FN.LIST Chargen Object (CO)=[setunion(u(%1.[get(%0/RACE)]),u(%1),|)]
&ST.M&F Chargen Object (CO)=%R[center(%chMerits & Flaws%cn,78)][iter([sortby(fn.sortby,get(%0/dat.M&F),|)],ifelse(mod(#@,2),%r,)[ljust(first(##,~)[ifelse(words(getperm(%0/dat.EXPLAIN_M&F,first(##,~))),*,)] <[ifelse(isnum(last(##,~)),abs(last(##,~))[ifelse(gt(last(##,~),0),M,F)],last(##,~))]>,39)],|)]
&MORMERITS Chargen Object (CO)=Code of Honor~1|Higher Purpose~1|Common Sense~1|Concentration~1|Lightening Calculator~1|Eidetic Memory~2|Iron Will~3|Self-Confident~5|Time Sense~1|Light Sleeper~2|Acute-Senses~4|Acute Hearing~1|Acute Vision~1|Acute Smell~1|Acute Taste~1|Animal Magnetism~1|Ambidextrous~1|Computer Aptitude~1|Crack Driver~1|Mechanical Aptitude~1|Poison Resitance~1Natrual Linguist~2|Daredevil~3|Fast learner~3|Perfect Balance~3|Jack of All trades~5|Catlike Balance~1|Enchanting Voice~2|Natural Leader~1|True Love~1|Danger Sense~2|True Faith~7|Magic Resistance~2|Oracular Ability~3|Innocent~1|Ecstatic~2|Soothing Voice~3|Precognition~4|Black Market Ties-1~1|Black Market Ties-2~2|Black Market Ties-3~3|Black Market Ties-4~4|Judicial Ties~2|Mansion~3|Media Ties~2|Nightclub~2|Church Ties~3|Corporate Ties~3|Entertainment Ties~3|Police Ties~3|Political Ties~3|Underworld Ties~3|Corporation CEO~5|Double-Jointed~1|Huge Size~4|Insensible to pain~5|Thick-Skinned~2
&MORFLAWS Chargen Object (CO)=Addiction-1~1|Addiction-2~2|Addiction-3~3|Compulsion~1|Dark Secret~1Intolerance~1|Nightmares~1|Overconfident~1|Phobia-1~1|Shy~1|Soft-Hearted~1|Speech Impediment~1Curiosity~2|Low Self Image~2|Obsession~2|Sadism/Masochism~2|Short Fuse~2|Vengeance~2|Flashbacks~3|Deranged~3|Driving Goal~3|Hatred~3|Lifesaver~3|Phobia-3~3|Anachronism~1|Isolated Upbringing~1|Amnesia~2|Confused~2|Weak-Willed~2|Absent-Minded~3|Deep Sleeper~1|Color-Blindness~1|Hard of Hearing~1|Bad Sight~1|Deaf~4|Blind~6|Inept~5|Uneducated~5|Unskilled~5|Offensive to Animals~1|Ward~3|Enemy-1~1|Enemy-2~2|Enemy-3~3|Enemy-4~4|Enemy-5~5
&ST.LORES Chargen Object (CO)=%r%ch[center(Lores,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.lores),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.THAUM Chargen Object (CO)=%r%ch[center(Thaumaturgy Rituals,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.thaum),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.DISC Chargen Object (CO)=%r%ch[center(Disciplines,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.disc),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&FN.SORTBY Chargen Object (CO)=[comp(%0,%1)]
&ST.NECRO Chargen Object (CO)=%r%ch[center(Necromantic Rituals,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.necro),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.PATHS Chargen Object (CO)=%r%ch[center(Paths,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.paths),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.VIRTUE Chargen Object (CO)=%r%ch[center(Virtues,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.virtue),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.POOL Chargen Object (CO)=%r%ch[center(Pools,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.pool),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&FN.GETPATH Chargen Object (CO)=[u(dat.[edit([getperm(%0/dat.info,path)],%B,_)],%0)]
&FN.NOSTAFF2 Chargen Object (CO)=[ifelse(or(isstaff(%0),haspower(%0,builder)),0,1)]
&ST.INFO.MORTAL+ Chargen Object (CO)=%R[ljust(Nature:%B[getperm(%0/dat.info,nature)],39)]Demeanor:%B[getperm(%0/dat.info,demeanor)][u(st.info.[u(%0/subrace)],%0)]
&MORSKILLS Chargen Object (CO)=Crafts|Animal Ken|Drive|Etiquette|Firearms|Melee|Performance|Repair|Stealth|Survival|Technology|Security|
&MORSECSKILLS Chargen Object (CO)=Acrobatics|Camouflage|Hunting|Animal Training|Artillery|Black Smith|Blind Fighting|Boat Handling|Brewing|Bribery|Carpentry|Climbing|Cooking|Dancing|Debate|Escapology|Falconry|Fast-Draw|Fast-Talk|First Aid|Fishing|Forgery|Gambling|Game Playing|Gunsmithing|Heavy Weapons|Hypnotism|Jewler|Journalism|Leatherworking|Lockpicking|Mechanitcal Repair|Parachuting|Photography|Pickpocket|Pottery|Psychoanalysis|Scuba|Singing|Skiing|Speed Reading|Tracking|Demolitions|Archery|Disguise|Hypnotism|Meditation|Pilot|Swimming|Traps|Research|Falconry|Ride|Storytelling|Sleight of hand|Torture|Throwing|Interrogation|Calligraphy|Origami|
&MORTALENTS Chargen Object (CO)=Leadership|Alertness|Athletics|Brawl|Dodge|Expression|Intimidation|Streetwise|Subterfuge|Acting|Empathy|Intuition|
&MORSECTALENTS Chargen Object (CO)=Negotiation|Search|Scrounge|Guile|Intrigue|Instruction|Artistic Expression|Carousing|Diplomacy|Fortune-Telling|Mimicry|Scan|Seduction|Sense Deception|Style|Ventriloquism|Haggling|Public Speaking|
&MORKNOWLEDGES Chargen Object (CO)=Academics|Computer|Investigation|Law|Linguistics|Medicine|Occult|Science|Politics|Bureacracy|Finance|Enigmas|
&MORSECKNOWLEDGES Chargen Object (CO)=Law Enforcement|Police Procedures|Psychology|Anthropology|Ethnology|Fine Arts|History|Philosphy|Astronomy|Biology|Chemistry|Electronics|Engineering|Forensic Pathology|Geology|Mathematics|Metallurgy|Paraphysics|Alchemy|Area Knowledge|Astrology|Computer Hacking|Computer Programming|Heraldry|Military Science|Architecture|Art History|Criminology|Archeaology|
&LANGUAGES Chargen Object (CO)=Apache|French|Italian|Spanish|German|Dutch|Portuguese|Danish|Latin|Creole|Greek|Bulgarian|Romanian|Hungarian|Turkish|Polish|Yiddish|Swedish|Finnish|Russian|Norwegian|Icelandic|Arabic|Hebrew|Thai|Cantonese|Mandarin|Japanese|Korean|Vietnamese|Malay|Amerind|Sioux|Cree|Lakota|Navajo|Miwok|Haida|Shoshoni|Inuit|Hawaiian|Polynesian|Hindi|Sign-Language|Swahili|Pictish|Gaelic|Egyptian|Sanskrit
&STAFFLANGS Chargen Object (CO)=[u(languages)][u(languages.garou)][u(languages.mokole)][u(languages.corax)][u(languages.gurhal)][u(languages.bastet)][u(languages.bastet)][u(languages.kitsune)][u(languages.ratkin)][u(languages.nuwisha)][u(languages.gypsy)][u(languages.sabbat)][u(languages.nagah)][u(languages.ananasi)]
&LANGUAGES.GYPSY Chargen Object (CO)=|Romany
&LANGUAGES.SABBAT Chargen Object (CO)=|Sabbat-Hand
&LANGUAGES.MORTAL+ Chargen Object (CO)=[u(Languages.[u(%0/subrace)])]
&LANGUAGES.VAMPIRE Chargen Object (CO)=[u(Languages.[u(%0/subrace)])]
&MORMERITS Chargen Object (CO)=Code of Honor~1|Higher Purpose~1|Common Sense~1|Concentration~1|Lightening Calculator~1|Eidetic Memory~2|Iron Will~3|Self-Confident~5|Time Sense~1|Light Sleeper~2|Acute-Senses~4|Acute Hearing~1|Acute Vision~1|Acute Smell~1|Acute Taste~1|Animal Magnetism~1|Ambidextrous~1|Computer Aptitude~1|Crack Driver~1|Mechanical Aptitude~1|Poison Resitance~1Natrual Linguist~2|Daredevil~3|Fast learner~3|Perfect Balance~3|Jack of All trades~5|Catlike Balance~1|Enchanting Voice~2|Natural Leader~1|True Love~1|Danger Sense~2|True Faith~7|Magic Resistance~2|Oracular Ability~3|Innocent~1|Ecstatic~2|Soothing Voice~3|Precognition~4|Black Market Ties-1~1|Black Market Ties-2~2|Black Market Ties-3~3|Black Market Ties-4~4|Judicial Ties~2|Mansion~3|Media Ties~2|Nightclub~2|Church Ties~3|Corporate Ties~3|Entertainment Ties~3|Police Ties~3|Political Ties~3|Underworld Ties~3|Corporation CEO~5|Double-Jointed~1|Huge Size~4|Insensible to pain~5|Thick-Skinned~2
&MORFLAWS Chargen Object (CO)=Addiction-1~1|Addiction-2~2|Addiction-3~3|Compulsion~1|Dark Secret~1Intolerance~1|Nightmares~1|Overconfident~1|Phobia-1~1|Shy~1|Soft-Hearted~1|Speech Impediment~1Curiosity~2|Low Self Image~2|Obsession~2|Sadism/Masochism~2|Short Fuse~2|Vengeance~2|Flashbacks~3|Deranged~3|Driving Goal~3|Hatred~3|Lifesaver~3|Phobia-3~3|Anachronism~1|Isolated Upbringing~1|Amnesia~2|Confused~2|Weak-Willed~2|Absent-Minded~3|Deep Sleeper~1|Color-Blindness~1|Hard of Hearing~1|Bad Sight~1|Deaf~4|Blind~6|Inept~5|Uneducated~5|Unskilled~5|Offensive to Animals~1|Ward~3|Enemy-1~1|Enemy-2~2|Enemy-3~3|Enemy-4~4|Enemy-5~5
&ST.RETAINERS Chargen Object (CO)=%R[center(%chRetainers/Allies/Familiars/Contacts%cn,78)]%R%ch[ljust(#,5)]%B[ljust(Name,20)][ljust(Race,15)][ljust(Type,10)]Class%cn%R[iter(lattr(%0/ret.*),[ljust(#@%),5)]%B[ljust([edit([capitalize([after(##,.)])],_,%B)],20)][ljust([getperm(%0/##,Race)],15)][ljust([getperm(%0/##,Type)],10)][getperm(%0/##,class)])]
&TALENTS Chargen Object (CO)=Alertness|Athletics|Awareness|Brawl|Dodge|Expression|Intimidation|Streetwise|Subterfuge|Acting|Negotiation|Newspeak|Search|Scrounge|Guile|Intrigue|Instruction|Empathy|Artistic Expression|Carousing|Diplomacy|Fortune-Telling|Mimicry|Scan|Seduction|Sense Deception|Style|Ventriloquism|Dreamcraft|Intuition|Primal-Urge|Haggling|Public Speaking|Masquerade|Misdirection|Malkavian Time
&TALENTS.MAGE Chargen Object (CO)=Leadership
&TALENTS.WAMPIRE Chargen Object (CO)=Leadership
&TALENTS.MORTAL Chargen Object (CO)=Leadership
&SKILLS.WRAITH Chargen Object (CO)=Leadership
&SKILLS.SHIFTER Chargen Object (CO)=Leadership
&SKILLS Chargen Object (CO)=Diversion|Acrobatics|Camouflage|Hunting|Aninmal Training|Artillery|Black Smith|Blind Fighting|Boat Handling|Brewing|Bribery|Carpentry|Climbing|Cooking|Dancing|Debate|Escapology|Falconry|Fast-Draw|Fast-Talk|First Aid|Fishing|Forgery|Gambling|Game Playing|Gunsmithing|Heavy Weapons|Hypnotism|Jewler|Journalism|Leatherworking|Lockpicking|Mechanical Repair|Parachuting|Photography|Pickpocket|Pottery|Psychoanalysis|Scuba|Singing|Skiing|Speed Reading|Tracking|Crafts|Demolitions|Archery|Disguise|Hypnotism|Kalindo|Klaive Dueling|Meditation|Pilot|Swimming|Traps|Animal Ken|Drive|Etiquette|Firearms|Melee|Performance|Repair|Stealth|Survival|Research|Falconry|Ride|Storytelling|Sleight of Hand|Torture|Throwing|Interrogation|Biotech|Energy Weapons|Helmsman|Hypertech|Jetpack|Jury-Rig|Microgravity Operations|Networking|Security|Calligraphy|Origami|Technology|Normalcy|Bujo|The Talith|Lip Reading|Martial Arts|Music|Dance
&KNOWLEDGES Chargen Object (CO)=Academics|Computer|Cosmology|Enigmas|Investigation|Law|Linguistics|Medicine|Occult|Science|Politics|Bureacracy|Finance|Conspiracy Theory|Construct Politics|Covert Culture|Cryptology|Law Enforcement|Media|Power-Brokering|Propaganda|Psychology|RD Data|Pharmacopoeia|Antropology|Ethnology|Fine Arts|History|Logic|Philosphy|Astronomy|Biology|Biopsychology|Chemistry|Cybernetics|Electronics|Engineering|Forensic Pathology|Genetics|Geology|HyperMathematics|Mathematics|Metallurgy|Paraphysics|Phlogeny|Physics|Psychodynamics|Sociobiology|Xenobiology|Subdimensions|Terrorism|Vice|Alchemy|Area Knowledge|Astrology|Computer Hacking|Computer Programming|Heraldry|Herbalism|Literature|Posions|Psychology|Theology|Hearth Wisdom|Mythology|Metaphysics|Gematria|Sacred Geometry|Numerology|Military Science|Naturalist|Architecture|Art History|Criminology|Archeaology|
&ST.BACKGROUND Chargen Object (CO)=%r%ch[center(Backgrounds,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.background),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.POWERS Chargen Object (CO)=%r%ch[center(Powers,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.powers),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),20)][ljust([last(##,~)],5)],|)]
&ST.INFO.OTHER Chargen Object (CO)=[u(st.info.[u(%0/subrace)],%0)]
&ST.INFO.ANGEL Chargen Object (CO)=%R[ljust(Subrace:%B[getperm(%0/dat.info,subrace)],39)]Mission:%B[getperm(%0/dat.info,Mission)]%R[ljust(Devotion:%B[getperm(%0/dat.info,devotion)],39)]Angel Number:%B[getperm(%0/dat.info,angel number)]
&RACES Chargen Object (CO)=Mortal Mortal+ Vampire Shifter Mage
&SUBRACES Chargen Object (CO)=Gypsy Camarilla Ghoul Sabbat Independent Anarch Hunter Garou Zhong_Lung Bastet Nuwisha Corax Kitsune Tradition Orphan
&VAMSKILLS Chargen Object (CO)=[u(morskills)]
&VAMSECSKILLS Chargen Object (CO)=[u(morsecskills)]
&VAMTALENTS Chargen Object (CO)=[u(mortalents)]Masquerade|
&VAMSECTALENTS Chargen Object (CO)=[u(morsectalents)]
&VAMKNOWLEDGES Chargen Object (CO)=[u(morknowledges)]
&VAMSECKNOWLEDGES Chargen Object (CO)=[u(morsecknowledges)]
&DAT.HUMANITY Chargen Object (CO)=[add([stat(%0,Virtue,conscience)],[stat(%0,Virtue,self-control)])]
&TALENTS.MORTAL+ Chargen Object (CO)=Leadership
@set Chargen Object (CO)=INHERIT
@create Twilight Chargen=10
&FN.SORTBY Twilight Chargen=[comp(%0,%1)]
&ST.INFO Twilight Chargen=[ifelse(hassflag(%0,ART),%r[u(art.info,%0)],%R[u(noart.info,%0)])]
&NOART.INFO Twilight Chargen=[ljust([ljust(Name:,10)][u(%0/fullname)],39)]%ch%cb|%cn%b[ljust(Race:,12)][u(%0/race)]%R[ljust([ljust(Class:,10)][class(%0,word)],39)]%ch%cb|%cn%b[ljust(Concept:,12)][text(%0,info,Concept)]%R[ljust([ljust(Nature:,10)][text(%0,info,nature)],39)]%ch%cb|%cn%B[ljust(Demeanor:,12)][text(%0,info,demeanor)]%R[ljust([ljust(Real Age:,10)][u(%0/age)],39)]%ch%cb|%cn%B[ljust(App. Age:,12)][u(%0/appage)][u(noart.[u(%0/race)],%0)][ifelse(hassflag(%0,ghoul),[u(noart.ghoul2,%0)],)][ifelse(hassflag(%0,kinfolk),[u(noart.kinfolk2,%0)],)]
&SWITCHES Twilight Chargen=abil aff attr background disc edges gifts info lores m&f magic misc numina paths pool powers rites rituals spheres stats virtues adv sense gene
&NOART.MAGE Twilight Chargen=%R[ljust([ljust(Type:,10)][u(%0/subrace)],39)]%ch%cb|%cn%B[ljust(Specialty:,12)][ifelse(match([text(%0,info,specialty)],0),None Listed,[text(%0,info,specialty)])]%R[ljust([ljust(Arete:,10)][stat(%0,info,arete)],39)]%ch%cb|%cn%b[ifelse(match([u(%0/subrace)],orphan),,[ljust([ifelse(match([u(%0/subrace)],Tradition),Tradition,Craft)]:,12)][text(%0,info,[ifelse(match([u(%0/subrace)],Tradition),Tradition,Craft)])])]%R[ljust([ljust(Essence:,10)][text(%0,info,essence)],39)]%ch%cb|%cn
&NOART.VAMPIRE Twilight Chargen=%R[ljust([ljust(Sect:,10)][u(%0/subrace)],39)]%ch%cb|%cn%B[ljust(Clan:,12)][text(%0,info,clan)]%R[ljust([ljust(Path:,10)][text(%0,info,path)],39)]%ch%cb|%cn%B[ljust(Generation:,12)][sub(13,[stat(%0,background,Generation)])]%R[ljust([ljust(Sire:,10)][text(%0,info,sire)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]
&NOART.SHIFTER Twilight Chargen=%R[ljust([ljust(Type:,10)][edit([u(%0/subrace)],_,%b)],39)]%ch%cb|%cn%b[ljust(Breed:,12)][text(%0,info,breed)][u(noart.[edit([u(%0/subrace)],%B,_)],%0)]
&NOART.GAROU Twilight Chargen=%R[ljust([ljust(Auspice:,10)][text(%0,info,auspice)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust([ljust(Tribe:,10)][text(%0,info,tribe)],39)]%ch%cb|%cn%B[ljust([ljust(Rank:,12)][switch([stat(%0,info,rank)],0,Cub,1,Cliath,2,Fostern,3,Adren,4,Athro,5,Elder)] %([stat(%0,info,rank)]%),39)]
&NOART.BASTET Twilight Chargen=%R[ljust([ljust(Pyrio:,10)][text(%0,info,Pyrio)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust([ljust(Tribe:,10)][text(%0,info,tribe)],39)]%ch%cb|%cn[ljust([ljust(Rank:,12)][switch([stat(%0,info,rank)],0,Kit,1,Tekhmet,2,Akaa,3,Tilau,4,Ilani,5,Bon Bhat)] %([stat(%0,info,rank)]%),39)]
&NOART.KITSUNE Twilight Chargen=%R[ljust([ljust(Path:,10)][text(%0,info,Path)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust([ljust(Rank:,12)][switch([stat(%0,info,rank)],0,Nogitsune,1,Yakan,2,Kiko,3,Koryo,4,Reiko,5,Tenko)] %([stat(%0,info,rank)]%),39)]
&NOART.HAKKEN Twilight Chargen=%R[ljust([ljust(Auspice:,10)][text(%0,info,auspice)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust([ljust(Tribe:,10)][text(%0,info,tribe)],39)]%ch%cb|%cn%B[ljust([ljust(Rank:,12)][switch([stat(%0,info,rank)],0,Cub,1,Cliath,2,Fostern,3,Adren,4,Athro,5,Elder)] %([stat(%0,info,rank)]%),39)]
&NOART.NUWISHA Twilight Chargen=%R[ljust([ljust(Auspice:,10)][text(%0,info,auspice)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust([ljust(Tribe:,10)][text(%0,info,tribe)],39)]%ch%cb|%cn%B[ljust([ljust(Rank:,12)][switch([stat(%0,info,rank)],0,Cub,1,Cliath,2,Fostern,3,Adren,4,Athro,5,Elder)] %([stat(%0,info,rank)]%),39)]
&NOART.CORAX Twilight Chargen=%R[ljust([ljust(Rank:,10)][switch([stat(%0,info,rank)],0,Hatchling,1,Oviculum,2,Neocornix,3,Ales,4,Volucris,5,Corvus)] %([stat(%0,info,rank)]%),39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]
&NOART.TENGU Twilight Chargen=%r[ljust([ljust(Rank:,10)][switch([stat(%0,info,rank)],0,Paper,1,Wood,2,Iron,3,Steel,4,Gold,5,Silver)] %([stat(%0,info,rank)]%),39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]
&NOART.KHAN Twilight Chargen=%R[ljust([ljust(Rank:,10)][switch([stat(%0,info,rank)],0,Paper,1,Wood,2,Iron,3,Steel,4,Gold,5,Silver)] %([stat(%0,info,rank)]%),39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]
&NOART.NEZUMI Twilight Chargen=[ljust([ljust(Rank:,10)][switch([stat(%0,info,rank)],0,Paper,1,Wood,2,Iron,3,Steel,4,Gold,5,Silver)] %([stat(%0,info,rank)]%),39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust(ljust(Aspect:,10)[text(%0,info,aspect)],39)]
&NOART.RATKIN Twilight Chargen=%r[ljust([ljust(Rank:,10)][stat(%0,info,rank)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust(ljust(Aspect:,10)[text(%0,info,aspect)],39)]%ch%cb|%cn
&NOART.GYPSY Twilight Chargen=%R[ljust([ljust(Family:,10)][text(%0,info,family)],39)]%ch%cb|%cn%B[ljust(Element:,12)][text(%0,info,Element)]%R[ljust([ljust(Purity:,10)][stat(%0,info,purity)],39)]%ch%cb|%cn%b[ljust(Type:,12)][u(%0/subrace)]
&NOART.MORTAL+ Twilight Chargen=[u(noart.[u(%0/subrace)],%0)]
&NOART.GHOUL Twilight Chargen=%R[ljust(ljust(Type:,10)[u(%0/subrace)],39)]%cn%cb|%cn%B[ljust(Sect:,12)][text(%0,info,sect)]%R[ljust([ljust(Clan:,10)][text(%0,info,clan)],39)]%ch%cb|%cn%B[ljust(Dominator:,12)][text(%0,info,dominator)]
&NOART.GHOUL2 Twilight Chargen=%R[ljust([ljust(Sect:,10)][text(%0,info,sect)],39)]%ch%cb|%cn%B[ljust(Dominator:,12)][text(%0,info,dominator)]%R[ljust(ljust(Clan:,10)[text(%0,info,clan)],39)]%ch%cb|%cn
&NOART.KINFOLK Twilight Chargen=%R[ljust(ljust(Type:,10)[u(%0/subrace)],39)]%cn%cb|%cn%B[ljust(Kin:,12)][text(%0,info,kin)]%R[ljust(ljust(Tribe:,10)[ifelse(match([text(%0,info,tribe)],0),,[text(%0,info,tribe)])],39)]%ch%cb|%cn
&NOART.KINFOLK2 Twilight Chargen=%R[ljust(ljust(Tribe:,10)[text(%0,info,tribe)],39)]%ch%cb|%cn%B[ljust(Kin:,12)][text(%0,info,kin)]
&NOART.HUNTER Twilight Chargen=%R[ljust([ljust(Faction:,10)][u(%0/subrace)],39)]%ch%cb|%cn[ifelse(match([u(%0/subrace)],Angel),[u(angel.info,%0)],)]
&ST.ABIL Twilight Chargen=%r%ch%cw[setq(5,)][ljust(space(5)Talents,23)]%B%ch%cb|%cn%B%cw%ch[ljust(space(5)Skills,23)]%B%ch%cb|%cn%B%ch%cw[space(5)]Knowledges%cn[setq(1,u(fn.list2,%0,talents))][setq(2,u(fn.list2,%0,skills))][setq(3,u(FN.LIST2,%0,knowledges))]%R[space(24)]%ch%cb|%cn[space(25)]%ch%cb|%cn[iter(setr(4,sortby(FN.SORTBY,[get(%0/dat.abil)],|)),setq(setr(8,ifelse(match(%q1,setr(9,first(##,~)),|),5,ifelse(match(%q2,%q9,|),6,7))),r(%q8)|##),|)][iter(lnum(max(words(%q5,|),words(%q6,|),words(%q7,|))),ifelse(gt(#@,1),%r[ljust(first(setr(1,elements(%q5,#@,|)),~)[ifelse(words(getperm(%0/dat.specs,first(elements(%q5,#@,|),~))),*,)],20)][ljust(rest(%q1,~),3)]%B%ch%cb|%cn%B[ljust(first(setr(1,elements(%q6,#@,|)),~)[ifelse(words(getperm(%0/dat.specs,first(elements(%q6,#@,|),~))),*,)],20)][ljust(rest(%q1,~),3)]%B%ch%cb|%cn%B[ljust([first(setr(1,elements(%q7,#@,|)),~)][ifelse(words(getperm(%0/dat.specs,first(elements(%q7,#@,|),~))),*,)],20)][rest(%q1,~)],),%b)]
&ATTRIBUTES Twilight Chargen=Dexterity|Appearance|Intelligence|Stamina|Charisma|Perception|Strength|Manipulation|Wits
&ST.ATTR Twilight Chargen=%r%ch%cw[ljust(setq(0,get(%0/dat.ATTR))[space(5)]Physical,24)]%ch%cb|%cn%cw%ch[ljust(space(5)Social,25)]%ch%cb|%cn%ch%cw[space(6)]Mental%cn[iter(v(ATTRIBUTES),ifelse(dec(mod(#@,3)),,%r)[ljust(##[ifelse(gte(words(getperm(%0/dat.specs,##)),1),*,)],20)][ljust(grabstat(%q0,##),4)][ifelse(mod(#@,3),%ch%cb|%cn,)],|)]
&ST.STATS Twilight Chargen=%r%ch%cw[setq(5,)][ljust(space(5)Attributes,23)]%B%ch%cb|%cn%B%cw%ch[ljust(space(5)Backgrounds,23)]%B%ch%cb|%cn%B%ch%cw[space(5)]Pools%cn[setq(1,u(attributes))][setq(2,u(fn.list,%0,backgrounds))][setq(3,u(FN.LIST,%0,pools))][iter(setr(4,sortby(FN.SORTBY,[get(%0/dat.attr)]|[get(%0/dat.background)]|[get(%0/dat.pool)],|)),setq(setr(8,ifelse(match(%q1,setr(9,first(##,~)),|),5,ifelse(match(%q2,%q9,|),6,7))),r(%q8)|##),|)][iter(lnum(max(words(%q5,|),words(%q6,|),words(%q7,|))),ifelse(gt(#@,1),%r[ljust(first(setr(1,elements(%q5,#@,|)),~)[ifelse(words(getperm(%0/dat.specs,first(elements(%q5,#@,|),~))),*,)],20)][ljust(rest(%q1,~),3)]%B%ch%cb|%cn%B[ljust(first(setr(1,elements(%q6,#@,|)),~)[ifelse(words(getperm(%0/dat.explain_bgs,first(elements(%q6,#@,|),~))),*,)],20)][ljust(rest(%q1,~),3)]%B%ch%cb|%cn%B[ljust([first(setr(1,elements(%q7,#@,|)),~)][ifelse(words(getperm(%0/dat.explain_bgs,first(elements(%q7,#@,|),~))),*,)],20)][rest(%q1,~)],),%b)]
&SHEET_LIST Twilight Chargen=info stats abil powers misc
&ST.MISC Twilight Chargen=%r%ch%cw[setq(5,)][ljust(space(5)Lores,23)]%B%ch%cb|%cn%B%cw%ch[ljust(space(5)Virtues,23)]%B%ch%cb|%cn%B%ch%cw[space(5)]Merits & Flaws%cn%R[space(24)]%ch%cb|%cn[space(25)]%ch%cb|%cn[setq(1,u(fn.list,%0,Lores))][setq(2,u(fn.list,%0,virtues))][setq(3,u(FN.LIST,%0,m&f))][iter(setr(4,[u(makelist2,%0,lores,Virtues,M&F)]),setq(setr(8,ifelse(match(%q1,setr(9,first(##,~)),|),5,ifelse(match(%q2,%q9,|),6,7))),r(%q8)|##),|)][iter(lnum(max(words(%q5,|),words(%q6,|),words(%q7,|))),ifelse(gt(#@,1),%r[ljust(first(setr(1,elements(%q5,#@,|)),~),20)][rjust([rest(%q1,~)],3)]%B%ch%cb|%cn%B[ljust(first(setr(1,elements(%q6,#@,|)),~)[ifelse(words(getperm(%0/dat.specs,first(elements(%q6,#@,|),~))),*,)],20)][ljust(rest(%q1,~),3)]%B%ch%cb|%cn%B[ljust([first(setr(1,elements(%q7,#@,|)),~)][ifelse(words(getperm(%0/dat.explain_m&F,first(elements(%q7,#@,|),~))),*,)],20)][ifelse(gt([words(rest(%q1,~))],0),[ljust([abs(rest(%q1,~))][ifelse(gt(rest(%q1,~),0),M,F)],3)],%B%B%B)],),%b)]
&VAMPIRE.POWERS Twilight Chargen=[u(st.disc,%0)][ifelse(hasattr(%0,dat.paths),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.paths,%0)],)][ifelse(hasattr(%0,dat.rituals),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.rituals,%0)],)]
&VAMPIREPOWERLIST Twilight Chargen=[u(makelist2,%0,Disc,Path,Ritual)]
&MAKELIST2 Twilight Chargen=[setq(9,[u(listing2,%0,%1,%2,%3)])][switch(1,[match(mid(%q9,0,1),|)],[mid(%q9,1,[strlen(%q9)])],[match(mid(%q9,0,2),||)],[mid(%q9,2,[strlen(%q9)])],%q9)]
&LISTING Twilight Chargen=[sortby(fn.sortby,[get(%0/dat.m&f)]|[get(%0/dat.virtue)]|[u(langlist,%0)],|)]
&LISTING2 Twilight Chargen=[sortby(fn.sortby,[get(%0/dat.%1)]|[get(%0/dat.%2)]|[get(%0/dat.%3)],|)]
&ST.POWERS Twilight Chargen=[u([u(%0/race)].powers,%0)][ifelse(hassflag(%0,ghoul),%R%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.disc,%0)],)][ifelse(hassflag(%0,sorcerer),%R%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.paths,%0)],)]
&TALENTS Twilight Chargen=[u(#121/talents)]|Strange Sense|Leadership|Panhandling
&TALENTS.MAGE Twilight Chargen=Awareness|Intuition|Leadership
&SECTALENTS Twilight Chargen=Negotiation|Search|Scrounge|Guile|Intrigue|Instruction|Artistic Expression|Carousing|Diplomacy|Fortune-Telling|Mimicry|Scan|Seduction|Sense Deception|Style|Ventriloquism|Haggling|Public Speaking
&TALENTS.MORTAL Twilight Chargen=Leadership
&SKILLS Twilight Chargen=[u(#121/skills)]|Security|Do|Animal Training
&KNOWLEDGES Twilight Chargen=[u(#121/knowledges)]
&BACKGROUNDS Twilight Chargen=Resources|Allies|Contacts|Business Resources|Fame|Influence|Generation|Herd|Status|Retainers|Mentor|Den-Realm|Jamak|Secrets|Trinket|Fetish|Colony|Freak Factor|Plague|Rites|Clan|Past Life|Batsu|Go-En|Sempai|Totem|Familiar Spirit|Umbral Maps|Other People's Secrets|Kinfolk|Arsenal|Bystanders|Destiny|Exposure|Patron|Arcane|Avatar|Dream|Library|Node|Wonder|Talisman|Pure Breed|Familiar|Clan Prestige|Sanctum|Covert Training|Spliced|Identity|Mnesis|Dominator|Black Hand Membership|Alternate Identity|Library|Occult Library|Family Resources
&FN.LIST Twilight Chargen=[setunion(u(%1.[get(%0/RACE)],%0),u(%1),|)]
&FN.LIST2 Twilight Chargen=[u(makelist3,[setunion([setunion(u(%1.[get(%0/RACE)]),u(%1),|)],[setunion(u(sec%1.[get(%0/RACE)]),u(sec%1),|)],|)])]
&BACKGROUNDS.VAMPIRE Twilight Chargen=Age|Generation|Status
&POOLS Twilight Chargen=Willpower|Blood
&DISCIPLINES Twilight Chargen=Animalism|Auspex|Celerity|Chimerstry|Dementation|Dominate|Fortitude|Necromancy|Obfuscate|Obtenebration|Presence|Protean|Quietus|Serpentis|Thaumaturgy|Vicissitude
&M&F.VAMPIRE Twilight Chargen=Blush Of Health~2|Eat Food~1|Deceptive Aura~1|Touch Of Frost~-2
&VIRTUES Twilight Chargen=Humanity|Self-Control|Conscience|Courage|Instinct|Conviction|Honor|Glory|Wisdom|Chie|Humor|Ferocity|Cunning|Toku|Kagayaki|Virtue|Infamy|Obligation|Static|Entropic|Dynamic|True Faith|Path Rating
&SHIFTER.POWERS Twilight Chargen=[u(st.gifts,%0)][ifelse(hasattr(%0,dat.rites),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.rites,%0)],)][ifelse(hasattr(%0,dat.adv),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.adv,%0)],)]
&VIRTUES.SHIFTER Twilight Chargen=Honor|Glory|Wisdom|Chie
&ST.DISC Twilight Chargen=[u(line3,%0,disc,Disciplines)]
&ST.GIFTS Twilight Chargen=[u(line2,%0,gifts,Gifts)]
&ST.SPHERES Twilight Chargen=[u(line3,%0,spheres,Spheres)]
&ST.RITES Twilight Chargen=[u(line2,%0,rites,Rites)]
&ST.RITUALS Twilight Chargen=[u(line2,%0,Rituals,Rituals)]
&ST.PATHS Twilight Chargen=[u(line3,%0,Paths,Paths)]
&ST.NUMINA Twilight Chargen=[u(line3,%0,numina,Numina)]
&ST.AFF Twilight Chargen=[u(line3,%0,aff,Blood Affinities)]
&ST.MAGIC Twilight Chargen=[u(line3,%0,magic,Magic)]
&MAGE.POWERS Twilight Chargen=[u(st.spheres,%0)][ifelse(hasattr(%0,dat.man),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.man,%0)],)]
&MORTAL+.POWERS Twilight Chargen=[u([u(%0/subrace)].powers,%0)]
&GYPSY.POWERS Twilight Chargen=[u(st.aff,%0)]
&GHOUL.POWERS Twilight Chargen=[u(vampire.powers,%0)]
&KINFOLK.POWERS Twilight Chargen=[u(shifter.powers,%0)]
&NUMINA.POWERS Twilight Chargen=[u(st.numina,%0)]
&HUNTER.POWERS Twilight Chargen=[ifelse(match([u(%0/subrace)],Angel),[u(st.gene,%0)],[u(st.magic,%0)][ifelse(hasattr(%0,dat.numina),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.numina,%0)],)][ifelse(hasattr(%0,dat.edges),%r%ch%cb-=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=--=-%cn[u(st.edges,%0)],)])]
&LINE3 Twilight Chargen=[setq(5,[words(get(%0/dat.%1),|)])]%r[center(%ch%cb|%cn[center(%ch%cw%2%B,25)]%ch%cb|%cn,76)][iter([sortby(fn.sortby,get(%0/dat.%1),|)],ifelse(dec(mod(#@,3)),,%r)[ljust(first(##,~),19)][ljust([last(##,~)],5)][ifelse(mod(#@,3),%ch%cb|%cn,)],|)][ifelse(dec(mod(%q5,3)),,[space(25)]%ch%cb|%cn)]
&LINE2 Twilight Chargen=[setq(5,[words(get(%0/dat.%1),|)])]%r%ch%cw[center(%2,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.%1),|)],ifelse(dec(mod(#@,2)),%ch%cb|%cn%B,%r)[ljust(first(##,~),35)][ljust([last(##,~)],3)],|)][ifelse(dec(mod(%q5,2)),,%B%ch%cb|%cn)]
&ST.BACKGROUND Twilight Chargen=[u(line3,%0,background,Backgrounds)]
&ST.POOL Twilight Chargen=[u(line3,%0,pool,Pools)]
&ST.LORES Twilight Chargen=[u(line3,%0,lores,Lores)]
&ST.VIRTUES Twilight Chargen=[u(line3,%0,virtues,Virtues)]
&MAKELIST3 Twilight Chargen=[setq(9,%0)][switch(1,[match(mid(%q9,0,1),|)],[mid(%q9,1,[strlen(%q9)])],[match(mid(%q9,0,2),||)],[mid(%q9,2,[strlen(%q9)])],%q9)]
&ST.EDGES Twilight Chargen=[u(line3,%0,edges,Edges)]
&ART.INFO Twilight Chargen=%b%b%b%b%ch%cw_.._%cn%b%b%ch%cb|%cn%B[ljust(Name:,12)][ljust([mid([u(%0/fullname)],0,20)],20)]%B%ch%cb|%cn%B[ljust(Class:,12)][class(%0,word)]%R%ch%cw%b%b.'%b.-'`%b%cb|%cn%B[ljust(Nature:,12)][ljust([text(%0,info,nature)],20)]%B%ch%cb|%cn%B[ljust(Demeanor:,12)][text(%0,info,demeanor)]%R%ch%cw%b/%b%b/%b%b%b%b%b%cb|%cn%B
&ST.M&F Twilight Chargen=%R[center(%ch%cwMerits & Flaws%cn,78)][iter([sortby(fn.sortby,get(%0/dat.M&F),|)],ifelse(mod(#@,2),%r,)[ljust(first(##,~)[ifelse(words(getperm(%0/dat.EXPLAIN_M&F,first(##,~))),*,)] <[ifelse(isnum(last(##,~)),abs(last(##,~))[ifelse(gt(last(##,~),0),M,F)],last(##,~))]>,39)],|)]
&LORES Twilight Chargen=Bete|Vampire|Sabbat|Camarilla|Tremere|Ventrue|Nosferatu|Gangrel|Ravnos|Brujah|Toreador|Shifter|Garou|Hakken|Kitsune|Spirit|Bastet|Corax|Ratkin|Sewer|Mage|Wyrm|Umbra|Malkavian|Hunter|Union|Tradition|Familiar|Fae|Wraith|Lupine|Sorcerer|Zhong Lung|ROmany|Shifter East|Gurahl|Vampire East|Ananasi
&FAMILIAR.POWERS Twilight Chargen=[u(st.adv,%0)]
&ST.ADV Twilight Chargen=[u(line2,%0,adv,Special Advantages)]
&NOART.FAMILIAR Twilight Chargen=%R[ljust(ljust(Group:,10)[u(%0/subrace)],39)]%cn%cb|%cn%B[ljust(Motivation:,12)][text(%0,info,motivation)]
&LINE4 Twilight Chargen=[setq(5,[words(get(%0/dat.%1),|)])]%r%ch%cw[center(%2,78)]%cn[iter([sortby(fn.sortby,get(%0/dat.%1),|)],ifelse(dec(mod(#@,2)),%ch%cb|%cn%B,%r)[ljust(first(##,~),23)][ljust([last(##,~)],15)],|)][ifelse(dec(mod(%q5,2)),,%B%ch%cb|%cn)]
&SENSITIVE.POWERS Twilight Chargen=[u(st.sense,%0)]
&ST.SENSE Twilight Chargen=[u(line3,%0,Sense,Sensitive Powers)]
&ST.GENE Twilight Chargen=[u(line3,%0,gene,Genetic Enhancements)]
&ANGEL.INFO Twilight Chargen=%B[ljust([ljust(Mission:,12)][text(%0,info,mission)],39)]%R[ljust([ljust(Devotion:,10)][text(%0,info,Devotion)],39)]%ch%cb|%cn%B[ljust([ljust(Angel Number:,12)][text(%0,info,angel number)],38)]
&NOART.ZHONG_LUNG Twilight Chargen=%R[ljust([ljust(Auspice:,10)][text(%0,info,auspice)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust([ljust(Rank:,10)][switch([stat(%0,info,rank)],0,None,1,Kiao,2,Lung,3,Kiao-Lung,4,Ying-Lung,5,P'an-Lung)] %([stat(%0,info,rank)]%),39)]%ch%cb|%cn%B[ljust(Varna:,12)][text(%0,info,varna)]
&ST.MAN Twilight Chargen=[u(line2,%0,man,Do Maneuvers)]
&NOART.ANANASI Twilight Chargen=%r[ljust([ljust(Rank:,10)][stat(%0,info,rank)],39)]%ch%cb|%cn%B[ljust(Form:,12)][text(%0,info,form)]%R[ljust(ljust(Aspect:,10)[text(%0,info,aspect)],39)]%ch%cb|%cn%B[ljust(ljust(Faction:,12)[text(%0,info,faction)],38)]
@set Twilight Chargen=INHERIT

--
End of log
