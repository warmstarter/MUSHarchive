@create PARENT: Pool Table
@link PARENT: Pool Table=[owner(me)]
@lock PARENT: Pool Table=*[owner(me)]
@set PARENT: Pool Table=LINK_OK
@set PARENT: Pool Table=VISUAL
@set PARENT: Pool Table=SAFE
@set PARENT: Pool Table=HALT
@COST PARENT: Pool Table=5
&ADDPLAYER PARENT: Pool Table=$addplayer *:@switch match(%#,get(me/buyer))=0,{@pemit %#=You didn't buy the game. You're not allowed to invite others to it.},1,{@switch nearby(me,[num(%0)])=0,{@pemit %#=[name(%0)] is not nearby.},1,{@pemit %#=You invite [name(%0)] to the game.;@oemit %#=%N invites [name(%0)] to the pool game.;@set me=players:[get(me/players)][%b][num(%0)]}}
&RAND_MISS PARENT: Pool Table=@switch rand(3)=0,{@emit [name(%0)] completely misses the ball %1 was shooting at!},1,{@emit [name(%0)] bounces the cue ball off seven rails and doesn't hit a single ball!},2,{@emit [name(%0)] misses the cue ball entirely with the pool stick.}
&RAND_HIT PARENT: Pool Table=@switch rand(3)=0,{@emit [name(%0)] smacks a ball into the corner pocket!},1,{@emit [name(%0)] deftly strokes a ball off two rails and sinks a ball!},2,{@emit [name(%0)] jumps the cue ball over another ball and sinks the target!}
&HELP PARENT: Pool Table=$pool-help:@pemit %#=[ljust(*,79,*)][%r][space(32)][Pool Table Help][%r][ljust(*,79,*)][%r][%r][GIVE POOL TABLE=5 - This will pay the pool table the price it costs to pay. If a game is in progress, the table will simply give you your money back.][%r][%r][ADDPLAYER <NAME> - This command can only be used by the person who paid for the game. It adds <name> to the list of people who can shoot during the game.][%r][%r][SHOOT - This command shoots the cue ball.][%r][%r][PLAYERS - This command tells you who is playing and how many balls are left on the table.][%r][%r][BALLS - This command will tell anyone who is playing how many balls are left.][%r][%r][RESET - If the table won't take your money, and the people who are supposed to be playing aren't around, this command will reset the table and let you play. If the players are idle or disconnected in the room, let Nut know, and he can help you.][%r][%r][ljust(*,79,*)]
&RULES PARENT: Pool Table=$pool:@pemit %#=[%r][%r][space(25)][Pool Table Mastertronix Deluxe][%r][%r][space(7)][This pool table has the unique ability of keeping track of how many games you have PAID for. Every time you pay for a game, your skill at pool will increase a certain amount. Everyone starts out ok, but after several games, you can become a shark. Nobody will be able to sit you down.][%r][%r][space(7)][Once you buy the game, you can include other people in it by using the `addplayer' command. You can of course, play with yourself if you like. :) But if you choose to play with someone else, it would be nice to take turns with them. The person who sinks the last ball is the winner! Good luck and have fun!][%r][%r]
@DESCRIBE PARENT: Pool Table=You see a large, eight-foot, fully automated pool table stretching out before you. It is equipped with all the latest in automatic rip repairs, cue chalkers, ball rackers... etc. The only thing it doesn't do is shoot the balls. The mahogany lined rails just beckon you to come play some pool. Type `pool-help' and `pool-help2' for the available commands, and make sure you type POOL to read about this table!%r
&RESET PARENT: Pool Table=$reset:@dolist v(players)=@switch nearby(me,##)=1,{@pemit %#=The players are nearby. Why don't you ask them?},0,{@cost me=5;&status me=0;&balls me=0;&buyer me=;@pemit %#=You got it. Just `give table=5'.}
&HARDRESET PARENT: Pool Table=$hardreset:@switch strmatch(v(bosses),*%#*)=0,{Nope. You can't do that.},1,{@pemit %#=Done.;&balls me=0;&status me=0;&buyer me=;&players me=#538;@cost me=5}
&BOSSES PARENT: Pool Table=#810
&CHECK_PLAYERS PARENT: Pool Table=$players:@pemit %#=You see the following people playing pool:;@dolist v(players)=@pemit %#=[name(##)];@wait 1=@pemit %#=There are [v(balls)] balls left on the table.
&CHECK_BALLS PARENT: Pool Table=$balls:@switch strmatch(v(players),*%#*)=0,{@pemit %#=Sorry, that command is only for players.},1,{@pemit %#=There are [v(balls)] balls lefts on the table.}
&SHOOT PARENT: Pool Table=$shoot:@switch strmatch(v(players),*%#*)=0,{@pemit %#=You're not invited to this game. Sorry.},1,{@switch lte(rand(100),[add(50,[get(me/skill_%#)])])=0,{@tr me/rand_miss=%#,%s},1,{@switch v(balls)=1,{@emit %N sinks the final ball and wins the game!!;&players me=#538;&buyer me=;&status me=0;@cost me=5;&balls me=0},{@set me=balls:[sub(v(balls),1)];@tr me/rand_hit=%#,%s}}}
@APAYMENT PARENT: Pool Table=@switch v(status)=1,{@pemit %#=A game is already in progress.},0,{@cost me=;&status me=1;&balls me=10;&buyer me=%#;&players me=%#;@switch strmatch(lattr(me),*skill_%#*)=0,{&skill_%# me=1},1,{&skill_%# me=[add(get(me/skill_%#),1)]};@pemit %#=You go to the pool table and pull out the balls from their respective pockets. After racking, you grab your pool stick and are now ready to play. type 'shoot' to play. Remember to use 'pool help' for additional commands including adding other players into your game.;@oemit %#=%N racks the balls on the pool table and grabs %p stick.;@set me=gross:[add(v(gross),5)]}
&SHARK_MISS PARENT: Pool Table=$miss:@switch strmatch(v(players),*%#*)=0,{@pemit %#=Uhhh...you're not playing in this game.},1,{@switch gte(v(skill_%#),30)=0,{@pemit %#=Only Pool Hall Wizards and Sharks can use that command.},1,{@pemit %#=You intentionally miss your shot.;@tr me/rand_miss=%#,%s}}
&SKILL_CHECK PARENT: Pool Table=$skill *:@switch nearby(me,[num(*[%0])])=0,{@pemit %#=That person isn't even here.},1,{@switch match(%#,[num(*[%0])])=1,{@tr me/skill_check2=%#,%0},0,{@switch gte(v(skill_%#),40)=0,{@pemit %#=Only Pool Hall Wizards can estimate other people's skill levels. },1,{@tr me/skill_check2=%#,%0}}}
&SKILL_CHECK2 PARENT: Pool Table=@switch strmatch(lattr(me),*skill_[num(*%1)]*)=0,{@pemit %0=[name(*%1)] is a rank amateur.},1,{@switch lte(v(skill_[num(*%1)]),9)=1,{@pemit %0=[name(*%1)] is a Beginner.},0,{@switch lte(v(skill_[num(*%1)]),19)=1,{@pemit %0=[name(*%1)] is Better Than Average.},0,{@switch lte(v(skill_[num(*%1)]),29)=1,{@pemit %0=[name(*%1)] is an Artist.},0,{@switch lte(v(skill_[num(*%1)]),39)=1,{@pemit %0=[name(*%1)] is a Shark.},0,{@pemit %0=[name(*%1)] is a Pool Hall Wizard.}}}}}
&HELP_2 PARENT: Pool Table=$pool-help2:@pemit %#=[ljust(*,79,*)][%r][space(32)][Pool Table Help][%r][ljust(*,79,*)][%r][%r][SKILL <name> - This command will give you an indication of your own skill level at pool if you substitute your own name for <name>. But if you are a Pool Hall Wizard, the top bracket of players, you can use this command to estimate other people's skills.][%r][%r][MISS - This command is available for Sharks and Pool Hall Wizards to use to intentionally miss their shot. Think about it.][%r][%r][ljust(*,79,*)]
&STATUS PARENT: Pool Table=0
&BALLS PARENT: Pool Table=0
&PLAYERS PARENT: Pool Table=#538
&GROSS PARENT: Pool Table=200
@FAILURE PARENT: Pool Table=Are you kidding?
