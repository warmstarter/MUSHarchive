@create SF Master Ship Zone
@lock/Enter SF Master Ship Zone==me
@lock/Zone SF Master Ship Zone==me
@set SF Master Ship Zone=LINK_OK
@set SF Master Ship Zone=!NO_COMMAND
@set SF Master Ship Zone=INHERIT
@set SF Master Ship Zone=WIZARD
@set SF Master Ship Zone=MONITOR
@DESCRIBE SF Master Ship Zone=It's a parent, duh.
&GUESTLIST SF Master Ship Zone=$guestlist:@pemit %#=[repeat(-,30)]%r[v(shipname)] Guest List%r[repeat(-,30)]%r[iter([v(_guest)],[class(##)] [name(##)],,%r)]
&REMGUEST SF Master Ship Zone=$remove * from guestlist:[setq(0,num(*%0))];@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,{@pemit %#=You do not have authority to do that.},&_guest me=[remove([v(_guest)],%q0)];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been removed from the guestlist.
&ADDGUEST SF Master Ship Zone=$add * to guestlist:[setq(0,num(*%0))];@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)]%#)])]=0,{@pemit %#=You do not have authority to do that.},&_guest me=[insert([v(_guestf)],1,%q0, )];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been added to the guestlist.
&ZWHO SF Master Ship Zone=$zwho:@pemit %#=[repeat(-,65)]%r[center([ansi(hb,[v(shipname)] Who List <OOC>)],65)]%r[repeat(-,65)]%rNAME[space(12)]IDLE[space(6)]DIVISION[space(10)]CLASS%r[repeat(-,65)]%r[squish([iter([lwho()],[switch([match([zone([loc(##)])],[zone(%l)])],1,[switch([match([get(##/empire)],federation)],1,[name(##)][repeat(.,[sub(16,[strlen([name(##)])])])][idle(##)][repeat(.,[sub(10,[strlen([idle(##)])])])][get(##/division)][repeat(.,[sub(18,[strlen([get(##/division)])])])][class(##)]%r)])])][repeat(-,65)]%r
&DELROS SF Master Ship Zone=$delros *:[setq(0,secure(%0))];@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have access to that command.,@pemit %#=[ansi(hc,<SHIP COMPUTER>:)] Deleting [extract([v(pos_%q0)],3,1,|)] from roster.;@wait 1=&pos_%q0 me=[replace([v(pos_%q0)],3,<NONE>,|)]
&ASSIGN SF Master Ship Zone=$assign *:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,{@pemit %#=You don't have access to that command.},{@fo *Delrae=@link *%0=[loc(%#)];@pemit %#=[class(*%0)] [name(*%0)]'s home is now set to [loc(%#)].}
&SHIPNAME SF Master Ship Zone=none
&FLGSTAFF SF Master Ship Zone=$flagstaff:@pemit %#=[repeat(-,30)]%r[v(shipname)] Flagstaff%r[repeat(-,30)]%r[iter([v(_flagstaff)],[class(##)] [name(##)],,%r)]
&CMDSTAFF SF Master Ship Zone=$cmdstaff:@pemit %#=[repeat(-,30)]%r[v(shipname)] Command Staff%r[repeat(-,30)]%r[iter([v(_command)],[class(##)] [name(##)],,%r)]
&ADDCREW SF Master Ship Zone=$add * to crew:[setq(0,num(*%0))];@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,{@pemit %#=You do not have authority to do that.},&_crew me=[insert([v(_crew)],1,%q0, )];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been added to the crew.
&REMCOMM SF Master Ship Zone=$rem * from command:[setq(0,num(*%0))];@switch [match([v(_flagstaff)],%#)]=0,{@pemit %#=You do not have authority to do that.},&_command me=[remove([v(_command)],%q0)];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been removed from the command staff.
&_FLAGSTAFF SF Master Ship Zone=none
&ADDFLAG SF Master Ship Zone=$add * to flagstaff:[setq(0,num(*%0))];@switch [match([v(_flagstaff)],%#)]=0,{@pemit %#=You do not have authority to do that.},&_flagstaff me=[insert([v(_flagstaff)],1,%q0, )];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been added to the flagstaff.
&REMFLAG SF Master Ship Zone=$remove * from flagstaff:[setq(0,num(*%0))];@switch [match([v(_flagstaff)],%#)]=0,{@pemit %#=You do not have authority to do that.},&_flagstaff me=[remove([v(_flagstaff)],%q0)];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been removed from the flagstaff.
&ADDCOMM SF Master Ship Zone=$add * to command:[setq(0,num(*%0))];@switch [match([v(_flagstaff)],%#)]=0,{@pemit %#=You do not have authority to do that.},&_command me=[insert([v(_command)],1,%q0, )];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been added to the command staff.
&REMCREW SF Master Ship Zone=$remove * from crew:[setq(0,num(*%0))];@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)]=0,{@pemit %#=You do not have authority to do that.},&_crew me=[remove([v(_crew)],%q0)];@remit [loc(%#)]=[ansi(yh,SHIP COMPUTER)]: [class(%q0)] [name(%q0)] has been removed from the crew.
&CREWLIST SF Master Ship Zone=$crewlist:@pemit %#=[repeat(-,30)]%r[v(shipname)] Crew List%r[repeat(-,30)]%r[iter([v(_crew)],[class(##)] [name(##)],,%r)]
&SET_ZMOTD SF Master Ship Zone=$+setzmotd *:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have authority to access that command.,&zmotdmsg me=%0%r%r--ZMOTD set by [class(%#)] [name(%#)] on [time()].;@pemit %#=New ZMOTD posted.
&ZMOTD SF Master Ship Zone=$+zmotd:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)],[match([v(_crew)],%#)],[match([v(_guest)],%#)])]=0,@pemit %#=You do not have authority to access that command.,@pemit %#=[repeat(-,80)]%r[center([v(shipname)] Message of the Day,80)]%r[repeat(-,80)]%r[get_eval(me/zmotdmsg)]%r[repeat(-,80)]
&INTERCOM SF Master Ship Zone=$+intercom *:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have authority for that command.,@zemit [num(me)]=[ansi(hc,<SHIPWIDE INTERCOM>)]: [class(%#)] [name(%#)] says: %0
&INT_ALERT SF Master Ship Zone=$intruder alert:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)],[match([v(_crew)],%#)])]=0, {@pemit %#=[u(AccessDenied)]}, {@pemit %#=Initiating [ansi(hr,INTRUDER)] alert.;&salert me=INTRUDER ALERT;@zemit [num(me)]=[ansi(hc,<SHIP COMPUTER>)] INTRUDER ALERT has been activated by [name(%#)].}
&BLUE_ALERT SF Master Ship Zone=$blue alert:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)],[match([v(_crew)],%#)])]=0, {@pemit %#=[u(AccessDenied)]}, {@pemit %#=Initiating [ansi(hb,BLUE)] alert.;@zemit [num(me)]=The light level in the room suddenly dims and the alert tracers on the wall become blue.;&salert me=[ansi(hb,BLUE)]}
&GREEN_ALERT SF Master Ship Zone=$green alert:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)],[match([v(_crew)],%#)])]=0, {@pemit %#=[u(AccessDenied)]}, {@pemit %#=Initiating [ansi(hg,GREEN)] alert.;@zemit %!=The alert tracers on the wall stop flashing and the light level returns to normal.;&salert me=[ansi(hg,GREEN)]}
&YELLOW_ALERT SF Master Ship Zone=$yellow alert:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)],[match([v(_crew)],%#)])]=0, {@pemit %#=[u(AccessDenied)]}, {@pemit %#=Initiating [ansi(hy,YELLOW)] alert.;@zemit %!=The alert tracers on the wall begin flashing yellow.;&salert me=[ansi(hy,YELLOW)]}
&RED_ALERT SF Master Ship Zone=$red alert:@switch [or([match([v(_flagstaff)]%#)],[match([v(_command)],%#)],[match([v(_crew)],%#)])]=0,{@pemit %#=[ansi(hr,ACCESS DENIED!)]},@pemit %#=Initiating [ansi(fhr,RED)] alert.;@zemit %!=The light level of the room suddenly dims, and the alert tracers on the wall begin flashing red and the klaxons sound.;&salert me=[ansi(fhr,RED)]
&ACCESSDENIED SF Master Ship Zone=[ansi(r,ACCESS DENIED.)] That command is restricted to Command Personnel only.
&SALERT SF Master Ship Zone=GREEN
&ZHELP SF Master Ship Zone=$+zhelp:@pemit %#=[repeat(-,75)]%r[center([v(shipname)] Commands,75)]%r[repeat(-,75)]%rCrew Command:%r[repeat(-,13)]%r[ansi(hc,+ZMOTD)][space(5)]- View ship's current zmotd%r[ansi(hc,+ROSTER)][space(4)]- Shows crew roster%r[ansi(hc,ZWHO)][space(7)]- OOC listing of Federation members aboard%r%r[ansi(hc,* ALERT)][space(4)]- Where * is Green, Blue, Yellow, Red or Intruder%r%r[ansi(hc,FLAGSTAFF)][space(2)]- View current Flagstaff list%r[ansi(hc,CMDSTAFF)][space(3)]- View current Command list%r[ansi(hc,CREWLIST)][space(3)]- View current Crew List%r[ansi(hc,GUESTLIST)][space(2)]- View current Guest list%r%r[ansi(hc,+INT)][space(12)]- Shows list of available intercom sites%r[ansi(hc,+INT <#> <msg>)][space(2)]- Sends message to specific intercom%r%r[ansi(hc,+ZHELP COMMAND)][space(2)]- List of commands accessable by flagstaff and command staff only.%r[repeat(-,75)]
&ZHELP2 SF Master Ship Zone=$+zhelp command:@pemit %#=[repeat(-,75)]%r[center([v(shipname)],75)]%r[repeat(-,75)]%rCommand Staff/FlagStaff Commands:%r[repeat(-,33)]%r[ansi(hc,+SETZMOTD *)][space(5)]- Set's ships zmotd%r[ansi(hc,+INTERCOM <msg>)] - Sends <msg> over shipwide intercom%r%r[ansi(hc,ADD/REM * TO/FROM FLAGSTAFF)] - Flagstaff Only%r[ansi(hc,ADD/REM * TO/FROM COMMAND)][space(3)]- Flagstaff Only%r[ansi(hc,ADD/REM * TO/FROM CREW)][space(6)]- Command and Flagstaff%r[ansi(hc,ADD/REM * TO/FROM GUESTLIST)] - Command and Flagstaff%r%r[ansi(hc,ADDROS <pos> <name>)] - Add crewmember to roster position%r[ansi(hc,DELROS <pos>)][space(8)]- Delete postion number%r[ansi(hc,SET HOME *)][space(5)] - Links crew into current quarters and sets lock%r[ansi(hc,UNSET HOME *)][space(3)] - Unlinks crew from current quarters and resets lock%r%r[repeat(-,75)]
&CLOCK SF Master Ship Zone=off
&INT_LIST SF Master Ship Zone=$+int:@pemit %#=The following are valid room numbers:[iter(v(room_int),%r[ljust(match(v(room_int),##),3)] [name(##)])]
&INT_SPEAK SF Master Ship Zone=$+int * *:@switch [isnum(%0)]=0,{@pemit %#=That is not a valid intercom.},{@remit [extract([v(room_int)],%0,1)]=[ansi(hc,<ROOM INTERCOM>)]: [class(%#)] [name(%#)] says: %1;@remit [loc(%#)]=[class(%#)] [name(%#)] says "%1" into the intercom from [loc(%#)].
&LIST_ROS SF Master Ship Zone=$+roster:@pemit %#=[repeat(-,60)]%r[center([ansi(wh,[v(shipname)] Crew Roster)],60)]%r[repeat(-,60)]%r[squish([iter([v(roster_nums)],[extract([v(pos_##)],1,1,|)][repeat(.,[sub(4,[strlen([extract([v(pos_##)],1,1,|)])])])][extract([v(pos_##)],2,1,|)][repeat(.,[sub(30,[strlen([extract([v(pos_##)],2,1,|)])])])][extract([v(pos_##)],3,1,|)]%r)])]
&ADDROS SF Master Ship Zone=$addros * *:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have access to that command.,&pos_%0 me=[replace([v(pos_%0)],3,[class(*%1)] [name(*%1)],|)];@pemit %#=[ansi(hc,<SHIP COMPUTER>:)] [class(*%1)] [name(*%1)] has been added to to roster as [extract([v(pos_%0)],2,1,|)].
&OVERRIE SF Master Ship Zone=$override locks:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,{@pemit %#=You do not have access to that command.},{[iter([get([loc(%#)]/oexits)],[lock(##, )][replace([get(##/door_status)],1,UNLOCKED)])]
&SETUP SF Master Ship Zone=$set home *:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have access to that command.,{@switch [match([v(_quarters)],[loc(%#)])]=0,{@pemit %#=These are not valid quarters.},{@fo *Delrae=@link *%0=[loc(%#)];&rowner [loc(%#)]=[get([loc(%#)]/rowner)]|[num(*%0)];@pemit %#=[class(*%0)] [name(*%0)] has been linked here and added to lock.}}
&UNLINK SF Master Ship Zone=$unlink *:@switch[or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have access to that command.,@switch [match([get([loc(%#)]/rowner)],[num(*%0)])]=0,{@pemit %#=That person does not live here.},{@link *%0=#0;&rowner [loc(%#)]=[remove([get([loc(%#)]/rowner)],[num(*%0)],|)];@pemit %#=[class(*%0)] [name(*%0)] has been unlinked from this room and removed from the lock.}
&UNSETUP SF Master Ship Zone=$unset home *:@switch[or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have access to that command.,@switch [match([get([loc(%#)]/rowner)],[num(*%0)])]=0,{@pemit %#=That person does not live here.},{@link *%0=#0;&rowner [loc(%#)]=[remove([get([loc(%#)]/rowner)],[num(*%0)],|)];@pemit %#=[class(*%0)] [name(*%0)] has been unlinked from this room and removed from the lock.}
&UNSET SF Master Ship Zone=$unset home *:@switch [or([match([v(_flagstaff)],%#)],[match([v(_command)],%#)])]=0,@pemit %#=You do not have access to that command.,@switch [match([get([loc(%#)]/rowner)],[num(*%0)],|)]=0,{@pemit %#=That person does not live here.},{@fo *Delrae=@link *%0=#0;&rowner [loc(%#)]=[remove([get([loc(%#)]/rowner)],[num(*%0)],|)];@pemit %#=[class(*%0)] [name(*%0)] has been unlinked from this room and removed from the lock.}
&ROSTER_NUMS SF Master Ship Zone=01 02 03 04 05 06 07 08 09 10 11 12
&POS_01 SF Master Ship Zone=01.|Commanding Officer|<NONE>
&POS_02 SF Master Ship Zone=02.|First Officer|<NONE>
&POS_03 SF Master Ship Zone=03.|Chief Medical Officer|<NONE>
&POS_04 SF Master Ship Zone=04.|Second Officer|<NONE>
&POS_05 SF Master Ship Zone=05.|Chief Engineering Officer|<NONE>
&POS_06 SF Master Ship Zone=06.|Chief Security Officer|<NONE>
&POS_07 SF Master Ship Zone=07.|Navigation|<NONE>
&POS_08 SF Master Ship Zone=08.|Helm|<NONE>
&POS_09 SF Master Ship Zone=09.|Communications|<NONE>
&POS_10 SF Master Ship Zone=10.|Engineering|<NONE>
&POS_11 SF Master Ship Zone=11.|Science|<NONE>
&POS_12 SF Master Ship Zone=12.|Security|<NONE>
