@create PARENT: Comm Unit
@link PARENT: Comm Unit=[owner(me)]
@lock/Basic PARENT: Comm Unit==[owner(me)]
@set PARENT: Comm Unit=DARK
@set PARENT: Comm Unit=WIZARD
@set PARENT: Comm Unit=SAFE
@set PARENT: Comm Unit=ROYALTY
@set PARENT: Comm Unit=MONITOR
@set PARENT: Comm Unit=!NO_COMMAND
@XZ PARENT: Comm Unit=Credits: Coded by Pycnogonid
@DESCRIBE PARENT: Comm Unit=This is a full-fledged communications unit, designed for rugged use. It consists of three parts, all connected by insulated wires - a small, easily hidden earpiece, a wrist communicator unit (slightly larger than an average watch, with an obvious microphone on it), and a boxy main unit - which is slightly larger than a walkman - except it looks nothing like it. The main unit has a numeric keypad connected to it, along with a set of dials, buttons, and lights along the top of it. The whole thing looks impressive, as well as expensive.
@ADESCRIBE PARENT: Comm Unit=@pemit %#=%RPhone Mode: %RType `options' for receiving a call.%RType `phonehelp' for phone mode commands.%R%RRadio Link Mode:%RType `radiomenu' for commands.%R%RAll modes:%RType `encrypt' to encrypt your transmissions, or `decrypt' to turn this off. Put a name after this to notify the person of this fact.%R
&DECRYPT PARENT: Comm Unit=$decrypt *:@pemit %#=You disengage the encryption mode on your communications unit.;@pemit *%0 <<OOC>> %N is no longer encrypting %p communications.;@pemit/c [room(me)]=%N turns a dial on %p communications unit and a red light on it stops glowing.
&ENCRYPT PARENT: Comm Unit=$encrypt *:@pemit %#=You engage the encryption mode on your communications unit.;@pemit *%0 <<OOC>> %N is now encrypting %p communications.;@pemit/c [room(me)]=%N turns a dial on %p communications unit and a red light on it begins to glow brightly.
&PTPLINK PARENT: Comm Unit=$ptplink *:@pemit *%0=%r<Point to Point> You hear a beep as the connection is established.;@pemit %#=<Point to Point> You acknowledge the link from %0 and complete the connection.;@pemit/c [room(me)]=%N presses a few buttons and turns a few dials on %p communications unit and raises %p wrist communicator to %p face.
&PTPCONNECT PARENT: Comm Unit=$ptpconnect *:@pemit *%0=%R<Point to Point> A point to point transmission has been initiated with you.%rIf you have a device capable of responding, respond to %N.;@pemit %#=<Point to Point> You begin a transmission with %0.;@pemit/c [room(me)]=%N presses a few controls on %P communications unit and lifts %p wrist communicator to %p face.
&RADIOMENU PARENT: Comm Unit=$radiomenu:@pemit %#=[repeat(=-, 39)]=%R%T%TCommunications Unit: Radio Link Mode Commands%R[repeat(=-, 39)]=%Rptpconnect <name> will initiate a point-to-point communication with a person.%Rptp <name>=<message> for point to point communications.%rptplink <name> will acknowledge a point to point communications link.%r%R[repeat(=-, 39)]
&PTP PARENT: Comm Unit=$ptptalk *=*:@pemit *%0=<Point to Point> %N says, "%1";@pemit/c [room(me)]=%N mumbles into %p wrist communicator;@pemit %#=You say "%1" into your wrist communicator.'''''''''''''''''''''
&HANGUPQ PARENT: Comm Unit=$hangupq:@switch v(status)=inactive,{@pemit %#=OOC: Your comm unit's phone mode is already hung up.},{@pemit/c [room(me)]=%N presses a button on %p communications unit to disconnect the call.;&called me;&status me=inactive}
&GRUFF PARENT: Comm Unit=$gruff ?*:@switch v(status)=active,{@Pemit %#=(Gruffly into the wrist communicator) [switch(%0,:,%N %1,\;,%N%1,|,%1,You say "%0%1")];@pemit [v(called)]=<Phone> [switch(%0,:,Someone %1,\;,Someone%1,|,%1,A gruff voice says "%0%1")]},{@pemit %#=OOC: You haven't called anyone yet.}
&TALKQ PARENT: Comm Unit=$talkq ?*:@switch v(status)=active,{@pemit %#=(Quietly into the wrist communicator) [switch(%0,:,%N %1,\;,%N%1,|,%1,You say "%0%1")];@pemit [v(called)]=<Phone> [switch(%0,:,%N %1,\;,%N%1,|,%1,%N says quietly "%0%1")]},{@pemit %#=OOC: You haven't called anyone yet.}
&TALK PARENT: Comm Unit=$talk ?*:@switch [setq(0,switch(%0,:,%N %1,\;,%N%1,|,%1,%N says "%0%1"))]v(status)=active,{@pemit/c [room(me)]=(Directed into the wrist communicator) %q0;@pemit [v(called)]=<Phone> %q0},{@pemit %#=OOC: You haven't called anyone yet.}
&UNLISTED PARENT: Comm Unit=$unlisted *:@switch/first [setq(0,num(*%0))]%q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named `%0'.},%#:*,{@pemit %#=OOC: You can't do that.},*:PLAYER,{@pemit %#=OOC: [name(%q0)] is unable to get through as you're unlisted.;@pemit %q0=<Phone> An operator picks up: "I'm very sorry, but if the person you're trying to reach is one of our customers, they've asked to be unlisted for privacy reasons."},{@pemit %#=OOC: I can't find a player named `%0'.}
&DIAL PARENT: Comm Unit=$dial *:@switch/first [setq(0,num(*%0))]%q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named `%0'.},%#:*,{@pemit %#=OOC: You cannot call yourself.},*:PLAYER,{@pemit/c [room(me)]=%N adjusts a few dials and dials a number into %p communications unit.;@wait 4=@pemit %#=<Phone> You hear the phone ringing at the other end.;@wait 6=@switch hasflag(%q0,CONNECTED)=0,{@pemit %#=<Phone> The phone rings and rings at the other end, but there's no answer.%ROOC: [name(%q0)] is currently disconnected.},{@pemit %q0=[repeat(-,78)]%RYour phone (or possibly another nearby) rings if you are ICly anywhere near it.%ROOC: Type 'answer %N' - or 'options' - if you have a coded cellular, or page %N to reply. Note that those about you cannot hear this message and you may wish to rp the phone ringing.%R[repeat(-,78)]
&MESSAGE PARENT: Comm Unit=Thank you for calling the number you just dialed.... but I can't come to the phone right now. <BEEP!>
&PHONEHELP PARENT: Comm Unit=$phonehelp:@pemit %#=[repeat(=,78)]%R[center(Comm Unit: Phone Mode Commands,78)]%R[repeat(-,78)]%RDial <person>%t%tcall someone on via phone%R%RAnswer <person>%t%tanswer the phone when <person> calls you%R%RRing%t%t%temit your comm unit blinking.%RRings <person>%t%tif there's no answer at your phone when called%RUnlisted <person>%tif your number is unlisted when called%R%RTalk <pose/speak>%ttalk into your comm unit's phone mode (you can be overheard)%RTalkq <pose/speak>%ttalk quietly into your comm unit's phone mode (cannot be overheard)%RGruff <pose/speak>%ttalk in an unrecognizeable voice%R%RHangup%t%thangup the phone mode (emits to both ends of the line)%RHangupq%t%thangup the phone mode (emits to your end only)%R[repeat(=,78)]
&OPTIONS PARENT: Comm Unit=$options:@pemit %#=[repeat(=,78)]%ROptions: On Receiving a Phone Call%R%RAnswer <person>%t%tanswer the phone when <person> calls you%RRing%t%t%temit _your_ comm unit blinking if someone calls you%R%RRings <person>%t%tif there's no answer and they should leave a message%RUnlisted <person>%tif your number is unlisted%R%RNote: <person> for all of these cases should be the person who called you.%R[repeat(=,78)]
&STATUS PARENT: Comm Unit=inactive
&HANGUP PARENT: Comm Unit=$hangup:@switch v(status)=inactive,{@pemit %#=OOC: Your comm unit's phone function is already hung up.},{@pemit/c [room(me)]=%N presses a button on %p communications unit, disconnecting the call.;@pemit [v(called)]=<Phone> There is a click as the phone at the far end is hung up.;&called me;&status me=inactive}
&RINGS PARENT: Comm Unit=$rings *:@switch/first [setq(0,num(*%0))]%q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named `%0'.},%#:*,{OOC: You can't do that.},*:PLAYER,{@pemit %#=[switch(v(message),,OOC: Your comm unit's phone function rings and rings - but no one's there to pick up.,OOC: Your comm unit's phone function rings and rings before the answering machine picks up.)];@pemit %q0=<Phone> The phone at the far end rings and rings, but there's no answer.[switch(v(message),,,{%bAfter a moment an answering machine picks up: (OOC: +mail %N to leave a message.)%R%R[space(5)]"[u(message)]"})]},{@pemit %#=OOC: I can't find a player named '%0'.}
&ANSWER PARENT: Comm Unit=$answer *:@switch/first [setq(0,num(*%0))]%q0:[type(%q0)]=#-1:*,{@pemit %#=OOC: I can't find a player named `%0'.},%#:*,{@pemit %#=OOC: You cannot call yourself.},*:PLAYER,{@switch hasflag(%q0,CONNECTED)=0,{@pemit %#=OOC: That person is currently disconnected.},{@pemit/c [room(me)]=%N presses a few buttons on %p wrist communicator as %s brings the communicator up to %p face.;@pemit %#=<Phone> You hear a click as the line is established.;@pemit %q0=<Phone> The phone is picked up at the far end.;&status me=active;&called me=%q0}},{@pemit %#=OOC: I can't find a player named '%0'.}
&RING PARENT: Comm Unit=$ring:@pemit/c [room(me)]=A light on %N's wrist communicator and one on his communications unit begin blinking simultaneously.
